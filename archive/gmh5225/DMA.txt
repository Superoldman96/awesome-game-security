Project Path: arc_gmh5225_DMA_fk1r9pb6

Source Tree:

```txt
arc_gmh5225_DMA_fk1r9pb6
‚îú‚îÄ‚îÄ 1:1 CFG of real device
‚îÇ   ‚îî‚îÄ‚îÄ readme.md
‚îú‚îÄ‚îÄ DMA FAQ.md
‚îú‚îÄ‚îÄ EAC-BE FW Creation
‚îÇ   ‚îú‚îÄ‚îÄ EAC-BE FW Customisations
‚îÇ   ‚îî‚îÄ‚îÄ readme.md
‚îú‚îÄ‚îÄ How to Flash
‚îÇ   ‚îú‚îÄ‚îÄ CH341PAR.rar
‚îÇ   ‚îú‚îÄ‚îÄ GhostDMA-openocd.rar
‚îÇ   ‚îú‚îÄ‚îÄ LeetDMA-Tools.zip
‚îÇ   ‚îú‚îÄ‚îÄ MVPDMA.rar
‚îÇ   ‚îú‚îÄ‚îÄ flash_screamer.rar
‚îÇ   ‚îî‚îÄ‚îÄ readme.md
‚îú‚îÄ‚îÄ Speed Test
‚îÇ   ‚îú‚îÄ‚îÄ lone dma test.rar
‚îÇ   ‚îî‚îÄ‚îÄ readme.md
‚îú‚îÄ‚îÄ VGK FW Creation
‚îÇ   ‚îî‚îÄ‚îÄ readme.md
‚îú‚îÄ‚îÄ Vivado Customisations
‚îÇ   ‚îú‚îÄ‚îÄ Vivado.py
‚îÇ   ‚îú‚îÄ‚îÄ generate-project.py
‚îÇ   ‚îú‚îÄ‚îÄ readme.md
‚îÇ   ‚îî‚îÄ‚îÄ script.tcl
‚îî‚îÄ‚îÄ readme.md

```

`1:1 CFG of real device/readme.md`:

```md
# 1:1 CFG space of real PCIe device

### Requirements
1. Telescan

For this guide, I will be using telescan to get the device config

Run, [.tlscan to .coe](https://github.com/Rakeshmonkee/DMA/tree/main/.tlscan%20to%20.coe) python file and generate the output.coe file

This part below needs to be edited before generating the ipcore within vivado

1. With the generated file, replace the contents of `pcileech_cfgspace.coe` with the content of `output.coe`
   
2. in `pcileech_fifo.sv` change the value of `CFGTLP ZERO DATA` to `0`

3. in `pcileech_pcie_cfg_a7.sv` change `DSN`, `Master Abort Flag`, `Bus Master Flag`

After Changing these, you can now generate the IP core

The next steps are done within Vivado

1. Match everything seen in the header that you see in telescan

2. Change 

```
EXT_CFG_CAP_PTR 
EXT_CFG_XP_CAP_PTR
```

in the core_top.sv file to the blocks, you want your capability to start

3. generate bitstream and flash

```

`DMA FAQ.md`:

```md
# Frequently Asked DMA Questions

__which DMA card should I get?__
: If you want to save money, 35T. If you don't mind spending more for a faster and new DMA card, I suggest the 75T.

__What Firmware do I need for my DMA card?__
: 35T - Squirrel,  75T - EnigmaX1.

__If I have a 35T, and I buy a new card E.g(cap DMA 4th Gen), is it fine to flash the same FW?__
: Yes, both 35T and 4th gen cap DMA share the same prototype chip (squirrel).

__What are the minimum specs I need for my second computer?__
: USB 3.0, at least 6GB RAM, 

__Why do I get Tiny PCIe TLP Algorithm when running a speed test?__
: This happens due to the motherboard in the main PC not liking the config space of the DMA FW.

__How do I flash my FW?__
: If you are using 35T, use Open OCD to [program](https://docs.lambdaconcept.com/screamer/programming.html) and [to upgrade](https://docs.lambdaconcept.com/screamer/openocd.html) or visit [How to Flash](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash)

__What donor board do I need?__
: Any PCIe Device technically can be used as a donor board. I wouldn't recommend using the values from an already existing PCIe Device you have on your computer. E.g. (GPU). I use an Intel Wifi 6 Ax200 card. You don't need to use this, you can use devices such as video capture cards, USB extensions, Sound Cards, SATA Expansion Cards, and so on.

__What is Firmware Locking__
: Firmware locking refers to the process of securing the firmware on a device to prevent unauthorized access, modification, or copying

__How does Firmware Locking Work?__
: Firmware locking works by getting the EFUSE FUSER_DNA value of the Artix7 chip from your DMA card and running a check on system bootup to check if a hard-coded(yourDNA) value is the same as your Artix7 DNA.
If the DNA values match, the firmware will work, otherwise, the firmware won't work. This is intended to work for 1 person, and 1 person only since Artix7 chips have their own <b>Unique Identifier</b>(DNA). 



More coming soon

```

`EAC-BE FW Creation/EAC-BE FW Customisations`:

```
IDs:
- Vendor ID 
- Device ID 
- Revision ID 
- Subsystem Vendor ID 
- Subsystem ID 


Class Code:
- Base Class Menu 
- Base Class Value
- Sub Class Interface Menu
- Sub Class Value
- Cardbus CIS Pointer


Bars (0):
- Type
- Size Unit
- Size Value
- Prefetchable


Device Capabilities Register:
- Max Payload Size
- Extended Tag Field
- Extended Tag Default
- Phantom Functions
- Acceptable L0s Latency
- Acceptable L1 Latency


Link Status Register:
- Slot Clock Configuration


Legacy Interrupt Settings:
- Interrupt PIN


MSI Capabilities:
- MSI Capability Structure
- 64 bit Address Structure


MSIx Capabilities:
-- will need to calculate table and PBA Offset


Power Management Registers:
- Device Specific Initialization
- D1 Support
 -D2 Support


PME SUPPORT:
- D0
- D1
- D2
- D3hot
- D3cold
- No Soft Reset

DSN Capability:
- DSN Capability
- Change DSN value within `pcileech_pcie_cfg_a7.sv`


Vendor Specific Capability:
- VSEC Capability


Virtual Channel Capability:
- VC Capability
- Reject Snoop Transactions

```

`EAC-BE FW Creation/readme.md`:

```md
# Creation of EAC/BE Firmware

> [!NOTE]
> It is assumed the person following this guide knows how to use vivado and get values from their donor board. This is not a guide on how to use vivado and how to get values from a donor board

The steps below will be done to bypass EAC/BE at a basic level and will be in the [FW Customisations list for EAC/BE](https://github.com/Rakeshmonkee/DMA/blob/main/EAC-BE%20FW%20Creation/EAC-BE%20FW%20Customisations). You might have also seen this list in the [Possible Vivado Customisations](https://github.com/Silverr12/DMA-CFW-Guide/blob/main/Possible%20Vivado%20Customisations.md) list I made in the [DMA-CFW-Guide](https://github.com/Silverr12/DMA-CFW-Guide/tree/main) which I contributed to. 

To bypass EAC/BE at a moderate level you should change a few more values around within the config space and implement Bar Emulation to successfully load the driver of the device you are trying to mimic which can be found [here](https://github.com/Rakeshmonkee/DMA/tree/main/Bar%20Emulation). otherwise, you will most likely see a yellow icon next to the device in Device Manager.

For a high-level bypass, use TLP Emulation

You can be assured after you follow the basic steps, you will last a while on any EAC/BE game considering you don't rage cheat and be blatant about cheating. I personally have done the basic step as a test and have lasted over 1 month, no EAC ban but I did receive 1 temp ban for 7 days during the process which was most likely done manually by the server admin because I got too many reports. I got this temp ban because I was too blatant. The game will not be mentioned, but it does use EAC. All I can suggest is, don't be blatant about cheating

By changing these values to match your donor board, you can bypass EAC/BE at a basic level. You don't need to go into the Core Top file and change PTRS/NEXT PTRS around. You could maybe even bypass Ricochet AC and maybe even Electronic Arts Anti Cheat. I am not sure about those 2 and have not tested them.

Steps:
1. Change DSN value[215], master abort flag[209], and bust master[210] in `/PCIeSquirrel/src/pcileech_pcie_cfg_a7.sv` [xx] being the line
2. Generate the pcileech IP core
3. Under the basic tab in the `Re-Customise IP` UI, set the Mode to `Advanced`

Everything I mention here is what to change to match your donor board

Basic Tab:
- Number of Lanes
- Maximum Link Speed

IDs Tab:
- Vendor ID
- Device ID
- Revision ID
- Subsystem Vendor ID
- Subsystem ID

- Base Class Menu/Value
- Sub Class Interface Menu/Value
- Interface Value
- Cardbus CIS Pointer

Bars Tab:

Will need to look at your donor board to see how many bars to enable
- Size Unit
- Size Value
- 64 bit
- Prefetchable

Core Capabilities Tab:

Try to match the Device Capabilities Register Hex to match the hex on your donor board
- Max Payload Size
- Extended Tag Field
- Extended Tag Default
- Phantom Functions
- Acceptable L0s Latency
- Acceptable L1 Latency

Link Registers Tab:
- ASPM Optionality
- DLL Link Active Reporting Capability
- Target Link Speeds
- Slot Clock Configuration

Interrupts Tab:
- Interrupt Pin
- MSI Capability Struct
- 64-bit address Capable
- Per Vector Masking Capable
- Multiple Message Capable
- MSIx Capability Struct

Power Management Tab:
- Device Specific Initialisation
- D1 Support
- D2 Support
- PME Support

EXT Capabilities Tab:
- DSN Capability
- VC Capability
- VSEC Capability
- User Defined Configuration Capabilities

EXT Capabilities 2 Tab:
- AER

```

`How to Flash/readme.md`:

```md
# How to Flash DMA Firmware

> [!NOTE]
> This is a WIP (WORK IN PROGRESS), not everything is finished


TODO:
- ZDMA
- NinjaDMA 
- RaptorDMA
- LynxDMA  
- PCIeScreamer
- GameboyDMA
- C1 Terminator
- Hack DMA

Finished:
- [X] CaptainDMA
- [X] GhostDMA
- [X] LeetDMA
- [X] MVP DMA
- [X] StarkDMA
- [X] OnetapDMA
- [X] EnigmaX1 DMA 


# Content
- 35T
  - [CaptainDMA](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash#captaindma-35t)
    - 3rd Gen(squirrel)
    - 4th Gen
    - 4.1th Gen
    - 5th Gen
  - [LeetDMA](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash#leetdma-35t)
  - [MVP](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash#mvp-dma-35t--75t)
  - [GhostDMA](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#ghostdma-35t)
- 75T
  - [CaptainDMA](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#captain-dma--engima-75t)
  - [EnigmaX-1](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#captain-dma--engima-75t)
  - [MVP](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash#mvp-dma-35t--75t)
  - [StarkDMA](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#starkdma)
  - [OneTapDMA](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/readme.md#onetap-dma)





# CaptainDMA 35T

Everything done here is on the second computer. Make sure your cable on the DMA is connected to the JTAG port

#### Download 
-  [Open OCD](https://docs.lambdaconcept.com/screamer/_downloads/e72a9b76299cd3a4cb30e53dd62505ff/openocd-win.zip)
-  [Zadig](https://zadig.akeo.ie/)
-  [Flash_Screamer](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/flash_screamer.rar)

#### Steps

##### Zadig

1. Open Zadig as Admin
2. Click on Options > Show all devices
3. In the drop-down menu, select your device, which should be RS232 +HS(Interface 0)
4. Click on reinstall driver. This should replace the FTDI Bus Driver with WinUSB 

Let the driver install it. You don't need to restart.

##### Open OCD and Flash_Screamer
1. Unzip both of the folders and place them on your Desktop. There should be the OpenOCD and flash_screamer folder on your Desktop.
2. With your .bin (Firmware) file, place this inside the flash_screamer folder.


##### Flashing Firmware

Before Flashing, make sure the USB is connected to the JTAG slot on your DMA board

1. Open the command prompt as a user and cd to `cd Desktop/flash_screamer`
2. Once you are in the flash_screamer folder, on a new command line type in `..\openocd\bin\openocd.exe -f flash_screamer_squirrel.cfg`
3. Your Firmware should flash and show something like

```
Info : sector 0 took 113 ms
Info : sector 1 took 108 ms
Info : sector 2 took 113 ms
Info : sector 3 took 116 ms
Info : sector 4 took 125 ms
Info : sector 5 took 114 ms
Info : sector 6 took 110 ms
Info : sector 7 took 98 ms
Info : sector 8 took 122 ms
Info : sector 9 took 118 ms
Info : sector 10 took 117 ms
Info : sector 11 took 114 ms
Info : sector 12 took 108 ms
```

Will go up to sector 23 or 24

Once it shows something like

```
Info : Found flash device 'issi is25lp256d' (ID 0x0019609d)
Warn : device needs paging or 4-byte addresses - not implemented
shutdown command invoked
``` 

This means the Firmware has successfully flashed onto your DMA board.

You will now need to restart your Main PC. (It is necessary to restart your Main PC after flashing)


# GhostDMA 35T

#### Download 

Download the OpenOCD and CH341PAR folders provided above.

- [OpenOCD](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/GhostDMA-openocd.rar)
- [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)

#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the dma
2. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file
3. Open the OpenOCD folder and place your firmware (.bin) file inside and rename the file to `firmware.bin` instead of the original `pcileech_squirrel_top.bin`
4. In the OpenOCD folder, type `cmd.exe` into the search address and hit enter

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/016a29e6-b432-4429-aa74-806b57d914c3)

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/7ec678b1-094a-4f52-9721-2b12c855a552)

5. in command prompt type in `openocd.exe -f flash.cfg` and hit enter

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/660e5f2e-3a5f-4261-baf4-2fae8812de2c)

Command prompt should spit out sector information, let this run. After its flashed, it will say something like `Close CH347`, once this is shown your firmware has been flashed. Restart Main pc to see the changes


# LeetDMA 35T

#### Download 
- [LeetDMA Flash Tool](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/LeetDMA-Tools.zip)


#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the DMA
2. open `LeetDMA Tools_V2.exe`
3. In the top-left corner click on driver installation, and click on install driver
   
![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/0b1ccfb5-f00b-49ad-84b0-ca9fd664002a)

5. After the driver has installed, in the select firmware box, select your firmware

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/d7c1a60b-6a18-4112-bc53-3ff2dfcf2f4c)

7. After your driver has been installed and firmware has been selected, click on the start button

After clicking the start button, the logs section should output a bunch of sectors and random data.

After the log says something like, close ch347, this means the firmware has been flashed. Now you can restart main pc


# MVP DMA 35T & 75T

#### Download 
- [MVP DMA Flash Tool](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/MVPDMA.rar)
- [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)

#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the DMA
2. Download the 2 linked files above called MVP DMA Flash Tool, and CH341PAR
3. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file.
4. Now place your firmware file in the openocd folder. Make sure the name of the firmware file (.bin) is called `firmware` with the .bin extension on the end.
5. Open the current directory in command prompt, or go to the file directory path and type in `cmd.exe`. This should open command prompt as a user.

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/016a29e6-b432-4429-aa74-806b57d914c3)

![image](https://github.com/Rakeshmonkee/DMA/assets/89455475/7ec678b1-094a-4f52-9721-2b12c855a552)

Follow below for the prompt. Make sure to do the prompt for your XC7A chip

### 35T
`openocd.exe -f xc7a35t.cfg`

### 75T
`openocd.exe -f xc7a75t.cfg`


Command prompt should spit out sector information, let this run. After its flashed, it will say something like `Close CH347`, once this is shown your firmware has been flashed. Restart Main pc to see the changes



# StarkDMA

#### Download 
- [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)
- [Ch347 FPGA Flash Tool](https://github.com/WCHSoftGroup/ch347/tree/main/CH347FPGATool)

#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the DMA
2. Download the 2 linked files above called Ch347 FPGA Flash Tool, and CH341PAR
3. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file.
4. Run `CH347FpgaDownloadTool.exe` as an administrator.
5. Chose XC7A75T for the chip
6. Change from bit to bin in the drop-down
7. Leave the clock speed as the default
8. Select the .bin file (firmware)
9. Press the Download button

Hitting download should then begin the flashing phase

Once it says something like; Close the ch347 ..... This means the firmware has been flashed. Restart Main PC to see the changes


# OneTap DMA

#### Download 
- [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)
- [Ch347 FPGA Flash Tool](https://github.com/WCHSoftGroup/ch347/tree/main/CH347FPGATool)

#### Steps
1. Put the cable into the JTAG / CFG / UPDATE port on the DMA
2. Download the 2 linked files above called Ch347 FPGA Flash Tool, and CH341PAR
3. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file.
4. Run `CH347FpgaDownloadTool.exe` as an administrator.
5. Chose XC7A75T for the chip
6. Change from bit to bin in the drop-down
7. Leave the clock speed as the default
8. Select the .bin file (firmware)
9. Press the Download button

Hitting download should then begin the flashing phase

Once it says something like; Close the ch347 ..... This means the firmware has been flashed. Restart Main PC to see the changes


# Captain DMA & Engima 75t

#### Download 
-  [Ch347 FPGA Flash Tool](https://github.com/WCHSoftGroup/ch347/tree/main/CH347FPGATool)
-  [CH341PAR](https://github.com/Rakeshmonkee/DMA/blob/main/How%20to%20Flash/CH341PAR.rar)

#### Chip Info

35T - XC7A35T

75T - XC7A75T


#### Steps

1. Put the cable into the JTAG / CFG / UPDATE port on the DMA
2. Download the 2 linked files above called MVP DMA Flash Tool, and CH341PAR
3. Open the CH341PAR folder and once open, right-click on the `CH341WDM.inf` file and click install. The file extension might not show, so look for a setup information file.
4. run the ch347 FPGA flash tool executable
5. Chose the FPGA chip you have (look at chip info above)
6. Change from bit to bin in the drop-down
7. leave the clock speed as the default
8. Select your .bin file (firmware) 
9. Download

Hitting download should then begin the flashing phase

Once it says something like; Close the ch347 ..... This means the firmware has been flashed. Restart Main PC to see the changes


```

`Speed Test/readme.md`:

```md
# DMA Speed Test 

```

`VGK FW Creation/readme.md`:

```md
# Creation of VGK Firmware

#### Before starting this, I want to thank my friend Movinggun for initially showing me this method/technique on how to bypass VGK üíñ. I was going to release this earlier but I wanted a go from him.

> [!WARNING]
> The VGK bypass has possibly been detected as of 5/03/24
> 


> [!NOTE]
> This method only works for primarily MSI motherboards, other motherboards may work, but I suggest you use an MSI motherboard for this method.
>
> It is been found that some DMA speed tests won't recognise the DMA card and others will


Before you do the steps below, it is required to complete the customisations shown [here](https://github.com/Rakeshmonkee/DMA/blob/main/EAC-BE%20FW%20Creation/EAC-BE%20FW%20Customisations) as the steps below are an add on.


This section will be quick and easy as there aren't many things to change

Within the core_top.v file,

1. set `HEADER_TYPE` to 80,
2. set `CAPABILITIES_PTR` to 80

By changing just these 2 values to 80 within the config space, you will break the config space and allow us to bypass VGK. If you do a speed test, tiny pcie tlp algo might be selected, this is for you to fix. Go NULL some stuff out in the config space till tiny pcie tlp algo goes away. I suggest you expand on this more, don't just change some values and Header_Type and Cap_Ptr. For this to last a while you need more changes within the config space.



Now you can save $200+ just by changing 2 lines

```

`Vivado Customisations/Vivado.py`:

```py

#Made with <3 by RakeshMonkee

#Make sure to uncomment the customisations you want to change

# Change File Path to the path of your pcie_7x_0_core_top.v File
# Make sure pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v is on the end
file_path = "C:/Users/user/Desktop/Vivado-Test/pcileech-fpga-4.14/PCIeSquirrel/pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source/pcie_7x_0_core_top.v"
with open(file_path, 'r') as file:
    verilog_contents = file.read()

InputvendorID: str = str(input("VendorID: "))[:4]

InputDeviceID = str(input("DevicedID: "))[:4]

InputRevisionID = str(input("RevisionID: "))[:2]

InputSubsystemID = str(input("SubsystemID: "))[:4]

InputSubsystemVendorID = str(input("SubsystemVendorID: "))[:4]

#InputHeaderTypeID: str = str(input("Header Type: "))[:2]

#InputInterupPinID: str = str(input("Interup Pin: "))[:2]

#InputCapabilitesPtrID: str = str(input("Capabilites Ptr: "))[:2]

VendorID = f"CFG_VEND_ID        = 16'h{InputvendorID}"

DeviceID = f"CFG_DEV_ID         = 16'h{InputDeviceID}"

RevisionID = f"CFG_REV_ID         =  8'h{InputRevisionID}"

SubsystemVendorID = f"CFG_SUBSYS_VEND_ID = 16'h{InputSubsystemVendorID}"

SubsystemID = f"CFG_SUBSYS_ID      = 16'h{InputSubsystemID}"
#HeaderTypeID = f"HEADER_TYPE = 8'h{InputHeaderTypeID}"
#CapabitiesPtrID = f"CAPABILITIES_PTR = 8'h{InputCapabilitesPtrID}"
#InteruptPinID = f"INTERRUPT_PIN = 8'{InputInteruptPinID}"

#uncomment ClassCode and ClassCode Verilog_contents if you want to change Class Code aswell. Only do if you know what you are doing
#ClassCode = "24'h060000"

# Leave all these Values
verilog_contents = verilog_contents.replace("CFG_VEND_ID        = 16'h10EE", f"{VendorID}")
verilog_contents = verilog_contents.replace("CFG_DEV_ID         = 16'h0666", f"{DeviceID}")
verilog_contents = verilog_contents.replace("CFG_REV_ID         =  8'h02", f"{RevisionID}")
verilog_contents = verilog_contents.replace("CFG_SUBSYS_VEND_ID = 16'h10EE", f"{SubsystemVendorID}")
verilog_contents = verilog_contents.replace("CFG_SUBSYS_ID      = 16'h0007", f"{SubsystemID}")
#verilog_contents = verilog_contents.replace("HEADER_TYPE = 8'h00", f"{HeaderTypeID})
#verilog_contents = verilog_contents.replace("CAPABILITIES_PTR = 8'h40", f"{CapabitiesPtrID})
#verilog_contents = verilog_contents.replace("INTERRUPT_PIN = 8'h1", f"{InteruptPinID})
#verilog_contents = verilog_contents.replace("24'h020000", f"{ClassCode}")


with open(file_path, 'w') as file:
    file.write(verilog_contents)
```

`Vivado Customisations/generate-project.py`:

```py
import os
import subprocess

#Made with <3 by RakeshMonkee

script_dir = os.path.dirname(os.path.abspath(__file__))

# Change to DIr of your xilinx vivado installation
vivado_path = "D:/Xilinx/Vivado/2023.2/bin/vivado.bat"


tcl_script_name = "script.tcl"


tcl_script_path = os.path.join(script_dir, tcl_script_name)

# Change to Dir of your project
project_dir = "C:/Users/user/Desktop/Vivado-Test/pcileech-fpga-4.14/PCIeSquirrel"


command = [vivado_path, "-mode", "tcl", "-source", tcl_script_path, "-notrace"]

subprocess.run(command, cwd=project_dir)
```

`Vivado Customisations/readme.md`:

```md
## Automatically generate and customise ip core for pcileech-fpga-4.14/PCIeSquirrel

This is just something I made in 20 mins for fun. Not really a purpose to use but use it if you want. was made for version 4.13. I will upload and update the files soon for 4.14

> [!WARNING]
> There might be an issue with the vivado.py file. I can't be bothered anymore to update that


> [!NOTE]
> You will need to go into each file and change the file location to the dir of your project
>
> You will need to comment/uncomment the customisations you want
> 
> This doesn't create the .bin file. you will need to open the xpr file in /PCIeSquirrel/pcileech_squirrel and generate the file within Vivado by pressing Generate Bitstream, or Synthesis.



##### List of possible customisations as of now
- Device ID
- Vendor ID
- Subsystem ID
- Subsystem Vendor ID
- Revision ID

##### Soon to come
- Class Code
- Header Type
- Int Pin
- Bars
- Base Ptrs (MSI/MSIx/Header0/PMC/PCIe)
- Next Ptrs (MSI/MSIx/Header0/PMC/PCIe)

## Steps:
1. Make sure Python and Xilinx Vivado is installed on your OS
   
2. Download the project
   
3. Leave all 3 files in the same directory
   
4. Run the `generate-project.py` until the IP core is generated. Depending on your PC specs, this might be fast or slow. To check go to `pcileech-fpga-4.14/PCIeSquirrel/pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0`.

You can stop the `generate-project.py` file if you can see this directory. If you don't see this directory, let the IP core generate.

5. Run `Vivado.py`

Once Vivado.py has finished running. You can go to this directory `PCIeSquirrel/pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0/source/` and open the `pcie_7x_0_core_top.v` to see if your customisations have been changed. 




```

`Vivado Customisations/script.tcl`:

```tcl
#Made with <3 by RakeshMonkee

source vivado_generate_project.tcl -notrace

#change to your dir, needs to look like dir below
cd C:/Users/user/Desktop/Vivado-Test/pcileech-fpga-4.14/PCIeSquirrel/pcileech_squirrel/pcileech_squirrel.srcs/sources_1/ip/pcie_7x_0

generate_target {all} [get_files pcie_7x_0.xci]

set_property is_managed false [get_files pcie_7x_0.xci]
```

`readme.md`:

```md
### Custom Direct Memory Access (DMA) Firmware Guide

> [!IMPORTANT]
> No longer updating this repo frequently.
> 
> This guide is not a spoon feed. I have purposely left out some information. It is your job to learn how to make FW while learning something.


> [!TIP]
> If you are new to Custom DMA Firmware creation, I leave you with this guide on how to create a basic [DMA CFW](https://github.com/Silverr12/DMA-CFW-Guide) which can be used as a starting point. Once you have a little more understanding of DMA Firmware, you can go ahead and continue with this guide.

### Contents
- [Vivado Customisations](https://github.com/Rakeshmonkee/DMA/tree/main/Vivado%20Customisations)
- [DMA FAQ](https://github.com/Rakeshmonkee/DMA/blob/main/DMA%20FAQ.md)
- [How to Flash](https://github.com/Rakeshmonkee/DMA/tree/main/How%20to%20Flash)
- [EAC-BE FW Creation](https://github.com/Rakeshmonkee/DMA/tree/main/EAC-BE%20FW%20Creation)
- [VGK FW Creation](https://github.com/Rakeshmonkee/DMA/tree/main/VGK%20FW%20Creation)
- [TLSCAN to COE](https://github.com/Rakeshmonkee/DMA/tree/main/.tlscan%20to%20.coe)
- [1:1 CFG of real device](https://github.com/Rakeshmonkee/DMA/tree/main/1%3A1%20CFG%20of%20real%20device)

#### If you have any questions or problems/issues, feel free to join my discord server and ask in one of the channels that best suits your issue.

[![Discord Banner](https://discord.com/api/guilds/1201428101964513300/widget.png?style=banner2)](https://discord.gg/4kSWZsexvq)

------------------------

Thanks to someone, not naming who for privacy reasons, this list is a thing

```
David-DMA:
- Sells LeetDMA board as his own board
- https://media.discordapp.net/attachments/1217665193442803712/1230848311284727869/IMG_4959.png.jpg?ex=6634cfd1&is=66225ad1&hm=a8010db68dca20100e4f532d9f5be832f9b7dc23b60d06cbe6119b0184c2921d&=&format=webp&width=823&height=617
- https://media.discordapp.net/attachments/1217665193442803712/1230849091223687178/image.png?ex=6634d08b&is=66225b8b&hm=698d5fba47a7dcc8f8e62451bee7890e0dcded5b381eec409f4bf0784208cb89&=&format=webp&quality=lossless&width=588&height=617
- https://media.discordapp.net/attachments/1217665193442803712/1230849661758341132/image.png?ex=6634d113&is=66225c13&hm=490a755bd46eb0c6169b10c8c73e416d8b1806010fbf069cdf622bec0da8e792&=&format=webp&quality=lossless&width=338&height=350
- Uses legit business artwork for his own use, same as logo(crop logo and rotate 90deg)
- https://cdn.discordapp.com/attachments/1204450534111584257/1230819542809444412/image.png?ex=6634b506&is=66224006&hm=57fd69a91273f6d3efe372a5da165faf1f1ed1c11539f9cf3d31af0541e925a9&
- https://cdn.discordapp.com/attachments/986931784426090509/1230824143201505371/image.png?ex=6634b94f&is=6622444f&hm=9d74c1ff6056abddd63276e6634a67896789833f9919723d3cd2b917f97ec84f&
Blocks me after I expose him
- https://cdn.discordapp.com/attachments/986931784426090509/1230824783948677140/image.png?ex=6634b9e8&is=662244e8&hm=933d08de826418e91e4b01575e2a3f60744ab3d94110286db7d2a8b1c6bb5680&
- overprice ($250-$500)
- https://imgur.com/a/HHwtL0I
- https://imgur.com/yNFl3k2

IThaLove:
- Overprice
- Customers ask for help on the FW they bought, itha bans them

P1111:
- https://www.elitepvpers.com/forum/call-duty/5227650-becareful-dma-firmware-market.html
- overprice 
- thinks he's better than everyone
- $650 for half emulation üòÜ
- Sold publicly available FW which is free for $2000+

Kartoxa:
- Firmware issues
- overprice

BDE:
- overprice
- sold firmware and claimed it was made by ekknod (19/07/2023) when its not.
- quality issue
- https://imgur.com/a/v6jKzn5 (en)
- https://imgur.com/a/BgKuyND (cn)

DMAKINGDOM:
- overprice
- reseller of JS x4 time price 
- resells unauthorised hardware

LeetDMA/enigma-x1/clutch-solutions:
- overprice

LurkerDMA:
- overprice
- low ethic 

asdfware-dma:
- overprice 
- german üê∂ 
- half emu/other keywords like that doesn't sound very promising
- https://i.imgur.com/5TgBB0S.png
```

```