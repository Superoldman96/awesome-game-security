Project Path: arc_gmh5225_MonoHook_kcz7wx3g

Source Tree:

```txt
arc_gmh5225_MonoHook_kcz7wx3g
├── Assets
│   ├── Scenes
│   │   ├── SampleScene5+.unity
│   │   ├── SampleScene5+.unity.meta
│   │   ├── SampleScene_Unity4.7.unity
│   │   └── SampleScene_Unity4.7.unity.meta
│   ├── Scenes.meta
│   ├── Scripts
│   │   ├── Others
│   │   │   ├── NativeClass.cs
│   │   │   └── NativeClass.cs.meta
│   │   ├── Others.meta
│   │   ├── TestA.cs
│   │   ├── TestA.cs.meta
│   │   ├── UnityHook
│   │   │   ├── CodePatcher.cs
│   │   │   ├── CodePatcher.cs.meta
│   │   │   ├── HookPool.cs
│   │   │   ├── HookPool.cs.meta
│   │   │   ├── HookUtils.cs
│   │   │   ├── HookUtils.cs.meta
│   │   │   ├── HookUtils_OSX.cs
│   │   │   ├── HookUtils_OSX.cs.meta
│   │   │   ├── LDasm.cs
│   │   │   ├── LDasm.cs.meta
│   │   │   ├── MethodHook.cs
│   │   │   ├── MethodHook.cs.meta
│   │   │   ├── Plugins
│   │   │   │   ├── Utils.cpp
│   │   │   │   ├── Utils.cpp.meta
│   │   │   │   ├── libMonoHookUtils_OSX.dylib
│   │   │   │   └── libMonoHookUtils_OSX.dylib.meta
│   │   │   ├── Plugins.meta
│   │   │   ├── TestCase
│   │   │   │   ├── CtorHookTest.cs
│   │   │   │   ├── CtorHookTest.cs.meta
│   │   │   │   ├── Editor
│   │   │   │   │   ├── BuildMainWindowTitle_Hook_Test.cs
│   │   │   │   │   ├── BuildMainWindowTitle_Hook_Test.cs.meta
│   │   │   │   │   ├── BuildPipeline_StripDll_HookTest.cs
│   │   │   │   │   ├── BuildPipeline_StripDll_HookTest.cs.meta
│   │   │   │   │   ├── FileDelete_Hook_Test.cs
│   │   │   │   │   └── FileDelete_Hook_Test.cs.meta
│   │   │   │   ├── Editor.meta
│   │   │   │   ├── GameObject_CreatePrimitive_HookTest.cs
│   │   │   │   ├── GameObject_CreatePrimitive_HookTest.cs.meta
│   │   │   │   ├── GameObject_SetActive_HookTest.cs
│   │   │   │   ├── GameObject_SetActive_HookTest.cs.meta
│   │   │   │   ├── GenericMethod_HookTest.cs
│   │   │   │   ├── GenericMethod_HookTest.cs.meta
│   │   │   │   ├── InstanceMethodTest.cs
│   │   │   │   ├── InstanceMethodTest.cs.meta
│   │   │   │   ├── PinnedLog.cs
│   │   │   │   ├── PinnedLog.cs.meta
│   │   │   │   ├── PrivateTypeArgMethodTest.cs
│   │   │   │   ├── PrivateTypeArgMethodTest.cs.meta
│   │   │   │   ├── ProjectWindow_DuplicateAsset_HookTest.cs
│   │   │   │   ├── ProjectWindow_DuplicateAsset_HookTest.cs.meta
│   │   │   │   ├── PropertyHookTest.cs
│   │   │   │   ├── PropertyHookTest.cs.meta
│   │   │   │   ├── Renderer_SetMaterial_HookTest.cs
│   │   │   │   ├── Renderer_SetMaterial_HookTest.cs.meta
│   │   │   │   ├── SceneHierarchyStageHandling_HookTest.cs
│   │   │   │   ├── SceneHierarchyStageHandling_HookTest.cs.meta
│   │   │   │   ├── SceneViewCamera
│   │   │   │   │   ├── Editor
│   │   │   │   │   │   ├── SceneViewHook.cs
│   │   │   │   │   │   └── SceneViewHook.cs.meta
│   │   │   │   │   └── Editor.meta
│   │   │   │   ├── SceneViewCamera.meta
│   │   │   │   ├── SceneViewMoveFunc_HookTest.cs
│   │   │   │   ├── SceneViewMoveFunc_HookTest.cs.meta
│   │   │   │   ├── Transform_SetPosition_HookTest.cs
│   │   │   │   ├── Transform_SetPosition_HookTest.cs.meta
│   │   │   │   ├── Unity4Helpher.cs
│   │   │   │   └── Unity4Helpher.cs.meta
│   │   │   └── TestCase.meta
│   │   └── UnityHook.meta
│   ├── Scripts.meta
│   ├── smcs.rsp
│   └── smcs.rsp.meta
├── LICENSE
├── Packages
│   └── manifest.json
├── Preview
│   └── Preview.gif
├── ProjectSettings
│   ├── AudioManager.asset
│   ├── ClusterInputManager.asset
│   ├── DynamicsManager.asset
│   ├── EditorBuildSettings.asset
│   ├── EditorSettings.asset
│   ├── GraphicsSettings.asset
│   ├── InputManager.asset
│   ├── NavMeshAreas.asset
│   ├── NetworkManager.asset
│   ├── Physics2DSettings.asset
│   ├── PresetManager.asset
│   ├── ProjectSettings.asset
│   ├── ProjectVersion.txt
│   ├── QualitySettings.asset
│   ├── TagManager.asset
│   ├── TimeManager.asset
│   └── UnityConnectSettings.asset
└── README.md

```

`Assets/Scenes.meta`:

```meta
fileFormatVersion: 2
guid: 4f704ae4b4f98ae41a0bce26658850c1
folderAsset: yes
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scenes/SampleScene5+.unity`:

```unity
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!29 &1
OcclusionCullingSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 2
  m_OcclusionBakeSettings:
    smallestOccluder: 5
    smallestHole: 0.25
    backfaceThreshold: 100
  m_SceneGUID: 00000000000000000000000000000000
  m_OcclusionCullingData: {fileID: 0}
--- !u!104 &2
RenderSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 9
  m_Fog: 0
  m_FogColor: {r: 0.5, g: 0.5, b: 0.5, a: 1}
  m_FogMode: 3
  m_FogDensity: 0.01
  m_LinearFogStart: 0
  m_LinearFogEnd: 300
  m_AmbientSkyColor: {r: 0.212, g: 0.227, b: 0.259, a: 1}
  m_AmbientEquatorColor: {r: 0.114, g: 0.125, b: 0.133, a: 1}
  m_AmbientGroundColor: {r: 0.047, g: 0.043, b: 0.035, a: 1}
  m_AmbientIntensity: 1
  m_AmbientMode: 0
  m_SubtractiveShadowColor: {r: 0.42, g: 0.478, b: 0.627, a: 1}
  m_SkyboxMaterial: {fileID: 10304, guid: 0000000000000000f000000000000000, type: 0}
  m_HaloStrength: 0.5
  m_FlareStrength: 1
  m_FlareFadeSpeed: 3
  m_HaloTexture: {fileID: 0}
  m_SpotCookie: {fileID: 10001, guid: 0000000000000000e000000000000000, type: 0}
  m_DefaultReflectionMode: 0
  m_DefaultReflectionResolution: 128
  m_ReflectionBounces: 1
  m_ReflectionIntensity: 1
  m_CustomReflection: {fileID: 0}
  m_Sun: {fileID: 0}
  m_IndirectSpecularColor: {r: 0.44657898, g: 0.4964133, b: 0.5748178, a: 1}
  m_UseRadianceAmbientProbe: 0
--- !u!157 &3
LightmapSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 12
  m_GIWorkflowMode: 0
  m_GISettings:
    serializedVersion: 2
    m_BounceScale: 1
    m_IndirectOutputScale: 1
    m_AlbedoBoost: 1
    m_EnvironmentLightingMode: 0
    m_EnableBakedLightmaps: 1
    m_EnableRealtimeLightmaps: 0
  m_LightmapEditorSettings:
    serializedVersion: 12
    m_Resolution: 2
    m_BakeResolution: 10
    m_AtlasSize: 512
    m_AO: 0
    m_AOMaxDistance: 1
    m_CompAOExponent: 1
    m_CompAOExponentDirect: 0
    m_ExtractAmbientOcclusion: 0
    m_Padding: 2
    m_LightmapParameters: {fileID: 0}
    m_LightmapsBakeMode: 1
    m_TextureCompression: 1
    m_FinalGather: 0
    m_FinalGatherFiltering: 1
    m_FinalGatherRayCount: 256
    m_ReflectionCompression: 2
    m_MixedBakeMode: 2
    m_BakeBackend: 1
    m_PVRSampling: 1
    m_PVRDirectSampleCount: 32
    m_PVRSampleCount: 256
    m_PVRBounces: 2
    m_PVREnvironmentSampleCount: 256
    m_PVREnvironmentReferencePointCount: 2048
    m_PVRFilteringMode: 2
    m_PVRDenoiserTypeDirect: 0
    m_PVRDenoiserTypeIndirect: 0
    m_PVRDenoiserTypeAO: 0
    m_PVRFilterTypeDirect: 0
    m_PVRFilterTypeIndirect: 0
    m_PVRFilterTypeAO: 0
    m_PVREnvironmentMIS: 0
    m_PVRCulling: 1
    m_PVRFilteringGaussRadiusDirect: 1
    m_PVRFilteringGaussRadiusIndirect: 5
    m_PVRFilteringGaussRadiusAO: 2
    m_PVRFilteringAtrousPositionSigmaDirect: 0.5
    m_PVRFilteringAtrousPositionSigmaIndirect: 2
    m_PVRFilteringAtrousPositionSigmaAO: 1
    m_ExportTrainingData: 0
    m_TrainingDataDestination: TrainingData
    m_LightProbeSampleCountMultiplier: 4
  m_LightingDataAsset: {fileID: 0}
  m_LightingSettings: {fileID: 1417715956}
--- !u!196 &4
NavMeshSettings:
  serializedVersion: 2
  m_ObjectHideFlags: 0
  m_BuildSettings:
    serializedVersion: 2
    agentTypeID: 0
    agentRadius: 0.5
    agentHeight: 2
    agentSlope: 45
    agentClimb: 0.4
    ledgeDropHeight: 0
    maxJumpAcrossDistance: 0
    minRegionArea: 2
    manualCellSize: 0
    cellSize: 0.16666667
    manualTileSize: 0
    tileSize: 256
    accuratePlacement: 0
    maxJobWorkers: 0
    preserveTilesOutsideBounds: 0
    debug:
      m_Flags: 0
  m_NavMeshData: {fileID: 0}
--- !u!1 &170076733
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 170076735}
  - component: {fileID: 170076734}
  m_Layer: 0
  m_Name: Directional Light
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!108 &170076734
Light:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 170076733}
  m_Enabled: 1
  serializedVersion: 10
  m_Type: 1
  m_Shape: 0
  m_Color: {r: 1, g: 0.95686275, b: 0.8392157, a: 1}
  m_Intensity: 1
  m_Range: 10
  m_SpotAngle: 30
  m_InnerSpotAngle: 21.80208
  m_CookieSize: 10
  m_Shadows:
    m_Type: 2
    m_Resolution: -1
    m_CustomResolution: -1
    m_Strength: 1
    m_Bias: 0.05
    m_NormalBias: 0.4
    m_NearPlane: 0.2
    m_CullingMatrixOverride:
      e00: 1
      e01: 0
      e02: 0
      e03: 0
      e10: 0
      e11: 1
      e12: 0
      e13: 0
      e20: 0
      e21: 0
      e22: 1
      e23: 0
      e30: 0
      e31: 0
      e32: 0
      e33: 1
    m_UseCullingMatrixOverride: 0
  m_Cookie: {fileID: 0}
  m_DrawHalo: 0
  m_Flare: {fileID: 0}
  m_RenderMode: 0
  m_CullingMask:
    serializedVersion: 2
    m_Bits: 4294967295
  m_RenderingLayerMask: 1
  m_Lightmapping: 1
  m_LightShadowCasterMode: 0
  m_AreaSize: {x: 1, y: 1}
  m_BounceIntensity: 1
  m_ColorTemperature: 6570
  m_UseColorTemperature: 0
  m_BoundingSphereOverride: {x: 0, y: 0, z: 0, w: 0}
  m_UseBoundingSphereOverride: 0
  m_UseViewFrustumForShadowCasterCull: 1
  m_ShadowRadius: 0
  m_ShadowAngle: 0
--- !u!4 &170076735
Transform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 170076733}
  m_LocalRotation: {x: 0.40821788, y: -0.23456968, z: 0.10938163, w: 0.8754261}
  m_LocalPosition: {x: 0, y: 3, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children: []
  m_Father: {fileID: 0}
  m_RootOrder: 1
  m_LocalEulerAnglesHint: {x: 50, y: -30, z: 0}
--- !u!1 &282840810
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 282840814}
  - component: {fileID: 282840813}
  - component: {fileID: 282840812}
  m_Layer: 0
  m_Name: Main Camera
  m_TagString: MainCamera
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!114 &282840812
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 282840810}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: d355d1a56940adf4ab1b64a8438bb5ed, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  btn: {fileID: 1202499627}
  btnDelFile: {fileID: 1376055733}
  txtInfo: {fileID: 1721195300}
  txtTestVal: {fileID: 957391053}
--- !u!20 &282840813
Camera:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 282840810}
  m_Enabled: 1
  serializedVersion: 2
  m_ClearFlags: 1
  m_BackGroundColor: {r: 0.19215687, g: 0.3019608, b: 0.4745098, a: 0}
  m_projectionMatrixMode: 1
  m_GateFitMode: 2
  m_FOVAxisMode: 0
  m_SensorSize: {x: 36, y: 24}
  m_LensShift: {x: 0, y: 0}
  m_FocalLength: 50
  m_NormalizedViewPortRect:
    serializedVersion: 2
    x: 0
    y: 0
    width: 1
    height: 1
  near clip plane: 0.3
  far clip plane: 1000
  field of view: 60
  orthographic: 0
  orthographic size: 5
  m_Depth: -1
  m_CullingMask:
    serializedVersion: 2
    m_Bits: 4294967295
  m_RenderingPath: -1
  m_TargetTexture: {fileID: 0}
  m_TargetDisplay: 0
  m_TargetEye: 3
  m_HDR: 1
  m_AllowMSAA: 1
  m_AllowDynamicResolution: 0
  m_ForceIntoRT: 1
  m_OcclusionCulling: 1
  m_StereoConvergence: 10
  m_StereoSeparation: 0.022
--- !u!4 &282840814
Transform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 282840810}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 1, z: -10}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children: []
  m_Father: {fileID: 0}
  m_RootOrder: 0
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}
--- !u!1 &387302782
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 387302785}
  - component: {fileID: 387302784}
  - component: {fileID: 387302783}
  m_Layer: 0
  m_Name: EventSystem
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!114 &387302783
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 387302782}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 4f231c4fb786f3946a6b90b886c48677, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_SendPointerHoverToParent: 1
  m_HorizontalAxis: Horizontal
  m_VerticalAxis: Vertical
  m_SubmitButton: Submit
  m_CancelButton: Cancel
  m_InputActionsPerSecond: 10
  m_RepeatDelay: 0.5
  m_ForceModuleActive: 0
--- !u!114 &387302784
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 387302782}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 76c392e42b5098c458856cdf6ecaaaa1, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_FirstSelected: {fileID: 0}
  m_sendNavigationEvents: 1
  m_DragThreshold: 10
--- !u!4 &387302785
Transform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 387302782}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children: []
  m_Father: {fileID: 0}
  m_RootOrder: 2
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}
--- !u!1 &957391051
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 957391052}
  - component: {fileID: 957391054}
  - component: {fileID: 957391053}
  m_Layer: 5
  m_Name: TestVal
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!224 &957391052
RectTransform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 957391051}
  m_LocalRotation: {x: -0, y: -0, z: -0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children: []
  m_Father: {fileID: 1535321379}
  m_RootOrder: 0
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}
  m_AnchorMin: {x: 0, y: 1}
  m_AnchorMax: {x: 0, y: 1}
  m_AnchoredPosition: {x: 493, y: -197}
  m_SizeDelta: {x: 303.8, y: 372.40002}
  m_Pivot: {x: 0.5, y: 0.5}
--- !u!114 &957391053
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 957391051}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 5f7201a12d95ffc409449d95f23cf332, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Material: {fileID: 0}
  m_Color: {r: 0.7782141, g: 0.8679245, b: 0.7573869, a: 1}
  m_RaycastTarget: 0
  m_RaycastPadding: {x: 0, y: 0, z: 0, w: 0}
  m_Maskable: 1
  m_OnCullStateChanged:
    m_PersistentCalls:
      m_Calls: []
  m_FontData:
    m_Font: {fileID: 10102, guid: 0000000000000000e000000000000000, type: 0}
    m_FontSize: 14
    m_FontStyle: 0
    m_BestFit: 0
    m_MinSize: 10
    m_MaxSize: 40
    m_Alignment: 0
    m_AlignByGeometry: 0
    m_RichText: 1
    m_HorizontalOverflow: 0
    m_VerticalOverflow: 0
    m_LineSpacing: 1
  m_Text: 
--- !u!222 &957391054
CanvasRenderer:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 957391051}
  m_CullTransparentMesh: 0
--- !u!1 &1070628877
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 1070628878}
  - component: {fileID: 1070628880}
  - component: {fileID: 1070628879}
  m_Layer: 5
  m_Name: Text
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!224 &1070628878
RectTransform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1070628877}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children: []
  m_Father: {fileID: 1202499626}
  m_RootOrder: 0
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}
  m_AnchorMin: {x: 0, y: 0}
  m_AnchorMax: {x: 1, y: 1}
  m_AnchoredPosition: {x: 0, y: 0}
  m_SizeDelta: {x: 0, y: 0}
  m_Pivot: {x: 0.5, y: 0.5}
--- !u!114 &1070628879
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1070628877}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 5f7201a12d95ffc409449d95f23cf332, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Material: {fileID: 0}
  m_Color: {r: 0.19607843, g: 0.19607843, b: 0.19607843, a: 1}
  m_RaycastTarget: 1
  m_RaycastPadding: {x: 0, y: 0, z: 0, w: 0}
  m_Maskable: 1
  m_OnCullStateChanged:
    m_PersistentCalls:
      m_Calls: []
  m_FontData:
    m_Font: {fileID: 10102, guid: 0000000000000000e000000000000000, type: 0}
    m_FontSize: 20
    m_FontStyle: 0
    m_BestFit: 0
    m_MinSize: 2
    m_MaxSize: 40
    m_Alignment: 4
    m_AlignByGeometry: 0
    m_RichText: 1
    m_HorizontalOverflow: 0
    m_VerticalOverflow: 0
    m_LineSpacing: 1
  m_Text: RunTest
--- !u!222 &1070628880
CanvasRenderer:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1070628877}
  m_CullTransparentMesh: 0
--- !u!1 &1202499625
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 1202499626}
  - component: {fileID: 1202499629}
  - component: {fileID: 1202499628}
  - component: {fileID: 1202499627}
  m_Layer: 5
  m_Name: BtnTest
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!224 &1202499626
RectTransform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1202499625}
  m_LocalRotation: {x: -0, y: -0, z: -0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children:
  - {fileID: 1070628878}
  m_Father: {fileID: 1535321379}
  m_RootOrder: 2
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}
  m_AnchorMin: {x: 0.5, y: 0.5}
  m_AnchorMax: {x: 0.5, y: 0.5}
  m_AnchoredPosition: {x: 0, y: 0}
  m_SizeDelta: {x: 160, y: 85.0795}
  m_Pivot: {x: 0.5, y: 0.5}
--- !u!114 &1202499627
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1202499625}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 4e29b1a8efbd4b44bb3f3716e73f07ff, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Navigation:
    m_Mode: 3
    m_WrapAround: 0
    m_SelectOnUp: {fileID: 0}
    m_SelectOnDown: {fileID: 0}
    m_SelectOnLeft: {fileID: 0}
    m_SelectOnRight: {fileID: 0}
  m_Transition: 1
  m_Colors:
    m_NormalColor: {r: 1, g: 1, b: 1, a: 1}
    m_HighlightedColor: {r: 0.9607843, g: 0.9607843, b: 0.9607843, a: 1}
    m_PressedColor: {r: 0.78431374, g: 0.78431374, b: 0.78431374, a: 1}
    m_SelectedColor: {r: 0.9607843, g: 0.9607843, b: 0.9607843, a: 1}
    m_DisabledColor: {r: 0.78431374, g: 0.78431374, b: 0.78431374, a: 0.5019608}
    m_ColorMultiplier: 1
    m_FadeDuration: 0.1
  m_SpriteState:
    m_HighlightedSprite: {fileID: 0}
    m_PressedSprite: {fileID: 0}
    m_SelectedSprite: {fileID: 0}
    m_DisabledSprite: {fileID: 0}
  m_AnimationTriggers:
    m_NormalTrigger: Normal
    m_HighlightedTrigger: Highlighted
    m_PressedTrigger: Pressed
    m_SelectedTrigger: Highlighted
    m_DisabledTrigger: Disabled
  m_Interactable: 1
  m_TargetGraphic: {fileID: 1202499628}
  m_OnClick:
    m_PersistentCalls:
      m_Calls: []
--- !u!114 &1202499628
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1202499625}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: fe87c0e1cc204ed48ad3b37840f39efc, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Material: {fileID: 0}
  m_Color: {r: 1, g: 1, b: 1, a: 1}
  m_RaycastTarget: 1
  m_RaycastPadding: {x: 0, y: 0, z: 0, w: 0}
  m_Maskable: 1
  m_OnCullStateChanged:
    m_PersistentCalls:
      m_Calls: []
  m_Sprite: {fileID: 10905, guid: 0000000000000000f000000000000000, type: 0}
  m_Type: 1
  m_PreserveAspect: 0
  m_FillCenter: 1
  m_FillMethod: 4
  m_FillAmount: 1
  m_FillClockwise: 1
  m_FillOrigin: 0
  m_UseSpriteMesh: 0
  m_PixelsPerUnitMultiplier: 1
--- !u!222 &1202499629
CanvasRenderer:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1202499625}
  m_CullTransparentMesh: 0
--- !u!1 &1321348587
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 1321348588}
  - component: {fileID: 1321348590}
  - component: {fileID: 1321348589}
  m_Layer: 5
  m_Name: Text
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!224 &1321348588
RectTransform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1321348587}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children: []
  m_Father: {fileID: 1376055732}
  m_RootOrder: 0
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}
  m_AnchorMin: {x: 0, y: 0}
  m_AnchorMax: {x: 1, y: 1}
  m_AnchoredPosition: {x: 0, y: 0}
  m_SizeDelta: {x: 0, y: 0}
  m_Pivot: {x: 0.5, y: 0.5}
--- !u!114 &1321348589
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1321348587}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 5f7201a12d95ffc409449d95f23cf332, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Material: {fileID: 0}
  m_Color: {r: 0.19607843, g: 0.19607843, b: 0.19607843, a: 1}
  m_RaycastTarget: 1
  m_RaycastPadding: {x: 0, y: 0, z: 0, w: 0}
  m_Maskable: 1
  m_OnCullStateChanged:
    m_PersistentCalls:
      m_Calls: []
  m_FontData:
    m_Font: {fileID: 10102, guid: 0000000000000000e000000000000000, type: 0}
    m_FontSize: 20
    m_FontStyle: 0
    m_BestFit: 0
    m_MinSize: 2
    m_MaxSize: 40
    m_Alignment: 4
    m_AlignByGeometry: 0
    m_RichText: 1
    m_HorizontalOverflow: 0
    m_VerticalOverflow: 0
    m_LineSpacing: 1
  m_Text: DelFileTest
--- !u!222 &1321348590
CanvasRenderer:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1321348587}
  m_CullTransparentMesh: 0
--- !u!1 &1376055731
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 1376055732}
  - component: {fileID: 1376055735}
  - component: {fileID: 1376055734}
  - component: {fileID: 1376055733}
  m_Layer: 5
  m_Name: BtnDelFileTest
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!224 &1376055732
RectTransform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1376055731}
  m_LocalRotation: {x: -0, y: -0, z: -0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children:
  - {fileID: 1321348588}
  m_Father: {fileID: 1535321379}
  m_RootOrder: 3
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}
  m_AnchorMin: {x: 0.5, y: 0.5}
  m_AnchorMax: {x: 0.5, y: 0.5}
  m_AnchoredPosition: {x: -2.1, y: -114}
  m_SizeDelta: {x: 160, y: 85.0795}
  m_Pivot: {x: 0.5, y: 0.5}
--- !u!114 &1376055733
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1376055731}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 4e29b1a8efbd4b44bb3f3716e73f07ff, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Navigation:
    m_Mode: 3
    m_WrapAround: 0
    m_SelectOnUp: {fileID: 0}
    m_SelectOnDown: {fileID: 0}
    m_SelectOnLeft: {fileID: 0}
    m_SelectOnRight: {fileID: 0}
  m_Transition: 1
  m_Colors:
    m_NormalColor: {r: 1, g: 1, b: 1, a: 1}
    m_HighlightedColor: {r: 0.9607843, g: 0.9607843, b: 0.9607843, a: 1}
    m_PressedColor: {r: 0.78431374, g: 0.78431374, b: 0.78431374, a: 1}
    m_SelectedColor: {r: 0.9607843, g: 0.9607843, b: 0.9607843, a: 1}
    m_DisabledColor: {r: 0.78431374, g: 0.78431374, b: 0.78431374, a: 0.5019608}
    m_ColorMultiplier: 1
    m_FadeDuration: 0.1
  m_SpriteState:
    m_HighlightedSprite: {fileID: 0}
    m_PressedSprite: {fileID: 0}
    m_SelectedSprite: {fileID: 0}
    m_DisabledSprite: {fileID: 0}
  m_AnimationTriggers:
    m_NormalTrigger: Normal
    m_HighlightedTrigger: Highlighted
    m_PressedTrigger: Pressed
    m_SelectedTrigger: Highlighted
    m_DisabledTrigger: Disabled
  m_Interactable: 1
  m_TargetGraphic: {fileID: 1376055734}
  m_OnClick:
    m_PersistentCalls:
      m_Calls: []
--- !u!114 &1376055734
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1376055731}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: fe87c0e1cc204ed48ad3b37840f39efc, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Material: {fileID: 0}
  m_Color: {r: 1, g: 1, b: 1, a: 1}
  m_RaycastTarget: 1
  m_RaycastPadding: {x: 0, y: 0, z: 0, w: 0}
  m_Maskable: 1
  m_OnCullStateChanged:
    m_PersistentCalls:
      m_Calls: []
  m_Sprite: {fileID: 10905, guid: 0000000000000000f000000000000000, type: 0}
  m_Type: 1
  m_PreserveAspect: 0
  m_FillCenter: 1
  m_FillMethod: 4
  m_FillAmount: 1
  m_FillClockwise: 1
  m_FillOrigin: 0
  m_UseSpriteMesh: 0
  m_PixelsPerUnitMultiplier: 1
--- !u!222 &1376055735
CanvasRenderer:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1376055731}
  m_CullTransparentMesh: 0
--- !u!850595691 &1417715956
LightingSettings:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_Name: Settings.lighting
  serializedVersion: 4
  m_GIWorkflowMode: 0
  m_EnableBakedLightmaps: 1
  m_EnableRealtimeLightmaps: 0
  m_RealtimeEnvironmentLighting: 1
  m_BounceScale: 1
  m_AlbedoBoost: 1
  m_IndirectOutputScale: 1
  m_UsingShadowmask: 1
  m_BakeBackend: 1
  m_LightmapMaxSize: 512
  m_BakeResolution: 10
  m_Padding: 2
  m_LightmapCompression: 2
  m_AO: 0
  m_AOMaxDistance: 1
  m_CompAOExponent: 1
  m_CompAOExponentDirect: 0
  m_ExtractAO: 0
  m_MixedBakeMode: 2
  m_LightmapsBakeMode: 1
  m_FilterMode: 1
  m_LightmapParameters: {fileID: 15204, guid: 0000000000000000f000000000000000, type: 0}
  m_ExportTrainingData: 0
  m_TrainingDataDestination: TrainingData
  m_RealtimeResolution: 2
  m_ForceWhiteAlbedo: 0
  m_ForceUpdates: 0
  m_FinalGather: 0
  m_FinalGatherRayCount: 256
  m_FinalGatherFiltering: 1
  m_PVRCulling: 1
  m_PVRSampling: 1
  m_PVRDirectSampleCount: 32
  m_PVRSampleCount: 256
  m_PVREnvironmentSampleCount: 256
  m_PVREnvironmentReferencePointCount: 2048
  m_LightProbeSampleCountMultiplier: 4
  m_PVRBounces: 2
  m_PVRMinBounces: 2
  m_PVREnvironmentMIS: 0
  m_PVRFilteringMode: 2
  m_PVRDenoiserTypeDirect: 0
  m_PVRDenoiserTypeIndirect: 0
  m_PVRDenoiserTypeAO: 0
  m_PVRFilterTypeDirect: 0
  m_PVRFilterTypeIndirect: 0
  m_PVRFilterTypeAO: 0
  m_PVRFilteringGaussRadiusDirect: 1
  m_PVRFilteringGaussRadiusIndirect: 5
  m_PVRFilteringGaussRadiusAO: 2
  m_PVRFilteringAtrousPositionSigmaDirect: 0.5
  m_PVRFilteringAtrousPositionSigmaIndirect: 2
  m_PVRFilteringAtrousPositionSigmaAO: 1
  m_PVRTiledBaking: 0
--- !u!1 &1535321378
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 1535321379}
  - component: {fileID: 1535321382}
  - component: {fileID: 1535321381}
  - component: {fileID: 1535321380}
  m_Layer: 5
  m_Name: Canvas
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!224 &1535321379
RectTransform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1535321378}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 0, y: 0, z: 0}
  m_ConstrainProportionsScale: 0
  m_Children:
  - {fileID: 957391052}
  - {fileID: 1721195299}
  - {fileID: 1202499626}
  - {fileID: 1376055732}
  m_Father: {fileID: 2046516476}
  m_RootOrder: 0
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}
  m_AnchorMin: {x: 0, y: 0}
  m_AnchorMax: {x: 0, y: 0}
  m_AnchoredPosition: {x: 0, y: 0}
  m_SizeDelta: {x: 0, y: 0}
  m_Pivot: {x: 0, y: 0}
--- !u!114 &1535321380
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1535321378}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 0cd44c1031e13a943bb63640046fad76, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_UiScaleMode: 1
  m_ReferencePixelsPerUnit: 100
  m_ScaleFactor: 1
  m_ReferenceResolution: {x: 800, y: 600}
  m_ScreenMatchMode: 0
  m_MatchWidthOrHeight: 0
  m_PhysicalUnit: 3
  m_FallbackScreenDPI: 96
  m_DefaultSpriteDPI: 96
  m_DynamicPixelsPerUnit: 1
  m_PresetInfoIsWorld: 0
--- !u!114 &1535321381
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1535321378}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: dc42784cf147c0c48a680349fa168899, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_IgnoreReversedGraphics: 1
  m_BlockingObjects: 0
  m_BlockingMask:
    serializedVersion: 2
    m_Bits: 4294967295
--- !u!223 &1535321382
Canvas:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1535321378}
  m_Enabled: 1
  serializedVersion: 3
  m_RenderMode: 1
  m_Camera: {fileID: 2046516475}
  m_PlaneDistance: 100
  m_PixelPerfect: 0
  m_ReceivesEvents: 1
  m_OverrideSorting: 0
  m_OverridePixelPerfect: 0
  m_SortingBucketNormalizedSize: 0
  m_AdditionalShaderChannelsFlag: 0
  m_SortingLayerID: 0
  m_SortingOrder: 0
  m_TargetDisplay: 0
--- !u!1 &1721195298
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 1721195299}
  - component: {fileID: 1721195301}
  - component: {fileID: 1721195300}
  m_Layer: 5
  m_Name: TxtInfo
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!224 &1721195299
RectTransform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1721195298}
  m_LocalRotation: {x: -0, y: -0, z: -0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children: []
  m_Father: {fileID: 1535321379}
  m_RootOrder: 1
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}
  m_AnchorMin: {x: 0, y: 1}
  m_AnchorMax: {x: 0, y: 1}
  m_AnchoredPosition: {x: 166, y: -197}
  m_SizeDelta: {x: 303.8, y: 372.40002}
  m_Pivot: {x: 0.5, y: 0.5}
--- !u!114 &1721195300
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1721195298}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: 5f7201a12d95ffc409449d95f23cf332, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Material: {fileID: 0}
  m_Color: {r: 0.8679245, g: 0.8679245, b: 0.8679245, a: 1}
  m_RaycastTarget: 0
  m_RaycastPadding: {x: 0, y: 0, z: 0, w: 0}
  m_Maskable: 1
  m_OnCullStateChanged:
    m_PersistentCalls:
      m_Calls: []
  m_FontData:
    m_Font: {fileID: 10102, guid: 0000000000000000e000000000000000, type: 0}
    m_FontSize: 14
    m_FontStyle: 0
    m_BestFit: 0
    m_MinSize: 10
    m_MaxSize: 40
    m_Alignment: 0
    m_AlignByGeometry: 0
    m_RichText: 1
    m_HorizontalOverflow: 0
    m_VerticalOverflow: 0
    m_LineSpacing: 1
  m_Text: TestInfo
--- !u!222 &1721195301
CanvasRenderer:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 1721195298}
  m_CullTransparentMesh: 0
--- !u!1 &2046516474
GameObject:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  serializedVersion: 6
  m_Component:
  - component: {fileID: 2046516476}
  - component: {fileID: 2046516475}
  m_Layer: 5
  m_Name: UICamera
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!20 &2046516475
Camera:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 2046516474}
  m_Enabled: 1
  serializedVersion: 2
  m_ClearFlags: 3
  m_BackGroundColor: {r: 0.19215687, g: 0.3019608, b: 0.4745098, a: 0}
  m_projectionMatrixMode: 1
  m_GateFitMode: 2
  m_FOVAxisMode: 0
  m_SensorSize: {x: 36, y: 24}
  m_LensShift: {x: 0, y: 0}
  m_FocalLength: 50
  m_NormalizedViewPortRect:
    serializedVersion: 2
    x: 0
    y: 0
    width: 100
    height: 100
  near clip plane: 0.3
  far clip plane: 1000
  field of view: 60
  orthographic: 1
  orthographic size: 5
  m_Depth: 0
  m_CullingMask:
    serializedVersion: 2
    m_Bits: 32
  m_RenderingPath: -1
  m_TargetTexture: {fileID: 0}
  m_TargetDisplay: 0
  m_TargetEye: 3
  m_HDR: 1
  m_AllowMSAA: 1
  m_AllowDynamicResolution: 0
  m_ForceIntoRT: 0
  m_OcclusionCulling: 1
  m_StereoConvergence: 10
  m_StereoSeparation: 0.022
--- !u!4 &2046516476
Transform:
  m_ObjectHideFlags: 0
  m_CorrespondingSourceObject: {fileID: 0}
  m_PrefabInstance: {fileID: 0}
  m_PrefabAsset: {fileID: 0}
  m_GameObject: {fileID: 2046516474}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 332.365, y: 337.3921, z: -114.34404}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_ConstrainProportionsScale: 0
  m_Children:
  - {fileID: 1535321379}
  m_Father: {fileID: 0}
  m_RootOrder: 3
  m_LocalEulerAnglesHint: {x: 0, y: 0, z: 0}

```

`Assets/Scenes/SampleScene5+.unity.meta`:

```meta
fileFormatVersion: 2
guid: 99c9720ab356a0642a771bea13969a05
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scenes/SampleScene_Unity4.7.unity`:

```unity
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!29 &1
SceneSettings:
  m_ObjectHideFlags: 0
  m_PVSData: 
  m_PVSObjectsArray: []
  m_PVSPortalsArray: []
  m_OcclusionBakeSettings:
    smallestOccluder: 5
    smallestHole: .25
    backfaceThreshold: 100
--- !u!104 &2
RenderSettings:
  m_Fog: 0
  m_FogColor: {r: .5, g: .5, b: .5, a: 1}
  m_FogMode: 3
  m_FogDensity: .00999999978
  m_LinearFogStart: 0
  m_LinearFogEnd: 300
  m_AmbientLight: {r: .200000003, g: .200000003, b: .200000003, a: 1}
  m_SkyboxMaterial: {fileID: 0}
  m_HaloStrength: .5
  m_FlareStrength: 1
  m_FlareFadeSpeed: 3
  m_HaloTexture: {fileID: 0}
  m_SpotCookie: {fileID: 0}
  m_ObjectHideFlags: 0
--- !u!127 &3
LevelGameManager:
  m_ObjectHideFlags: 0
--- !u!157 &4
LightmapSettings:
  m_ObjectHideFlags: 0
  m_LightProbes: {fileID: 0}
  m_Lightmaps: []
  m_LightmapsMode: 1
  m_BakedColorSpace: 0
  m_UseDualLightmapsInForward: 0
  m_LightmapEditorSettings:
    m_Resolution: 50
    m_LastUsedResolution: 0
    m_TextureWidth: 1024
    m_TextureHeight: 1024
    m_BounceBoost: 1
    m_BounceIntensity: 1
    m_SkyLightColor: {r: .860000014, g: .930000007, b: 1, a: 1}
    m_SkyLightIntensity: 0
    m_Quality: 0
    m_Bounces: 1
    m_FinalGatherRays: 1000
    m_FinalGatherContrastThreshold: .0500000007
    m_FinalGatherGradientThreshold: 0
    m_FinalGatherInterpolationPoints: 15
    m_AOAmount: 0
    m_AOMaxDistance: .100000001
    m_AOContrast: 1
    m_LODSurfaceMappingDistance: 1
    m_Padding: 0
    m_TextureCompression: 0
    m_LockAtlas: 0
--- !u!196 &5
NavMeshSettings:
  m_ObjectHideFlags: 0
  m_BuildSettings:
    agentRadius: .5
    agentHeight: 2
    agentSlope: 45
    agentClimb: .400000006
    ledgeDropHeight: 0
    maxJumpAcrossDistance: 0
    accuratePlacement: 0
    minRegionArea: 2
    widthInaccuracy: 16.666666
    heightInaccuracy: 10
    tileSizeHint: 0
  m_NavMesh: {fileID: 0}
--- !u!1 &1253871821
GameObject:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  serializedVersion: 4
  m_Component:
  - 4: {fileID: 1253871825}
  - 114: {fileID: 1253871824}
  - 114: {fileID: 1253871823}
  - 114: {fileID: 1253871822}
  m_Layer: 0
  m_Name: EventSystem
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!114 &1253871822
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1253871821}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 1997211142, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_AllowActivationOnStandalone: 0
--- !u!114 &1253871823
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1253871821}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 1077351063, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_HorizontalAxis: Horizontal
  m_VerticalAxis: Vertical
  m_SubmitButton: Submit
  m_CancelButton: Cancel
  m_InputActionsPerSecond: 10
  m_AllowActivationOnMobileDevice: 0
--- !u!114 &1253871824
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1253871821}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: -619905303, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_FirstSelected: {fileID: 0}
  m_sendNavigationEvents: 1
  m_DragThreshold: 5
--- !u!4 &1253871825
Transform:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1253871821}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_Children: []
  m_Father: {fileID: 0}
  m_RootOrder: 2
--- !u!1 &1298207170
GameObject:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  serializedVersion: 4
  m_Component:
  - 4: {fileID: 1298207176}
  - 20: {fileID: 1298207175}
  - 92: {fileID: 1298207174}
  - 124: {fileID: 1298207173}
  - 81: {fileID: 1298207172}
  - 114: {fileID: 1298207171}
  m_Layer: 0
  m_Name: Main Camera
  m_TagString: MainCamera
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!114 &1298207171
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1298207170}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 11500000, guid: d355d1a56940adf4ab1b64a8438bb5ed, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  btn: {fileID: 1361453567}
--- !u!81 &1298207172
AudioListener:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1298207170}
  m_Enabled: 1
--- !u!124 &1298207173
Behaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1298207170}
  m_Enabled: 1
--- !u!92 &1298207174
Behaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1298207170}
  m_Enabled: 1
--- !u!20 &1298207175
Camera:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1298207170}
  m_Enabled: 1
  serializedVersion: 2
  m_ClearFlags: 1
  m_BackGroundColor: {r: .192156866, g: .301960796, b: .474509805, a: .0196078438}
  m_NormalizedViewPortRect:
    serializedVersion: 2
    x: 0
    y: 0
    width: 1
    height: 1
  near clip plane: .300000012
  far clip plane: 1000
  field of view: 60
  orthographic: 0
  orthographic size: 5
  m_Depth: -1
  m_CullingMask:
    serializedVersion: 2
    m_Bits: 4294967295
  m_RenderingPath: -1
  m_TargetTexture: {fileID: 0}
  m_TargetDisplay: 0
  m_HDR: 0
  m_OcclusionCulling: 1
  m_StereoConvergence: 10
  m_StereoSeparation: .0219999999
--- !u!4 &1298207176
Transform:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1298207170}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 1, z: -10}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_Children: []
  m_Father: {fileID: 0}
  m_RootOrder: 0
--- !u!1 &1361453566
GameObject:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  serializedVersion: 4
  m_Component:
  - 224: {fileID: 1361453569}
  - 222: {fileID: 1361453570}
  - 114: {fileID: 1361453568}
  - 114: {fileID: 1361453567}
  m_Layer: 5
  m_Name: Button
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!114 &1361453567
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1361453566}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 1392445389, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Navigation:
    m_Mode: 3
    m_SelectOnUp: {fileID: 0}
    m_SelectOnDown: {fileID: 0}
    m_SelectOnLeft: {fileID: 0}
    m_SelectOnRight: {fileID: 0}
  m_Transition: 1
  m_Colors:
    m_NormalColor: {r: 1, g: 1, b: 1, a: 1}
    m_HighlightedColor: {r: .960784316, g: .960784316, b: .960784316, a: 1}
    m_PressedColor: {r: .784313738, g: .784313738, b: .784313738, a: 1}
    m_DisabledColor: {r: .784313738, g: .784313738, b: .784313738, a: .501960814}
    m_ColorMultiplier: 1
    m_FadeDuration: .100000001
  m_SpriteState:
    m_HighlightedSprite: {fileID: 0}
    m_PressedSprite: {fileID: 0}
    m_DisabledSprite: {fileID: 0}
  m_AnimationTriggers:
    m_NormalTrigger: Normal
    m_HighlightedTrigger: Highlighted
    m_PressedTrigger: Pressed
    m_DisabledTrigger: Disabled
  m_Interactable: 1
  m_TargetGraphic: {fileID: 1361453568}
  m_OnClick:
    m_PersistentCalls:
      m_Calls: []
    m_TypeName: UnityEngine.UI.Button+ButtonClickedEvent, UnityEngine.UI, Version=1.0.0.0,
      Culture=neutral, PublicKeyToken=null
--- !u!114 &1361453568
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1361453566}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: -765806418, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Material: {fileID: 0}
  m_Color: {r: 1, g: 1, b: 1, a: 1}
  m_Sprite: {fileID: 10905, guid: 0000000000000000f000000000000000, type: 0}
  m_Type: 1
  m_PreserveAspect: 0
  m_FillCenter: 1
  m_FillMethod: 4
  m_FillAmount: 1
  m_FillClockwise: 1
  m_FillOrigin: 0
--- !u!224 &1361453569
RectTransform:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1361453566}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_Children:
  - {fileID: 2054536638}
  m_Father: {fileID: 2134043120}
  m_RootOrder: 0
  m_AnchorMin: {x: .5, y: .5}
  m_AnchorMax: {x: .5, y: .5}
  m_AnchoredPosition: {x: 0, y: 0}
  m_SizeDelta: {x: 160, y: 30}
  m_Pivot: {x: .5, y: .5}
--- !u!222 &1361453570
CanvasRenderer:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 1361453566}
--- !u!1 &2054536635
GameObject:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  serializedVersion: 4
  m_Component:
  - 224: {fileID: 2054536638}
  - 222: {fileID: 2054536637}
  - 114: {fileID: 2054536636}
  m_Layer: 5
  m_Name: Text
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!114 &2054536636
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 2054536635}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 708705254, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_Material: {fileID: 0}
  m_Color: {r: .196078435, g: .196078435, b: .196078435, a: 1}
  m_FontData:
    m_Font: {fileID: 10102, guid: 0000000000000000e000000000000000, type: 0}
    m_FontSize: 14
    m_FontStyle: 0
    m_BestFit: 0
    m_MinSize: 10
    m_MaxSize: 40
    m_Alignment: 4
    m_RichText: 1
    m_HorizontalOverflow: 0
    m_VerticalOverflow: 0
    m_LineSpacing: 1
  m_Text: ClearLog
--- !u!222 &2054536637
CanvasRenderer:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 2054536635}
--- !u!224 &2054536638
RectTransform:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 2054536635}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 1, y: 1, z: 1}
  m_Children: []
  m_Father: {fileID: 1361453569}
  m_RootOrder: 0
  m_AnchorMin: {x: 0, y: 0}
  m_AnchorMax: {x: 1, y: 1}
  m_AnchoredPosition: {x: 0, y: 0}
  m_SizeDelta: {x: 0, y: 0}
  m_Pivot: {x: .5, y: .5}
--- !u!1 &2134043119
GameObject:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  serializedVersion: 4
  m_Component:
  - 224: {fileID: 2134043120}
  - 223: {fileID: 2134043123}
  - 114: {fileID: 2134043122}
  - 114: {fileID: 2134043121}
  m_Layer: 5
  m_Name: Canvas
  m_TagString: Untagged
  m_Icon: {fileID: 0}
  m_NavMeshLayer: 0
  m_StaticEditorFlags: 0
  m_IsActive: 1
--- !u!224 &2134043120
RectTransform:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 2134043119}
  m_LocalRotation: {x: 0, y: 0, z: 0, w: 1}
  m_LocalPosition: {x: 0, y: 0, z: 0}
  m_LocalScale: {x: 0, y: 0, z: 0}
  m_Children:
  - {fileID: 1361453569}
  m_Father: {fileID: 0}
  m_RootOrder: 1
  m_AnchorMin: {x: 0, y: 0}
  m_AnchorMax: {x: 0, y: 0}
  m_AnchoredPosition: {x: 0, y: 0}
  m_SizeDelta: {x: 0, y: 0}
  m_Pivot: {x: 0, y: 0}
--- !u!114 &2134043121
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 2134043119}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 1301386320, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_IgnoreReversedGraphics: 1
  m_BlockingObjects: 0
  m_BlockingMask:
    serializedVersion: 2
    m_Bits: 4294967295
--- !u!114 &2134043122
MonoBehaviour:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 2134043119}
  m_Enabled: 1
  m_EditorHideFlags: 0
  m_Script: {fileID: 1980459831, guid: f5f67c52d1564df4a8936ccd202a3bd8, type: 3}
  m_Name: 
  m_EditorClassIdentifier: 
  m_UiScaleMode: 0
  m_ReferencePixelsPerUnit: 100
  m_ScaleFactor: 1
  m_ReferenceResolution: {x: 800, y: 600}
  m_ScreenMatchMode: 0
  m_MatchWidthOrHeight: 0
  m_PhysicalUnit: 3
  m_FallbackScreenDPI: 96
  m_DefaultSpriteDPI: 96
  m_DynamicPixelsPerUnit: 1
--- !u!223 &2134043123
Canvas:
  m_ObjectHideFlags: 0
  m_PrefabParentObject: {fileID: 0}
  m_PrefabInternal: {fileID: 0}
  m_GameObject: {fileID: 2134043119}
  m_Enabled: 1
  serializedVersion: 2
  m_RenderMode: 0
  m_Camera: {fileID: 0}
  m_PlaneDistance: 100
  m_PixelPerfect: 0
  m_ReceivesEvents: 1
  m_OverrideSorting: 0
  m_OverridePixelPerfect: 0
  m_SortingLayerID: 0
  m_SortingOrder: 0

```

`Assets/Scenes/SampleScene_Unity4.7.unity.meta`:

```meta
fileFormatVersion: 2
guid: 0ac388cc37f87554ebb119be916b476c
DefaultImporter:
  userData: 

```

`Assets/Scripts.meta`:

```meta
fileFormatVersion: 2
guid: db51b176422aa0045b170d2da5888a1b
folderAsset: yes
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/Others.meta`:

```meta
fileFormatVersion: 2
guid: cbc9b1f3b5d2eec43a2e2b58f033a309
folderAsset: yes
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/Others/NativeClass.cs`:

```cs
#if NET6_0
/*
 * Author: Misaka-Mikoto-Tech
 * Desc: 允许在指定内存地址创建一个非托管的 class，不依赖 Emit
 * 
 * eg.
 *      TestA a = Factory<TestB>.Create();
        a.x = 10;

        int val = a.GetX();
        Console.WriteLine(val);
        a.Free();
 */
using System;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace Native
{
    unsafe abstract class NativeClass
    {
        private void* _ptr;
        public void SetPtr(void* ptr)
        {
            if (_ptr != null) throw new Exception("ptr can only be assigned once");
            _ptr = ptr;
        }
        public void Free() { if (_ptr != null) NativeMemory.Free(_ptr); }
    }

    unsafe struct Factory<T> where T : NativeClass, new()
    {
        public static uint size { get; private set; }
        static byte[] header; // vtable *, monitor * and so on

        static readonly Func<IntPtr, T> cast2T;

        /// <summary>
        /// 在指定地址创建对象
        /// </summary>
        /// <param name="ptr"></param>
        /// <returns></returns>
        public static T Create(void * ptr = null)
        {
            if (ptr == null) ptr = NativeMemory.Alloc(size);

            fixed (void* headerPtr = header) Buffer.MemoryCopy(headerPtr, ptr, header.Length, header.Length);

            T ret = cast2T(new IntPtr(ptr));
            ret.SetPtr(ptr);
            return ret;
        }

        public static object GetO_Dummy(object obj)
        {
            return obj;
        }

        static Factory()
        {
            IntPtr tptr = typeof(T).TypeHandle.Value;
            size = (uint)Marshal.ReadInt32(tptr, 4);

            T obj = new T();
            void* pObj = Unsafe.AsPointer(ref obj);

            header = new byte[MinClass.size];
            fixed (void* headerPtr = header)
                Buffer.MemoryCopy((void*)*(long*)pObj, headerPtr, header.Length, header.Length);

            var dummyFunc = GetO_Dummy;
            cast2T = Unsafe.Read<Func<IntPtr, T>>(Unsafe.AsPointer(ref dummyFunc));
        }
    }

    class MinClass
    {
        public static uint size { get; private set; }
        static MinClass()
        {
            IntPtr tptr = typeof(MinClass).TypeHandle.Value;
            size = (uint)Marshal.ReadInt32(tptr, 4);
        }
    }
}
#endif
```

`Assets/Scripts/Others/NativeClass.cs.meta`:

```meta
fileFormatVersion: 2
guid: 8e27007b244b7e64591fd763974c2132
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/TestA.cs`:

```cs
using DotNetDetour;
using System;
using System.IO;
using System.Reflection;
using System.Text;

using UnityEngine;
using UnityEngine.UI;

#if UNITY_EDITOR
using UnityEditor;
#endif

#if ENABLE_HOOK_TEST_CASE
using MonoHook.Test;
#endif

namespace MonoHook
{
    public unsafe class TestA   : MonoBehaviour
    {
        public Button btn, btnDelFile;
        public Text txtInfo;
        public Text txtTestVal;

#region test case
#if ENABLE_HOOK_TEST_CASE

        private int _msgId;

        private void Awake()
        {
            btn.onClick.AddListener(OnBtnTestClick);
            btnDelFile.onClick.AddListener(OnBtnTestDelFileClick);
        }
        private void Start()
        {
            StringBuilder sb = new StringBuilder();
            sb.AppendFormat("pointer size:{0}\r\n", System.IntPtr.Size);
            sb.AppendFormat("is IL2CPP:{0}\r\n", LDasm.IsIL2CPP());
            sb.AppendFormat("operation name:{0}\r\n", SystemInfo.operatingSystem);
            sb.AppendFormat("processorType:{0}\r\n", SystemInfo.processorType);
            sb.AppendLine();
            txtInfo.text = sb.ToString();
        }

        public void OnBtnTestDelFileClick()
        {
#if UNITY_EDITOR
            string fileName = "test.txt";
            string dirPath = "Assets/test_dir";
            string filePath1 = $"Assets/{fileName}";
            string filePath2 = $"{dirPath}/{fileName}";
            {
                File.Create(filePath1).Close();
                File.Delete(filePath1);
            }
            {
                Directory.CreateDirectory(dirPath);
                File.Create(filePath2).Close();
                Directory.Delete(dirPath, true);
            }
            {
                File.Create(filePath1).Close();
                AssetDatabase.Refresh(ImportAssetOptions.ForceUpdate);
                AssetDatabase.DeleteAsset(filePath1);
            }
#else
            Debug.Log("disable DelFile Hook at runtime");
#endif
        }

        public void OnBtnTestClick()
        {
            Debug.Log("Test Begin");

            // 实例方法替换测试
            {
                InstanceMethodTest.InstallPatch();
                InstanceMethodTest.callOriFunc = true;
                InstanceMethodTest InstanceTest = new InstanceMethodTest();
                InstanceTest.Test();
                int ret = InstanceTest.Test();

                int count = 10 * 1000 * 1000;
                string str = $"InstanceMethodTest {count} times, ret: {ret}\r\n";

                DateTime dt = DateTime.Now;
                long val = 0;
                {// patch and call original function
                    for (int i = 0; i < count; i++)
                    {
                        val += InstanceTest.Test();
                    }
                    str += $"patch:      {(int)new TimeSpan(DateTime.Now.Ticks - dt.Ticks).TotalMilliseconds} ms, ret:{val}\r\n";
                }

                {// patch but dont call original function
                    dt = DateTime.Now;
                    val = 0;
                    InstanceMethodTest.callOriFunc = false;
                    for (int i = 0; i < count; i++)
                    {
                        val += InstanceTest.Test();
                    }
                    str += $"patch, no ori call:{(int)new TimeSpan(DateTime.Now.Ticks - dt.Ticks).TotalMilliseconds} ms, ret:{val}\r\n";
                }

                {// no patch
                    InstanceMethodTest.UninstallPatch();
                    dt = DateTime.Now;
                    val = 0;
                    for (int i = 0; i < count; i++)
                    {
                        val += InstanceTest.Test();
                    }
                    str += $"no patch: {(int)new TimeSpan(DateTime.Now.Ticks - dt.Ticks).TotalMilliseconds} ms, ret:{val}";
                }

                txtTestVal.text = str;
            }

            // 属性替换测试
            PropertyHookTest propTest = new PropertyHookTest();
            propTest.Test();

            // 参数类型是私有类型的方法替换测试
            PrivateTypeArgMethodTest privateTypeArgMethodTest = new PrivateTypeArgMethodTest();
            privateTypeArgMethodTest.Test();

            // 构造函数替换测试
            CtorHookTest ctorHookTest = new CtorHookTest();
            ctorHookTest.Test();

            // 测试GameObject.SetActive
            GameObject_SetActive_HookTest.Test(btn.gameObject);

            {// 泛型方法 hook 测试，目前仅支持 il2cpp
                GenericMethod_HookTest.Install();

                GameObject go = GameObject.CreatePrimitive(PrimitiveType.Cube);
                Instantiate((UnityEngine.Object)go);

                GameObject goNew = Instantiate<UnityEngine.Object>(go) as GameObject;
                goNew.name = "hook_go_Instantiate";
                goNew.transform.localPosition = new Vector3(-5f, 0, 0);
                Destroy(go);
                Destroy(goNew);
            }
            Debug.Log("Test End");
        }
#endif
#endregion
    }
}


```

`Assets/Scripts/TestA.cs.meta`:

```meta
fileFormatVersion: 2
guid: d355d1a56940adf4ab1b64a8438bb5ed
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook.meta`:

```meta
fileFormatVersion: 2
guid: cbc9b1f3b5d2eec43a2e2b58e033a309
folderAsset: yes
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/CodePatcher.cs`:

```cs
using DotNetDetour;
using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using System.Linq;

namespace MonoHook
{
    public unsafe abstract class CodePatcher
    {
        public bool isValid { get; protected set; }

        protected void*     _pTarget, _pReplace, _pProxy;
        protected int       _jmpCodeSize;
        protected byte[]    _targetHeaderBackup;

        public CodePatcher(IntPtr target, IntPtr replace, IntPtr proxy, int jmpCodeSize)
        {
            _pTarget        = target.ToPointer();
            _pReplace       = replace.ToPointer();
            _pProxy         = proxy.ToPointer();
            _jmpCodeSize    = jmpCodeSize;
        }

        public void ApplyPatch()
        {
            BackupHeader();
            EnableAddrModifiable();
            PatchTargetMethod();
            PatchProxyMethod();
            FlushICache();
        }

        public void RemovePatch()
        {
            if (_targetHeaderBackup == null)
                return;

            EnableAddrModifiable();
            RestoreHeader();
            FlushICache();
        }

        protected void BackupHeader()
        {
            if (_targetHeaderBackup != null)
                return;

            uint requireSize    = LDasm.SizeofMinNumByte(_pTarget, _jmpCodeSize);
            _targetHeaderBackup = new byte[requireSize];

            fixed (void* ptr = _targetHeaderBackup)
                HookUtils.MemCpy(ptr, _pTarget, _targetHeaderBackup.Length);
        }

        protected void RestoreHeader()
        {
            if (_targetHeaderBackup == null)
                return;

            HookUtils.MemCpy_Jit(_pTarget, _targetHeaderBackup);
        }

        protected void PatchTargetMethod()
        {
            byte[] buff = GenJmpCode(_pTarget, _pReplace);
            HookUtils.MemCpy_Jit(_pTarget, buff);
        }
        protected void PatchProxyMethod()
        {
            if (_pProxy == null)
                return;

            // copy target's code to proxy
            HookUtils.MemCpy_Jit(_pProxy, _targetHeaderBackup);

            // jmp to target's new position
            long jmpFrom    = (long)_pProxy + _targetHeaderBackup.Length;
            long jmpTo      = (long)_pTarget + _targetHeaderBackup.Length;

            byte[] buff = GenJmpCode((void*)jmpFrom, (void*)jmpTo);
            HookUtils.MemCpy_Jit((void*)jmpFrom, buff);
        }

        protected void FlushICache()
        {
            HookUtils.FlushICache(_pTarget, _targetHeaderBackup.Length);
            HookUtils.FlushICache(_pProxy, _targetHeaderBackup.Length * 2);
        }
        protected abstract byte[] GenJmpCode(void* jmpFrom, void* jmpTo);

#if ENABLE_HOOK_DEBUG
        protected string PrintAddrs()
        {
            if (IntPtr.Size == 4)
                return $"target:0x{(uint)_pTarget:x}, replace:0x{(uint)_pReplace:x}, proxy:0x{(uint)_pProxy:x}";
            else
                return $"target:0x{(ulong)_pTarget:x}, replace:0x{(ulong)_pReplace:x}, proxy:0x{(ulong)_pProxy:x}";
        }
#endif

        private void EnableAddrModifiable()
        {
            HookUtils.SetAddrFlagsToRWX(new IntPtr(_pTarget), _targetHeaderBackup.Length);
            HookUtils.SetAddrFlagsToRWX(new IntPtr(_pProxy), _targetHeaderBackup.Length + _jmpCodeSize);
        }
    }

    public unsafe class CodePatcher_x86 : CodePatcher
    {
        protected static readonly byte[] s_jmpCode = new byte[] // 5 bytes
        {
            0xE9, 0x00, 0x00, 0x00, 0x00,                     // jmp $val   ; $val = $dst - $src - 5 
        };

        public CodePatcher_x86(IntPtr target, IntPtr replace, IntPtr proxy) : base(target, replace, proxy, s_jmpCode.Length) { }

        protected override unsafe byte[] GenJmpCode(void* jmpFrom, void* jmpTo)
        {
            byte[] ret = new byte[s_jmpCode.Length];
            int val = (int)jmpTo - (int)jmpFrom - 5;

            fixed(void * p = &ret[0])
            {
                byte* ptr = (byte*)p;
                *ptr = 0xE9;
                int* pOffset = (int*)(ptr + 1);
                *pOffset = val;
            }
            return ret;
        }
    }

    /// <summary>
    /// x64下2G 内的跳转
    /// </summary>
    public unsafe class CodePatcher_x64_near : CodePatcher_x86 // x64_near pathcer code is same to x86
    {
        public CodePatcher_x64_near(IntPtr target, IntPtr replace, IntPtr proxy) : base(target, replace, proxy) { }
    }

    /// <summary>
    /// x64下距离超过2G的跳转
    /// </summary>
    public unsafe class CodePatcher_x64_far : CodePatcher
    {
        protected static readonly byte[] s_jmpCode = new byte[] // 12 bytes
        {
            // 由于 rax 会被函数作为返回值修改，并且不会被做为参数使用，因此修改是安全的
            0x48, 0xB8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,         // mov rax, <jmpTo>
            0x50,                                                               // push rax
            0xC3                                                                // ret
        };

        //protected static readonly byte[] s_jmpCode2 = new byte[] // 14 bytes
        //{
        //    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,       // <jmpTo>
        //    0xFF, 0x25, 0xF2, 0xFF, 0xFF, 0xFF                    // jmp [rip - 0xe]
        //};

        public CodePatcher_x64_far(IntPtr target, IntPtr replace, IntPtr proxy) : base(target, replace, proxy, s_jmpCode.Length) { }
        protected override unsafe byte[] GenJmpCode(void* jmpFrom, void* jmpTo)
        {
            byte[] ret = new byte[s_jmpCode.Length];

            fixed (void* p = &ret[0])
            {
                byte* ptr = (byte*)p;
                *ptr++ = 0x48;
                *ptr++ = 0xB8;
                *(long*)ptr = (long)jmpTo;
                ptr += 8;
                *ptr++ = 0x50;
                *ptr++ = 0xC3;
            }
            return ret;
        }
    }

    public unsafe class CodePatcher_arm32_near : CodePatcher
    {
        private static readonly byte[] s_jmpCode = new byte[]    // 4 bytes
        {
            0x00, 0x00, 0x00, 0xEA,                         // B $val   ; $val = (($dst - $src) / 4 - 2) & 0x1FFFFFF
        };

        public CodePatcher_arm32_near(IntPtr target, IntPtr replace, IntPtr proxy) : base(target, replace, proxy, s_jmpCode.Length)
        {
            if (Math.Abs((long)target - (long)replace) >= ((1 << 25) - 1))
                throw new ArgumentException("address offset of target and replace must less than ((1 << 25) - 1)");

#if ENABLE_HOOK_DEBUG
            Debug.Log($"CodePatcher_arm32_near: {PrintAddrs()}");
#endif
        }

        protected override unsafe byte[] GenJmpCode(void* jmpFrom, void* jmpTo)
        {
            byte[] ret = new byte[s_jmpCode.Length];
            int val = ((int)jmpTo - (int)jmpFrom) / 4 - 2;

            fixed (void* p = &ret[0])
            {
                byte* ptr = (byte*)p;
                *ptr++ = (byte)val;
                *ptr++ = (byte)(val >> 8);
                *ptr++ = (byte)(val >> 16);
                *ptr++ = 0xEA;
            }
            return ret;
        }
    }

    public unsafe class CodePatcher_arm32_far : CodePatcher
    {
        private static readonly byte[] s_jmpCode = new byte[]    // 8 bytes
        {
            0x04, 0xF0, 0x1F, 0xE5,                         // LDR PC, [PC, #-4]
            0x00, 0x00, 0x00, 0x00,                         // $val
        };

        public CodePatcher_arm32_far(IntPtr target, IntPtr replace, IntPtr proxy) : base(target, replace, proxy, s_jmpCode.Length)
        {
            if (Math.Abs((long)target - (long)replace) < ((1 << 25) - 1))
                throw new ArgumentException("address offset of target and replace must larger than ((1 << 25) - 1), please use InstructionModifier_arm32_near instead");

#if ENABLE_HOOK_DEBUG
            Debug.Log($"CodePatcher_arm32_far: {PrintAddrs()}");
#endif
        }

        protected override unsafe byte[] GenJmpCode(void* jmpFrom, void* jmpTo)
        {
            byte[] ret = new byte[s_jmpCode.Length];

            fixed (void* p = &ret[0])
            {
                uint* ptr = (uint*)p;
                *ptr++ = 0xE51FF004;
                *ptr = (uint)jmpTo;
            }
            return ret;
        }
    }

    /// <summary>
    /// arm64 下 ±128MB 范围内的跳转
    /// </summary>
    public unsafe class CodePatcher_arm64_near : CodePatcher
    {
        private static readonly byte[] s_jmpCode = new byte[]    // 4 bytes
        {
            /*
             * from 0x14 to 0x17 is B opcode
             * offset bits is 26
             * https://developer.arm.com/documentation/ddi0596/2021-09/Base-Instructions/B--Branch-
             */
            0x00, 0x00, 0x00, 0x14,                         //  B $val   ; $val = (($dst - $src)/4) & 7FFFFFF
        };

        public CodePatcher_arm64_near(IntPtr target, IntPtr replace, IntPtr proxy) : base(target, replace, proxy, s_jmpCode.Length)
        {
            if (Math.Abs((long)target - (long)replace) >= ((1 << 26) - 1) * 4)
                throw new ArgumentException("address offset of target and replace must less than (1 << 26) - 1) * 4");

#if ENABLE_HOOK_DEBUG
            Debug.Log($"CodePatcher_arm64: {PrintAddrs()}");
#endif
        }

        protected override unsafe byte[] GenJmpCode(void* jmpFrom, void* jmpTo)
        {
            byte[] ret = new byte[s_jmpCode.Length];
            int val = (int)((long)jmpTo - (long)jmpFrom) / 4;

            fixed (void* p = &ret[0])
            {
                byte* ptr = (byte*)p;
                *ptr++ = (byte)val;
                *ptr++ = (byte)(val >> 8);
                *ptr++ = (byte)(val >> 16);

                byte last = (byte)(val >> 24);
                last &= 0b11;
                last |= 0x14;

                *ptr = last;
            }
            return ret;
        }
    }

    /// <summary>
    /// arm64 远距离跳转
    /// </summary>
    public unsafe class CodePatcher_arm64_far : CodePatcher
    {
        private static readonly byte[] s_jmpCode = new byte[]    // 20 bytes(字节数过多，太危险了，不建议使用)
        {
            /*
             * ADR: https://developer.arm.com/documentation/ddi0596/2021-09/Base-Instructions/ADR--Form-PC-relative-address-
             * BR: https://developer.arm.com/documentation/ddi0596/2021-09/Base-Instructions/BR--Branch-to-Register-
             */
            0x6A, 0x00, 0x00, 0x10,                         // ADR X10, #C
            0x4A, 0x01, 0x40, 0xF9,                         // LDR X10, [X10,#0]
            0x40, 0x01, 0x1F, 0xD6,                         // BR X10
            0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00  // $dst
        };

        public CodePatcher_arm64_far(IntPtr target, IntPtr replace, IntPtr proxy, int jmpCodeSize) : base(target, replace, proxy, jmpCodeSize)
        {
        }

        protected override unsafe byte[] GenJmpCode(void* jmpFrom, void* jmpTo)
        {
            throw new NotImplementedException();
        }
    }
}
```

`Assets/Scripts/UnityHook/CodePatcher.cs.meta`:

```meta
fileFormatVersion: 2
guid: 97cc0d26f72fc4148b8370b2252d1585
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/HookPool.cs`:

```cs
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using UnityEngine;
using System.Linq;
using System.IO;
#if UNITY_EDITOR
using UnityEditor;
#endif

namespace MonoHook
{
    /// <summary>
    /// Hook 池，防止重复 Hook
    /// </summary>
    public static class HookPool
    {
        private static Dictionary<MethodBase, MethodHook> _hooks = new Dictionary<MethodBase, MethodHook>();

        public static void AddHook(MethodBase method, MethodHook hook)
        {
            MethodHook preHook;
            if (_hooks.TryGetValue(method, out preHook))
            {
                preHook.Uninstall();
                _hooks[method] = hook;
            }
            else
                _hooks.Add(method, hook);
        }

        public static MethodHook GetHook(MethodBase method)
        {
            if (method == null) return null;

            MethodHook hook;
            if (_hooks.TryGetValue(method, out hook))
                return hook;
            return null;
        }

        public static void RemoveHooker(MethodBase method)
        {
            if (method == null) return;

            _hooks.Remove(method);
        }

        public static void UninstallAll()
        {
            var list = _hooks.Values.ToList();
            foreach (var hook in list)
                hook.Uninstall();

            _hooks.Clear();
        }

        public static void UninstallByTag(string tag)
        {
            var list = _hooks.Values.ToList();
            foreach (var hook in list)
            {
                if(hook.tag == tag)
                    hook.Uninstall();
            }
        }

        public static List<MethodHook> GetAllHooks()
        {
            return _hooks.Values.ToList();
        }
    }

}

```

`Assets/Scripts/UnityHook/HookPool.cs.meta`:

```meta
fileFormatVersion: 2
guid: 6b7421e47f0ae1e4ebb72bf18d1d7d48
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/HookUtils.cs`:

```cs
#if !(UNITY_STANDALONE_OSX || UNITY_EDITOR_OSX)
using System;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Text;
using UnityEngine;

namespace MonoHook
{
    public static unsafe class HookUtils
    {
        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
        delegate void DelegateFlushICache(void* code, int size); // delegate * unmanaged[Cdecl] <void, byte, uint> native_flush_cache_fun_ptr; // unsupported at C# 8.0

        static DelegateFlushICache flush_icache;
        private static readonly long _Pagesize;
        
        static HookUtils()
        {
            PropertyInfo p_SystemPageSize = typeof(Environment).GetProperty("SystemPageSize");
            if (p_SystemPageSize == null)
                throw new NotSupportedException("Unsupported runtime");
            _Pagesize = (int)p_SystemPageSize.GetValue(null, new object[0]);
            SetupFlushICacheFunc();
        }

        public static void MemCpy(void* pDst, void* pSrc, int len)
        {
            byte* pDst_ = (byte*)pDst;
            byte* pSrc_ = (byte*)pSrc;

            for (int i = 0; i < len; i++)
                *pDst_++ = *pSrc_++;
        }

        public static void MemCpy_Jit(void* pDst, byte[] src)
        {
            fixed (void* p = &src[0])
            {
                MemCpy(pDst, p, src.Length);
            }
        }

        /// <summary>
        /// set flags of address to `read write execute`
        /// </summary>
        public static void SetAddrFlagsToRWX(IntPtr ptr, int size)
        {
            if (ptr == IntPtr.Zero)
                return;

#if UNITY_STANDALONE_WIN || UNITY_EDITOR_WIN
            uint oldProtect;
            bool ret = VirtualProtect(ptr, (uint)size, Protection.PAGE_EXECUTE_READWRITE, out oldProtect);
            UnityEngine.Debug.Assert(ret);
#else
            SetMemPerms(ptr,(ulong)size,MmapProts.PROT_READ | MmapProts.PROT_WRITE | MmapProts.PROT_EXEC);
#endif
        }

        public static void FlushICache(void* code, int size)
        {
            if (code == null)
                return;

            flush_icache?.Invoke(code, size);

#if ENABLE_HOOK_DEBUG
            Debug.Log($"flush icache at 0x{(IntPtr.Size == 4 ? (uint)code : (ulong)code):x}, size:{size}");
#endif
        }

        public static KeyValuePair<long, long> GetPageAlignedAddr(long code, int size)
        {
            long pagesize   = _Pagesize;
            long startPage  = (code) & ~(pagesize - 1);
            long endPage    = (code + size + pagesize - 1) & ~(pagesize - 1);
            return new KeyValuePair<long, long>(startPage, endPage);
        }


        const int PRINT_SPLIT = 4;
        const int PRINT_COL_SIZE = PRINT_SPLIT * 4;
        public static string HexToString(void* ptr, int size, int offset = 0)
        {
            Func<IntPtr, string> formatAddr = (IntPtr addr__) => IntPtr.Size == 4 ? $"0x{(uint)addr__:x}" : $"0x{(ulong)addr__:x}";

            byte* addr = (byte*)ptr;

            StringBuilder sb = new StringBuilder(1024);
            sb.AppendLine($"addr:{formatAddr(new IntPtr(addr))}");

            addr += offset;
            size += Math.Abs(offset);

            int count = 0;
            while (true)
            {
                sb.Append($"\r\n{formatAddr(new IntPtr(addr + count))}: ");
                for (int i = 1; i < PRINT_COL_SIZE + 1; i++)
                {
                    if (count >= size)
                        goto END;

                    sb.Append($"{*(addr + count):x2}");
                    if (i % PRINT_SPLIT == 0)
                        sb.Append(" ");

                    count++;
                }
            }
        END:;
            return sb.ToString();
        }

        static void SetupFlushICacheFunc()
        {
            string processorType = SystemInfo.processorType;
            if (processorType.Contains("Intel") || processorType.Contains("AMD"))
                return;

            if (IntPtr.Size == 4)
            {
                // never release, so save GCHandle is unnecessary
                s_ptr_flush_icache_arm32 = GCHandle.Alloc(s_flush_icache_arm32, GCHandleType.Pinned).AddrOfPinnedObject().ToPointer();
                SetAddrFlagsToRWX(new IntPtr(s_ptr_flush_icache_arm32), s_flush_icache_arm32.Length);
                flush_icache = Marshal.GetDelegateForFunctionPointer<DelegateFlushICache>(new IntPtr(s_ptr_flush_icache_arm32));
            }
            else
            {
                s_ptr_flush_icache_arm64 = GCHandle.Alloc(s_flush_icache_arm64, GCHandleType.Pinned).AddrOfPinnedObject().ToPointer();
                SetAddrFlagsToRWX(new IntPtr(s_ptr_flush_icache_arm64), s_flush_icache_arm64.Length);
                flush_icache = Marshal.GetDelegateForFunctionPointer<DelegateFlushICache>(new IntPtr(s_ptr_flush_icache_arm64));
            }

#if ENABLE_HOOK_DEBUG
            Debug.Log($"flush_icache delegate is {((flush_icache != null) ? "not " : "")}null");
#endif
        }


        static void* s_ptr_flush_icache_arm32, s_ptr_flush_icache_arm64;
        private static byte[] s_flush_icache_arm32 = new byte[]
        {
            // void cdecl mono_arch_flush_icache (guint8 *code, gint size)
            0x00, 0x48, 0x2D, 0xE9,                             // PUSH            {R11,LR}
            0x0D, 0xB0, 0xA0, 0xE1,                             // MOV             R11, SP
            0x08, 0xD0, 0x4D, 0xE2,                             // SUB             SP, SP, #8
            0x04, 0x00, 0x8D, 0xE5,                             // STR             R0, [SP,#8+var_4]
            0x00, 0x10, 0x8D, 0xE5,                             // STR             R1, [SP,#8+var_8]
            0x04, 0x00, 0x9D, 0xE5,                             // LDR             R0, [SP,#8+var_4]
            0x04, 0x10, 0x9D, 0xE5,                             // LDR             R1, [SP,#8+var_4]
            0x00, 0x20, 0x9D, 0xE5,                             // LDR             R2, [SP,#8+var_8]
            0x02, 0x10, 0x81, 0xE0,                             // ADD             R1, R1, R2
            0x01, 0x00, 0x00, 0xEB,                             // BL              __clear_cache
            0x0B, 0xD0, 0xA0, 0xE1,                             // MOV             SP, R11
            0x00, 0x88, 0xBD, 0xE8,                             // POP             {R11,PC}

            //                         __clear_cache                           ; CODE XREF: j___clear_cache+8↑j
            0x80, 0x00, 0x2D, 0xE9,                             // PUSH            { R7 }
            0x02, 0x70, 0x00, 0xE3, 0x0F, 0x70, 0x40, 0xE3,     // MOV             R7, #0xF0002
            0x00, 0x20, 0xA0, 0xE3,                             // MOV             R2, #0
            0x00, 0x00, 0x00, 0xEF,                             // SVC             0
            0x80, 0x00, 0xBD, 0xE8,                             // POP             {R7}
            0x1E, 0xFF, 0x2F, 0xE1,                             // BX              LR
        };

        private static byte[] s_flush_icache_arm64 = new byte[] // X0: code, W1: size
        {
            // void cdecl mono_arch_flush_icache (guint8 *code, gint size)
            0xFF, 0xC3, 0x00, 0xD1,                             // SUB             SP, SP, #0x30
            0xE8, 0x03, 0x7E, 0xB2,                             // MOV             X8, #4
            0xE0, 0x17, 0x00, 0xF9,                             // STR             X0, [SP,#0x30+var_8]
            0xE1, 0x27, 0x00, 0xB9,                             // STR             W1, [SP,#0x30+var_C]
            0xE0, 0x17, 0x40, 0xF9,                             // LDR             X0, [SP,#0x30+var_8]
            0xE9, 0x27, 0x80, 0xB9,                             // LDRSW           X9, [SP,#0x30+var_C]
            0x09, 0x00, 0x09, 0x8B,                             // ADD             X9, X0, X9
            0xE9, 0x0F, 0x00, 0xF9,                             // STR             X9, [SP,#0x30+var_18]
            0xE8, 0x07, 0x00, 0xF9,                             // STR             X8, [SP,#0x30+var_28]
            0xE8, 0x03, 0x00, 0xF9,                             // STR             X8, [SP,#0x30+var_30]
            0xE8, 0x17, 0x40, 0xF9,                             // LDR             X8, [SP,#0x30+var_8]
            0x08, 0xF5, 0x7E, 0x92,                             // AND             X8, X8, #0xFFFFFFFFFFFFFFFC
            0xE8, 0x0B, 0x00, 0xF9,                             // STR             X8, [SP,#0x30+var_20]

            //                              loc_590                                 ; CODE XREF: mono_arch_flush_icache(uchar*, int)+58↓j
            0xE8, 0x0B, 0x40, 0xF9,                             // LDR             X8, [SP,#0x30+var_20]
            0xE9, 0x0F, 0x40, 0xF9,                             // LDR             X9, [SP,#0x30+var_18]
            0x1F, 0x01, 0x09, 0xEB,                             // CMP             X8, X9
            0xE2, 0x00, 0x00, 0x54,                             // B.CS            loc_5B8
            0xE8, 0x0B, 0x40, 0xF9,                             // LDR             X8, [SP,#0x30+var_20]
            0x28, 0x7E, 0x0B, 0xD5,                             // SYS             #3, c7, c14, #1, X8
            0xE8, 0x0B, 0x40, 0xF9,                             // LDR             X8, [SP,#0x30+var_20]
            0x08, 0x11, 0x00, 0x91,                             // ADD             X8, X8, #4
            0xE8, 0x0B, 0x00, 0xF9,                             // STR             X8, [SP,#0x30+var_20]
            0xF7, 0xFF, 0xFF, 0x17,                             // B               loc_590
            //                              ; ---------------------------------------------------------------------------

            //                              loc_5B8                                 ; CODE XREF: mono_arch_flush_icache(uchar *, int)+40↑j
            0x9F, 0x3B, 0x03, 0xD5,                             // DSB             ISH
            0xE8, 0x17, 0x40, 0xF9,                             // LDR             X8, [SP,#0x30+var_8]
            0x08, 0xF5, 0x7E, 0x92,                             // AND             X8, X8, #0xFFFFFFFFFFFFFFFC
            0xE8, 0x0B, 0x00, 0xF9,                             // STR             X8, [SP,#0x30+var_20]

            //                              loc_5C8                                 ; CODE XREF: mono_arch_flush_icache(uchar *, int)+90↓j
            0xE8, 0x0B, 0x40, 0xF9,                             // LDR             X8, [SP,#0x30+var_20]
            0xE9, 0x0F, 0x40, 0xF9,                             // LDR             X9, [SP,#0x30+var_18]
            0x1F, 0x01, 0x09, 0xEB,                             // CMP             X8, X9
            0xE2, 0x00, 0x00, 0x54,                             // B.CS            loc_5F0
            0xE8, 0x0B, 0x40, 0xF9,                             // LDR             X8, [SP,#0x30+var_20]
            0x28, 0x75, 0x0B, 0xD5,                             // SYS             #3, c7, c5, #1, X8
            0xE8, 0x0B, 0x40, 0xF9,                             // LDR             X8, [SP,#0x30+var_20]
            0x08, 0x11, 0x00, 0x91,                             // ADD             X8, X8, #4
            0xE8, 0x0B, 0x00, 0xF9,                             // STR             X8, [SP,#0x30+var_20]
            0xF7, 0xFF, 0xFF, 0x17,                             // B               loc_5C8
            //                               ; ---------------------------------------------------------------------------

            //                               loc_5F0                                 ; CODE XREF: mono_arch_flush_icache(uchar *, int)+78↑j
            0x9F, 0x3B, 0x03, 0xD5,                             // DSB             ISH
            0xDF, 0x3F, 0x03, 0xD5,                             // ISB
            0xFF, 0xC3, 0x00, 0x91,                             // ADD             SP, SP, #0x30 ; '0'
            0xC0, 0x03, 0x5F, 0xD6,                             // RET
        };


#if UNITY_STANDALONE_WIN || UNITY_EDITOR_WIN
        [Flags]
        public enum Protection
        {
            PAGE_NOACCESS = 0x01,
            PAGE_READONLY = 0x02,
            PAGE_READWRITE = 0x04,
            PAGE_WRITECOPY = 0x08,
            PAGE_EXECUTE = 0x10,
            PAGE_EXECUTE_READ = 0x20,
            PAGE_EXECUTE_READWRITE = 0x40,
            PAGE_EXECUTE_WRITECOPY = 0x80,
            PAGE_GUARD = 0x100,
            PAGE_NOCACHE = 0x200,
            PAGE_WRITECOMBINE = 0x400
        }

        [DllImport("kernel32")]
        public static extern bool VirtualProtect(IntPtr lpAddress, uint dwSize, Protection flNewProtect, out uint lpflOldProtect);

#else
        [Flags]
        public enum MmapProts : int {
            PROT_READ       = 0x1,
            PROT_WRITE      = 0x2,
            PROT_EXEC       = 0x4,
            PROT_NONE       = 0x0,
            PROT_GROWSDOWN  = 0x01000000,
            PROT_GROWSUP    = 0x02000000,
        }

        [DllImport("libc", SetLastError = true, CallingConvention = CallingConvention.Cdecl)]
        private static extern int mprotect(IntPtr start, IntPtr len, MmapProts prot);
    
        public static unsafe void SetMemPerms(IntPtr start, ulong len, MmapProts prot) {
            var requiredAddr = GetPageAlignedAddr(start.ToInt64(), (int)len);
            long startPage = requiredAddr.Key;
            long endPage = requiredAddr.Value;

            if (mprotect((IntPtr) startPage, (IntPtr) (endPage - startPage), prot) != 0)
                throw new Exception($"mprotect with prot:{prot} fail!");
        }
#endif
    }
}

#endif
```

`Assets/Scripts/UnityHook/HookUtils.cs.meta`:

```meta
fileFormatVersion: 2
guid: e84139b42a6164e4c93ce4df1be6dcfb
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/HookUtils_OSX.cs`:

```cs
#if (UNITY_STANDALONE_OSX || UNITY_EDITOR_OSX)
using System;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Text;
using UnityEngine;

namespace MonoHook
{
    public static unsafe class HookUtils
    {
        static bool jit_write_protect_supported;
        private static readonly long _Pagesize;


        static HookUtils()
        {
            try
            {
                jit_write_protect_supported = pthread_jit_write_protect_supported_np() != 0;
            }
            catch { }

            PropertyInfo p_SystemPageSize = typeof(Environment).GetProperty("SystemPageSize");
            if (p_SystemPageSize == null)
                throw new NotSupportedException("Unsupported runtime");
            _Pagesize = (int)p_SystemPageSize.GetValue(null, new object[0]);
        }

        public static void MemCpy(void* pDst, void* pSrc, int len)
        {
            byte* pDst_ = (byte*)pDst;
            byte* pSrc_ = (byte*)pSrc;

            for (int i = 0; i < len; i++)
                *pDst_++ = *pSrc_++;
        }

        public static void MemCpy_Jit(void* pDst, byte[] src)
        {
            if (!jit_write_protect_supported)
            {
                fixed(void * pSrc = &src[0])
                {
                    MemCpy(pDst, pSrc, src.Length);
                }

                return;
            }
            
            fixed(void * p = &src[0])
            {
                memcpy_jit(new IntPtr(pDst), new IntPtr(p), src.Length);
            }
        }

        /// <summary>
        /// set flags of address to `read write execute`
        /// </summary>
        public static void SetAddrFlagsToRWX(IntPtr ptr, int size) { }

        public static void FlushICache(void* code, int size) { }

        public static KeyValuePair<long, long> GetPageAlignedAddr(long code, int size)
        {
            long pagesize = _Pagesize;
            long startPage = (code) & ~(pagesize - 1);
            long endPage = (code + size + pagesize - 1) & ~(pagesize - 1);
            return new KeyValuePair<long, long>(startPage, endPage);
        }


        const int PRINT_SPLIT = 4;
        const int PRINT_COL_SIZE = PRINT_SPLIT * 4;
        public static string HexToString(void* ptr, int size, int offset = 0)
        {
            Func<IntPtr, string> formatAddr = (IntPtr addr__) => IntPtr.Size == 4 ? $"0x{(uint)addr__:x}" : $"0x{(ulong)addr__:x}";

            byte* addr = (byte*)ptr;

            StringBuilder sb = new StringBuilder(1024);
            sb.AppendLine($"addr:{formatAddr(new IntPtr(addr))}");

            addr += offset;
            size += Math.Abs(offset);

            int count = 0;
            while (true)
            {
                sb.Append($"\r\n{formatAddr(new IntPtr(addr + count))}: ");
                for (int i = 1; i < PRINT_COL_SIZE + 1; i++)
                {
                    if (count >= size)
                        goto END;

                    sb.Append($"{*(addr + count):x2}");
                    if (i % PRINT_SPLIT == 0)
                        sb.Append(" ");

                    count++;
                }
            }
        END:;
            return sb.ToString();
        }

        [DllImport("pthread", SetLastError = true, CallingConvention = CallingConvention.Cdecl)]
        private static extern int pthread_jit_write_protect_supported_np();

        [DllImport("libMonoHookUtils_OSX", SetLastError = true, CallingConvention = CallingConvention.Cdecl)]
        private static extern IntPtr memcpy_jit(IntPtr dst, IntPtr src, int len);
    }
}

#endif
```

`Assets/Scripts/UnityHook/HookUtils_OSX.cs.meta`:

```meta
fileFormatVersion: 2
guid: efda6e010e5c6594081c4a62861d469f
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/LDasm.cs`:

```cs
using System;
using System.Runtime.InteropServices;

namespace DotNetDetour
{
    /// <summary>
    /// 用于计算汇编指令长度，使用的是BlackBone的LDasm.c中的算法，我把他翻译成C#了
    /// </summary>
    public unsafe class LDasm
    {
        const int F_INVALID = 0x01;
        const int F_PREFIX = 0x02;
        const int F_REX = 0x04;
        const int F_MODRM = 0x08;
        const int F_SIB = 0x10;
        const int F_DISP = 0x20;
        const int F_IMM = 0x40;
        const int F_RELATIVE = 0x80;

        const int OP_NONE = 0x00;
        const int OP_INVALID = 0x80;

        const int OP_DATA_I8 = 0x01;
        const int OP_DATA_I16 = 0x02;
        const int OP_DATA_I16_I32 = 0x04;
        const int OP_DATA_I16_I32_I64 = 0x08;
        const int OP_EXTENDED = 0x10;
        const int OP_RELATIVE = 0x20;
        const int OP_MODRM = 0x40;
        const int OP_PREFIX = 0x80;

        struct ldasm_data
        {
            public byte flags;
            public byte rex;
            public byte modrm;
            public byte sib;
            public byte opcd_offset;
            public byte opcd_size;
            public byte disp_offset;
            public byte disp_size;
            public byte imm_offset;
            public byte imm_size;
        }

        static byte[] flags_table =
        {
            /* 00 */    OP_MODRM,
            /* 01 */    OP_MODRM,
            /* 02 */    OP_MODRM,
            /* 03 */    OP_MODRM,
            /* 04 */    OP_DATA_I8,
            /* 05 */    OP_DATA_I16_I32,
            /* 06 */    OP_NONE,
            /* 07 */    OP_NONE,
            /* 08 */    OP_MODRM,
            /* 09 */    OP_MODRM,
            /* 0A */    OP_MODRM,
            /* 0B */    OP_MODRM,
            /* 0C */    OP_DATA_I8,
            /* 0D */    OP_DATA_I16_I32,
            /* 0E */    OP_NONE,
            /* 0F */    OP_NONE,
    
            /* 10 */    OP_MODRM,
            /* 11 */    OP_MODRM,
            /* 12 */    OP_MODRM,
            /* 13 */    OP_MODRM,
            /* 14 */    OP_DATA_I8,
            /* 15 */    OP_DATA_I16_I32,
            /* 16 */    OP_NONE,
            /* 17 */    OP_NONE,
            /* 18 */    OP_MODRM,
            /* 19 */    OP_MODRM,
            /* 1A */    OP_MODRM,
            /* 1B */    OP_MODRM,
            /* 1C */    OP_DATA_I8,
            /* 1D */    OP_DATA_I16_I32,
            /* 1E */    OP_NONE,
            /* 1F */    OP_NONE,
    
            /* 20 */    OP_MODRM,
            /* 21 */    OP_MODRM,
            /* 22 */    OP_MODRM,
            /* 23 */    OP_MODRM,
            /* 24 */    OP_DATA_I8,
            /* 25 */    OP_DATA_I16_I32,
            /* 26 */    OP_PREFIX,
            /* 27 */    OP_NONE,
            /* 28 */    OP_MODRM,
            /* 29 */    OP_MODRM,
            /* 2A */    OP_MODRM,
            /* 2B */    OP_MODRM,
            /* 2C */    OP_DATA_I8,
            /* 2D */    OP_DATA_I16_I32,
            /* 2E */    OP_PREFIX,
            /* 2F */    OP_NONE,
    
            /* 30 */    OP_MODRM,
            /* 31 */    OP_MODRM,
            /* 32 */    OP_MODRM,
            /* 33 */    OP_MODRM,
            /* 34 */    OP_DATA_I8,
            /* 35 */    OP_DATA_I16_I32,
            /* 36 */    OP_PREFIX,
            /* 37 */    OP_NONE,
            /* 38 */    OP_MODRM,
            /* 39 */    OP_MODRM,
            /* 3A */    OP_MODRM,
            /* 3B */    OP_MODRM,
            /* 3C */    OP_DATA_I8,
            /* 3D */    OP_DATA_I16_I32,
            /* 3E */    OP_PREFIX,
            /* 3F */    OP_NONE,
    
            /* 40 */    OP_NONE,
            /* 41 */    OP_NONE,
            /* 42 */    OP_NONE,
            /* 43 */    OP_NONE,
            /* 44 */    OP_NONE,
            /* 45 */    OP_NONE,
            /* 46 */    OP_NONE,
            /* 47 */    OP_NONE,
            /* 48 */    OP_NONE,
            /* 49 */    OP_NONE,
            /* 4A */    OP_NONE,
            /* 4B */    OP_NONE,
            /* 4C */    OP_NONE,
            /* 4D */    OP_NONE,
            /* 4E */    OP_NONE,
            /* 4F */    OP_NONE,
    
            /* 50 */    OP_NONE,
            /* 51 */    OP_NONE,
            /* 52 */    OP_NONE,
            /* 53 */    OP_NONE,
            /* 54 */    OP_NONE,
            /* 55 */    OP_NONE,
            /* 56 */    OP_NONE,
            /* 57 */    OP_NONE,
            /* 58 */    OP_NONE,
            /* 59 */    OP_NONE,
            /* 5A */    OP_NONE,
            /* 5B */    OP_NONE,
            /* 5C */    OP_NONE,
            /* 5D */    OP_NONE,
            /* 5E */    OP_NONE,
            /* 5F */    OP_NONE,
            /* 60 */    OP_NONE,
    
            /* 61 */    OP_NONE,
            /* 62 */    OP_MODRM,
            /* 63 */    OP_MODRM,
            /* 64 */    OP_PREFIX,
            /* 65 */    OP_PREFIX,
            /* 66 */    OP_PREFIX,
            /* 67 */    OP_PREFIX,
            /* 68 */    OP_DATA_I16_I32,
            /* 69 */    OP_MODRM | OP_DATA_I16_I32,
            /* 6A */    OP_DATA_I8,
            /* 6B */    OP_MODRM | OP_DATA_I8,
            /* 6C */    OP_NONE,
            /* 6D */    OP_NONE,
            /* 6E */    OP_NONE,
            /* 6F */    OP_NONE,
    
            /* 70 */    OP_RELATIVE | OP_DATA_I8,
            /* 71 */    OP_RELATIVE | OP_DATA_I8,
            /* 72 */    OP_RELATIVE | OP_DATA_I8,
            /* 73 */    OP_RELATIVE | OP_DATA_I8,
            /* 74 */    OP_RELATIVE | OP_DATA_I8,
            /* 75 */    OP_RELATIVE | OP_DATA_I8,
            /* 76 */    OP_RELATIVE | OP_DATA_I8,
            /* 77 */    OP_RELATIVE | OP_DATA_I8,
            /* 78 */    OP_RELATIVE | OP_DATA_I8,
            /* 79 */    OP_RELATIVE | OP_DATA_I8,
            /* 7A */    OP_RELATIVE | OP_DATA_I8,
            /* 7B */    OP_RELATIVE | OP_DATA_I8,
            /* 7C */    OP_RELATIVE | OP_DATA_I8,
            /* 7D */    OP_RELATIVE | OP_DATA_I8,
            /* 7E */    OP_RELATIVE | OP_DATA_I8,
            /* 7F */    OP_RELATIVE | OP_DATA_I8,
    
            /* 80 */    OP_MODRM | OP_DATA_I8,
            /* 81 */    OP_MODRM | OP_DATA_I16_I32,
            /* 82 */    OP_MODRM | OP_DATA_I8,
            /* 83 */    OP_MODRM | OP_DATA_I8,
            /* 84 */    OP_MODRM,
            /* 85 */    OP_MODRM,
            /* 86 */    OP_MODRM,
            /* 87 */    OP_MODRM,
            /* 88 */    OP_MODRM,
            /* 89 */    OP_MODRM,
            /* 8A */    OP_MODRM,
            /* 8B */    OP_MODRM,
            /* 8C */    OP_MODRM,
            /* 8D */    OP_MODRM,
            /* 8E */    OP_MODRM,
            /* 8F */    OP_MODRM,
    
            /* 90 */    OP_NONE,
            /* 91 */    OP_NONE,
            /* 92 */    OP_NONE,
            /* 93 */    OP_NONE,
            /* 94 */    OP_NONE,
            /* 95 */    OP_NONE,
            /* 96 */    OP_NONE,
            /* 97 */    OP_NONE,
            /* 98 */    OP_NONE,
            /* 99 */    OP_NONE,
            /* 9A */    OP_DATA_I16 | OP_DATA_I16_I32,
            /* 9B */    OP_NONE,
            /* 9C */    OP_NONE,
            /* 9D */    OP_NONE,
            /* 9E */    OP_NONE,
            /* 9F */    OP_NONE,
    
            /* A0 */    OP_DATA_I8,
            /* A1 */    OP_DATA_I16_I32_I64,
            /* A2 */    OP_DATA_I8,
            /* A3 */    OP_DATA_I16_I32_I64,
            /* A4 */    OP_NONE,
            /* A5 */    OP_NONE,
            /* A6 */    OP_NONE,
            /* A7 */    OP_NONE,
            /* A8 */    OP_DATA_I8,
            /* A9 */    OP_DATA_I16_I32,
            /* AA */    OP_NONE,
            /* AB */    OP_NONE,
            /* AC */    OP_NONE,
            /* AD */    OP_NONE,
            /* AE */    OP_NONE,
            /* AF */    OP_NONE,
    
            /* B0 */    OP_DATA_I8,
            /* B1 */    OP_DATA_I8,
            /* B2 */    OP_DATA_I8,
            /* B3 */    OP_DATA_I8,
            /* B4 */    OP_DATA_I8,
            /* B5 */    OP_DATA_I8,
            /* B6 */    OP_DATA_I8,
            /* B7 */    OP_DATA_I8,
            /* B8 */    OP_DATA_I16_I32_I64,
            /* B9 */    OP_DATA_I16_I32_I64,
            /* BA */    OP_DATA_I16_I32_I64,
            /* BB */    OP_DATA_I16_I32_I64,
            /* BC */    OP_DATA_I16_I32_I64,
            /* BD */    OP_DATA_I16_I32_I64,
            /* BE */    OP_DATA_I16_I32_I64,
            /* BF */    OP_DATA_I16_I32_I64,
    
            /* C0 */    OP_MODRM | OP_DATA_I8,
            /* C1 */    OP_MODRM | OP_DATA_I8,
            /* C2 */    OP_DATA_I16,
            /* C3 */    OP_NONE,
            /* C4 */    OP_MODRM,
            /* C5 */    OP_MODRM,
            /* C6 */    OP_MODRM | OP_DATA_I8,
            /* C7 */    OP_MODRM | OP_DATA_I16_I32,
            /* C8 */    OP_DATA_I8 | OP_DATA_I16,
            /* C9 */    OP_NONE,
            /* CA */    OP_DATA_I16,
            /* CB */    OP_NONE,
            /* CC */    OP_NONE,
            /* CD */    OP_DATA_I8,
            /* CE */    OP_NONE,
            /* CF */    OP_NONE,
    
            /* D0 */    OP_MODRM,
            /* D1 */    OP_MODRM,
            /* D2 */    OP_MODRM,
            /* D3 */    OP_MODRM,
            /* D4 */    OP_DATA_I8,
            /* D5 */    OP_DATA_I8,
            /* D6 */    OP_NONE,
            /* D7 */    OP_NONE,
            /* D8 */    OP_MODRM,
            /* D9 */    OP_MODRM,
            /* DA */    OP_MODRM,
            /* DB */    OP_MODRM,
            /* DC */    OP_MODRM,
            /* DD */    OP_MODRM,
            /* DE */    OP_MODRM,
            /* DF */    OP_MODRM,
    
            /* E0 */    OP_RELATIVE | OP_DATA_I8,
            /* E1 */    OP_RELATIVE | OP_DATA_I8,
            /* E2 */    OP_RELATIVE | OP_DATA_I8,
            /* E3 */    OP_RELATIVE | OP_DATA_I8,
            /* E4 */    OP_DATA_I8,
            /* E5 */    OP_DATA_I8,
            /* E6 */    OP_DATA_I8,
            /* E7 */    OP_DATA_I8,
            /* E8 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* E9 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* EA */    OP_DATA_I16 | OP_DATA_I16_I32,
            /* EB */    OP_RELATIVE | OP_DATA_I8,
            /* EC */    OP_NONE,
            /* ED */    OP_NONE,
            /* EE */    OP_NONE,
            /* EF */    OP_NONE,
    
            /* F0 */    OP_PREFIX,
            /* F1 */    OP_NONE,
            /* F2 */    OP_PREFIX,
            /* F3 */    OP_PREFIX,
            /* F4 */    OP_NONE,
            /* F5 */    OP_NONE,
            /* F6 */    OP_MODRM,
            /* F7 */    OP_MODRM,
            /* F8 */    OP_NONE,
            /* F9 */    OP_NONE,
            /* FA */    OP_NONE,
            /* FB */    OP_NONE,
            /* FC */    OP_NONE,
            /* FD */    OP_NONE,
            /* FE */    OP_MODRM,
            /* FF */    OP_MODRM
        };

        static byte[] flags_table_ex =
        {
            /* 0F00 */    OP_MODRM,
            /* 0F01 */    OP_MODRM,
            /* 0F02 */    OP_MODRM,
            /* 0F03 */    OP_MODRM,
            /* 0F04 */    OP_INVALID,
            /* 0F05 */    OP_NONE,
            /* 0F06 */    OP_NONE,
            /* 0F07 */    OP_NONE,
            /* 0F08 */    OP_NONE,
            /* 0F09 */    OP_NONE,
            /* 0F0A */    OP_INVALID,
            /* 0F0B */    OP_NONE,
            /* 0F0C */    OP_INVALID,
            /* 0F0D */    OP_MODRM,
            /* 0F0E */    OP_INVALID,
            /* 0F0F */    OP_MODRM | OP_DATA_I8,        //3Dnow
    
            /* 0F10 */    OP_MODRM,
            /* 0F11 */    OP_MODRM,
            /* 0F12 */    OP_MODRM,
            /* 0F13 */    OP_MODRM,
            /* 0F14 */    OP_MODRM,
            /* 0F15 */    OP_MODRM,
            /* 0F16 */    OP_MODRM,
            /* 0F17 */    OP_MODRM,
            /* 0F18 */    OP_MODRM,
            /* 0F19 */    OP_INVALID,
            /* 0F1A */    OP_INVALID,
            /* 0F1B */    OP_INVALID,
            /* 0F1C */    OP_INVALID,
            /* 0F1D */    OP_INVALID,
            /* 0F1E */    OP_INVALID,
            /* 0F1F */    OP_NONE,
    
            /* 0F20 */    OP_MODRM,
            /* 0F21 */    OP_MODRM,
            /* 0F22 */    OP_MODRM,
            /* 0F23 */    OP_MODRM,
            /* 0F24 */    OP_MODRM | OP_EXTENDED,        //SSE5
            /* 0F25 */    OP_INVALID,
            /* 0F26 */    OP_MODRM,
            /* 0F27 */    OP_INVALID,
            /* 0F28 */    OP_MODRM,
            /* 0F29 */    OP_MODRM,
            /* 0F2A */    OP_MODRM,
            /* 0F2B */    OP_MODRM,
            /* 0F2C */    OP_MODRM,
            /* 0F2D */    OP_MODRM,
            /* 0F2E */    OP_MODRM,
            /* 0F2F */    OP_MODRM,
    
            /* 0F30 */    OP_NONE,
            /* 0F31 */    OP_NONE,
            /* 0F32 */    OP_NONE,
            /* 0F33 */    OP_NONE,
            /* 0F34 */    OP_NONE,
            /* 0F35 */    OP_NONE,
            /* 0F36 */    OP_INVALID,
            /* 0F37 */    OP_NONE,
            /* 0F38 */    OP_MODRM | OP_EXTENDED, 
            /* 0F39 */    OP_INVALID,
            /* 0F3A */    OP_MODRM | OP_EXTENDED | OP_DATA_I8,
            /* 0F3B */    OP_INVALID,
            /* 0F3C */    OP_INVALID,
            /* 0F3D */    OP_INVALID,
            /* 0F3E */    OP_INVALID,
            /* 0F3F */    OP_INVALID,
    
            /* 0F40 */    OP_MODRM,
            /* 0F41 */    OP_MODRM,
            /* 0F42 */    OP_MODRM,
            /* 0F43 */    OP_MODRM,
            /* 0F44 */    OP_MODRM,
            /* 0F45 */    OP_MODRM,
            /* 0F46 */    OP_MODRM,
            /* 0F47 */    OP_MODRM,
            /* 0F48 */    OP_MODRM,
            /* 0F49 */    OP_MODRM,
            /* 0F4A */    OP_MODRM,
            /* 0F4B */    OP_MODRM,
            /* 0F4C */    OP_MODRM,
            /* 0F4D */    OP_MODRM,
            /* 0F4E */    OP_MODRM,
            /* 0F4F */    OP_MODRM,
    
            /* 0F50 */    OP_MODRM,
            /* 0F51 */    OP_MODRM,
            /* 0F52 */    OP_MODRM,
            /* 0F53 */    OP_MODRM,
            /* 0F54 */    OP_MODRM,
            /* 0F55 */    OP_MODRM,
            /* 0F56 */    OP_MODRM,
            /* 0F57 */    OP_MODRM,
            /* 0F58 */    OP_MODRM,
            /* 0F59 */    OP_MODRM,
            /* 0F5A */    OP_MODRM,
            /* 0F5B */    OP_MODRM,
            /* 0F5C */    OP_MODRM,
            /* 0F5D */    OP_MODRM,
            /* 0F5E */    OP_MODRM,
            /* 0F5F */    OP_MODRM,
    
            /* 0F60 */    OP_MODRM,
            /* 0F61 */    OP_MODRM,
            /* 0F62 */    OP_MODRM,
            /* 0F63 */    OP_MODRM,
            /* 0F64 */    OP_MODRM,
            /* 0F65 */    OP_MODRM,
            /* 0F66 */    OP_MODRM,
            /* 0F67 */    OP_MODRM,
            /* 0F68 */    OP_MODRM,
            /* 0F69 */    OP_MODRM,
            /* 0F6A */    OP_MODRM,
            /* 0F6B */    OP_MODRM,
            /* 0F6C */    OP_MODRM,
            /* 0F6D */    OP_MODRM,
            /* 0F6E */    OP_MODRM,
            /* 0F6F */    OP_MODRM,
    
            /* 0F70 */    OP_MODRM | OP_DATA_I8,
            /* 0F71 */    OP_MODRM | OP_DATA_I8,
            /* 0F72 */    OP_MODRM | OP_DATA_I8,
            /* 0F73 */    OP_MODRM | OP_DATA_I8,
            /* 0F74 */    OP_MODRM,
            /* 0F75 */    OP_MODRM,
            /* 0F76 */    OP_MODRM,
            /* 0F77 */    OP_NONE,
            /* 0F78 */    OP_MODRM,
            /* 0F79 */    OP_MODRM,
            /* 0F7A */    OP_INVALID,
            /* 0F7B */    OP_INVALID,
            /* 0F7C */    OP_MODRM,
            /* 0F7D */    OP_MODRM,
            /* 0F7E */    OP_MODRM,
            /* 0F7F */    OP_MODRM,
    
            /* 0F80 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F81 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F82 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F83 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F84 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F85 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F86 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F87 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F88 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F89 */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F8A */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F8B */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F8C */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F8D */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F8E */    OP_RELATIVE | OP_DATA_I16_I32,
            /* 0F8F */    OP_RELATIVE | OP_DATA_I16_I32,
    
            /* 0F90 */    OP_MODRM,
            /* 0F91 */    OP_MODRM,
            /* 0F92 */    OP_MODRM,
            /* 0F93 */    OP_MODRM,
            /* 0F94 */    OP_MODRM,
            /* 0F95 */    OP_MODRM,
            /* 0F96 */    OP_MODRM,
            /* 0F97 */    OP_MODRM,
            /* 0F98 */    OP_MODRM,
            /* 0F99 */    OP_MODRM,
            /* 0F9A */    OP_MODRM,
            /* 0F9B */    OP_MODRM,
            /* 0F9C */    OP_MODRM,
            /* 0F9D */    OP_MODRM,
            /* 0F9E */    OP_MODRM,
            /* 0F9F */    OP_MODRM,
    
            /* 0FA0 */    OP_NONE,
            /* 0FA1 */    OP_NONE,
            /* 0FA2 */    OP_NONE,
            /* 0FA3 */    OP_MODRM,
            /* 0FA4 */    OP_MODRM | OP_DATA_I8,
            /* 0FA5 */    OP_MODRM,
            /* 0FA6 */    OP_INVALID,
            /* 0FA7 */    OP_INVALID,
            /* 0FA8 */    OP_NONE,
            /* 0FA9 */    OP_NONE,
            /* 0FAA */    OP_NONE,
            /* 0FAB */    OP_MODRM,
            /* 0FAC */    OP_MODRM | OP_DATA_I8,
            /* 0FAD */    OP_MODRM,
            /* 0FAE */    OP_MODRM,
            /* 0FAF */    OP_MODRM,
    
            /* 0FB0 */    OP_MODRM,
            /* 0FB1 */    OP_MODRM,
            /* 0FB2 */    OP_MODRM,
            /* 0FB3 */    OP_MODRM,
            /* 0FB4 */    OP_MODRM,
            /* 0FB5 */    OP_MODRM,
            /* 0FB6 */    OP_MODRM,
            /* 0FB7 */    OP_MODRM,
            /* 0FB8 */    OP_MODRM,
            /* 0FB9 */    OP_MODRM,
            /* 0FBA */    OP_MODRM | OP_DATA_I8,
            /* 0FBB */    OP_MODRM,
            /* 0FBC */    OP_MODRM,
            /* 0FBD */    OP_MODRM,
            /* 0FBE */    OP_MODRM,
            /* 0FBF */    OP_MODRM,
    
            /* 0FC0 */    OP_MODRM,
            /* 0FC1 */    OP_MODRM,
            /* 0FC2 */    OP_MODRM | OP_DATA_I8,
            /* 0FC3 */    OP_MODRM,
            /* 0FC4 */    OP_MODRM | OP_DATA_I8,
            /* 0FC5 */    OP_MODRM | OP_DATA_I8,
            /* 0FC6 */    OP_MODRM | OP_DATA_I8,
            /* 0FC7 */    OP_MODRM,
            /* 0FC8 */    OP_NONE,
            /* 0FC9 */    OP_NONE,
            /* 0FCA */    OP_NONE,
            /* 0FCB */    OP_NONE,
            /* 0FCC */    OP_NONE,
            /* 0FCD */    OP_NONE,
            /* 0FCE */    OP_NONE,
            /* 0FCF */    OP_NONE,
    
            /* 0FD0 */    OP_MODRM,
            /* 0FD1 */    OP_MODRM,
            /* 0FD2 */    OP_MODRM,
            /* 0FD3 */    OP_MODRM,
            /* 0FD4 */    OP_MODRM,
            /* 0FD5 */    OP_MODRM,
            /* 0FD6 */    OP_MODRM,
            /* 0FD7 */    OP_MODRM,
            /* 0FD8 */    OP_MODRM,
            /* 0FD9 */    OP_MODRM,
            /* 0FDA */    OP_MODRM,
            /* 0FDB */    OP_MODRM,
            /* 0FDC */    OP_MODRM,
            /* 0FDD */    OP_MODRM,
            /* 0FDE */    OP_MODRM,
            /* 0FDF */    OP_MODRM,
    
            /* 0FE0 */    OP_MODRM,
            /* 0FE1 */    OP_MODRM,
            /* 0FE2 */    OP_MODRM,
            /* 0FE3 */    OP_MODRM,
            /* 0FE4 */    OP_MODRM,
            /* 0FE5 */    OP_MODRM,
            /* 0FE6 */    OP_MODRM,
            /* 0FE7 */    OP_MODRM,
            /* 0FE8 */    OP_MODRM,
            /* 0FE9 */    OP_MODRM,
            /* 0FEA */    OP_MODRM,
            /* 0FEB */    OP_MODRM,
            /* 0FEC */    OP_MODRM,
            /* 0FED */    OP_MODRM,
            /* 0FEE */    OP_MODRM,
            /* 0FEF */    OP_MODRM,
    
            /* 0FF0 */    OP_MODRM,
            /* 0FF1 */    OP_MODRM,
            /* 0FF2 */    OP_MODRM,
            /* 0FF3 */    OP_MODRM,
            /* 0FF4 */    OP_MODRM,
            /* 0FF5 */    OP_MODRM,
            /* 0FF6 */    OP_MODRM,
            /* 0FF7 */    OP_MODRM,
            /* 0FF8 */    OP_MODRM,
            /* 0FF9 */    OP_MODRM,
            /* 0FFA */    OP_MODRM,
            /* 0FFB */    OP_MODRM,
            /* 0FFC */    OP_MODRM,
            /* 0FFD */    OP_MODRM,
            /* 0FFE */    OP_MODRM,
            /* 0FFF */    OP_INVALID,
        };

        static byte cflags(byte op)
        {
            return flags_table[op];
        }

        static byte cflags_ex(byte op)
        {
            return flags_table_ex[op];
        }

        /// <summary>
        /// 计算大于等于 size 字节的最少指令的长度
        /// </summary>
        /// <param name="code"></param>
        /// <returns></returns>
        public static uint SizeofMinNumByte(void* code, int size)
        {
            if (IsARM())
                return (uint)((size + 3) / 4) * 4; // 此为 jit 模式下的长度，不再支持 thumb

            uint Length;
            byte* pOpcode;
            uint Result = 0;
            ldasm_data data = new ldasm_data();
            bool is64 = IntPtr.Size == 8;
            do
            {
                Length = ldasm(code, data, is64);

                pOpcode = (byte*)code + data.opcd_offset;
                Result += Length;
                if (Result >= size)
                    break;
                if ((Length == 1) && (*pOpcode == 0xCC))
                    break;

                code = (void*)((ulong)code + Length);

            } while (Length>0);

            return Result;
        }

        static bool? s_isArm;
        public static bool IsARM()
        {
            if(s_isArm.HasValue)
                return s_isArm.Value;

            var arch = RuntimeInformation.ProcessArchitecture;
            s_isArm = arch == Architecture.Arm || arch == Architecture.Arm64;

            return s_isArm.Value;
        }

        public static bool IsArm32()
        {
            return IsARM() && IntPtr.Size == 4;
        }

        public static bool IsArm64()
        {
            return IsARM() && IntPtr.Size == 8;
        }

        static bool? s_isiOS;
        public static bool IsiOS()
        {
            if(s_isiOS.HasValue)
                return s_isiOS.Value;

            s_isiOS = UnityEngine.SystemInfo.operatingSystem.ToLower().Contains("ios");
            return s_isiOS.Value;
        }

        static bool? s_isIL2CPP;
        public static bool IsIL2CPP()
        {
            if (s_isIL2CPP.HasValue)
                return s_isIL2CPP.Value;

            try
            {
                byte[] ilBody = typeof(LDasm).GetMethod("IsIL2CPP").GetMethodBody().GetILAsByteArray();
                if (ilBody == null || ilBody.Length == 0)
                    s_isIL2CPP = true;
                else
                    s_isIL2CPP = false;
            }
            catch
            {
                s_isIL2CPP = true;
            }

            return s_isIL2CPP.Value;
        }

        public static bool IsThumb(IntPtr code)
        {
            return IsArm32() &&  ((long)code & 0x1) == 0x1;
        }

        /// <summary>
        /// 计算 thumb 指令长度
        /// </summary>
        /// <param name="code"></param>
        /// <param name="size"></param>
        /// <returns></returns>
        public static uint CalcARMThumbMinLen(void* code, int size)
        {
            uint len = 0;

            ushort* ins = (ushort*)code;
            while (true)
            {
                if (len >= size)
                    return len;

                if (((*ins >> 13) & 3) == 3)
                {
                    ins += 2;
                    len += 4;
                }
                else
                {
                    ins++;
                    len += 2;
                }
            }
        }

        static uint ldasm(void* code, ldasm_data ld, bool is64)
        {
            byte* p = (byte*)code;
            byte s, op, f;
            byte rexw, pr_66, pr_67;

            s = rexw = pr_66 = pr_67 = 0;

            /* dummy check */
            if ((int)code==0)
                return 0;

            /* init output data */
            //memset(ld, 0, sizeof(ldasm_data));

            /* phase 1: parse prefixies */
            while ((cflags(*p) & OP_PREFIX)!=0)
            {
                if (*p == 0x66)
                    pr_66 = 1;
                if (*p == 0x67)
                    pr_67 = 1;
                p++; s++;
                ld.flags |= F_PREFIX;
                if (s == 15)
                {
                    ld.flags |= F_INVALID;
                    return s;
                }
            }

            /* parse REX prefix */
            if (is64 && *p >> 4 == 4)
            {
                ld.rex = *p;
                rexw = (byte)((ld.rex >> 3) & 1);
                ld.flags |= F_REX;
                p++; s++;
            }

            /* can be only one REX prefix */
            if (is64 && *p >> 4 == 4)
            {
                ld.flags |= F_INVALID;
                s++;
                return s;
            }

            /* phase 2: parse opcode */
            ld.opcd_offset = (byte)(p - (byte*)code);
            ld.opcd_size = 1;
            op = *p++; s++;

            /* is 2 byte opcode? */
            if (op == 0x0F)
            {
                op = *p++; s++;
                ld.opcd_size++;
                f = cflags_ex(op);
                if ((f & OP_INVALID)!=0)
                {
                    ld.flags |= F_INVALID;
                    return s;
                }
                /* for SSE instructions */
                if ((f & OP_EXTENDED)!=0)
                {
                    op = *p++; s++;
                    ld.opcd_size++;
                }
            }
            else {
                f = cflags(op);
                /* pr_66 = pr_67 for opcodes A0-A3 */
                if (op >= 0xA0 && op <= 0xA3)
                    pr_66 = pr_67;
            }

            /* phase 3: parse ModR/M, SIB and DISP */
            if ((f & OP_MODRM)!=0)
            {
                byte mod = (byte)(*p >> 6);
                byte ro = (byte)((*p & 0x38) >> 3);
                byte rm = (byte)(*p & 7);

                ld.modrm = *p++; s++;
                ld.flags |= F_MODRM;

                /* in F6,F7 opcodes immediate data present if R/O == 0 */
                if (op == 0xF6 && (ro == 0 || ro == 1))
                    f |= OP_DATA_I8;
                if (op == 0xF7 && (ro == 0 || ro == 1))
                    f |= OP_DATA_I16_I32_I64;

                /* is SIB byte exist? */
                if (mod != 3 && rm == 4 && !(!is64 && pr_67!=0))
                {
                    ld.sib = *p++; s++;
                    ld.flags |= F_SIB;

                    /* if base == 5 and mod == 0 */
                    if ((ld.sib & 7) == 5 && mod == 0)
                    {
                        ld.disp_size = 4;
                    }
                }

                switch (mod)
                {
                    case 0:
                        if (is64)
                        {
                            if (rm == 5)
                            {
                                ld.disp_size = 4;
                                if (is64)
                                    ld.flags |= F_RELATIVE;
                            }
                        }
                        else if (pr_67!=0)
                        {
                            if (rm == 6)
                                ld.disp_size = 2;
                        }
                        else {
                            if (rm == 5)
                                ld.disp_size = 4;
                        }
                        break;
                    case 1:
                        ld.disp_size = 1;
                        break;
                    case 2:
                        if (is64)
                            ld.disp_size = 4;
                        else if (pr_67!=0)
                            ld.disp_size = 2;
                        else
                            ld.disp_size = 4;
                        break;
                }

                if (ld.disp_size>0)
                {
                    ld.disp_offset = (byte)(p - (byte*)code);
                    p += ld.disp_size;
                    s += ld.disp_size;
                    ld.flags |= F_DISP;
                }
            }

            /* phase 4: parse immediate data */
            if (rexw!=0 && (f & OP_DATA_I16_I32_I64)!=0)
                ld.imm_size = 8;
            else if ((f & OP_DATA_I16_I32)!=0 || (f & OP_DATA_I16_I32_I64)!=0)
                ld.imm_size = (byte)(4 - (pr_66 << 1));

            /* if exist, add OP_DATA_I16 and OP_DATA_I8 size */
            ld.imm_size += (byte)(f & 3);

            if ((ld.imm_size)!=0)
            {
                s += ld.imm_size;
                ld.imm_offset = (byte)(p - (byte*)code);
                ld.flags |= F_IMM;
                if ((f & OP_RELATIVE)!=0)
                    ld.flags |= F_RELATIVE;
            }

            /* instruction is too long */
            if (s > 15)
                ld.flags |= F_INVALID;

            return s;
        }
    }
}

```

`Assets/Scripts/UnityHook/LDasm.cs.meta`:

```meta
fileFormatVersion: 2
guid: 3c561c9729c367e4fbef63f4ec56f268
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/MethodHook.cs`:

```cs
/*
 Desc: 一个可以运行时 Hook Mono 方法的工具，让你可以无需修改 UnityEditor.dll 等文件就可以重写其函数功能
 Author: Misaka Mikoto
 Github: https://github.com/Misaka-Mikoto-Tech/MonoHook
 */

using DotNetDetour;
using System;
using System.Diagnostics;
using System.Reflection;
using System.Runtime.InteropServices;
using Unity.Collections.LowLevel.Unsafe;
#if UNITY_EDITOR
using UnityEditor;
#endif
using UnityEngine;
using System.Runtime.CompilerServices;


/*
>>>>>>> 原始 UnityEditor.LogEntries.Clear 一型(.net 4.x)
0000000000403A00 < | 55                                 | push rbp                                     |
0000000000403A01   | 48 8B EC                           | mov rbp,rsp                                  |
0000000000403A04   | 48 81 EC 80 00 00 00               | sub rsp,80                                   |
0000000000403A0B   | 48 89 65 B0                        | mov qword ptr ss:[rbp-50],rsp                |
0000000000403A0F   | 48 89 6D A8                        | mov qword ptr ss:[rbp-58],rbp                |
0000000000403A13   | 48 89 5D C8                        | mov qword ptr ss:[rbp-38],rbx                | <<
0000000000403A17   | 48 89 75 D0                        | mov qword ptr ss:[rbp-30],rsi                |
0000000000403A1B   | 48 89 7D D8                        | mov qword ptr ss:[rbp-28],rdi                |
0000000000403A1F   | 4C 89 65 E0                        | mov qword ptr ss:[rbp-20],r12                |
0000000000403A23   | 4C 89 6D E8                        | mov qword ptr ss:[rbp-18],r13                |
0000000000403A27   | 4C 89 75 F0                        | mov qword ptr ss:[rbp-10],r14                |
0000000000403A2B   | 4C 89 7D F8                        | mov qword ptr ss:[rbp-8],r15                 |
0000000000403A2F   | 49 BB 00 2D 1E 1A FE 7F 00 00      | mov r11,7FFE1A1E2D00                         |
0000000000403A39   | 4C 89 5D B8                        | mov qword ptr ss:[rbp-48],r11                |
0000000000403A3D   | 49 BB 08 2D 1E 1A FE 7F 00 00      | mov r11,7FFE1A1E2D08                         |


>>>>>>> 二型(.net 2.x)
0000000000403E8F   | 55                                 | push rbp                                     |
0000000000403E90   | 48 8B EC                           | mov rbp,rsp                                  |
0000000000403E93   | 48 83 EC 70                        | sub rsp,70                                   |
0000000000403E97   | 48 89 65 C8                        | mov qword ptr ss:[rbp-38],rsp                |
0000000000403E9B   | 48 89 5D B8                        | mov qword ptr ss:[rbp-48],rbx                |
0000000000403E9F   | 48 89 6D C0                        | mov qword ptr ss:[rbp-40],rbp                | <<(16)
0000000000403EA3   | 48 89 75 F8                        | mov qword ptr ss:[rbp-8],rsi                 |
0000000000403EA7   | 48 89 7D F0                        | mov qword ptr ss:[rbp-10],rdi                |
0000000000403EAB   | 4C 89 65 D0                        | mov qword ptr ss:[rbp-30],r12                |
0000000000403EAF   | 4C 89 6D D8                        | mov qword ptr ss:[rbp-28],r13                |
0000000000403EB3   | 4C 89 75 E0                        | mov qword ptr ss:[rbp-20],r14                |
0000000000403EB7   | 4C 89 7D E8                        | mov qword ptr ss:[rbp-18],r15                |
0000000000403EBB   | 48 83 EC 20                        | sub rsp,20                                   |
0000000000403EBF   | 49 BB 18 3F 15 13 FE 7F 00 00      | mov r11,7FFE13153F18                         |
0000000000403EC9   | 41 FF D3                           | call r11                                     |
0000000000403ECC   | 48 83 C4 20                        | add rsp,20                                   |

>>>>>>>>> arm64
il2cpp:00000000003DE714 F5 0F 1D F8                             STR             X21, [SP,#-0x10+var_20]!                            |  << absolute safe
il2cpp:00000000003DE718 F4 4F 01 A9                             STP             X20, X19, [SP,#0x20+var_10]                         |  << may be safe
il2cpp:00000000003DE71C FD 7B 02 A9                             STP             X29, X30, [SP,#0x20+var_s0]                         |
il2cpp:00000000003DE720 FD 83 00 91                             ADD             X29, SP, #0x20                                      |
il2cpp:00000000003DE724 B5 30 00 B0                             ADRP            X21, #_ZZ62GameObject_SetActive_mCF1EEF2A314F3AE    |  << dangerous: relative instruction, can not be overwritten
il2cpp:00000000003DE728 A2 56 47 F9                             LDR             method, [X21,#_ZZ62GameObject_SetActive_mCF] ;      |
il2cpp:00000000003DE72C F3 03 01 2A                             MOV             W19, W1                                             |
 */

namespace MonoHook
{
    /// <summary>
    /// Hook 类，用来 Hook 某个 C# 方法
    /// </summary>
    public unsafe class MethodHook
    {
        public string tag;
        public bool isHooked { get; private set; }
        public bool isPlayModeHook { get; private set; }

        public MethodBase targetMethod { get; private set; }       // 需要被hook的目标方法
        public MethodBase replacementMethod { get; private set; }  // 被hook后的替代方法
        public MethodBase proxyMethod { get; private set; }        // 目标方法的代理方法(可以通过此方法调用被hook后的原方法)

        private IntPtr _targetPtr;          // 目标方法被 jit 后的地址指针
        private IntPtr _replacementPtr;
        private IntPtr _proxyPtr;

        private CodePatcher _codePatcher;

#if UNITY_EDITOR && !UNITY_2020_3_OR_NEWER
        /// <summary>
        /// call `MethodInfo.MethodHandle.GetFunctionPointer()` 
        /// will visit static class `UnityEditor.IMGUI.Controls.TreeViewGUI.Styles` and invoke its static constructor,
        /// and init static filed `foldout`, but `GUISKin.current` is null now,
        /// so we should wait until `GUISKin.current` has a valid value
        /// </summary>
        private static FieldInfo s_fi_GUISkin_current;
#endif

        static MethodHook()
        {
#if UNITY_EDITOR && !UNITY_2020_3_OR_NEWER
            s_fi_GUISkin_current = typeof(GUISkin).GetField("current", BindingFlags.Static | BindingFlags.NonPublic);
#endif
        }

        /// <summary>
        /// 创建一个 Hook
        /// </summary>
        /// <param name="targetMethod">需要替换的目标方法</param>
        /// <param name="replacementMethod">准备好的替换方法</param>
        /// <param name="proxyMethod">如果还需要调用原始目标方法，可以通过此参数的方法调用，如果不需要可以填 null</param>
        public MethodHook(MethodBase targetMethod, MethodBase replacementMethod, MethodBase proxyMethod, string data = "")
        {
            this.targetMethod       = targetMethod;
            this.replacementMethod  = replacementMethod;
            this.proxyMethod        = proxyMethod;
            this.tag = data;

            CheckMethod();
        }

        public void Install()
        {
            if (LDasm.IsiOS()) // iOS 不支持修改 code 所在区域 page
                return;

            if (isHooked)
                return;

#if UNITY_EDITOR && !UNITY_2020_3_OR_NEWER
            if (s_fi_GUISkin_current.GetValue(null) != null)
                DoInstall();
            else
                EditorApplication.update += OnEditorUpdate;
#else
            DoInstall();
#endif
            isPlayModeHook = Application.isPlaying;
        }

        public void Uninstall()
        {
            if (!isHooked)
                return;

            _codePatcher.RemovePatch();

            isHooked = false;
            HookPool.RemoveHooker(targetMethod);
        }

        #region private
        private void DoInstall()
        {
            if (targetMethod == null || replacementMethod == null)
                throw new Exception("none of methods targetMethod or replacementMethod can be null");

            HookPool.AddHook(targetMethod, this);

            if (_codePatcher == null)
            {
                if (GetFunctionAddr())
                {
#if ENABLE_HOOK_DEBUG
                    UnityEngine.Debug.Log($"Original [{targetMethod.DeclaringType.Name}.{targetMethod.Name}]: {HookUtils.HexToString(_targetPtr.ToPointer(), 64, -16)}");
                    UnityEngine.Debug.Log($"Original [{replacementMethod.DeclaringType.Name}.{replacementMethod.Name}]: {HookUtils.HexToString(_replacementPtr.ToPointer(), 64, -16)}");
                    if(proxyMethod != null)
                        UnityEngine.Debug.Log($"Original [{proxyMethod.DeclaringType.Name}.{proxyMethod.Name}]: {HookUtils.HexToString(_proxyPtr.ToPointer(), 64, -16)}");
#endif

                    CreateCodePatcher();
                    _codePatcher.ApplyPatch();

#if ENABLE_HOOK_DEBUG
                    UnityEngine.Debug.Log($"New [{targetMethod.DeclaringType.Name}.{targetMethod.Name}]: {HookUtils.HexToString(_targetPtr.ToPointer(), 64, -16)}");
                    UnityEngine.Debug.Log($"New [{replacementMethod.DeclaringType.Name}.{replacementMethod.Name}]: {HookUtils.HexToString(_replacementPtr.ToPointer(), 64, -16)}");
                    if(proxyMethod != null)
                        UnityEngine.Debug.Log($"New [{proxyMethod.DeclaringType.Name}.{proxyMethod.Name}]: {HookUtils.HexToString(_proxyPtr.ToPointer(), 64, -16)}");
#endif
                }
            }

            isHooked = true;
        }

        private void CheckMethod()
        {
            if (targetMethod == null || replacementMethod == null)
                throw new Exception("MethodHook:targetMethod and replacementMethod and proxyMethod can not be null");

            string methodName = $"{targetMethod.DeclaringType.Name}.{targetMethod.Name}";
            if (targetMethod.IsAbstract)
                throw new Exception($"WRANING: you can not hook abstract method [{methodName}]");

#if UNITY_EDITOR
            int minMethodBodySize = 10;

            {
                if ((targetMethod.MethodImplementationFlags & MethodImplAttributes.InternalCall) != MethodImplAttributes.InternalCall)
                {
                    int codeSize = targetMethod.GetMethodBody().GetILAsByteArray().Length; // GetMethodBody can not call on il2cpp
                    if (codeSize < minMethodBodySize)
                        UnityEngine.Debug.LogWarning($"WRANING: you can not hook method [{methodName}], cause its method body is too short({codeSize}), will random crash on IL2CPP release mode");
                }
            }

            if(proxyMethod != null)
            {
                methodName = $"{proxyMethod.DeclaringType.Name}.{proxyMethod.Name}";
                int codeSize = proxyMethod.GetMethodBody().GetILAsByteArray().Length;
                if (codeSize < minMethodBodySize)
                    UnityEngine.Debug.LogWarning($"WRANING: size of method body[{methodName}] is too short({codeSize}), will random crash on IL2CPP release mode, please fill some dummy code inside");

                if ((proxyMethod.MethodImplementationFlags & MethodImplAttributes.NoOptimization) != MethodImplAttributes.NoOptimization)
                    throw new Exception($"WRANING: method [{methodName}] must has a Attribute `MethodImpl(MethodImplOptions.NoOptimization)` to prevent code call to this optimized by compiler(pass args by shared stack)");
            }
#endif
        }

        private void CreateCodePatcher()
        {
            long addrOffset = Math.Abs(_targetPtr.ToInt64() - _proxyPtr.ToInt64());
            
            if(_proxyPtr != IntPtr.Zero)
                addrOffset = Math.Max(addrOffset, Math.Abs(_targetPtr.ToInt64() - _proxyPtr.ToInt64()));

            if (LDasm.IsARM())
            {
                if (IntPtr.Size == 8)
                    _codePatcher = new CodePatcher_arm64_near(_targetPtr, _replacementPtr, _proxyPtr);
                else if (addrOffset < ((1 << 25) - 1))
                    _codePatcher = new CodePatcher_arm32_near(_targetPtr, _replacementPtr, _proxyPtr);
                else if (addrOffset < ((1 << 27) - 1))
                    _codePatcher = new CodePatcher_arm32_far(_targetPtr, _replacementPtr, _proxyPtr);
                else
                    throw new Exception("address of target method and replacement method are too far, can not hook");
            }
            else
            {
                if (IntPtr.Size == 8)
                {
                    if(addrOffset < 0x7fffffff) // 2G
                        _codePatcher = new CodePatcher_x64_near(_targetPtr, _replacementPtr, _proxyPtr);
                    else
                        _codePatcher = new CodePatcher_x64_far(_targetPtr, _replacementPtr, _proxyPtr);
                }
                else
                    _codePatcher = new CodePatcher_x86(_targetPtr, _replacementPtr, _proxyPtr);
            }
        }

        /// <summary>
        /// 获取对应函数jit后的native code的地址
        /// </summary>
        private bool GetFunctionAddr()
        {
            _targetPtr = GetFunctionAddr(targetMethod);
            _replacementPtr = GetFunctionAddr(replacementMethod);
            _proxyPtr = GetFunctionAddr(proxyMethod);

            if (_targetPtr == IntPtr.Zero || _replacementPtr == IntPtr.Zero)
                return false;

            if (proxyMethod != null && _proxyPtr == null)
                return false;

            if(_replacementPtr == _targetPtr)
            {
                throw new Exception($"the addresses of target method {targetMethod.Name} and replacement method {replacementMethod.Name} can not be same");
            }

            if (LDasm.IsThumb(_targetPtr) || LDasm.IsThumb(_replacementPtr))
            {
                throw new Exception("does not support thumb arch");
            }

            return true;
        }


        [StructLayout(LayoutKind.Sequential, Pack = 1)] // 好像在 IL2CPP 里无效
        private struct __ForCopy
        {
            public long __dummy;
            public MethodBase method;
        }
        /// <summary>
        /// 获取方法指令地址
        /// </summary>
        /// <param name="method"></param>
        /// <returns></returns>
        private IntPtr GetFunctionAddr(MethodBase method)
        {
            if (method == null)
                return IntPtr.Zero;

            if (!LDasm.IsIL2CPP())
                return method.MethodHandle.GetFunctionPointer();
            else
            {
                /*
                    // System.Reflection.MonoMethod
                    typedef struct Il2CppReflectionMethod
                    {
                        Il2CppObject object;
                        const MethodInfo *method;
                        Il2CppString *name;
                        Il2CppReflectionType *reftype;
                    } Il2CppReflectionMethod;

                    typedef Il2CppClass Il2CppVTable;
                    typedef struct Il2CppObject
                    {
                        union
                        {
                            Il2CppClass *klass;
                            Il2CppVTable *vtable;
                        };
                        MonitorData *monitor;
                    } Il2CppObject;

                typedef struct MethodInfo
                {
                    Il2CppMethodPointer methodPointer; // this is the pointer to native code of method
                    InvokerMethod invoker_method;
                    const char* name;
                    Il2CppClass *klass;
                    const Il2CppType *return_type;
                    const ParameterInfo* parameters;
                // ...
                }
                 */

                __ForCopy __forCopy = new __ForCopy() { method = method };

                long* ptr = &__forCopy.__dummy;
                ptr++; // addr of _forCopy.method

                IntPtr methodAddr = IntPtr.Zero;
                if (sizeof(IntPtr) == 8)
                {
                    long methodDataAddr = *(long*)ptr;
                    byte* ptrData = (byte*)methodDataAddr + sizeof(IntPtr) * 2; // offset of Il2CppReflectionMethod::const MethodInfo *method;

                    long methodPtr = 0;
                    methodPtr = *(long*)ptrData;
                    methodAddr = new IntPtr(*(long*)methodPtr); // MethodInfo::Il2CppMethodPointer methodPointer;
                }
                else
                {
                    int methodDataAddr = *(int*)ptr;
                    byte* ptrData = (byte*)methodDataAddr + sizeof(IntPtr) * 2; // offset of Il2CppReflectionMethod::const MethodInfo *method;

                    int methodPtr = 0;
                    methodPtr = *(int*)ptrData;
                    methodAddr = new IntPtr(*(int*)methodPtr);
                }
                return methodAddr;
            }
        }

#if UNITY_EDITOR && !UNITY_2020_3_OR_NEWER
        private void OnEditorUpdate()
        {
            if (s_fi_GUISkin_current.GetValue(null) != null)
            {
                try
                {
                    DoInstall();
                }
                finally
                {
                    EditorApplication.update -= OnEditorUpdate;
                }
            }
        }
#endif

        #endregion
    }

}

```

`Assets/Scripts/UnityHook/MethodHook.cs.meta`:

```meta
fileFormatVersion: 2
guid: bd0b8071cf434d6498160259e3829980
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/Plugins.meta`:

```meta
fileFormatVersion: 2
guid: 16b9dc031f67b4fe5ad79c230f75768c
folderAsset: yes
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/Plugins/Utils.cpp`:

```cpp
//
//  Utils.cpp
//  MonoHookUtils_OSX
//
//  Created by Misaka-Mikoto on 2022/8/31.
//
#include <stdio.h>
#include <stdint.h>
#include <pthread.h>
#include <string.h>
#include <libkern/OSCacheControl.h>

extern "C"{

void* memcpy_jit(void* dst, void* src, int32_t size)
{
    pthread_jit_write_protect_np(0);
    void* ret = memcpy(dst, src, size);
    pthread_jit_write_protect_np(1);
    sys_icache_invalidate (dst, size);
    return ret;
}
}

```

`Assets/Scripts/UnityHook/Plugins/Utils.cpp.meta`:

```meta
fileFormatVersion: 2
guid: 56b28b5583a184c669dcb968d175544c
PluginImporter:
  externalObjects: {}
  serializedVersion: 2
  iconMap: {}
  executionOrder: {}
  defineConstraints: []
  isPreloaded: 0
  isOverridable: 0
  isExplicitlyReferenced: 0
  validateReferences: 1
  platformData:
  - first:
      Any: 
    second:
      enabled: 1
      settings: {}
  - first:
      Editor: Editor
    second:
      enabled: 0
      settings:
        CPU: ARM64
        DefaultValueInitialized: true
        OS: OSX
  - first:
      Standalone: Linux64
    second:
      enabled: 0
      settings:
        CPU: None
  - first:
      Standalone: OSXUniversal
    second:
      enabled: 1
      settings:
        CPU: ARM64
  - first:
      Standalone: Win
    second:
      enabled: 0
      settings:
        CPU: None
  - first:
      Standalone: Win64
    second:
      enabled: 0
      settings:
        CPU: None
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/Plugins/libMonoHookUtils_OSX.dylib.meta`:

```meta
fileFormatVersion: 2
guid: 4adb23596911347faa69537b900c9f5e
PluginImporter:
  externalObjects: {}
  serializedVersion: 2
  iconMap: {}
  executionOrder: {}
  defineConstraints: []
  isPreloaded: 0
  isOverridable: 0
  isExplicitlyReferenced: 0
  validateReferences: 1
  platformData:
  - first:
      : Any
    second:
      enabled: 0
      settings:
        Exclude Android: 1
        Exclude Editor: 0
        Exclude Linux64: 0
        Exclude OSXUniversal: 0
        Exclude Win: 0
        Exclude Win64: 0
        Exclude iOS: 1
  - first:
      Android: Android
    second:
      enabled: 0
      settings:
        CPU: ARMv7
  - first:
      Any: 
    second:
      enabled: 0
      settings: {}
  - first:
      Editor: Editor
    second:
      enabled: 1
      settings:
        CPU: AnyCPU
        DefaultValueInitialized: true
        OS: OSX
  - first:
      Standalone: Linux64
    second:
      enabled: 1
      settings:
        CPU: None
  - first:
      Standalone: OSXUniversal
    second:
      enabled: 1
      settings:
        CPU: AnyCPU
  - first:
      Standalone: Win
    second:
      enabled: 1
      settings:
        CPU: None
  - first:
      Standalone: Win64
    second:
      enabled: 1
      settings:
        CPU: None
  - first:
      iPhone: iOS
    second:
      enabled: 0
      settings:
        AddToEmbeddedBinaries: false
        CPU: AnyCPU
        CompileFlags: 
        FrameworkDependencies: 
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase.meta`:

```meta
fileFormatVersion: 2
guid: 271459177913b4840bcb40e64f06aaef
folderAsset: yes
timeCreated: 1530088268
licenseType: Pro
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/CtorHookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
/*
 * 构造函数 Hook 测试
 * */
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.CompilerServices;
using UnityEngine;

namespace MonoHook.Test
{
    public class CtorHookTarget
    {
        public int x;
        [MethodImpl(MethodImplOptions.NoOptimization)]
        public CtorHookTarget(int x)
        {
            this.x = x;
            Debug.LogFormat("ctor with x:{0}", x);
        }
    }

    public class CtorHookTest
    {
        public void Test()
        {
            MethodBase mbCtorA = typeof(CtorHookTarget).GetConstructor(new Type[] { typeof(int) });
            MethodInfo mbReplace = new Action<int>(CtorTargetReplace).Method;
            MethodInfo mbProxy = new Action<int>(CtorTargetProxy).Method;

            MethodHook hookder = new MethodHook(mbCtorA, mbReplace, mbProxy);
            hookder.Install();

            for (int i = 0; i < 2; i++)
            {
                CtorHookTarget hookTarget = new CtorHookTarget(1);
                Debug.Assert(hookTarget.x == 2, $"expect 2 but get {hookTarget.x} at i:{i}");
            }
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        public void CtorTargetReplace(int x)
        {
            x += 1;
            CtorTargetProxy(x);
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        public void CtorTargetProxy(int x)
        {
            Debug.Log("CtorTargetProxy");
        }
    }
}
#endif
```

`Assets/Scripts/UnityHook/TestCase/CtorHookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: ed5475dc3ce3a3a4ab04a3adad0dad50
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/Editor.meta`:

```meta
fileFormatVersion: 2
guid: 490d25ef626bccb449c84190440476b8
folderAsset: yes
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/Editor/BuildMainWindowTitle_Hook_Test.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
#if UNITY_EDITOR
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using UnityEngine;
using UnityEditor;
using System.Runtime.CompilerServices;

namespace MonoHook.Test
{
    //[InitializeOnLoad]
    public class BuildMainWindowTitle_Hook_Test
    {
        private static MethodHook _hook;

        static BuildMainWindowTitle_Hook_Test()
        {
            if (_hook == null)
            {
                Type type = typeof(UnityEditor.EditorApplication);
                MethodInfo miTarget = type.GetMethod("BuildMainWindowTitle", BindingFlags.Static | BindingFlags.NonPublic);

                MethodInfo miReplacement = new Func<string>(BuildMainWindowTitle).Method;
                MethodInfo miProxy = new Func<string>(BuildMainWindowTitleProxy).Method;

                _hook = new MethodHook(miTarget, miReplacement, miProxy);
                _hook.Install();
            }
        }

        private static string BuildMainWindowTitle()
        {
            string newTitle = BuildMainWindowTitleProxy();
            Debug.Log($"将要设置新窗口标题为: {newTitle}");
            return newTitle;
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static string BuildMainWindowTitleProxy()
        {
            // dummy code
            Debug.Log("something" + typeof(BuildMainWindowTitle_Hook_Test).ToString() + 2);
            return string.Empty;
        }
    }
}
#endif
#endif
```

`Assets/Scripts/UnityHook/TestCase/Editor/BuildMainWindowTitle_Hook_Test.cs.meta`:

```meta
fileFormatVersion: 2
guid: cc89a9041ab48ac41975fbd1e00b9b98
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/Editor/BuildPipeline_StripDll_HookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Text;
using UnityEditor;
using UnityEditor.Callbacks;
using UnityEngine;
using System.Linq;
using UnityEditor.Build.Reporting;
using System.IO;
using System.Xml;
using System.Diagnostics;
using Debug = UnityEngine.Debug;

namespace MonoHook.Test
{
    // 有需求时可以打开，也可以手动按需注册Hook
    [InitializeOnLoad]
    public class BuildPipeline_StripDll_HookTest
    {
        /// <summary>
        /// 裁剪执行完毕的回调，可能会被调用多次，一般而言同一次打包只需要处理第一次回调
        /// </summary>
        public static Action<string, BuildPostProcessArgs, BeeDriverResult> OnAssemblyStripped;

        // 尝试 Hook 4个函数，至少一个被调用就可以达到要求
        private static MethodHook _hook_PostprocessBuildPlayer_CompleteBuild;
        private static MethodHook _hook_Default_PostProcess;
        private static MethodHook _hook_ReportBuildResults;
        private static MethodHook _hook_StripAssembliesTo;

#region Fake Internal Structures
        public struct BuildPostProcessArgs
        {
            public BuildTarget target;
            public int subTarget;
            public string stagingArea;
            public string stagingAreaData;
            public string stagingAreaDataManaged;
            public string playerPackage;
            public string installPath;
            public string companyName;
            public string productName;
            public Guid productGUID;
            public BuildOptions options;
            public UnityEditor.Build.Reporting.BuildReport report;
            internal /*RuntimeClassRegistry*/object usedClassRegistry;
        }

        public sealed class BeeDriverResult
        {
            public /*NodeResult*/object[] NodeResults { get; set; }
            public bool Success { get; set; }
            public /*Message*/object[] BeeDriverMessages { get; set; }
            public override string ToString() => Success.ToString();
        }
#endregion

        static BuildPipeline_StripDll_HookTest()
        {
            GenBatchFile();
            InstallHook();
            OnAssemblyStripped = DemoStripCallback;
        }

        [MenuItem("Tools/Build_HookTest")]
        static void BuildPlayer()
        {
            string buildDir = "WinBuild";
            if (Directory.Exists(buildDir))
                Directory.Delete(buildDir, true);
            Directory.CreateDirectory(buildDir);

            BuildPlayerOptions opt = new BuildPlayerOptions();
            opt.scenes = new string[] { "Assets/Scenes/SampleScene5+.unity" };
            opt.locationPathName = $"{buildDir}/MonoHook.exe";
            opt.targetGroup = BuildTargetGroup.Standalone;
            opt.target = BuildTarget.StandaloneWindows64;
            opt.options = BuildOptions.Development;

            Debug.Log("begin build player");
            BuildReport report = BuildPipeline.BuildPlayer(opt);
            if (report.summary.result != BuildResult.Succeeded)
            {
                foreach(BuildStep step in report.steps)
                {
                    foreach(var msg in step.messages)
                    {
                        if (msg.type == LogType.Error)
                            Debug.LogError(msg.content);
                    }
                }
            }
            Debug.Log("end build player");
        }

        /// <summary>
        /// 生成用来测试batchMode打包的批处理文件
        /// </summary>
        static void GenBatchFile()
        {
            string format = @"SET UNITY_PATH=""{0}""
SET PROJECT_PATH=""{1}""

%UNITY_PATH% -nographics -batchMode -projectPath %PROJECT_PATH% -executeMethod MonoHook.Test.BuildPipeline_StripDll_HookTest.BuildPlayer -quit -logFile %PROJECT_PATH%\logs\build_player.log
pause";
            string content = string.Format(format, Process.GetCurrentProcess().MainModule.FileName, Environment.CurrentDirectory);
            File.WriteAllText("BuildPlayer.bat", content);
        }

        /// <summary>
        /// 示例裁剪回调函数
        /// </summary>
        /// <param name="outputFolder"></param>
        /// <param name="args"></param>
        /// <param name="result"></param>
        static void DemoStripCallback(string outputFolder, BuildPostProcessArgs args, BeeDriverResult result)
        {
            if (outputFolder != null)
                Debug.Log($"stripped outputFolder is:{outputFolder}");
            else if (args.stagingAreaDataManaged != null)
                Debug.Log($"stripped staging folder is:{args.stagingAreaDataManaged}");
            else if (result != null)
                Debug.Log($"stripped result is: {result.Success}");
            else
                Debug.Log("stripped test called");
        }

        public static void InstallHook()
        {
            do
            {
                Type type = Type.GetType("UnityEditor.PostprocessBuildPlayer,UnityEditor, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null");
                if (type == null)
                {
                    Debug.LogError($"can not find type: UnityEditor.PostprocessBuildPlayer");
                    break;
                }

                MethodInfo miTarget = type.GetMethod("PostProcessCompletedBuild", BindingFlags.Static | BindingFlags.Public);

                if (miTarget == null)
                {
                    Debug.LogError($"can not find method: UnityEditor.PostprocessBuildPlayer.PostProcessCompletedBuild");
                    break;
                }

                MethodInfo miReplace = typeof(BuildPipeline_StripDll_HookTest).GetMethod(nameof(PostprocessBuildPlayer_CompleteBuild_Replace), BindingFlags.Static | BindingFlags.NonPublic);
                MethodInfo miProxy = typeof(BuildPipeline_StripDll_HookTest).GetMethod(nameof(PostprocessBuildPlayer_CompleteBuild_Proxy), BindingFlags.Static | BindingFlags.NonPublic);

                _hook_PostprocessBuildPlayer_CompleteBuild = new MethodHook(miTarget, miReplace, miProxy);
                _hook_PostprocessBuildPlayer_CompleteBuild.Install();

                Debug.Log("Hook BuildPipeline_StripDll_HookTest.PostprocessBuildPlayer_CompleteBuild installed");
            } while (false);

            do
            {
                Type type = Type.GetType("UnityEditor.Modules.DefaultBuildPostprocessor,UnityEditor.CoreModule, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null");
                if (type == null)
                {
                    Debug.LogError($"can not find type: UnityEditor.Modules.DefaultBuildPostprocessor");
                    break;
                }

                MethodInfo[] miTargets = type.GetMethods(BindingFlags.Instance | BindingFlags.Public | BindingFlags.DeclaredOnly);
                MethodInfo miTarget = (from mi in miTargets where mi.Name == "PostProcess" && mi.GetParameters().Length == 2 select mi).FirstOrDefault();

                if (miTarget == null)
                {
                    Debug.LogError($"can not find method: UnityEditor.Modules.DefaultBuildPostprocessor.PostProcess");
                    break;
                }

                MethodInfo miReplace = typeof(BuildPipeline_StripDll_HookTest).GetMethod(nameof(Default_PostProcess_Replace), BindingFlags.Static | BindingFlags.NonPublic);
                MethodInfo miProxy = typeof(BuildPipeline_StripDll_HookTest).GetMethod(nameof(Default_PostProcess_Proxy), BindingFlags.Static | BindingFlags.NonPublic);

                _hook_Default_PostProcess = new MethodHook(miTarget, miReplace, miProxy);
                _hook_Default_PostProcess.Install();

                Debug.Log("Hook BuildPipeline_StripDll_HookTest.PostProcess installed");
            } while (false);

            do
            {
                Type type = Type.GetType("UnityEditor.Modules.BeeBuildPostprocessor,UnityEditor.CoreModule, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null");
                if (type == null)
                {
                    Debug.LogError($"can not find type: UnityEditor.Modules.BeeBuildPostprocessor");
                    break;
                }

                MethodInfo miTarget = type.GetMethod("ReportBuildResults", BindingFlags.Instance | BindingFlags.NonPublic);
                if (miTarget == null)
                {
                    Debug.LogError($"can not find method: UnityEditor.Modules.BeeBuildPostprocessor.ReportBuildResults");
                    break;
                }

                MethodInfo miReplace = typeof(BuildPipeline_StripDll_HookTest).GetMethod(nameof(ReportBuildResults_Replace), BindingFlags.Static | BindingFlags.NonPublic);
                MethodInfo miProxy = typeof(BuildPipeline_StripDll_HookTest).GetMethod(nameof(ReportBuildResults_Proxy), BindingFlags.Static | BindingFlags.NonPublic);

                _hook_ReportBuildResults = new MethodHook(miTarget, miReplace, miProxy);
                _hook_ReportBuildResults.Install();

                Debug.Log("Hook BuildPipeline_StripDll_HookTest.ReportBuildResults installed");
            } while (false);

            do
            {
                Type type = Type.GetType("UnityEditorInternal.AssemblyStripper,UnityEditor.CoreModule, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null");
                if (type == null)
                {
                    Debug.LogError($"can not find type: UnityEditorInternal.AssemblyStripper");
                    break;
                }

                MethodInfo miTarget = type.GetMethod("StripAssembliesTo", BindingFlags.Static | BindingFlags.NonPublic);
                if (miTarget == null)
                {
                    Debug.LogError($"can not find method: UnityEditorInternal.AssemblyStripper.StripAssembliesTo");
                    break;
                }

                MethodInfo miReplace = typeof(BuildPipeline_StripDll_HookTest).GetMethod(nameof(StripAssembliesTo_Replace), BindingFlags.Static | BindingFlags.NonPublic);
                MethodInfo miProxy = typeof(BuildPipeline_StripDll_HookTest).GetMethod(nameof(StripAssembliesTo_Proxy), BindingFlags.Static | BindingFlags.NonPublic);

                _hook_StripAssembliesTo = new MethodHook(miTarget, miReplace, miProxy);
                _hook_StripAssembliesTo.Install();

                Debug.Log("Hook BuildPipeline_StripDll_HookTest.StripAssembliesTo installed");
            } while (false);
        }

        public static void UninstallHook()
        {
            _hook_PostprocessBuildPlayer_CompleteBuild?.Uninstall();
            _hook_Default_PostProcess?.Uninstall();
            _hook_ReportBuildResults?.Uninstall();
            _hook_StripAssembliesTo?.Uninstall();
        }

        static void PostprocessBuildPlayer_CompleteBuild_Replace(BuildPostProcessArgs args)
        {
            Debug.Log("PostprocessBuildPlayer_CompleteBuild_Replace called");

            OnAssemblyStripped?.Invoke(null, args, null);
            PostprocessBuildPlayer_CompleteBuild_Proxy(args);
        }

        static void Default_PostProcess_Replace(object obj, BuildPostProcessArgs args, out /*BuildProperties*/ object outProperties)
        {
            try
            {
                // 注意：此函数中途可能会被 Unity throw Exception
                Default_PostProcess_Proxy(obj, args, out outProperties);
            }
            catch(Exception ex)
            {
                throw ex;
            }
            finally
            {
                Debug.Log("PostProcess_Replace called");
                OnAssemblyStripped?.Invoke(null, args, null);
            }
        }

        static void ReportBuildResults_Replace(object obj, BeeDriverResult result)
        {
            // TODO: 可以在这里把 Library\Bee\artifacts\WinPlayerBuildProgram\ManagedStripped 目录下的文件复制出来
            Debug.Log("ReportBuildResults_Replace called");

            OnAssemblyStripped?.Invoke(null, default(BuildPostProcessArgs), result);
            ReportBuildResults_Proxy(obj, result);
        }

        static bool StripAssembliesTo_Replace(string outputFolder, out string output, out string error, IEnumerable<string> linkXmlFiles, /*UnityLinkerRunInformation*/ object runInformation)
        {
            bool ret = StripAssembliesTo_Proxy(outputFolder, out output, out error, linkXmlFiles, runInformation);

            // TODO: 可以在这里把 Temp\StagingArea\Data\Managed\tempStrip 目录下的文件复制出来
            Debug.Log("StripAssembliesTo_Replace called");

            OnAssemblyStripped?.Invoke(outputFolder, default(BuildPostProcessArgs), null);
            return ret;
        }

#region Proxy Methods
        [MethodImpl(MethodImplOptions.NoOptimization)]
        static void PostprocessBuildPlayer_CompleteBuild_Proxy(BuildPostProcessArgs args)
        {
            Debug.Log("dummy code" + 200);
            Debug.Log(args.companyName);
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        static void Default_PostProcess_Proxy(object obj, BuildPostProcessArgs args, out /*BuildProperties*/ object outProperties)
        {
            Debug.Log("dummy code" + 100);
            outProperties = null;
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        static void ReportBuildResults_Proxy(object obj, /*BeeDriverResult*/ object result)
        {
            // dummy code
            Debug.Log("something" + obj.ToString() + result.ToString() + 2);
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        static bool StripAssembliesTo_Proxy(string outputFolder, out string output, out string error, IEnumerable<string> linkXmlFiles, /*UnityLinkerRunInformation*/ object runInformation)
        {
            Debug.Log("StripAssembliesTo_Proxy called");
            output = null;
            error = null;
            return true;
        }
#endregion
    }
}

#endif
```

`Assets/Scripts/UnityHook/TestCase/Editor/BuildPipeline_StripDll_HookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: ed8859610137d404e87f332b7082c19b
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/Editor/FileDelete_Hook_Test.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEditor;
using System.Runtime.CompilerServices;
using System.IO;
using System.Reflection;
using System;
using System.Linq;
using UnityEditor.Callbacks;

namespace MonoHook.Test
{
    public class FileDelete_Hook_Test
    {
        static MethodHook _File_Delete_Hook;
        static MethodHook _Directory_Delete_Hook;
        static MethodHook _AssetDatabase_DeleteAsset_Hook;
        static MethodHook _AssetDatabase_DeleteAssetsCommon_Hook;

        //[DidReloadScripts]
        static void Install()
        {
            {
                MethodInfo target = typeof(File).GetMethod("Delete");
                MethodInfo replace = new Action<string>(File_Delete_Replace).Method;
                MethodInfo proxy = new Action<string>(File_Delete_Proxy).Method;
                if (target != null && replace != null && proxy != null)
                {
                    _File_Delete_Hook = new MethodHook(target, replace, proxy);
                    _File_Delete_Hook.Install();
                }

            }
            {
                MethodInfo target = (from mi in typeof(Directory).GetMethods() where mi.Name == "Delete" && mi.GetParameters().Length == 2 select mi).FirstOrDefault();
                MethodInfo replace = typeof(FileDelete_Hook_Test).GetMethod(nameof(Directory_Delete_Replace), BindingFlags.Static | BindingFlags.NonPublic);
                MethodInfo proxy = typeof(FileDelete_Hook_Test).GetMethod(nameof(Directory_Delete_Proxy), BindingFlags.Static | BindingFlags.NonPublic);
                if (target != null && replace != null && proxy != null)
                {
                    _Directory_Delete_Hook = new MethodHook(target, replace, proxy);
                    _Directory_Delete_Hook.Install();
                }
            }
            {
                MethodInfo target = typeof(AssetDatabase).GetMethod("DeleteAsset", BindingFlags.Static | BindingFlags.Public);
                MethodInfo replace = typeof(FileDelete_Hook_Test).GetMethod(nameof(AssetDatabase_DeleteAsset_Replace), BindingFlags.Static | BindingFlags.NonPublic);
                MethodInfo proxy = typeof(FileDelete_Hook_Test).GetMethod(nameof(AssetDatabase_DeleteAsset_Proxy), BindingFlags.Static | BindingFlags.NonPublic);
                if (target != null && replace != null && proxy != null)
                {
                    _AssetDatabase_DeleteAsset_Hook = new MethodHook(target, replace, proxy);
                    _AssetDatabase_DeleteAsset_Hook.Install();
                }
            }
            {
                MethodInfo target = typeof(AssetDatabase).GetMethod("DeleteAssetsCommon", BindingFlags.Static | BindingFlags.NonPublic);
                MethodInfo replace = typeof(FileDelete_Hook_Test).GetMethod(nameof(AssetDatabase_DeleteAssetsCommon_Replace), BindingFlags.Static | BindingFlags.NonPublic);
                MethodInfo proxy = typeof(FileDelete_Hook_Test).GetMethod(nameof(AssetDatabase_DeleteAssetsCommon_Proxy), BindingFlags.Static | BindingFlags.NonPublic);
                if (target != null && replace != null && proxy != null)
                {
                    _AssetDatabase_DeleteAssetsCommon_Hook = new MethodHook(target, replace, proxy);
                    _AssetDatabase_DeleteAssetsCommon_Hook.Install();
                }
            }
        }

        static void Uninstall()
        {
            _File_Delete_Hook?.Uninstall();
            _Directory_Delete_Hook?.Uninstall();
            _AssetDatabase_DeleteAsset_Hook?.Uninstall();
            _AssetDatabase_DeleteAssetsCommon_Hook?.Uninstall();
        }

        static void OnFileOrDirDelete(string path, string[] paths = null)
        {
            // 文件删除回调, 可以在此下断点或者写自定义逻辑
            if (paths == null)
                Debug.Log($"File will delete: {path}");
            else
                Debug.Log($"Files will delete: {path}");
        }

        static void File_Delete_Replace(string path)
        {
            OnFileOrDirDelete(path);
            File_Delete_Proxy(path);
        }

        static void Directory_Delete_Replace(string path, bool recursive)
        {
            OnFileOrDirDelete(path);
            Directory_Delete_Proxy(path, recursive);
        }

        static void AssetDatabase_DeleteAsset_Replace(string path)
        {
            OnFileOrDirDelete(path);
            AssetDatabase_DeleteAsset_Proxy(path);
        }

        static void AssetDatabase_DeleteAssetsCommon_Replace(string[] paths, object outFailedPaths, bool moveAssetsToTrash)
        {
            OnFileOrDirDelete(null, paths);
            AssetDatabase_DeleteAssetsCommon_Proxy(paths, outFailedPaths, moveAssetsToTrash);
        }



        #region proxy
        [MethodImpl(MethodImplOptions.NoOptimization)]
        static void File_Delete_Proxy(string path)
        {
            Debug.Log($"dummy code{path}");
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        static void Directory_Delete_Proxy(string path, bool recursive)
        {
            Debug.Log($"dummy code{path}");
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        static void AssetDatabase_DeleteAsset_Proxy(string path)
        {
            Debug.Log($"dummy code{path}");
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        static void AssetDatabase_DeleteAssetsCommon_Proxy(string[] paths, object outFailedPaths, bool moveAssetsToTrash)
        {
            Debug.Log($"dummy code{outFailedPaths}");
        }
        #endregion
    }
}

#endif
```

`Assets/Scripts/UnityHook/TestCase/Editor/FileDelete_Hook_Test.cs.meta`:

```meta
fileFormatVersion: 2
guid: 8747b0c9d2761d249b1ed64223e794b9
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/GameObject_CreatePrimitive_HookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
#if UNITY_EDITOR
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using UnityEngine;
using UnityEditor;
using System.Runtime.CompilerServices;

namespace MonoHook.Test
{
    //[InitializeOnLoad]
    public class GameObject_CreatePrimitive_HookTest
    {
        private static MethodHook _hook;

        static GameObject_CreatePrimitive_HookTest()
        {
            if (_hook == null)
            {
                Type type = typeof(AssetDatabase).Assembly.GetType("UnityEditor.GOCreationCommands");
                MethodInfo miTarget = type.GetMethod("CreateAndPlacePrimitive", BindingFlags.Static | BindingFlags.NonPublic);

                MethodInfo miReplacement = new Action<PrimitiveType, GameObject>(CreateAndPlacePrimitive).Method;
                MethodInfo miProxy = new Action<PrimitiveType, GameObject>(CreateAndPlacePrimitiveProxy).Method;

                _hook = new MethodHook(miTarget, miReplacement, miProxy);
                _hook.Install();
            }
        }

        private static void CreateAndPlacePrimitive(PrimitiveType type, GameObject parent)
        {
            Debug.LogFormat($"将要通过右键菜单创建类型内置类型 {type} ");

            CreateAndPlacePrimitiveProxy(type, parent);
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static void CreateAndPlacePrimitiveProxy(PrimitiveType type, GameObject parent)
        {
            // dummy code
            Debug.Log("something" + parent.ToString() + type.ToString() + 2);
        }
    }
}
#endif
#endif
```

`Assets/Scripts/UnityHook/TestCase/GameObject_CreatePrimitive_HookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: c1cfe99bc95d9a5499010c2d5d271c37
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/GameObject_SetActive_HookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
/*
 * 对 GameObject.SetActive 进行hook的测试用例
 */
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.CompilerServices;
using UnityEditor;
using UnityEngine;

namespace MonoHook.Test
{
    //[InitializeOnLoad]
    public static class GameObject_SetActive_HookTest
    {
        private static MethodHook _hook;

        static GameObject_SetActive_HookTest()
        {
            Init();
        }

        public static void Test(GameObject go)
        {
            go.SetActive(false);
            Debug.Assert(s_testVal == 0);
            go.SetActive(true);
            Debug.Assert(s_testVal == 1);
        }

        public static void Init()
        {
            if (_hook == null)
            {
                Type type = typeof(GameObject).Assembly.GetType("UnityEngine.GameObject");
                MethodInfo miTarget = type.GetMethod("SetActive", BindingFlags.Instance | BindingFlags.Public);

                MethodInfo miReplacement = new Action<GameObject, bool>(SetActiveNew).Method;
                MethodInfo miProxy = new Action<GameObject, bool>(SetActiveProxy).Method;

                _hook = new MethodHook(miTarget, miReplacement, miProxy);
                _hook.Install();
            }
        }

        static int s_testVal = -1;

        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static void SetActiveNew(GameObject go, bool value)
        {
            SetActiveProxy(go, value);
            Debug.LogFormat("GameObject [{0}] SetActive({1})", go.name, value);
            s_testVal = value ? 1 : 0;
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static void SetActiveProxy(GameObject go, bool value)
        {
            // dummy code
            Debug.Log("something" + go.ToString());
        }
    }
}
#endif
```

`Assets/Scripts/UnityHook/TestCase/GameObject_SetActive_HookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: 59d0d0d853a1c5346912772eb28211b9
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/GenericMethod_HookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
/*
 * 泛型方法 Hook（目前仅处理了 IL2CPP，mono的会crash）
 * 
 * 查看 il2cpp 函数定义会发现尾部多了一个 RuntimeMethod* 类型的参数
 * 此参数在调用非泛型方法时总是传递 null, 而在调用泛型方法时传递泛型方法实例化后的方法的 RuntimeMethod 指针
 * 
 * 例如 `T UnityEngine.Object::Instantiate<System.Object>(T)` 的 il2cpp 定义为:
 * IL2CPP_EXTERN_C IL2CPP_METHOD_ATTR RuntimeObject* Object_Instantiate_TisRuntimeObject_mCD6FC6BB14BA9EF1A4B314841EB4D40675E3C1DB_gshared (RuntimeObject* ___original0, const RuntimeMethod* method) 
 */
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Reflection.Emit;
using System.Runtime.CompilerServices;
using UnityEngine;

namespace MonoHook.Test
{
    public class GenericMethod_HookTest
    {
        private static MethodHook _hook;

        public static void Install()
        {
            if (!DotNetDetour.LDasm.IsIL2CPP())
                return;

            if (_hook == null)
            {
                // 仅用作示例，此处实际应该去hook `UnityEngine.Object.Internal_CloneSingle`，而不是去hook它的上层泛型方法
                MethodInfo gMiTarget = new Func<Texture2D, Texture2D>(UnityEngine.Object.Instantiate).Method.GetGenericMethodDefinition();
                MethodInfo miTarget = gMiTarget.MakeGenericMethod(typeof(UnityEngine.Object));

                MethodInfo miReplacement = new Func<UnityEngine.Object, UnityEngine.Object>(GameInstanceNew).Method;
                MethodInfo miProxy = new Func<UnityEngine.Object, UnityEngine.Object>(GameInstanceProxy).Method;

                _hook = new MethodHook(miTarget, miReplacement, miProxy);
                _hook.Install();
            }
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static T GameInstanceNew<T>(T go) where T : UnityEngine.Object
        {
            Debug.LogFormat("【自定义实现】Object.Instantiate(Object original), Prefab名称：{0}", go.name);

            /* 此处不能写 GameInstanceProxy<T>(go); 或者 GameInstanceProxy(go);
             * 否则会在生成 il2cpp 代码时使用固定索引 1 从 RuntimeMethod 动态取函数地址，导致异常(当前函数索引为0)
             * 而使用 GameInstanceProxy<UnityEngine.Object>(go); 则会在编译期就确定函数地址, 不会动态获取, 
             * 此时 RuntimeInfo 参数会传递 `GameInstanceProxy<Object>`， 但由于此参数主要用来校验参数类型，而 GameInstanceProxy 的参数类型与原有定义一致，因此不会报错
             */
            var obj = GameInstanceProxy<UnityEngine.Object>(go);
            return obj as T;
        }
        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static T GameInstanceProxy<T>(T go) where T : UnityEngine.Object
        {
            // 此处的函数实现永远不会起作用，随便写
            Debug.Log("something" + go.ToString());
            return null;
        }
    }
}
#endif
```

`Assets/Scripts/UnityHook/TestCase/GenericMethod_HookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: 6204365fa5fec50499045f05ad3e0ac8
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/InstanceMethodTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
/*
 * 实例方法 Hook 测试用例
 * note: 静态方法 Hook 参考 PinnedLog.cs
 */
using DotNetDetour;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.CompilerServices;
using UnityEngine;

namespace MonoHook.Test
{
    public class A
    {
        public int val;

        [MethodImpl(MethodImplOptions.NoOptimization)]
        public int Func(int x)
        {
            x += 2;
            val -= 1;
            return x + val + 1;
        }
    }

    public class B
    {
        [MethodImpl(MethodImplOptions.NoOptimization)]
        public int FuncReplace(int x)
        {
            object obj = this;
            A a = obj as A;

            x += 1;
            a.val = 7;

            if (InstanceMethodTest.callOriFunc)
                return FuncProxy(x);
            else
                return x + 1;
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        public int FuncProxy(int x)
        {
            Debug.Log("随便乱写");
            return x;
        }
    }

    /// <summary>
    /// 测试实例方法 Hook
    /// </summary>
    public class InstanceMethodTest
    {
        public static MethodHook _hook;
        public static bool callOriFunc;
        public static void InstallPatch()
        {
            Type typeA = typeof(A);
            Type typeB = typeof(B);

            MethodInfo miAFunc = typeA.GetMethod("Func");
            MethodInfo miBReplace = typeB.GetMethod("FuncReplace");
            MethodInfo miBProxy = typeB.GetMethod("FuncProxy");

            _hook = new MethodHook(miAFunc, miBReplace, miBProxy);
            _hook.Install();
        }
        public static void UninstallPatch()
        {
            if (_hook != null)
                _hook.Uninstall();

            _hook = null;
        }

        A _a = new A();

        public int Test()
        {
            _a.val = 5;
            int ret = _a.Func(2);
            return ret;
        }


    }
}
#endif
```

`Assets/Scripts/UnityHook/TestCase/InstanceMethodTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: fb49981d23de3a844a223f64a04d021a
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/PinnedLog.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
/*
 Desc: 不会被Unity Clear按钮清掉的日志
 Author: Misaka Mikoto
 Github: https://github.com/Misaka-Mikoto-Tech/MonoHook
 */

using System;
using System.Collections;
using System.Collections.Generic;
using System.Diagnostics;
using System.Reflection;
using System.Runtime.CompilerServices;
using UnityEngine;
using UnityEditor;



namespace MonoHook.Test
{
#if UNITY_EDITOR
    using UnityEditor.Callbacks;
    /// <summary>
    /// 不会被清掉的日志
    /// </summary>
    //[InitializeOnLoad]
    public static class PinnedLog
    {
        private static Dictionary<int, string> _msgs = new Dictionary<int, string>(); // 点击编辑器运行按钮时会被Unity清空
        private static MethodHook _hook;

        static PinnedLog()
        {
            if (_hook == null)
            {
#if UNITY_2017_1_OR_NEWER
                Type type = Type.GetType("UnityEditor.LogEntries,UnityEditor.dll");
#else
            Type type = Type.GetType("UnityEditorInternal.LogEntries,UnityEditor.dll");

#endif
                MethodInfo miTarget = type.GetMethod("Clear", BindingFlags.Static | BindingFlags.Public);

                MethodInfo miReplacement = new Action(NewClearLog).Method;
                MethodInfo miProxy = new Action(ProxyClearLog).Method;

                _hook = new MethodHook(miTarget, miReplacement, miProxy);
                _hook.Install();
            }
        }

        public static int AddMsg(string msg)
        {
            UnityEngine.Debug.LogError(msg);

            int key = _msgs.Count;
            _msgs.Add(key, msg);
            return key;
        }

        public static void RemoveMsg(int key)
        {
            _msgs.Remove(key);
        }

        public static void ClearAll()
        {
            _msgs.Clear();
            ProxyClearLog();
        }

        #region private
        [MethodImpl(MethodImplOptions.NoInlining)]
        private static void NewClearLog()
        {
            ProxyClearLog();
            foreach (var item in _msgs)
                UnityEngine.Debug.LogError(item.Value);
        }

        [MethodImpl(MethodImplOptions.NoInlining | MethodImplOptions.NoOptimization)]
        private static void ProxyClearLog()
        {
            // 随便乱写点东西以占据空间
            for (int i = 0; i < 100; i++)
            {
                UnityEngine.Debug.Log("something");
            }
            UnityEngine.Debug.Log(Application.targetFrameRate);
        }
        #endregion
    }
#else
public class PinnedLog
{
    public static int AddMsg(string msg)
    {
        return -1;
    }

    public static void RemoveMsg(int key)
    {
    }

    public static void ClearAll()
    {
    }
}
#endif
}

#endif
```

`Assets/Scripts/UnityHook/TestCase/PinnedLog.cs.meta`:

```meta
fileFormatVersion: 2
guid: 4249c8539f5fb0349aac00e41b3bedc6
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/PrivateTypeArgMethodTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
/*
 * 方法参数是私有类型的Hook测试用例
 */
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.CompilerServices;
using UnityEngine;

namespace MonoHook.Test
{
    public class PrivateTestA
    {
        private class InnerClass
        {
            public int x;
        }

        private enum InnerEnum : short
        {
            E0 = 0,
            E1 = 1,
            E2 = 2,
        }

        private int _val;

        public void FuncTest()
        {
            InnerClass innerClass = new InnerClass() { x = 2 };
            InnerFuncTest(innerClass, InnerEnum.E1);
        }
        [MethodImpl(MethodImplOptions.NoOptimization)]
        private void InnerFuncTest(InnerClass innerClass, InnerEnum innerEnum)
        {
            Debug.LogFormat("InnerTypeTest:innerClass.x:{0}, innerEnum:{1}, val:{2}", innerClass.x, innerEnum.ToString(), _val);
        }
    }

    public class PrivateTestB
    {
        /// <summary>
        /// 替换函数，参数类型只要"兼容"就可以，兼容的定义是引用类型可以使用任意引用类型替代，值类型保证 size 一致就可以
        /// </summary>
        /// <param name="a"></param>
        /// <param name="innerClass"></param>
        /// <param name="innerEnum"></param>
        public void FuncReplace(object innerClass, short innerEnum)
        {
            Debug.Log("PrivateTestB.FuncReplace called");
            innerEnum += 1;
            Proxy(innerClass, innerEnum);
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        public void Proxy(object innerClass, short innerEnum)
        {
            Debug.Log("something" + innerClass.ToString());
        }
    }

    public class PrivateTypeArgMethodTest
    {
        public void Test()
        {
            Type typeA = typeof(PrivateTestA);
            Type typeB = typeof(PrivateTestB);

            MethodInfo miAPrivateFunc = typeA.GetMethod("InnerFuncTest", BindingFlags.Instance | BindingFlags.NonPublic);
            MethodInfo miBReplace = typeB.GetMethod("FuncReplace");
            MethodInfo miBProxy = typeB.GetMethod("Proxy");

            MethodHook hook = new MethodHook(miAPrivateFunc, miBReplace, miBProxy);
            hook.Install();

            PrivateTestA privateTestA = new PrivateTestA();
            privateTestA.FuncTest();
        }
    }
}
#endif
```

`Assets/Scripts/UnityHook/TestCase/PrivateTypeArgMethodTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: 4e685c6fbdfcc3f448319de1d760206b
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/ProjectWindow_DuplicateAsset_HookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
#if UNITY_EDITOR
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Text;
using UnityEditor;
using UnityEngine;

namespace MonoHook.Test
{
    /// <summary>
    /// 监控资源复制操作
    /// </summary>
    //[InitializeOnLoad]
    public class ProjectWindow_DuplicateAsset_HookTest
    {

        private static MethodHook _hook;

        static ProjectWindow_DuplicateAsset_HookTest()
        {
            if (_hook == null)
            {
#if UNITY_2021_2_OR_NEWER
                Type type = typeof(UnityEditor.AssetDatabase).Assembly.GetType("UnityEditor.AssetClipboardUtility");
#else
            Type type = typeof(UnityEditor.AssetDatabase).Assembly.GetType("UnityEditor.ProjectWindowUtil");
#endif
                MethodInfo miTarget = type.GetMethod("DuplicateSelectedAssets", BindingFlags.Static | BindingFlags.NonPublic);

                MethodInfo miReplacement = new Action(DuplicateSelectedAssets).Method;
                MethodInfo miProxy = new Action(DuplicateSelectedAssetsProxy).Method;

                _hook = new MethodHook(miTarget, miReplacement, miProxy);
                _hook.Install();
            }
        }

        private static void DuplicateSelectedAssets()
        {
            var selectedsPre = Selection.objects;
            DuplicateSelectedAssetsProxy();
            var selectedAfter = Selection.objects;

            Debug.Assert(selectedsPre.Length == selectedAfter.Length);

            string[] pathPre = new string[selectedsPre.Length];
            string[] pathAfter = new string[selectedAfter.Length];

            for (int i = 0, imax = selectedsPre.Length; i < imax; i++)
                pathPre[i] = AssetDatabase.GetAssetPath(selectedsPre[i]);

            for (int i = 0, imax = selectedAfter.Length; i < imax; i++)
                pathAfter[i] = AssetDatabase.GetAssetPath(selectedAfter[i]);

            StringBuilder sb = new StringBuilder(1024);
            sb.AppendLine("执行了复制文件：");
            for (int i = 0, imax = Math.Min(pathPre.Length, pathAfter.Length); i < imax; i++)
            {
                sb.AppendLine($"{pathPre[i]} -> {pathAfter[i]}");
            }

            Debug.Log(sb.ToString());
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static void DuplicateSelectedAssetsProxy()
        {
            // dummy
        }
    }
}
#endif
#endif
```

`Assets/Scripts/UnityHook/TestCase/ProjectWindow_DuplicateAsset_HookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: b4cc59cf32615bb4786a15fc3497295f
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/PropertyHookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
/*
 * 属性 Hook 测试用例
 */
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.CompilerServices;
using UnityEngine;

namespace MonoHook.Test
{
    public class PropClassA
    {
        public int X
        {
            get { return _x; }
            [MethodImpl(MethodImplOptions.NoOptimization)]
            set
            {
                _x = value;
                _x += 2;
                _x -= 1;
                _x *= 2;
                _x /= 2;
                _x -= 1; // code size too short will cause random crash on arm il2cpp
                Debug.LogFormat("original prop X set:{0}, _x:{1}", value, _x);
            }
        }
        private int _x;

        public PropClassA(int val)
        {
            _x = val;
        }
    }

    public class PropClassB
    {
        [MethodImpl(MethodImplOptions.NoOptimization)]
        public void PropXSetReplace(int val)
        {
            // [this] ref to instance of PropClassA
            Debug.LogFormat("PropXSetReplace with value:{0}", val);

            val += 1;
            PropXSetProxy(val);
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        public void PropXSetProxy(int val)
        {
            Debug.Log("PropXSetProxy" + val);
        }
    }

    public class PropertyHookTest
    {
        [MethodImpl(MethodImplOptions.NoInlining)]
        public void Test()
        {
            Type typeA = typeof(PropClassA);
            Type typeB = typeof(PropClassB);

            PropertyInfo pi = typeA.GetProperty("X");
            MethodInfo miASet = pi.GetSetMethod();

            MethodInfo miBReplace = typeB.GetMethod("PropXSetReplace");
            MethodInfo miBProxy = typeB.GetMethod("PropXSetProxy");

            if (miBProxy == null)
                throw new Exception("PropXSetProxy is null");

            MethodHook hook = new MethodHook(miASet, miBReplace, miBProxy);
            hook.Install();

            PropClassA a = new PropClassA(5);
            a.X = 7;
            Debug.Assert(a.X == 8);

            a.X = 100;
            Debug.Assert(a.X == 101);
        }

    }
}
#endif
```

`Assets/Scripts/UnityHook/TestCase/PropertyHookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: b88bce8b705959045bdba8e50c189c63
timeCreated: 1530088331
licenseType: Pro
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/Renderer_SetMaterial_HookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.CompilerServices;
using UnityEngine;

namespace MonoHook.Test
{
    public class Renderer_SetMaterial_HookTest
    {
        public static Action<string> logCallback;

        private static MethodHook _hookSetMat;

        public static void InstallHook()
        {
            MethodInfo miOriFunc = typeof(Renderer).GetMethod("SetMaterial", BindingFlags.Instance | BindingFlags.NonPublic);
            MethodInfo miNew = new Action<Renderer, Material>(SetMaterial).Method;
            MethodInfo miProxy = new Action<Renderer, Material>(SetMaterialProxy).Method;

            _hookSetMat = new MethodHook(miOriFunc, miNew, miProxy);
            _hookSetMat.Install();
            logCallback("Renderer.SetMaterial hook installed");
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        public static void SetMaterial(Renderer renderer, Material mat)
        {
            string matName = mat == null ? "null" : mat.name;
            logCallback($"SetMaterial Called: obj:{renderer.gameObject.name}, mat:{matName}");

            SetMaterialProxy(renderer, mat);
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        public static void SetMaterialProxy(Renderer renderer, Material mat)
        {
            string str = "SetMaterialProxy";
            logCallback($"can not call this {str}");
        }

    }
}
#endif
```

`Assets/Scripts/UnityHook/TestCase/Renderer_SetMaterial_HookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: acaf0e3d5dfd0c5468d1abbf7ec1a491
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/SceneHierarchyStageHandling_HookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
#if UNITY_EDITOR
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEditor;
using System;
using System.Reflection;
using System.Runtime.CompilerServices;

namespace MonoHook.Test
{
    //[InitializeOnLoad]
    public class SceneHierarchyStageHandling_HookTest
    {
        private static MethodHook _hook;
        static SceneHierarchyStageHandling_HookTest()
        {
            if (_hook == null)
            {
                Type type = Type.GetType("UnityEditor.SceneHierarchyStageHandling,UnityEditor.dll");
#if UNITY_2021_2_OR_NEWER
                var target = type.GetMethod("StageHeaderGUI", BindingFlags.Instance | BindingFlags.Public);
#else
            var target = type.GetMethod("PrefabStageHeaderGUI", BindingFlags.Instance | BindingFlags.Public);
#endif
                var dst = new Action<object, Rect>(PrefabStageHeaderGUINew).Method;
                var old = new Action<object, Rect>(PrefabStageHeaderGUIOld).Method;

                _hook = new MethodHook(target, dst, old);
                _hook.Install();
            }
        }
        static void PrefabStageHeaderGUINew(object handle, Rect rect)
        {
            PrefabStageHeaderGUIOld(handle, rect);
            GUILayout.Button("^wow^");
            // GUI.Button(new Rect(rect.xMax - 100, rect.y, 16, rect.height), "x");
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        static void PrefabStageHeaderGUIOld(object handle, Rect rect)
        {
            // 随便乱写点东西以占据空间
            for (int i = 0; i < 100; i++)
            {
                UnityEngine.Debug.Log("something");
            }
            UnityEngine.Debug.Log(Application.targetFrameRate);
        }


    }
}
#endif
#endif
```

`Assets/Scripts/UnityHook/TestCase/SceneHierarchyStageHandling_HookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: 6b89e642d8bd9cd4d8b9331f5122a9fd
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/SceneViewCamera.meta`:

```meta
fileFormatVersion: 2
guid: a68606a16671c154c83ef33bb4a92eef
folderAsset: yes
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/SceneViewCamera/Editor.meta`:

```meta
fileFormatVersion: 2
guid: f660ed8f06b6f724a823558350c27974
folderAsset: yes
DefaultImporter:
  externalObjects: {}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/SceneViewCamera/Editor/SceneViewHook.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE && !UNITY_2019_1_OR_NEWER

using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEditor;
using UnityEditor.Callbacks;
using System.Reflection;

public class SceneViewHook
{
    private static MethodHook _hook;

    //[DidReloadScripts]
    public static void InstallHook()
    {
        //MethodInfo 
    }
}

#endif
```

`Assets/Scripts/UnityHook/TestCase/SceneViewCamera/Editor/SceneViewHook.cs.meta`:

```meta
fileFormatVersion: 2
guid: 62f679b75eb553142ac2ef0ec1650637
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/SceneViewMoveFunc_HookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE
#if UNITY_EDITOR
/*
 * 测试修改SceneView摄像机加速移动函数的实现（默认是 Mathf.Pow(1.8f, deltaTime)）
 */
using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEditor;
using System.Reflection;
using UnityEditor.AnimatedValues;
using System.Runtime.CompilerServices;

namespace MonoHook.Test
{
    //[InitializeOnLoad] // 取消此行注释即生效（建议使用unity2020, 因为有几个变量名称与unity2019不一致，此代码未做兼容）
    public static class SceneViewMoveFunc_HookTest
    {
        #region 反射定义原有字段
        private static Vector3 s_Motion
        {
            get => (Vector3)_fi_s_Motion.GetValue(null);
            set => _fi_s_Motion.SetValue(null, value);
        }

        private static bool s_Moving
        {
            get => (bool)_fi_s_Moving.GetValue(null);
            set => _fi_s_Moving.SetValue(null, value);
        }

        private static float s_FlySpeedTarget
        {
            get => (float)_fi_s_FlySpeedTarget.GetValue(null);
            set => _fi_s_FlySpeedTarget.SetValue(null, value);
        }

        /// <summary>
        /// 此属性每帧只能调用一次（因为内部是调用的Timeer.Update）
        /// </summary>
        private static float s_deltaTime
        {
            get => (float)_mi_deltaTime.Invoke(null, null);
        }

        private static SceneView s_CurrentSceneView
        {
            // 此变量与当前context有关，因此每次使用都必须即时获取
            get => _fi_s_CurrentSceneView.GetValue(null) as SceneView;
        }

        private static Type _sceneViewMotionType;
        // 这几个字段是值类型，因为不能直接获取对象引用，每次都需要使用反射读取或者设置
        private static FieldInfo _fi_s_Motion;
        private static FieldInfo _fi_s_Moving;
        private static FieldInfo _fi_s_FlySpeedTarget;
        private static FieldInfo _fi_s_CurrentSceneView;
        private static MethodInfo _mi_deltaTime;

        private static AnimVector3 s_FlySpeed;

        private const float k_FlySpeed = 9f;
        private const float k_FlySpeedAcceleration = 1.8f;
        #endregion

        private static MethodHook _hook;

        /// <summary>
        /// 自定义SceneView加速移动函数
        /// </summary>
        /// <returns></returns>
        private static float CustomAccMoveFunction(float deltaTime)
        {
            float FlySpeedTarget = s_FlySpeedTarget;
            float speed = (FlySpeedTarget < Mathf.Epsilon) ? k_FlySpeed : (FlySpeedTarget * Mathf.Pow(k_FlySpeedAcceleration, deltaTime));

            return speed;
        }

        static SceneViewMoveFunc_HookTest()
        {
            if (_hook == null)
            {
                _sceneViewMotionType = typeof(BuildPipeline).Assembly.GetType("UnityEditor.SceneViewMotion");

                // 反射原有字段和属性
                {
                    _fi_s_Motion = _sceneViewMotionType.GetField("s_Motion", BindingFlags.Static | BindingFlags.NonPublic);
                    _fi_s_Moving = _sceneViewMotionType.GetField("s_Moving", BindingFlags.Static | BindingFlags.NonPublic);
                    _fi_s_FlySpeedTarget = _sceneViewMotionType.GetField("s_FlySpeedTarget", BindingFlags.Static | BindingFlags.NonPublic);
                    _fi_s_CurrentSceneView = _sceneViewMotionType.GetField("s_CurrentSceneView", BindingFlags.Static | BindingFlags.NonPublic);

                    s_FlySpeed = _sceneViewMotionType.GetField("s_FlySpeed", BindingFlags.Static | BindingFlags.NonPublic).GetValue(null) as AnimVector3;

                    _mi_deltaTime = typeof(BuildPipeline).Assembly.GetType("UnityEditor.CameraFlyModeContext")
                        .GetProperty("deltaTime", BindingFlags.Static | BindingFlags.Public).GetGetMethod();
                }


                MethodInfo miTarget = _sceneViewMotionType.GetMethod("GetMovementDirection", BindingFlags.Static | BindingFlags.NonPublic);

                MethodInfo miReplacement = new Func<Vector3>(GetMovementDirectionNew).Method;
                MethodInfo miProxy = new Func<Vector3>(GetMovementDirectionProxy).Method;

                _hook = new MethodHook(miTarget, miReplacement, miProxy);
                _hook.Install();

                Debug.Log("已重定义SceneView摄像机移动速度");
            }
        }

        /// <summary>
        /// 重写原有的完整的移动逻辑(此方法也可以被完全修改)
        /// </summary>
        /// <returns></returns>
        private static Vector3 GetMovementDirectionNew()
        {
            //return GetMovementDirectionProxy();

            s_Moving = s_Motion.sqrMagnitude > 0f;
            var _CurrentSceneView = s_CurrentSceneView; // 缓存变量以避免多次反射调用
            float speed = _CurrentSceneView.cameraSettings.speed;
            float deltaTime = s_deltaTime;              // s_deltaTime 不可被多次访问
            if (Event.current.shift)
            {
                speed *= 5f;
            }
            if (s_Moving)
            {
                if (_CurrentSceneView.cameraSettings.accelerationEnabled)
                {
                    s_FlySpeedTarget = CustomAccMoveFunction(deltaTime); // 自定义加速移动函数
                }
                else
                {
                    s_FlySpeedTarget = k_FlySpeed;
                }
            }
            else
            {
                s_FlySpeedTarget = 0f;
            }
            if (_CurrentSceneView.cameraSettings.easingEnabled)
            {
                s_FlySpeed.speed = 1f / _CurrentSceneView.cameraSettings.easingDuration;
                s_FlySpeed.target = (s_Motion.normalized * s_FlySpeedTarget) * speed;
            }
            else
            {
                s_FlySpeed.value = (s_Motion.normalized * s_FlySpeedTarget) * speed;
            }
            return s_FlySpeed.value * deltaTime;
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static Vector3 GetMovementDirectionProxy()
        {
            // dummy
            return Vector3.zero;
        }


    }
}
#endif
#endif
```

`Assets/Scripts/UnityHook/TestCase/SceneViewMoveFunc_HookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: a283fd26b41007f4f8fffb26bea75fd6
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/Transform_SetPosition_HookTest.cs`:

```cs
#if ENABLE_HOOK_TEST_CASE || true
/*
 * 对 Transform.SetPosition 进行hook的测试用例
 */
using System;
using System.Collections;
using System.Collections.Generic;
using System.Reflection;
using System.Runtime.CompilerServices;
using UnityEditor;
using UnityEngine;

namespace MonoHook.Test
{
    //[InitializeOnLoad]
    public static class Transform_SetPosition_HookTest
    {
        private static MethodHook _hook;

        static Transform_SetPosition_HookTest()
        {
            Init();
        }

        public static void Init()
        {
            if (_hook == null)
            {
                Type type = typeof(Transform);
                MethodInfo miTarget = type.GetMethod("set_position_Injected", BindingFlags.Instance | BindingFlags.NonPublic);

                MethodInfo miReplacement = typeof(Transform_SetPosition_HookTest).GetMethod("SetPositionNew", BindingFlags.Static | BindingFlags.NonPublic);
                MethodInfo miProxy = typeof(Transform_SetPosition_HookTest).GetMethod("SetPositionProxy", BindingFlags.Static | BindingFlags.NonPublic);

                _hook = new MethodHook(miTarget, miReplacement, miProxy);
                _hook.Install();
            }
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static void SetPositionNew(Transform t, ref Vector3 value)
        {
            SetPositionProxy(t, ref value);
            Debug.LogFormat("Transfrom [{0}] SetPosition({1})", t.name, value);
        }

        [MethodImpl(MethodImplOptions.NoOptimization)]
        private static void SetPositionProxy(Transform t, ref Vector3 value)
        {
            // dummy code
            Debug.Log("something" + t.ToString());
        }
    }
}
#endif
```

`Assets/Scripts/UnityHook/TestCase/Transform_SetPosition_HookTest.cs.meta`:

```meta
fileFormatVersion: 2
guid: d2e64e3419baf56428e2c582b1eb8782
MonoImporter:
  externalObjects: {}
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 
  assetBundleName: 
  assetBundleVariant: 

```

`Assets/Scripts/UnityHook/TestCase/Unity4Helpher.cs`:

```cs
#if UNITY_4_7

using UnityEngine;
using System.Collections;

public static class Debug
{
    public static void Log(object message)
    {
        UnityEngine.Debug.Log(message);
    }

    public static void LogWarning(object message)
    {
        UnityEngine.Debug.LogWarning(message);
    }

    public static void LogError(object message)
    {
        UnityEngine.Debug.LogError(message);
    }

    public static void LogFormat(string format, params object[] args)
    {
        UnityEngine.Debug.Log(string.Format(format, args));
    }

    public static void Assert(bool condition)
    {
        if (!condition)
            UnityEngine.Debug.LogError("assert fail");
    }
}
#endif
```

`Assets/Scripts/UnityHook/TestCase/Unity4Helpher.cs.meta`:

```meta
fileFormatVersion: 2
guid: 03a8e04c9ab210c459273d13f322b4bc
MonoImporter:
  serializedVersion: 2
  defaultReferences: []
  executionOrder: 0
  icon: {instanceID: 0}
  userData: 

```

`Assets/smcs.rsp`:

```rsp
-unsafe
```

`Assets/smcs.rsp.meta`:

```meta
fileFormatVersion: 2
guid: 7b2bd8484bd95214a8ed7fd0780c3dce
DefaultImporter:
  userData: 

```

`LICENSE`:

```
MIT License

Copyright (c) 2018 Misaka Mikoto

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```

`Packages/manifest.json`:

```json
{
  "dependencies": {
    "com.unity.ide.rider": "3.0.15",
    "com.unity.ide.visualstudio": "2.0.16",
    "com.unity.ide.vscode": "1.2.5",
    "com.unity.test-framework": "1.1.31",
    "com.unity.timeline": "1.6.4",
    "com.unity.ugui": "1.0.0",
    "com.unity.modules.ai": "1.0.0",
    "com.unity.modules.androidjni": "1.0.0",
    "com.unity.modules.animation": "1.0.0",
    "com.unity.modules.assetbundle": "1.0.0",
    "com.unity.modules.audio": "1.0.0",
    "com.unity.modules.cloth": "1.0.0",
    "com.unity.modules.director": "1.0.0",
    "com.unity.modules.imageconversion": "1.0.0",
    "com.unity.modules.imgui": "1.0.0",
    "com.unity.modules.jsonserialize": "1.0.0",
    "com.unity.modules.particlesystem": "1.0.0",
    "com.unity.modules.physics": "1.0.0",
    "com.unity.modules.physics2d": "1.0.0",
    "com.unity.modules.screencapture": "1.0.0",
    "com.unity.modules.terrain": "1.0.0",
    "com.unity.modules.terrainphysics": "1.0.0",
    "com.unity.modules.tilemap": "1.0.0",
    "com.unity.modules.ui": "1.0.0",
    "com.unity.modules.uielements": "1.0.0",
    "com.unity.modules.umbra": "1.0.0",
    "com.unity.modules.unityanalytics": "1.0.0",
    "com.unity.modules.unitywebrequest": "1.0.0",
    "com.unity.modules.unitywebrequestassetbundle": "1.0.0",
    "com.unity.modules.unitywebrequestaudio": "1.0.0",
    "com.unity.modules.unitywebrequesttexture": "1.0.0",
    "com.unity.modules.unitywebrequestwww": "1.0.0",
    "com.unity.modules.vehicles": "1.0.0",
    "com.unity.modules.video": "1.0.0",
    "com.unity.modules.vr": "1.0.0",
    "com.unity.modules.wind": "1.0.0",
    "com.unity.modules.xr": "1.0.0"
  }
}

```

`ProjectSettings/AudioManager.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!11 &1
AudioManager:
  m_ObjectHideFlags: 0
  m_Volume: 1
  Rolloff Scale: 1
  Doppler Factor: 1
  Default Speaker Mode: 2
  m_SampleRate: 0
  m_DSPBufferSize: 1024
  m_VirtualVoiceCount: 512
  m_RealVoiceCount: 32
  m_SpatializerPlugin: 
  m_AmbisonicDecoderPlugin: 
  m_DisableAudio: 0
  m_VirtualizeEffects: 1

```

`ProjectSettings/ClusterInputManager.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!236 &1
ClusterInputManager:
  m_ObjectHideFlags: 0
  m_Inputs: []

```

`ProjectSettings/DynamicsManager.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!55 &1
PhysicsManager:
  m_ObjectHideFlags: 0
  serializedVersion: 7
  m_Gravity: {x: 0, y: -9.81, z: 0}
  m_DefaultMaterial: {fileID: 0}
  m_BounceThreshold: 2
  m_SleepThreshold: 0.005
  m_DefaultContactOffset: 0.01
  m_DefaultSolverIterations: 6
  m_DefaultSolverVelocityIterations: 1
  m_QueriesHitBackfaces: 0
  m_QueriesHitTriggers: 1
  m_EnableAdaptiveForce: 0
  m_ClothInterCollisionDistance: 0
  m_ClothInterCollisionStiffness: 0
  m_ContactsGeneration: 1
  m_LayerCollisionMatrix: ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
  m_AutoSimulation: 1
  m_AutoSyncTransforms: 1
  m_ClothInterCollisionSettingsToggle: 0
  m_ContactPairsMode: 0
  m_BroadphaseType: 0
  m_WorldBounds:
    m_Center: {x: 0, y: 0, z: 0}
    m_Extent: {x: 250, y: 250, z: 250}
  m_WorldSubdivisions: 8

```

`ProjectSettings/EditorBuildSettings.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!1045 &1
EditorBuildSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 2
  m_Scenes:
  - enabled: 1
    path: Assets/Scenes/SampleScene.unity
    guid: 99c9720ab356a0642a771bea13969a05
  m_configObjects: {}

```

`ProjectSettings/EditorSettings.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!159 &1
EditorSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 11
  m_SerializationMode: 2
  m_LineEndingsForNewScripts: 2
  m_DefaultBehaviorMode: 0
  m_PrefabRegularEnvironment: {fileID: 0}
  m_PrefabUIEnvironment: {fileID: 0}
  m_SpritePackerMode: 0
  m_SpritePackerPaddingPower: 1
  m_Bc7TextureCompressor: 0
  m_EtcTextureCompressorBehavior: 1
  m_EtcTextureFastCompressor: 1
  m_EtcTextureNormalCompressor: 2
  m_EtcTextureBestCompressor: 4
  m_ProjectGenerationIncludedExtensions: txt;xml;fnt;cd;asmref
  m_ProjectGenerationRootNamespace: 
  m_EnableTextureStreamingInEditMode: 1
  m_EnableTextureStreamingInPlayMode: 1
  m_AsyncShaderCompilation: 1
  m_CachingShaderPreprocessor: 1
  m_PrefabModeAllowAutoSave: 1
  m_EnterPlayModeOptionsEnabled: 1
  m_EnterPlayModeOptions: 2
  m_GameObjectNamingDigits: 1
  m_GameObjectNamingScheme: 0
  m_AssetNamingUsesSpace: 1
  m_UseLegacyProbeSampleCount: 1
  m_SerializeInlineMappingsOnOneLine: 0
  m_DisableCookiesInLightmapper: 1
  m_AssetPipelineMode: 1
  m_RefreshImportMode: 0
  m_CacheServerMode: 0
  m_CacheServerEndpoint: 
  m_CacheServerNamespacePrefix: default
  m_CacheServerEnableDownload: 1
  m_CacheServerEnableUpload: 1
  m_CacheServerEnableAuth: 0
  m_CacheServerEnableTls: 0
  m_CacheServerValidationMode: 2

```

`ProjectSettings/GraphicsSettings.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!30 &1
GraphicsSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 12
  m_Deferred:
    m_Mode: 1
    m_Shader: {fileID: 69, guid: 0000000000000000f000000000000000, type: 0}
  m_DeferredReflections:
    m_Mode: 1
    m_Shader: {fileID: 74, guid: 0000000000000000f000000000000000, type: 0}
  m_ScreenSpaceShadows:
    m_Mode: 1
    m_Shader: {fileID: 64, guid: 0000000000000000f000000000000000, type: 0}
  m_LegacyDeferred:
    m_Mode: 1
    m_Shader: {fileID: 63, guid: 0000000000000000f000000000000000, type: 0}
  m_DepthNormals:
    m_Mode: 1
    m_Shader: {fileID: 62, guid: 0000000000000000f000000000000000, type: 0}
  m_MotionVectors:
    m_Mode: 1
    m_Shader: {fileID: 75, guid: 0000000000000000f000000000000000, type: 0}
  m_LightHalo:
    m_Mode: 1
    m_Shader: {fileID: 105, guid: 0000000000000000f000000000000000, type: 0}
  m_LensFlare:
    m_Mode: 1
    m_Shader: {fileID: 102, guid: 0000000000000000f000000000000000, type: 0}
  m_AlwaysIncludedShaders:
  - {fileID: 7, guid: 0000000000000000f000000000000000, type: 0}
  - {fileID: 15104, guid: 0000000000000000f000000000000000, type: 0}
  - {fileID: 15105, guid: 0000000000000000f000000000000000, type: 0}
  - {fileID: 15106, guid: 0000000000000000f000000000000000, type: 0}
  - {fileID: 10753, guid: 0000000000000000f000000000000000, type: 0}
  - {fileID: 10770, guid: 0000000000000000f000000000000000, type: 0}
  - {fileID: 17000, guid: 0000000000000000f000000000000000, type: 0}
  - {fileID: 16000, guid: 0000000000000000f000000000000000, type: 0}
  m_PreloadedShaders: []
  m_SpritesDefaultMaterial: {fileID: 10754, guid: 0000000000000000f000000000000000,
    type: 0}
  m_CustomRenderPipeline: {fileID: 0}
  m_TransparencySortMode: 0
  m_TransparencySortAxis: {x: 0, y: 0, z: 1}
  m_DefaultRenderingPath: 1
  m_DefaultMobileRenderingPath: 1
  m_TierSettings: []
  m_LightmapStripping: 0
  m_FogStripping: 0
  m_InstancingStripping: 0
  m_LightmapKeepPlain: 1
  m_LightmapKeepDirCombined: 1
  m_LightmapKeepDynamicPlain: 1
  m_LightmapKeepDynamicDirCombined: 1
  m_LightmapKeepShadowMask: 1
  m_LightmapKeepSubtractive: 1
  m_FogKeepLinear: 1
  m_FogKeepExp: 1
  m_FogKeepExp2: 1
  m_AlbedoSwatchInfos: []
  m_LightsUseLinearIntensity: 0
  m_LightsUseColorTemperature: 0

```

`ProjectSettings/InputManager.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!13 &1
InputManager:
  m_ObjectHideFlags: 0
  serializedVersion: 2
  m_Axes:
  - serializedVersion: 3
    m_Name: Horizontal
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: left
    positiveButton: right
    altNegativeButton: a
    altPositiveButton: d
    gravity: 3
    dead: 0.001
    sensitivity: 3
    snap: 1
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Vertical
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: down
    positiveButton: up
    altNegativeButton: s
    altPositiveButton: w
    gravity: 3
    dead: 0.001
    sensitivity: 3
    snap: 1
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Fire1
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: left ctrl
    altNegativeButton: 
    altPositiveButton: mouse 0
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Fire2
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: left alt
    altNegativeButton: 
    altPositiveButton: mouse 1
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Fire3
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: left shift
    altNegativeButton: 
    altPositiveButton: mouse 2
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Jump
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: space
    altNegativeButton: 
    altPositiveButton: 
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Mouse X
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: 
    altNegativeButton: 
    altPositiveButton: 
    gravity: 0
    dead: 0
    sensitivity: 0.1
    snap: 0
    invert: 0
    type: 1
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Mouse Y
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: 
    altNegativeButton: 
    altPositiveButton: 
    gravity: 0
    dead: 0
    sensitivity: 0.1
    snap: 0
    invert: 0
    type: 1
    axis: 1
    joyNum: 0
  - serializedVersion: 3
    m_Name: Mouse ScrollWheel
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: 
    altNegativeButton: 
    altPositiveButton: 
    gravity: 0
    dead: 0
    sensitivity: 0.1
    snap: 0
    invert: 0
    type: 1
    axis: 2
    joyNum: 0
  - serializedVersion: 3
    m_Name: Horizontal
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: 
    altNegativeButton: 
    altPositiveButton: 
    gravity: 0
    dead: 0.19
    sensitivity: 1
    snap: 0
    invert: 0
    type: 2
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Vertical
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: 
    altNegativeButton: 
    altPositiveButton: 
    gravity: 0
    dead: 0.19
    sensitivity: 1
    snap: 0
    invert: 1
    type: 2
    axis: 1
    joyNum: 0
  - serializedVersion: 3
    m_Name: Fire1
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: joystick button 0
    altNegativeButton: 
    altPositiveButton: 
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Fire2
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: joystick button 1
    altNegativeButton: 
    altPositiveButton: 
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Fire3
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: joystick button 2
    altNegativeButton: 
    altPositiveButton: 
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Jump
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: joystick button 3
    altNegativeButton: 
    altPositiveButton: 
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Submit
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: return
    altNegativeButton: 
    altPositiveButton: joystick button 0
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Submit
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: enter
    altNegativeButton: 
    altPositiveButton: space
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0
  - serializedVersion: 3
    m_Name: Cancel
    descriptiveName: 
    descriptiveNegativeName: 
    negativeButton: 
    positiveButton: escape
    altNegativeButton: 
    altPositiveButton: joystick button 1
    gravity: 1000
    dead: 0.001
    sensitivity: 1000
    snap: 0
    invert: 0
    type: 0
    axis: 0
    joyNum: 0

```

`ProjectSettings/NavMeshAreas.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!126 &1
NavMeshProjectSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 2
  areas:
  - name: Walkable
    cost: 1
  - name: Not Walkable
    cost: 1
  - name: Jump
    cost: 2
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  - name: 
    cost: 1
  m_LastAgentTypeID: -887442657
  m_Settings:
  - serializedVersion: 2
    agentTypeID: 0
    agentRadius: 0.5
    agentHeight: 2
    agentSlope: 45
    agentClimb: 0.75
    ledgeDropHeight: 0
    maxJumpAcrossDistance: 0
    minRegionArea: 2
    manualCellSize: 0
    cellSize: 0.16666667
    manualTileSize: 0
    tileSize: 256
    accuratePlacement: 0
    debug:
      m_Flags: 0
  m_SettingNames:
  - Humanoid

```

`ProjectSettings/NetworkManager.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!149 &1
NetworkManager:
  m_ObjectHideFlags: 0
  m_DebugLevel: 0
  m_Sendrate: 15
  m_AssetToPrefab: {}

```

`ProjectSettings/Physics2DSettings.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!19 &1
Physics2DSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 3
  m_Gravity: {x: 0, y: -9.81}
  m_DefaultMaterial: {fileID: 0}
  m_VelocityIterations: 8
  m_PositionIterations: 3
  m_VelocityThreshold: 1
  m_MaxLinearCorrection: 0.2
  m_MaxAngularCorrection: 8
  m_MaxTranslationSpeed: 100
  m_MaxRotationSpeed: 360
  m_BaumgarteScale: 0.2
  m_BaumgarteTimeOfImpactScale: 0.75
  m_TimeToSleep: 0.5
  m_LinearSleepTolerance: 0.01
  m_AngularSleepTolerance: 2
  m_DefaultContactOffset: 0.01
  m_AutoSimulation: 1
  m_QueriesHitTriggers: 1
  m_QueriesStartInColliders: 1
  m_ChangeStopsCallbacks: 0
  m_CallbacksOnDisable: 1
  m_AutoSyncTransforms: 1
  m_AlwaysShowColliders: 0
  m_ShowColliderSleep: 1
  m_ShowColliderContacts: 0
  m_ShowColliderAABB: 0
  m_ContactArrowScale: 0.2
  m_ColliderAwakeColor: {r: 0.5686275, g: 0.95686275, b: 0.54509807, a: 0.7529412}
  m_ColliderAsleepColor: {r: 0.5686275, g: 0.95686275, b: 0.54509807, a: 0.36078432}
  m_ColliderContactColor: {r: 1, g: 0, b: 1, a: 0.6862745}
  m_ColliderAABBColor: {r: 1, g: 1, b: 0, a: 0.2509804}
  m_LayerCollisionMatrix: ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff

```

`ProjectSettings/PresetManager.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!1386491679 &1
PresetManager:
  m_ObjectHideFlags: 0
  m_DefaultList:
  - type:
      m_NativeTypeID: 108
      m_ManagedTypePPtr: {fileID: 0}
      m_ManagedTypeFallback: 
    defaultPresets:
    - m_Preset: {fileID: 2655988077585873504, guid: c1cf8506f04ef2c4a88b64b6c4202eea,
        type: 2}
  - type:
      m_NativeTypeID: 1020
      m_ManagedTypePPtr: {fileID: 0}
      m_ManagedTypeFallback: 
    defaultPresets:
    - m_Preset: {fileID: 2655988077585873504, guid: 0cd792cc87e492d43b4e95b205fc5cc6,
        type: 2}
  - type:
      m_NativeTypeID: 1006
      m_ManagedTypePPtr: {fileID: 0}
      m_ManagedTypeFallback: 
    defaultPresets:
    - m_Preset: {fileID: 2655988077585873504, guid: 7a99f8aa944efe94cb9bd74562b7d5f9,
        type: 2}

```

`ProjectSettings/ProjectSettings.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!129 &1
PlayerSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 23
  productGUID: a0ed4b9b126b5574baeb7716deaa6a8d
  AndroidProfiler: 0
  AndroidFilterTouchesWhenObscured: 0
  AndroidEnableSustainedPerformanceMode: 0
  defaultScreenOrientation: 4
  targetDevice: 2
  useOnDemandResources: 0
  accelerometerFrequency: 60
  companyName: Misaka-Mikoto-Tech
  productName: MonoHook
  defaultCursor: {fileID: 0}
  cursorHotspot: {x: 0, y: 0}
  m_SplashScreenBackgroundColor: {r: 0.13725491, g: 0.12156863, b: 0.1254902, a: 1}
  m_ShowUnitySplashScreen: 1
  m_ShowUnitySplashLogo: 1
  m_SplashScreenOverlayOpacity: 1
  m_SplashScreenAnimation: 1
  m_SplashScreenLogoStyle: 1
  m_SplashScreenDrawMode: 0
  m_SplashScreenBackgroundAnimationZoom: 1
  m_SplashScreenLogoAnimationZoom: 1
  m_SplashScreenBackgroundLandscapeAspect: 1
  m_SplashScreenBackgroundPortraitAspect: 1
  m_SplashScreenBackgroundLandscapeUvs:
    serializedVersion: 2
    x: 0
    y: 0
    width: 1
    height: 1
  m_SplashScreenBackgroundPortraitUvs:
    serializedVersion: 2
    x: 0
    y: 0
    width: 1
    height: 1
  m_SplashScreenLogos: []
  m_VirtualRealitySplashScreen: {fileID: 0}
  m_HolographicTrackingLossScreen: {fileID: 0}
  defaultScreenWidth: 1024
  defaultScreenHeight: 768
  defaultScreenWidthWeb: 960
  defaultScreenHeightWeb: 600
  m_StereoRenderingPath: 0
  m_ActiveColorSpace: 0
  m_MTRendering: 1
  mipStripping: 0
  numberOfMipsStripped: 0
  m_StackTraceTypes: 010000000100000001000000010000000100000001000000
  iosShowActivityIndicatorOnLoading: -1
  androidShowActivityIndicatorOnLoading: -1
  iosUseCustomAppBackgroundBehavior: 0
  iosAllowHTTPDownload: 1
  allowedAutorotateToPortrait: 0
  allowedAutorotateToPortraitUpsideDown: 0
  allowedAutorotateToLandscapeRight: 1
  allowedAutorotateToLandscapeLeft: 1
  useOSAutorotation: 1
  use32BitDisplayBuffer: 1
  preserveFramebufferAlpha: 0
  disableDepthAndStencilBuffers: 0
  androidStartInFullscreen: 1
  androidRenderOutsideSafeArea: 1
  androidUseSwappy: 0
  androidBlitType: 0
  androidResizableWindow: 0
  androidDefaultWindowWidth: 1920
  androidDefaultWindowHeight: 1080
  androidMinimumWindowWidth: 400
  androidMinimumWindowHeight: 300
  androidFullscreenMode: 1
  defaultIsNativeResolution: 1
  macRetinaSupport: 1
  runInBackground: 0
  captureSingleScreen: 0
  muteOtherAudioSources: 0
  Prepare IOS For Recording: 0
  Force IOS Speakers When Recording: 0
  deferSystemGesturesMode: 0
  hideHomeButton: 0
  submitAnalytics: 1
  usePlayerLog: 1
  bakeCollisionMeshes: 0
  forceSingleInstance: 0
  useFlipModelSwapchain: 1
  resizableWindow: 0
  useMacAppStoreValidation: 0
  macAppStoreCategory: public.app-category.games
  gpuSkinning: 1
  xboxPIXTextureCapture: 0
  xboxEnableAvatar: 0
  xboxEnableKinect: 0
  xboxEnableKinectAutoTracking: 0
  xboxEnableFitness: 0
  visibleInBackground: 1
  allowFullscreenSwitch: 1
  fullscreenMode: 3
  xboxSpeechDB: 0
  xboxEnableHeadOrientation: 0
  xboxEnableGuest: 0
  xboxEnablePIXSampling: 0
  metalFramebufferOnly: 0
  xboxOneResolution: 0
  xboxOneSResolution: 0
  xboxOneXResolution: 3
  xboxOneMonoLoggingLevel: 0
  xboxOneLoggingLevel: 1
  xboxOneDisableEsram: 0
  xboxOneEnableTypeOptimization: 0
  xboxOnePresentImmediateThreshold: 0
  switchQueueCommandMemory: 0
  switchQueueControlMemory: 16384
  switchQueueComputeMemory: 262144
  switchNVNShaderPoolsGranularity: 33554432
  switchNVNDefaultPoolsGranularity: 16777216
  switchNVNOtherPoolsGranularity: 16777216
  switchNVNMaxPublicTextureIDCount: 0
  switchNVNMaxPublicSamplerIDCount: 0
  stadiaPresentMode: 0
  stadiaTargetFramerate: 0
  vulkanNumSwapchainBuffers: 3
  vulkanEnableSetSRGBWrite: 0
  vulkanEnablePreTransform: 0
  vulkanEnableLateAcquireNextImage: 0
  vulkanEnableCommandBufferRecycling: 1
  m_SupportedAspectRatios:
    4:3: 1
    5:4: 1
    16:10: 1
    16:9: 1
    Others: 1
  bundleVersion: 1.0
  preloadedAssets: []
  metroInputSource: 0
  wsaTransparentSwapchain: 0
  m_HolographicPauseOnTrackingLoss: 1
  xboxOneDisableKinectGpuReservation: 0
  xboxOneEnable7thCore: 0
  vrSettings:
    enable360StereoCapture: 0
  isWsaHolographicRemotingEnabled: 0
  enableFrameTimingStats: 0
  enableOpenGLProfilerGPURecorders: 1
  useHDRDisplay: 0
  D3DHDRBitDepth: 0
  m_ColorGamuts: 00000000
  targetPixelDensity: 30
  resolutionScalingMode: 0
  resetResolutionOnWindowResize: 0
  androidSupportedAspectRatio: 1
  androidMaxAspectRatio: 2.1
  applicationIdentifier:
    Android: com.MisakaMikotoTech.MonoHook
    Standalone: com.Misaka-Mikoto-Tech.MonoHook
    Tizen: 
    iPhone: com.Misaka-Mikoto-Tech.MonoHook
    tvOS: 
  buildNumber:
    Standalone: 0
    iPhone: 0
    tvOS: 0
  overrideDefaultApplicationIdentifier: 0
  AndroidBundleVersionCode: 1
  AndroidMinSdkVersion: 22
  AndroidTargetSdkVersion: 0
  AndroidPreferredInstallLocation: 1
  aotOptions: 
  stripEngineCode: 1
  iPhoneStrippingLevel: 0
  iPhoneScriptCallOptimization: 0
  ForceInternetPermission: 0
  ForceSDCardPermission: 0
  CreateWallpaper: 0
  APKExpansionFiles: 0
  keepLoadedShadersAlive: 0
  StripUnusedMeshComponents: 1
  VertexChannelCompressionMask: 214
  iPhoneSdkVersion: 988
  iOSTargetOSVersionString: 11.0
  tvOSSdkVersion: 0
  tvOSRequireExtendedGameController: 0
  tvOSTargetOSVersionString: 11.0
  uIPrerenderedIcon: 0
  uIRequiresPersistentWiFi: 0
  uIRequiresFullScreen: 1
  uIStatusBarHidden: 1
  uIExitOnSuspend: 0
  uIStatusBarStyle: 0
  appleTVSplashScreen: {fileID: 0}
  appleTVSplashScreen2x: {fileID: 0}
  tvOSSmallIconLayers: []
  tvOSSmallIconLayers2x: []
  tvOSLargeIconLayers: []
  tvOSLargeIconLayers2x: []
  tvOSTopShelfImageLayers: []
  tvOSTopShelfImageLayers2x: []
  tvOSTopShelfImageWideLayers: []
  tvOSTopShelfImageWideLayers2x: []
  iOSLaunchScreenType: 0
  iOSLaunchScreenPortrait: {fileID: 0}
  iOSLaunchScreenLandscape: {fileID: 0}
  iOSLaunchScreenBackgroundColor:
    serializedVersion: 2
    rgba: 0
  iOSLaunchScreenFillPct: 100
  iOSLaunchScreenSize: 100
  iOSLaunchScreenCustomXibPath: 
  iOSLaunchScreeniPadType: 0
  iOSLaunchScreeniPadImage: {fileID: 0}
  iOSLaunchScreeniPadBackgroundColor:
    serializedVersion: 2
    rgba: 0
  iOSLaunchScreeniPadFillPct: 100
  iOSLaunchScreeniPadSize: 100
  iOSLaunchScreeniPadCustomXibPath: 
  iOSLaunchScreenCustomStoryboardPath: 
  iOSLaunchScreeniPadCustomStoryboardPath: 
  iOSDeviceRequirements: []
  iOSURLSchemes: []
  macOSURLSchemes: []
  iOSBackgroundModes: 0
  iOSMetalForceHardShadows: 0
  metalEditorSupport: 1
  metalAPIValidation: 1
  iOSRenderExtraFrameOnPause: 1
  iosCopyPluginsCodeInsteadOfSymlink: 0
  appleDeveloperTeamID: 
  iOSManualSigningProvisioningProfileID: 
  tvOSManualSigningProvisioningProfileID: 
  iOSManualSigningProvisioningProfileType: 0
  tvOSManualSigningProvisioningProfileType: 0
  appleEnableAutomaticSigning: 0
  iOSRequireARKit: 0
  iOSAutomaticallyDetectAndAddCapabilities: 1
  appleEnableProMotion: 0
  shaderPrecisionModel: 0
  clonedFromGUID: 00000000000000000000000000000000
  templatePackageId: 
  templateDefaultScene: 
  useCustomMainManifest: 0
  useCustomLauncherManifest: 0
  useCustomMainGradleTemplate: 0
  useCustomLauncherGradleManifest: 0
  useCustomBaseGradleTemplate: 0
  useCustomGradlePropertiesTemplate: 0
  useCustomProguardFile: 0
  AndroidTargetArchitectures: 1
  AndroidTargetDevices: 0
  AndroidSplashScreenScale: 0
  androidSplashScreen: {fileID: 0}
  AndroidKeystoreName: '{inproject}: '
  AndroidKeyaliasName: 
  AndroidBuildApkPerCpuArchitecture: 0
  AndroidTVCompatibility: 1
  AndroidIsGame: 1
  AndroidEnableTango: 0
  androidEnableBanner: 1
  androidUseLowAccuracyLocation: 0
  androidUseCustomKeystore: 0
  m_AndroidBanners:
  - width: 320
    height: 180
    banner: {fileID: 0}
  androidGamepadSupportLevel: 0
  chromeosInputEmulation: 1
  AndroidMinifyWithR8: 0
  AndroidMinifyRelease: 0
  AndroidMinifyDebug: 0
  AndroidValidateAppBundleSize: 1
  AndroidAppBundleSizeToValidate: 150
  m_BuildTargetIcons: []
  m_BuildTargetPlatformIcons:
  - m_BuildTarget: Android
    m_Icons:
    - m_Textures: []
      m_Width: 432
      m_Height: 432
      m_Kind: 2
      m_SubKind: 
    - m_Textures: []
      m_Width: 324
      m_Height: 324
      m_Kind: 2
      m_SubKind: 
    - m_Textures: []
      m_Width: 216
      m_Height: 216
      m_Kind: 2
      m_SubKind: 
    - m_Textures: []
      m_Width: 162
      m_Height: 162
      m_Kind: 2
      m_SubKind: 
    - m_Textures: []
      m_Width: 108
      m_Height: 108
      m_Kind: 2
      m_SubKind: 
    - m_Textures: []
      m_Width: 81
      m_Height: 81
      m_Kind: 2
      m_SubKind: 
    - m_Textures: []
      m_Width: 192
      m_Height: 192
      m_Kind: 0
      m_SubKind: 
    - m_Textures: []
      m_Width: 144
      m_Height: 144
      m_Kind: 0
      m_SubKind: 
    - m_Textures: []
      m_Width: 96
      m_Height: 96
      m_Kind: 0
      m_SubKind: 
    - m_Textures: []
      m_Width: 72
      m_Height: 72
      m_Kind: 0
      m_SubKind: 
    - m_Textures: []
      m_Width: 48
      m_Height: 48
      m_Kind: 0
      m_SubKind: 
    - m_Textures: []
      m_Width: 36
      m_Height: 36
      m_Kind: 0
      m_SubKind: 
    - m_Textures: []
      m_Width: 192
      m_Height: 192
      m_Kind: 1
      m_SubKind: 
    - m_Textures: []
      m_Width: 144
      m_Height: 144
      m_Kind: 1
      m_SubKind: 
    - m_Textures: []
      m_Width: 96
      m_Height: 96
      m_Kind: 1
      m_SubKind: 
    - m_Textures: []
      m_Width: 72
      m_Height: 72
      m_Kind: 1
      m_SubKind: 
    - m_Textures: []
      m_Width: 48
      m_Height: 48
      m_Kind: 1
      m_SubKind: 
    - m_Textures: []
      m_Width: 36
      m_Height: 36
      m_Kind: 1
      m_SubKind: 
  - m_BuildTarget: iPhone
    m_Icons:
    - m_Textures: []
      m_Width: 180
      m_Height: 180
      m_Kind: 0
      m_SubKind: iPhone
    - m_Textures: []
      m_Width: 120
      m_Height: 120
      m_Kind: 0
      m_SubKind: iPhone
    - m_Textures: []
      m_Width: 167
      m_Height: 167
      m_Kind: 0
      m_SubKind: iPad
    - m_Textures: []
      m_Width: 152
      m_Height: 152
      m_Kind: 0
      m_SubKind: iPad
    - m_Textures: []
      m_Width: 76
      m_Height: 76
      m_Kind: 0
      m_SubKind: iPad
    - m_Textures: []
      m_Width: 120
      m_Height: 120
      m_Kind: 3
      m_SubKind: iPhone
    - m_Textures: []
      m_Width: 80
      m_Height: 80
      m_Kind: 3
      m_SubKind: iPhone
    - m_Textures: []
      m_Width: 80
      m_Height: 80
      m_Kind: 3
      m_SubKind: iPad
    - m_Textures: []
      m_Width: 40
      m_Height: 40
      m_Kind: 3
      m_SubKind: iPad
    - m_Textures: []
      m_Width: 87
      m_Height: 87
      m_Kind: 1
      m_SubKind: iPhone
    - m_Textures: []
      m_Width: 58
      m_Height: 58
      m_Kind: 1
      m_SubKind: iPhone
    - m_Textures: []
      m_Width: 29
      m_Height: 29
      m_Kind: 1
      m_SubKind: iPhone
    - m_Textures: []
      m_Width: 58
      m_Height: 58
      m_Kind: 1
      m_SubKind: iPad
    - m_Textures: []
      m_Width: 29
      m_Height: 29
      m_Kind: 1
      m_SubKind: iPad
    - m_Textures: []
      m_Width: 60
      m_Height: 60
      m_Kind: 2
      m_SubKind: iPhone
    - m_Textures: []
      m_Width: 40
      m_Height: 40
      m_Kind: 2
      m_SubKind: iPhone
    - m_Textures: []
      m_Width: 40
      m_Height: 40
      m_Kind: 2
      m_SubKind: iPad
    - m_Textures: []
      m_Width: 20
      m_Height: 20
      m_Kind: 2
      m_SubKind: iPad
    - m_Textures: []
      m_Width: 1024
      m_Height: 1024
      m_Kind: 4
      m_SubKind: App Store
  m_BuildTargetBatching:
  - m_BuildTarget: Standalone
    m_StaticBatching: 1
    m_DynamicBatching: 0
  - m_BuildTarget: tvOS
    m_StaticBatching: 1
    m_DynamicBatching: 0
  - m_BuildTarget: Android
    m_StaticBatching: 1
    m_DynamicBatching: 0
  - m_BuildTarget: iPhone
    m_StaticBatching: 1
    m_DynamicBatching: 0
  - m_BuildTarget: WebGL
    m_StaticBatching: 0
    m_DynamicBatching: 0
  m_BuildTargetGraphicsJobs:
  - m_BuildTarget: MacStandaloneSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: Switch
    m_GraphicsJobs: 0
  - m_BuildTarget: MetroSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: GameCoreScarlettSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: AppleTVSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: BJMSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: LinuxStandaloneSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: GameCoreXboxOneSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: PS4Player
    m_GraphicsJobs: 0
  - m_BuildTarget: iOSSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: PS5Player
    m_GraphicsJobs: 0
  - m_BuildTarget: WindowsStandaloneSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: XboxOnePlayer
    m_GraphicsJobs: 0
  - m_BuildTarget: LuminSupport
    m_GraphicsJobs: 0
  - m_BuildTarget: CloudRendering
    m_GraphicsJobs: 0
  - m_BuildTarget: AndroidPlayer
    m_GraphicsJobs: 0
  - m_BuildTarget: WebGLSupport
    m_GraphicsJobs: 0
  m_BuildTargetGraphicsJobMode:
  - m_BuildTarget: PS4Player
    m_GraphicsJobMode: 0
  - m_BuildTarget: XboxOnePlayer
    m_GraphicsJobMode: 0
  m_BuildTargetGraphicsAPIs:
  - m_BuildTarget: AndroidPlayer
    m_APIs: 08000000
    m_Automatic: 0
  - m_BuildTarget: iOSSupport
    m_APIs: 10000000
    m_Automatic: 1
  m_BuildTargetVRSettings: []
  openGLRequireES31: 0
  openGLRequireES31AEP: 0
  openGLRequireES32: 0
  m_TemplateCustomTags: {}
  mobileMTRendering:
    iPhone: 1
    tvOS: 1
  m_BuildTargetGroupLightmapEncodingQuality:
  - m_BuildTarget: Standalone
    m_EncodingQuality: 1
  - m_BuildTarget: XboxOne
    m_EncodingQuality: 1
  - m_BuildTarget: PS4
    m_EncodingQuality: 1
  m_BuildTargetGroupLightmapSettings: []
  m_BuildTargetNormalMapEncoding: []
  m_BuildTargetDefaultTextureCompressionFormat: []
  playModeTestRunnerEnabled: 0
  runPlayModeTestAsEditModeTest: 0
  actionOnDotNetUnhandledException: 1
  enableInternalProfiler: 0
  logObjCUncaughtExceptions: 1
  enableCrashReportAPI: 0
  cameraUsageDescription: 
  locationUsageDescription: 
  microphoneUsageDescription: 
  bluetoothUsageDescription: 
  switchNMETAOverride: 
  switchNetLibKey: 
  switchSocketMemoryPoolSize: 6144
  switchSocketAllocatorPoolSize: 128
  switchSocketConcurrencyLimit: 14
  switchScreenResolutionBehavior: 2
  switchUseCPUProfiler: 0
  switchUseGOLDLinker: 0
  switchLTOSetting: 0
  switchApplicationID: 0x01004b9000490000
  switchNSODependencies: 
  switchTitleNames_0: 
  switchTitleNames_1: 
  switchTitleNames_2: 
  switchTitleNames_3: 
  switchTitleNames_4: 
  switchTitleNames_5: 
  switchTitleNames_6: 
  switchTitleNames_7: 
  switchTitleNames_8: 
  switchTitleNames_9: 
  switchTitleNames_10: 
  switchTitleNames_11: 
  switchTitleNames_12: 
  switchTitleNames_13: 
  switchTitleNames_14: 
  switchTitleNames_15: 
  switchPublisherNames_0: 
  switchPublisherNames_1: 
  switchPublisherNames_2: 
  switchPublisherNames_3: 
  switchPublisherNames_4: 
  switchPublisherNames_5: 
  switchPublisherNames_6: 
  switchPublisherNames_7: 
  switchPublisherNames_8: 
  switchPublisherNames_9: 
  switchPublisherNames_10: 
  switchPublisherNames_11: 
  switchPublisherNames_12: 
  switchPublisherNames_13: 
  switchPublisherNames_14: 
  switchPublisherNames_15: 
  switchIcons_0: {fileID: 0}
  switchIcons_1: {fileID: 0}
  switchIcons_2: {fileID: 0}
  switchIcons_3: {fileID: 0}
  switchIcons_4: {fileID: 0}
  switchIcons_5: {fileID: 0}
  switchIcons_6: {fileID: 0}
  switchIcons_7: {fileID: 0}
  switchIcons_8: {fileID: 0}
  switchIcons_9: {fileID: 0}
  switchIcons_10: {fileID: 0}
  switchIcons_11: {fileID: 0}
  switchIcons_12: {fileID: 0}
  switchIcons_13: {fileID: 0}
  switchIcons_14: {fileID: 0}
  switchIcons_15: {fileID: 0}
  switchSmallIcons_0: {fileID: 0}
  switchSmallIcons_1: {fileID: 0}
  switchSmallIcons_2: {fileID: 0}
  switchSmallIcons_3: {fileID: 0}
  switchSmallIcons_4: {fileID: 0}
  switchSmallIcons_5: {fileID: 0}
  switchSmallIcons_6: {fileID: 0}
  switchSmallIcons_7: {fileID: 0}
  switchSmallIcons_8: {fileID: 0}
  switchSmallIcons_9: {fileID: 0}
  switchSmallIcons_10: {fileID: 0}
  switchSmallIcons_11: {fileID: 0}
  switchSmallIcons_12: {fileID: 0}
  switchSmallIcons_13: {fileID: 0}
  switchSmallIcons_14: {fileID: 0}
  switchSmallIcons_15: {fileID: 0}
  switchManualHTML: 
  switchAccessibleURLs: 
  switchLegalInformation: 
  switchMainThreadStackSize: 1048576
  switchPresenceGroupId: 
  switchLogoHandling: 0
  switchReleaseVersion: 0
  switchDisplayVersion: 1.0.0
  switchStartupUserAccount: 0
  switchTouchScreenUsage: 0
  switchSupportedLanguagesMask: 0
  switchLogoType: 0
  switchApplicationErrorCodeCategory: 
  switchUserAccountSaveDataSize: 0
  switchUserAccountSaveDataJournalSize: 0
  switchApplicationAttribute: 0
  switchCardSpecSize: -1
  switchCardSpecClock: -1
  switchRatingsMask: 0
  switchRatingsInt_0: 0
  switchRatingsInt_1: 0
  switchRatingsInt_2: 0
  switchRatingsInt_3: 0
  switchRatingsInt_4: 0
  switchRatingsInt_5: 0
  switchRatingsInt_6: 0
  switchRatingsInt_7: 0
  switchRatingsInt_8: 0
  switchRatingsInt_9: 0
  switchRatingsInt_10: 0
  switchRatingsInt_11: 0
  switchRatingsInt_12: 0
  switchLocalCommunicationIds_0: 
  switchLocalCommunicationIds_1: 
  switchLocalCommunicationIds_2: 
  switchLocalCommunicationIds_3: 
  switchLocalCommunicationIds_4: 
  switchLocalCommunicationIds_5: 
  switchLocalCommunicationIds_6: 
  switchLocalCommunicationIds_7: 
  switchParentalControl: 0
  switchAllowsScreenshot: 1
  switchAllowsVideoCapturing: 1
  switchAllowsRuntimeAddOnContentInstall: 0
  switchDataLossConfirmation: 0
  switchUserAccountLockEnabled: 0
  switchSystemResourceMemory: 16777216
  switchSupportedNpadStyles: 3
  switchNativeFsCacheSize: 32
  switchIsHoldTypeHorizontal: 0
  switchSupportedNpadCount: 8
  switchSocketConfigEnabled: 0
  switchTcpInitialSendBufferSize: 32
  switchTcpInitialReceiveBufferSize: 64
  switchTcpAutoSendBufferSizeMax: 256
  switchTcpAutoReceiveBufferSizeMax: 256
  switchUdpSendBufferSize: 9
  switchUdpReceiveBufferSize: 42
  switchSocketBufferEfficiency: 4
  switchSocketInitializeEnabled: 1
  switchNetworkInterfaceManagerInitializeEnabled: 1
  switchPlayerConnectionEnabled: 1
  switchUseNewStyleFilepaths: 0
  switchUseMicroSleepForYield: 1
  switchEnableRamDiskSupport: 0
  switchMicroSleepForYieldTime: 25
  switchRamDiskSpaceSize: 12
  ps4NPAgeRating: 12
  ps4NPTitleSecret: 
  ps4NPTrophyPackPath: 
  ps4ParentalLevel: 11
  ps4ContentID: ED1633-NPXX51362_00-0000000000000000
  ps4Category: 0
  ps4MasterVersion: 01.00
  ps4AppVersion: 01.00
  ps4AppType: 0
  ps4ParamSfxPath: 
  ps4VideoOutPixelFormat: 0
  ps4VideoOutInitialWidth: 1920
  ps4VideoOutBaseModeInitialWidth: 1920
  ps4VideoOutReprojectionRate: 60
  ps4PronunciationXMLPath: 
  ps4PronunciationSIGPath: 
  ps4BackgroundImagePath: 
  ps4StartupImagePath: 
  ps4StartupImagesFolder: 
  ps4IconImagesFolder: 
  ps4SaveDataImagePath: 
  ps4SdkOverride: 
  ps4BGMPath: 
  ps4ShareFilePath: 
  ps4ShareOverlayImagePath: 
  ps4PrivacyGuardImagePath: 
  ps4ExtraSceSysFile: 
  ps4NPtitleDatPath: 
  ps4RemotePlayKeyAssignment: -1
  ps4RemotePlayKeyMappingDir: 
  ps4PlayTogetherPlayerCount: 0
  ps4EnterButtonAssignment: 1
  ps4ApplicationParam1: 0
  ps4ApplicationParam2: 0
  ps4ApplicationParam3: 0
  ps4ApplicationParam4: 0
  ps4DownloadDataSize: 0
  ps4GarlicHeapSize: 2048
  ps4ProGarlicHeapSize: 2560
  playerPrefsMaxSize: 32768
  ps4Passcode: F69AzBlax3CF3EDNhm3soLBPh71Yexui
  ps4pnSessions: 1
  ps4pnPresence: 1
  ps4pnFriends: 1
  ps4pnGameCustomData: 1
  playerPrefsSupport: 0
  enableApplicationExit: 0
  resetTempFolder: 1
  restrictedAudioUsageRights: 0
  ps4UseResolutionFallback: 0
  ps4ReprojectionSupport: 0
  ps4UseAudio3dBackend: 0
  ps4UseLowGarlicFragmentationMode: 1
  ps4SocialScreenEnabled: 0
  ps4ScriptOptimizationLevel: 2
  ps4Audio3dVirtualSpeakerCount: 14
  ps4attribCpuUsage: 0
  ps4PatchPkgPath: 
  ps4PatchLatestPkgPath: 
  ps4PatchChangeinfoPath: 
  ps4PatchDayOne: 0
  ps4attribUserManagement: 0
  ps4attribMoveSupport: 0
  ps4attrib3DSupport: 0
  ps4attribShareSupport: 0
  ps4attribExclusiveVR: 0
  ps4disableAutoHideSplash: 0
  ps4videoRecordingFeaturesUsed: 0
  ps4contentSearchFeaturesUsed: 0
  ps4CompatibilityPS5: 0
  ps4GPU800MHz: 1
  ps4attribEyeToEyeDistanceSettingVR: 0
  ps4IncludedModules: []
  ps4attribVROutputEnabled: 0
  monoEnv: 
  splashScreenBackgroundSourceLandscape: {fileID: 0}
  splashScreenBackgroundSourcePortrait: {fileID: 0}
  blurSplashScreenBackground: 1
  spritePackerPolicy: 
  webGLMemorySize: 256
  webGLExceptionSupport: 1
  webGLNameFilesAsHashes: 0
  webGLDataCaching: 0
  webGLDebugSymbols: 0
  webGLEmscriptenArgs: 
  webGLModulesDirectory: 
  webGLTemplate: APPLICATION:Default
  webGLAnalyzeBuildSize: 0
  webGLUseEmbeddedResources: 0
  webGLCompressionFormat: 1
  webGLWasmArithmeticExceptions: 0
  webGLLinkerTarget: 1
  webGLThreadsSupport: 0
  webGLDecompressionFallback: 0
  scriptingDefineSymbols:
    : UNITY_POST_PROCESSING_STACK_V2
    Android: UNITY_POST_PROCESSING_STACK_V2;ENABLE_HOOK_TEST_CASE;ENABLE_HOOK_DEBUG
    Nintendo Switch: UNITY_POST_PROCESSING_STACK_V2
    PS4: UNITY_POST_PROCESSING_STACK_V2
    Standalone: UNITY_POST_PROCESSING_STACK_V2;ENABLE_HOOK_TEST_CASE;ENABLE_HOOK_DEBUG
    WebGL: UNITY_POST_PROCESSING_STACK_V2;ENABLE_HOOK_TEST_CASE;ENABLE_HOOK_DEBUG
    XboxOne: UNITY_POST_PROCESSING_STACK_V2
    iPhone: UNITY_POST_PROCESSING_STACK_V2;ENABLE_HOOK_TEST_CASE;ENABLE_HOOK_DEBUG
    tvOS: UNITY_POST_PROCESSING_STACK_V2
  additionalCompilerArguments: {}
  platformArchitecture: {}
  scriptingBackend:
    Android: 1
    Standalone: 1
  il2cppCompilerConfiguration: {}
  managedStrippingLevel: {}
  incrementalIl2cppBuild: {}
  suppressCommonWarnings: 1
  allowUnsafeCode: 1
  useDeterministicCompilation: 1
  enableRoslynAnalyzers: 1
  additionalIl2CppArgs: 
  scriptingRuntimeVersion: 1
  gcIncremental: 0
  assemblyVersionValidation: 1
  gcWBarrierValidation: 0
  apiCompatibilityLevelPerPlatform:
    Standalone: 3
  m_RenderingPath: 1
  m_MobileRenderingPath: 1
  metroPackageName: Template_3D
  metroPackageVersion: 
  metroCertificatePath: 
  metroCertificatePassword: 
  metroCertificateSubject: 
  metroCertificateIssuer: 
  metroCertificateNotAfter: 0000000000000000
  metroApplicationDescription: Template_3D
  wsaImages: {}
  metroTileShortName: 
  metroTileShowName: 0
  metroMediumTileShowName: 0
  metroLargeTileShowName: 0
  metroWideTileShowName: 0
  metroSupportStreamingInstall: 0
  metroLastRequiredScene: 0
  metroDefaultTileSize: 1
  metroTileForegroundText: 2
  metroTileBackgroundColor: {r: 0.13333334, g: 0.17254902, b: 0.21568628, a: 0}
  metroSplashScreenBackgroundColor: {r: 0.12941177, g: 0.17254902, b: 0.21568628,
    a: 1}
  metroSplashScreenUseBackgroundColor: 0
  platformCapabilities: {}
  metroTargetDeviceFamilies: {}
  metroFTAName: 
  metroFTAFileTypes: []
  metroProtocolName: 
  vcxProjDefaultLanguage: 
  XboxOneProductId: 
  XboxOneUpdateKey: 
  XboxOneSandboxId: 
  XboxOneContentId: 
  XboxOneTitleId: 
  XboxOneSCId: 
  XboxOneGameOsOverridePath: 
  XboxOnePackagingOverridePath: 
  XboxOneAppManifestOverridePath: 
  XboxOneVersion: 1.0.0.0
  XboxOnePackageEncryption: 0
  XboxOnePackageUpdateGranularity: 2
  XboxOneDescription: 
  XboxOneLanguage:
  - enus
  XboxOneCapability: []
  XboxOneGameRating: {}
  XboxOneIsContentPackage: 0
  XboxOneEnhancedXboxCompatibilityMode: 0
  XboxOneEnableGPUVariability: 0
  XboxOneSockets: {}
  XboxOneSplashScreen: {fileID: 0}
  XboxOneAllowedProductIds: []
  XboxOnePersistentLocalStorageSize: 0
  XboxOneXTitleMemory: 8
  XboxOneOverrideIdentityName: 
  XboxOneOverrideIdentityPublisher: 
  vrEditorSettings: {}
  cloudServicesEnabled: {}
  luminIcon:
    m_Name: 
    m_ModelFolderPath: 
    m_PortalFolderPath: 
  luminCert:
    m_CertPath: 
    m_SignPackage: 1
  luminIsChannelApp: 0
  luminVersion:
    m_VersionCode: 1
    m_VersionName: 
  apiCompatibilityLevel: 3
  activeInputHandler: 0
  cloudProjectId: 
  framebufferDepthMemorylessMode: 0
  qualitySettingsNames: []
  projectName: 
  organizationId: 
  cloudEnabled: 0
  legacyClampBlendShapeWeights: 1
  playerDataPath: 
  forceSRGBBlit: 1
  virtualTexturingSupportEnabled: 0

```

`ProjectSettings/ProjectVersion.txt`:

```txt
m_EditorVersion: 2021.3.3f1
m_EditorVersionWithRevision: 2021.3.3f1 (af2e63e8f9bd)

```

`ProjectSettings/QualitySettings.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!47 &1
QualitySettings:
  m_ObjectHideFlags: 0
  serializedVersion: 5
  m_CurrentQuality: 4
  m_QualitySettings:
  - serializedVersion: 2
    name: Very Low
    pixelLightCount: 0
    shadows: 0
    shadowResolution: 0
    shadowProjection: 1
    shadowCascades: 1
    shadowDistance: 15
    shadowNearPlaneOffset: 3
    shadowCascade2Split: 0.33333334
    shadowCascade4Split: {x: 0.06666667, y: 0.2, z: 0.46666667}
    shadowmaskMode: 0
    blendWeights: 1
    textureQuality: 1
    anisotropicTextures: 0
    antiAliasing: 0
    softParticles: 0
    softVegetation: 0
    realtimeReflectionProbes: 0
    billboardsFaceCameraPosition: 0
    vSyncCount: 0
    lodBias: 0.3
    maximumLODLevel: 0
    particleRaycastBudget: 4
    asyncUploadTimeSlice: 2
    asyncUploadBufferSize: 4
    resolutionScalingFixedDPIFactor: 1
    excludedTargetPlatforms: []
  - serializedVersion: 2
    name: Low
    pixelLightCount: 0
    shadows: 0
    shadowResolution: 0
    shadowProjection: 1
    shadowCascades: 1
    shadowDistance: 20
    shadowNearPlaneOffset: 3
    shadowCascade2Split: 0.33333334
    shadowCascade4Split: {x: 0.06666667, y: 0.2, z: 0.46666667}
    shadowmaskMode: 0
    blendWeights: 2
    textureQuality: 0
    anisotropicTextures: 0
    antiAliasing: 0
    softParticles: 0
    softVegetation: 0
    realtimeReflectionProbes: 0
    billboardsFaceCameraPosition: 0
    vSyncCount: 0
    lodBias: 0.4
    maximumLODLevel: 0
    particleRaycastBudget: 16
    asyncUploadTimeSlice: 2
    asyncUploadBufferSize: 4
    resolutionScalingFixedDPIFactor: 1
    excludedTargetPlatforms: []
  - serializedVersion: 2
    name: Medium
    pixelLightCount: 1
    shadows: 1
    shadowResolution: 0
    shadowProjection: 1
    shadowCascades: 1
    shadowDistance: 20
    shadowNearPlaneOffset: 3
    shadowCascade2Split: 0.33333334
    shadowCascade4Split: {x: 0.06666667, y: 0.2, z: 0.46666667}
    shadowmaskMode: 0
    blendWeights: 2
    textureQuality: 0
    anisotropicTextures: 1
    antiAliasing: 0
    softParticles: 0
    softVegetation: 0
    realtimeReflectionProbes: 0
    billboardsFaceCameraPosition: 0
    vSyncCount: 1
    lodBias: 0.7
    maximumLODLevel: 0
    particleRaycastBudget: 64
    asyncUploadTimeSlice: 2
    asyncUploadBufferSize: 4
    resolutionScalingFixedDPIFactor: 1
    excludedTargetPlatforms: []
  - serializedVersion: 2
    name: High
    pixelLightCount: 2
    shadows: 2
    shadowResolution: 1
    shadowProjection: 1
    shadowCascades: 2
    shadowDistance: 40
    shadowNearPlaneOffset: 3
    shadowCascade2Split: 0.33333334
    shadowCascade4Split: {x: 0.06666667, y: 0.2, z: 0.46666667}
    shadowmaskMode: 1
    blendWeights: 2
    textureQuality: 0
    anisotropicTextures: 1
    antiAliasing: 2
    softParticles: 0
    softVegetation: 1
    realtimeReflectionProbes: 1
    billboardsFaceCameraPosition: 1
    vSyncCount: 1
    lodBias: 1
    maximumLODLevel: 0
    particleRaycastBudget: 256
    asyncUploadTimeSlice: 2
    asyncUploadBufferSize: 4
    resolutionScalingFixedDPIFactor: 1
    excludedTargetPlatforms: []
  - serializedVersion: 2
    name: Very High
    pixelLightCount: 3
    shadows: 2
    shadowResolution: 2
    shadowProjection: 1
    shadowCascades: 2
    shadowDistance: 40
    shadowNearPlaneOffset: 3
    shadowCascade2Split: 0.33333334
    shadowCascade4Split: {x: 0.06666667, y: 0.2, z: 0.46666667}
    shadowmaskMode: 1
    blendWeights: 4
    textureQuality: 0
    anisotropicTextures: 1
    antiAliasing: 4
    softParticles: 1
    softVegetation: 1
    realtimeReflectionProbes: 1
    billboardsFaceCameraPosition: 1
    vSyncCount: 1
    lodBias: 1.5
    maximumLODLevel: 0
    particleRaycastBudget: 1024
    asyncUploadTimeSlice: 2
    asyncUploadBufferSize: 4
    resolutionScalingFixedDPIFactor: 1
    excludedTargetPlatforms: []
  - serializedVersion: 2
    name: Ultra
    pixelLightCount: 4
    shadows: 2
    shadowResolution: 2
    shadowProjection: 1
    shadowCascades: 4
    shadowDistance: 150
    shadowNearPlaneOffset: 3
    shadowCascade2Split: 0.33333334
    shadowCascade4Split: {x: 0.06666667, y: 0.2, z: 0.46666667}
    shadowmaskMode: 1
    blendWeights: 4
    textureQuality: 0
    anisotropicTextures: 1
    antiAliasing: 4
    softParticles: 1
    softVegetation: 1
    realtimeReflectionProbes: 1
    billboardsFaceCameraPosition: 1
    vSyncCount: 1
    lodBias: 2
    maximumLODLevel: 0
    particleRaycastBudget: 4096
    asyncUploadTimeSlice: 2
    asyncUploadBufferSize: 4
    resolutionScalingFixedDPIFactor: 1
    excludedTargetPlatforms: []
  m_PerPlatformDefaultQuality:
    Android: 2
    Nintendo 3DS: 5
    Nintendo Switch: 5
    PS4: 5
    PSP2: 2
    Standalone: 5
    Tizen: 2
    WebGL: 3
    WiiU: 5
    Windows Store Apps: 5
    XboxOne: 5
    iPhone: 2
    tvOS: 2

```

`ProjectSettings/TagManager.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!78 &1
TagManager:
  serializedVersion: 2
  tags: []
  layers:
  - Default
  - TransparentFX
  - Ignore Raycast
  - 
  - Water
  - UI
  - 
  - 
  - PostProcessing
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  m_SortingLayers:
  - name: Default
    uniqueID: 0
    locked: 0

```

`ProjectSettings/TimeManager.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!5 &1
TimeManager:
  m_ObjectHideFlags: 0
  Fixed Timestep: 0.0167
  Maximum Allowed Timestep: 0.1
  m_TimeScale: 1
  Maximum Particle Timestep: 0.03

```

`ProjectSettings/UnityConnectSettings.asset`:

```asset
%YAML 1.1
%TAG !u! tag:unity3d.com,2011:
--- !u!310 &1
UnityConnectSettings:
  m_ObjectHideFlags: 0
  serializedVersion: 1
  m_Enabled: 1
  m_TestMode: 0
  m_EventOldUrl: https://api.uca.cloud.unity3d.com/v1/events
  m_EventUrl: https://cdp.cloud.unity3d.com/v1/events
  m_ConfigUrl: https://config.uca.cloud.unity3d.com
  m_DashboardUrl: https://dashboard.unity3d.com
  m_TestInitMode: 0
  CrashReportingSettings:
    m_EventUrl: https://perf-events.cloud.unity3d.com
    m_Enabled: 0
    m_LogBufferSize: 10
    m_CaptureEditorExceptions: 1
  UnityPurchasingSettings:
    m_Enabled: 0
    m_TestMode: 0
  UnityAnalyticsSettings:
    m_Enabled: 1
    m_TestMode: 0
    m_InitializeOnStartup: 1
  UnityAdsSettings:
    m_Enabled: 0
    m_InitializeOnStartup: 1
    m_TestMode: 0
    m_IosGameId: 
    m_AndroidGameId: 
    m_GameIds: {}
    m_GameId: 
  PerformanceReportingSettings:
    m_Enabled: 0

```

`README.md`:

```md
# MonoHook
本代码的功能是运行时修改C#函数
## 特性：
* 运行时直接修改内存中的 jit / aot 代码，不会修改真实文件。
* 不影响调试及堆栈回溯。
* 同时支持 .net 2.x 与 .net 4.x。
* 支持 unity4.7.2, unity5.x, unity 2017 ~ 2021 (只要Unity不更换 runtime 就可以自动支持以后的版本)。
* 使用方便，在C#内定义签名与原始方法相同的两个方法注册后即可生效。

## 支持平台
* Editor (Windows, Mac Intel/Silicon)
* Android mono/il2cpp(armv7a, armv8a)
* Windows mono/il2cpp(x86, x64)

## 预览
![image](Preview/Preview.gif)

## 原理
* MethodInfo.MethodHandle.GetFunctionPointer().ToPointer() 指向了 jit 后的 native 代码，因此修改此地址的代码即可以修改功能。
* 通过一系列跳转就可以巧妙的替换原函数实现，同时也保留调用原函数的功能。
* 本代码的实现与下面 reference 的实现略有不同，比其使用更少的字节，Hook 成功率更高，具体实现可以看代码。

## 使用方法
```CSharp
   [InitializeOnLoad] // 最好Editor启动及重新编译完毕就执行
   public static class HookTest
   {
        static HookTest()
        {
            if(_hook == null)
            {
                Type type = Type.GetType("UnityEditor.LogEntries,UnityEditor.dll");
                // 找到需要 Hook 的方法
                MethodInfo miTarget = type.GetMethod("Clear", BindingFlags.Static | BindingFlags.Public);

                type = typeof(PinnedLog);

                // 找到被替换成的新方法
                MethodInfo miReplacement = type.GetMethod("NewClearLog", BindingFlags.Static | BindingFlags.NonPublic);

                // 这个方法是用来调用原始方法的, 要求必须添加 [MethodImpl(MethodImplOptions.NoOptimization)]，否则在 arm il2cpp 下会随机 crash
                MethodInfo miProxy = type.GetMethod("ProxyClearLog", BindingFlags.Static | BindingFlags.NonPublic);

                // 创建一个 Hook 并 Install 就OK啦, 之后无论哪个代码再调用原始方法都会重定向到
                //  我们写的方法ヾ(ﾟ∀ﾟゞ)
                _hook = new MethodHook(miTarget, miReplacement, miProxy);
                _hook.Install();
            }
        }
   }
    
```

## reference
* https://github.com/bigbaldy1128/DotNetDetour
* https://github.com/MonoMod/MonoMod.Common
* https://github.com/mono/mono/blob/main/mono/mini/mini-arm64.c#L2038
```