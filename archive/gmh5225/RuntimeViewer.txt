Project Path: arc_gmh5225_RuntimeViewer_ck34r1pb

Source Tree:

```txt
arc_gmh5225_RuntimeViewer_ck34r1pb
├── ArchiveExportConfig.plist
├── ArchiveScript.sh
├── BuildScript.sh
├── Core
│   ├── Package.swift
│   └── Sources
│       ├── RuntimeViewerCommunication
│       │   ├── Connections
│       │   │   ├── RuntimeConnection.swift
│       │   │   ├── RuntimeNetworkConnection.swift
│       │   │   └── RuntimeXPCConnection.swift
│       │   ├── Requests
│       │   │   ├── FetchEndpointRequest.swift
│       │   │   ├── FileOperationRequest.swift
│       │   │   ├── InjectApplicationRequest.swift
│       │   │   ├── LaunchCatalystHelperRequest.swift
│       │   │   ├── PingRequest.swift
│       │   │   └── RegisterEndpointRequest.swift
│       │   ├── RuntimeCommunicator.swift
│       │   ├── RuntimeNetwork.swift
│       │   ├── RuntimeRequestResponse.swift
│       │   ├── RuntimeSource.swift
│       │   ├── RuntimeViewerCatalystHelperLauncher.swift
│       │   └── SwiftyXPC+.swift
│       └── RuntimeViewerCore
│           ├── RuntimeEngine.swift
│           ├── RuntimeImageLoadState.swift
│           ├── RuntimeInjectClient.swift
│           ├── RuntimeNamedNode.swift
│           ├── RuntimeObjectType.swift
│           ├── RuntimeTypeSearchScope.swift
│           └── RuntimeViewerCore.swift
├── LICENSE
├── README.md
├── Resources
│   ├── AppIcon.png
│   ├── Screenshot-001.png
│   └── Screenshot-002.png
├── RuntimeViewer.xcworkspace
│   └── contents.xcworkspacedata
├── RuntimeViewerPackages
│   ├── Package.swift
│   └── Sources
│       ├── RuntimeViewerApplication
│       │   ├── AppDefaults.swift
│       │   ├── AppServices.swift
│       │   ├── CDSemanticString+ThemeProfile.swift
│       │   ├── ContentPlaceholderViewModel.swift
│       │   ├── ContentRoute.swift
│       │   ├── ContentTextViewModel.swift
│       │   ├── Extensions.swift
│       │   ├── InspectorRoute.swift
│       │   ├── InspectorViewModel.swift
│       │   ├── SecureCodingCodable.swift
│       │   ├── SidebarImageCellViewModel.swift
│       │   ├── SidebarImageViewModel.swift
│       │   ├── SidebarRootCellViewModel.swift
│       │   ├── SidebarRootViewModel.swift
│       │   ├── SidebarRoute.swift
│       │   ├── ThemeProfile.swift
│       │   └── ViewModel.swift
│       ├── RuntimeViewerArchitectures
│       │   └── RuntimeViewerArchitectures.swift
│       ├── RuntimeViewerService
│       │   └── RuntimeViewerService.swift
│       └── RuntimeViewerUI
│           └── RuntimeViewerUI.swift
├── RuntimeViewerUsingAppKit
│   ├── RuntimeViewerCatalystHelper
│   │   ├── AppDelegate.swift
│   │   ├── AppKitBridge.swift
│   │   ├── Assets.xcassets
│   │   │   ├── AccentColor.colorset
│   │   │   │   └── Contents.json
│   │   │   ├── AppIcon.appiconset
│   │   │   │   └── Contents.json
│   │   │   └── Contents.json
│   │   ├── Info.plist
│   │   ├── RuntimeViewerCatalystHelper.entitlements
│   │   └── SceneDelegate.swift
│   ├── RuntimeViewerCatalystHelperPlugin
│   │   ├── AppKitPlugin.swift
│   │   └── AppKitPluginImpl.swift
│   ├── RuntimeViewerServer
│   │   ├── RuntimeViewerServer.h
│   │   ├── RuntimeViewerServerLoader.swift
│   │   └── main.m
│   ├── RuntimeViewerUsingAppKit
│   │   ├── App
│   │   │   ├── AppDelegate.swift
│   │   │   ├── Document.swift
│   │   │   └── RuntimeEngineManager.swift
│   │   ├── Assets.xcassets
│   │   │   ├── AccentColor.colorset
│   │   │   │   └── Contents.json
│   │   │   ├── AppIcon.appiconset
│   │   │   │   ├── Contents.json
│   │   │   │   ├── icon_128x128.png
│   │   │   │   ├── icon_128x128@2x.png
│   │   │   │   ├── icon_16x16.png
│   │   │   │   ├── icon_16x16@2x.png
│   │   │   │   ├── icon_256x256.png
│   │   │   │   ├── icon_256x256@2x.png
│   │   │   │   ├── icon_32x32.png
│   │   │   │   ├── icon_32x32@2x.png
│   │   │   │   ├── icon_512x512.png
│   │   │   │   └── icon_512x512@2x.png
│   │   │   ├── Contents.json
│   │   │   ├── app.fill.symbolset
│   │   │   │   ├── Contents.json
│   │   │   │   └── app.fill.svg
│   │   │   ├── app.symbolset
│   │   │   │   ├── Contents.json
│   │   │   │   └── app.svg
│   │   │   └── inject.symbolset
│   │   │       ├── Contents.json
│   │   │       └── syringe.svg
│   │   ├── Attach Process
│   │   │   └── AttachToProcessViewController.swift
│   │   ├── Base
│   │   │   └── ViewController.swift
│   │   ├── Base.lproj
│   │   │   └── MainMenu.xib
│   │   ├── Content
│   │   │   ├── ContentCoordinator.swift
│   │   │   ├── ContentNavigationController.swift
│   │   │   ├── ContentPlaceholderViewController.swift
│   │   │   ├── ContentTextViewController.swift
│   │   │   ├── MinimapView.swift
│   │   │   ├── NSTextContentStorage+.swift
│   │   │   └── NSTextLayoutManager+.swift
│   │   ├── Debug.xcconfig
│   │   ├── Generation Options
│   │   │   ├── GenerationOptionsViewController.swift
│   │   │   └── GenerationOptionsViewModel.swift
│   │   ├── Info.plist
│   │   ├── Inspector
│   │   │   ├── InspectorClassViewController.swift
│   │   │   ├── InspectorCoordinator.swift
│   │   │   ├── InspectorNavigationController.swift
│   │   │   └── InspectorPlaceholderViewController.swift
│   │   ├── Load Frameworks
│   │   │   ├── LoadFrameworksViewController.swift
│   │   │   └── LoadFrameworksViewController.xib
│   │   ├── Main
│   │   │   ├── MainCoordinator.swift
│   │   │   ├── MainRoute.swift
│   │   │   ├── MainSplitViewController.swift
│   │   │   ├── MainToolbarController.swift
│   │   │   ├── MainViewModel.swift
│   │   │   └── MainWindowController.swift
│   │   ├── Release.xcconfig
│   │   ├── Resources
│   │   │   └── RuntimeViewerSymbols.swift
│   │   ├── RuntimeViewerUsingAppKit.entitlements
│   │   ├── Sidebar
│   │   │   ├── SidebarCoordinator.swift
│   │   │   ├── SidebarImageCellView.swift
│   │   │   ├── SidebarImageViewController.swift
│   │   │   ├── SidebarNavigationController.swift
│   │   │   ├── SidebarRootTableCellView.swift
│   │   │   └── SidebarRootViewController.swift
│   │   ├── Utils
│   │   │   ├── EventMonitor.swift
│   │   │   ├── HelperInstaller.swift
│   │   │   ├── LineNumberGutter.swift
│   │   │   ├── SIPChecker.swift
│   │   │   └── Then.swift
│   │   └── com.JH.RuntimeViewerService.plist
│   ├── RuntimeViewerUsingAppKit.xcodeproj
│   │   └── project.pbxproj
│   └── com.JH.RuntimeViewerService
│       ├── Config.xcconfig
│       ├── Debug.xcconfig
│       ├── Info.plist
│       ├── Release.xcconfig
│       ├── launchd.plist
│       └── main.swift
└── RuntimeViewerUsingUIKit
    ├── RuntimeViewerMobileServer
    │   ├── RuntimeViewerMobileServer.h
    │   ├── RuntimeViewerServerLoader.swift
    │   └── main.m
    ├── RuntimeViewerUsingUIKit
    │   ├── AppDelegate.swift
    │   ├── Assets.xcassets
    │   │   ├── AccentColor.colorset
    │   │   │   └── Contents.json
    │   │   ├── AppIcon.appiconset
    │   │   │   ├── Contents.json
    │   │   │   └── Group 19.png
    │   │   └── Contents.json
    │   ├── ContentCoordinator.swift
    │   ├── ContentNavigationController.swift
    │   ├── ContentPlaceholderViewController.swift
    │   ├── ContentTextViewController.swift
    │   ├── Info.plist
    │   ├── InspectorCoordinator.swift
    │   ├── InspectorNavigationController.swift
    │   ├── LaunchScreen.storyboard
    │   ├── MainCoordinator.swift
    │   ├── MainSplitViewController.swift
    │   ├── MainViewModel.swift
    │   ├── RuntimeViewerUsingUIKit.entitlements
    │   ├── SceneDelegate.swift
    │   ├── SidebarCoordinator.swift
    │   ├── SidebarImageViewController.swift
    │   ├── SidebarNavigationController.swift
    │   ├── SidebarRootViewController.swift
    │   ├── Then.swift
    │   └── ViewController.swift
    ├── RuntimeViewerUsingUIKit.xcodeproj
    │   └── project.pbxproj
    └── RuntimeViewerUsingVision
        ├── Assets.xcassets
        │   ├── AppIcon.solidimagestack
        │   │   ├── Back.solidimagestacklayer
        │   │   │   ├── Content.imageset
        │   │   │   │   ├── Contents.json
        │   │   │   │   └── Rectangle 108.png
        │   │   │   └── Contents.json
        │   │   ├── Contents.json
        │   │   ├── Front.solidimagestacklayer
        │   │   │   ├── Content.imageset
        │   │   │   │   ├── Contents.json
        │   │   │   │   └── Frame 122.png
        │   │   │   └── Contents.json
        │   │   └── Middle.solidimagestacklayer
        │   │       ├── Content.imageset
        │   │       │   ├── Contents.json
        │   │       │   └── Frame 124.png
        │   │       └── Contents.json
        │   └── Contents.json
        └── Info.plist

```

`ArchiveExportConfig.plist`:

```plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>method</key>
	<string>mac-application</string>
	<key>compileBitcode</key>
	<false/>
</dict>
</plist>

```

`ArchiveScript.sh`:

```sh
#工程绝对路径
project_path=$(cd `dirname $0`; pwd)

#工程名 将XXX替换成自己的工程名
project_name="RuntimeViewer"

#scheme名 将XXX替换成自己的sheme名
scheme_name="RuntimeViewerUsingAppKit"

#打包模式 Debug/Release
development_mode="Release"

#build文件夹路径
build_path=${project_path}/build

#plist文件所在路径
exportOptionsPlistPath=${project_path}/ArchiveExportConfig.plist

#导出App文件所在路径
exportAppPath=${project_path}/archive


echo '///-----------'
echo '/// 正在编译工程:'${development_mode}
echo '///-----------'
xcodebuild \
archive -workspace ${project_path}/${project_name}.xcworkspace \
-scheme ${scheme_name} \
-arch x86_64 \
-arch arm64e \
-configuration ${development_mode} \
-skipPackagePluginValidation -skipMacroValidation \
-archivePath ${build_path}/${project_name}.xcarchive  -quiet  || exit

echo '///--------'
echo '/// 编译完成'
echo '///--------'
echo ''

echo '///----------'
echo '/// 开始打包App'
echo '///----------'

exportFolderName="${project_name}_$(date +"%Y-%m-%d_%H-%M-%S")"
exportFullPath="${exportAppPath}/${exportFolderName}"
mkdir -p "$exportFullPath"

xcodebuild -exportArchive -archivePath ${build_path}/${project_name}.xcarchive \
-configuration ${development_mode} \
-exportPath ${exportFullPath} \
-exportOptionsPlist ${exportOptionsPlistPath} \
-quiet || exit

if [ -e $exportFullPath/$project_name.app ]; then
echo '///----------'
echo '/// App已导出'
echo '///----------'
open $exportFullPath
else
echo '///-------------'
echo '/// App导出失败 '
echo '///-------------'
fi
echo '///------------'
echo '/// App打包完成  '
echo '///-----------='
echo ''

exit 0



```

`BuildScript.sh`:

```sh
project_path=$(cd `dirname $0`; pwd)

project_name="RuntimeViewer"

scheme_name="RuntimeViewerUsingAppKit"

development_mode="Release"

build_path=${project_path}/build

xcodebuild build -scheme ${scheme_name} -configuration ${development_mode} -destination 'generic/platform=macOS' CONFIGURATION_BUILD_DIR=${build_path} ARCHS="x86_64 arm64e"

exit 0



```

`Core/Package.swift`:

```swift
// swift-tools-version: 5.10
// The swift-tools-version declares the minimum version of Swift required to build this package.

import PackageDescription

let appkitPlatforms: [Platform] = [.macOS]

let uikitPlatforms: [Platform] = [.iOS, .tvOS, .visionOS]

let package = Package(
    name: "Core",
    platforms: [
        .iOS(.v14), .macOS(.v12), .macCatalyst(.v14), .tvOS(.v14), .watchOS(.v6), .visionOS(.v1),
    ],
    products: [
        .library(
            name: "RuntimeViewerCore",
            targets: ["RuntimeViewerCore"]
        ),
        .library(
            name: "RuntimeViewerCommunication",
            targets: ["RuntimeViewerCommunication"]
        ),

    ],
    dependencies: [

        .package(
            url: "https://github.com/MxIris-Reverse-Engineering/ClassDumpRuntime",
            branch: "master"
        ),
        .package(
            url: "https://github.com/reddavis/Asynchrone",
            from: "0.1.0"
        ),
        .package(
            url: "https://github.com/groue/Semaphore",
            from: "0.1.0"
        ),
        .package(
            url: "https://github.com/Mx-Iris/FrameworkToolbox.git",
            branch: "main"
        ),
        .package(
            url: "https://github.com/MxIris-macOS-Library-Forks/SwiftyXPC",
            branch: "main"
        ),
    ],
    targets: [
        .target(
            name: "RuntimeViewerCore",
            dependencies: [
                .target(name: "RuntimeViewerCommunication"),
                .product(name: "ClassDumpRuntime", package: "ClassDumpRuntime"),
                .product(name: "ClassDumpRuntimeSwift", package: "ClassDumpRuntime"),
                .product(name: "FoundationToolbox", package: "FrameworkToolbox"),
            ]
        ),
        .target(
            name: "RuntimeViewerCommunication",
            dependencies: [
                .product(name: "SwiftyXPC", package: "SwiftyXPC", condition: .when(platforms: appkitPlatforms)),
                .product(name: "Asynchrone", package: "Asynchrone"),
                .product(name: "Semaphore", package: "Semaphore"),
            ]
        ),
    ]
)

```

`Core/Sources/RuntimeViewerCommunication/Connections/RuntimeConnection.swift`:

```swift
//
//  RuntimeConnection.swift
//  RuntimeViewerPackages
//
//  Created by JH on 2025/3/22.
//

import Foundation

public protocol RuntimeConnection {
    func sendMessage(name: String) async throws
    func sendMessage<Request: Codable>(name: String, request: Request) async throws
    func sendMessage<Response: Codable>(name: String) async throws -> Response
    func sendMessage<Request: RuntimeRequest>(request: Request) async throws -> Request.Response
    func sendMessage<Response: Codable>(name: String, request: some Codable) async throws -> Response

    func setMessageHandler(name: String, handler: @escaping () async throws -> Void)
    func setMessageHandler<Request: Codable>(name: String, handler: @escaping (Request) async throws -> Void)
    func setMessageHandler<Response: Codable>(name: String, handler: @escaping () async throws -> Response)
    func setMessageHandler<Request: RuntimeRequest>(requestType: Request.Type, handler: @escaping (Request) async throws -> Request.Response)
    func setMessageHandler<Request: Codable, Response: Codable>(name: String, handler: @escaping (Request) async throws -> Response)
}

```

`Core/Sources/RuntimeViewerCommunication/Connections/RuntimeNetworkConnection.swift`:

```swift
//
//  RuntimeNetworkConnection.swift
//  RuntimeViewerPackages
//
//  Created by JH on 2025/3/22.
//

import Foundation
import Network
import OSLog
import Asynchrone
import Semaphore

class RuntimeNetworkConnection {
    private class MessageHandler {
        typealias RawHandler = (Data) async throws -> Data
        let closure: RawHandler
        let requestType: Codable.Type
        let responseType: Codable.Type

        init<Request: Codable, Response: Codable>(closure: @escaping (Request) async throws -> Response) {
            self.requestType = Request.self
            self.responseType = Response.self

            self.closure = { request in
                let request = try JSONDecoder().decode(Request.self, from: request)
                let response = try await closure(request)
                return try JSONEncoder().encode(response)
            }
        }
    }

    private typealias ReceiveType = (Data?, NWConnection.ContentContext?, Bool, NWError?) -> Void

    public let id = UUID()

    public var didStop: ((RuntimeNetworkConnection) -> Void)?

    public var didReady: ((RuntimeNetworkConnection) -> Void)?

    private let connection: NWConnection

    private static let logger = Logger(subsystem: "com.JH.LocalizationStudioCommunication", category: "Connection")

    private static let endMarkerData = "\nOK".data(using: .utf8)!

    private var logger: Logger { Self.logger }

    private let queue = DispatchQueue(label: "com.JH.LocalizationStudioCommunication.Connection.queue")

    private var connectionStateStream: AsyncStream<NWConnection.State>?

    private var connectionStateContinuation: AsyncStream<NWConnection.State>.Continuation?

    private var receivedDataStream: SharedAsyncSequence<AsyncThrowingStream<Data, Error>>?

    private var receivedDataContinuation: AsyncThrowingStream<Data, Error>.Continuation?

    private var isStarted = false

    private var receivingData = Data()

    private let semaphore = AsyncSemaphore(value: 1)

    private var messageHandlers: [String: MessageHandler] = [:]
    
    /// outgoing connection
    public init(endpoint: NWEndpoint) throws {
        Self.logger.info("RuntimeNetworkConnection outgoing endpoint: \(endpoint.debugDescription)")
        let tcpOptions = NWProtocolTCP.Options()
        tcpOptions.enableKeepalive = true
        tcpOptions.keepaliveIdle = 2

        let parameters = NWParameters(tls: nil, tcp: tcpOptions)
        parameters.includePeerToPeer = true
        self.connection = NWConnection(to: endpoint, using: parameters)
        try start()
    }

    /// incoming connection
    public init(connection: NWConnection) throws {
        Self.logger.info("RuntimeNetworkConnection incoming connection: \(connection.debugDescription)")
        self.connection = connection
        try start()
    }

    public func start() throws {
        guard !isStarted else { return }
        isStarted = true
        Self.logger.info("Connection will start")
        setupStreams()
        setupStateUpdateHandler()
        setupReceiver()
        observeIncomingMessages()
        connection.start(queue: queue)
        Self.logger.info("Connection did start")
    }

    public func stop() {
        guard isStarted else { return }
        isStarted = false
        Self.logger.info("Connection will stop")
        connection.stateUpdateHandler = nil
        connection.cancel()
        connectionStateContinuation?.finish()
        receivedDataContinuation?.finish()
        didStop?(self)
        didStop = nil
        Self.logger.info("Connection did stop")
    }


    public func setMessageHandler<Request: Codable, Response: Codable>(name: String, handler: @escaping ((Request) async throws -> Response)) {
        messageHandlers[name] = .init(closure: handler)
    }

    public func setMessageHandler<Request: RuntimeRequest>(_ handler: @escaping ((Request) async throws -> Request.Response)) {
        messageHandlers[Request.identifier] = .init(closure: handler)
    }

    public func send(requestData: RuntimeRequestData) async throws {
        await semaphore.wait()
        defer { semaphore.signal() }
        logger.info("RuntimeNetworkConnection send identifier: \(requestData.identifier)")
        try await send(content: requestData)
    }

    public func send<Response: Codable>(requestData: RuntimeRequestData) async throws -> Response {
        await semaphore.wait()
        defer { semaphore.signal() }
        logger.info("RuntimeNetworkConnection send identifier: \(requestData.identifier)")
        try await send(content: requestData)
        let receiveData = try await receiveData()
        let responseData = try JSONDecoder().decode(RuntimeRequestData.self, from: receiveData)
        logger.info("RuntimeNetworkConnection received identifier: \(responseData.identifier)")
        logger.info("RuntimeNetworkConnection received data: \(receiveData)")
        return try JSONDecoder().decode(Response.self, from: responseData.data)
    }

    public func send<Request: RuntimeRequest>(request: Request) async throws {
        let requestData = try RuntimeRequestData(request: request)
        try await send(requestData: requestData)
    }

    public func send<Request: RuntimeRequest>(request: Request) async throws -> Request.Response {
        let requestData = try RuntimeRequestData(request: request)
        return try await send(requestData: requestData)
    }

    private func observeIncomingMessages() {
        Task {
            do {
                guard let receivedDataStream else { return }
                for try await data in receivedDataStream {
                    do {
                        let requestData = try JSONDecoder().decode(RuntimeRequestData.self, from: data)
                        guard let messageHandler = messageHandlers[requestData.identifier] else { continue }
                        logger.info("RuntimeNetworkConnection received identifier: \(requestData.identifier)")
                        logger.info("RuntimeNetworkConnection received data: \(data)")
                        let responseData = try await messageHandler.closure(requestData.data)
                        if messageHandler.responseType != MessageNull.self {
                            try await send(requestData: RuntimeRequestData(identifier: requestData.identifier, data: responseData))
                        }
                    } catch {
                        logger.error("\(error)")
                        let requestError = RuntimeNetworkRequestError(message: "\(error)")
                        do {
                            let commandErrorData = try JSONEncoder().encode(requestError)
                            try await send(data: commandErrorData)
                        } catch {
                            logger.error("\(error)")
                        }
                    }
                }

            } catch {
                logger.error("\(error)")
            }
        }
    }

    private func stateDidChange(_ state: NWConnection.State) {
        switch state {
        case .setup:
            logger.info("Connection is setup")
        case let .waiting(error):
            logger.info("Connection is waiting, error: \(error)")
            stop()
        case .preparing:
            logger.info("Connection is preparing")
        case .ready:
            logger.info("Connection is ready")

            didReady?(self)
            didReady = nil
        case let .failed(error):
            logger.info("Connection is failed, error: \(error)")
            stop()
        case .cancelled:
            logger.info("Connection is cancelled")
        default:
            break
        }
    }

    private func setupStreams() {
        let (connectionStateStream, connectionStateContinuation) = AsyncStream<NWConnection.State>.makeStream()
        self.connectionStateStream = connectionStateStream
        self.connectionStateContinuation = connectionStateContinuation

        let (receivedDataStream, receivedDataContinuation) = AsyncThrowingStream<Data, Error>.makeStream()
        self.receivedDataStream = receivedDataStream.shared()
        self.receivedDataContinuation = receivedDataContinuation
    }

    private func setupStateUpdateHandler() {
        connection.stateUpdateHandler = { [weak self] in
            guard let self else { return }
            connectionStateContinuation?.yield($0)
            stateDidChange($0)
        }
    }

    private func setupReceiver() {
        connection.receive(minimumIncompleteLength: 1, maximumLength: Int.max) { [weak self] data, contentContext, isComplete, error in
            guard let self else { return }
            if let error {
                receivedDataContinuation?.finish(throwing: error)
                stop()
            } else if isComplete {
                receivedDataContinuation?.finish()
                stop()
            } else if let data = data {
                receivingData.append(data)
                processReceivedData(context: contentContext)
                setupReceiver()
            }
        }
    }

    private func processReceivedData(context: NWConnection.ContentContext? = nil) {
        guard let endMarker = "\nOK".data(using: .utf8) else { return }

        while true {
            guard let endRange = receivingData.range(of: endMarker) else {
                break
            }

            let messageData = receivingData.subdata(in: 0 ..< endRange.lowerBound)
            receivedDataContinuation?.yield(messageData)

            if endRange.upperBound < receivingData.count {
                receivingData = receivingData.subdata(in: endRange.upperBound ..< receivingData.count)
            } else {
                receivingData = Data()
                break
            }
        }
    }

    private func send<Content: Codable>(content: Content) async throws {
        let data = try JSONEncoder().encode(content)
        try await send(data: data)
    }

    private func send(data: Data) async throws {
        try await withCheckedThrowingContinuation { [weak self] (continuation: CheckedContinuation<Void, Error>) in
            guard let self else {
                continuation.resume(throwing: RuntimeNetworkError.notConnected)
                return
            }

            connection.send(content: data + Self.endMarkerData, completion: .contentProcessed { error in
                if let error = error {
                    continuation.resume(throwing: error)
                    return
                }
                Self.logger.info("RuntimeNetworkConnection send data: \(data)")
                continuation.resume()
            })
        }
    }

    private func receiveData() async throws -> Data {
        guard let receivedDataStream else {
            throw RuntimeNetworkError.notConnected
        }

        for try await data in receivedDataStream {
            if let error = try? JSONDecoder().decode(RuntimeNetworkRequestError.self, from: data) {
                throw error
            } else {
                return data
            }
        }

        throw RuntimeNetworkError.receiveFailed
    }
}

private struct MessageNull: Codable {
    static let null = MessageNull()
}

class RuntimeNetworkBaseConnection: RuntimeConnection {
    var connection: RuntimeNetworkConnection?

    init() {}

    func sendMessage(name: String) async throws {
        guard let connection = connection else { throw RuntimeNetworkError.notConnected }
        try await connection.send(requestData: RuntimeRequestData(identifier: name, value: MessageNull.null))
    }

    func sendMessage(name: String, request: some Codable) async throws {
        guard let connection = connection else { throw RuntimeNetworkError.notConnected }
        try await connection.send(requestData: RuntimeRequestData(identifier: name, value: request))
    }

    func sendMessage<Response>(name: String) async throws -> Response where Response: Decodable, Response: Encodable {
        guard let connection = connection else { throw RuntimeNetworkError.notConnected }
        return try await connection.send(requestData: RuntimeRequestData(identifier: name, value: MessageNull.null))
    }

    func sendMessage<Request>(request: Request) async throws -> Request.Response where Request: RuntimeRequest {
        guard let connection = connection else { throw RuntimeNetworkError.notConnected }
        return try await connection.send(request: request)
    }

    func sendMessage<Response>(name: String, request: some Codable) async throws -> Response where Response: Decodable, Response: Encodable {
        guard let connection = connection else { throw RuntimeNetworkError.notConnected }
        return try await connection.send(requestData: RuntimeRequestData(identifier: name, value: request))
    }

    func setMessageHandler(name: String, handler: @escaping () async throws -> Void) {
        connection?.setMessageHandler(name: name, handler: { (_: MessageNull) in
            try await handler()
            return MessageNull.null
        })
    }

    func setMessageHandler<Request>(name: String, handler: @escaping (Request) async throws -> Void) where Request: Decodable, Request: Encodable {
        connection?.setMessageHandler(name: name, handler: { (request: Request) in
            try await handler(request)
            return MessageNull.null
        })
    }

    func setMessageHandler<Response>(name: String, handler: @escaping () async throws -> Response) where Response: Decodable, Response: Encodable {
        connection?.setMessageHandler(name: name, handler: { (_: MessageNull) in
            return try await handler()
        })
    }

    func setMessageHandler<Request>(requestType: Request.Type, handler: @escaping (Request) async throws -> Request.Response) where Request: RuntimeRequest {
        connection?.setMessageHandler { (request: Request) in
            return try await handler(request)
        }
    }

    func setMessageHandler<Request, Response>(name: String, handler: @escaping (Request) async throws -> Response) where Request: Decodable, Request: Encodable, Response: Decodable, Response: Encodable {
        connection?.setMessageHandler(name: name, handler: { (request: Request) in
            return try await handler(request)
        })
    }
}

final class RuntimeNetworkClientConnection: RuntimeNetworkBaseConnection {
    init(endpoint: RuntimeNetworkEndpoint) throws {
        super.init()
        self.connection = try RuntimeNetworkConnection(endpoint: endpoint.endpoint)
    }
}

final class RuntimeNetworkServerConnection: RuntimeNetworkBaseConnection {
    let listener: NWListener

    init(name: String) async throws {
        let tcpOptions = NWProtocolTCP.Options()
        tcpOptions.enableKeepalive = true
        tcpOptions.keepaliveIdle = 2

        let parameters = NWParameters(tls: nil, tcp: tcpOptions)
        parameters.includePeerToPeer = true
        self.listener = try NWListener(using: parameters)
        super.init()
        listener.service = NWListener.Service(name: name, type: RuntimeNetworkBonjour.type)
        try await start()
    }

    func start() async throws {
        try await withCheckedThrowingContinuation { continuation in
            listener.newConnectionHandler = { [weak self] newConnection in
                guard let self else { return }
                do {
                    let connection = try RuntimeNetworkConnection(connection: newConnection)
                    self.connection = connection
                    connection.didReady = { _ in
                        continuation.resume()
                    }
                    connection.didStop = { [weak self] _ in
                        guard let self else { return }
                        Task {
                            try await self.start()
                        }
                    }
                    listener.newConnectionHandler = nil
                    listener.cancel()
                } catch {
                    continuation.resume(throwing: error)
                }
            }
            listener.start(queue: .main)
        }
    }
}

```

`Core/Sources/RuntimeViewerCommunication/Connections/RuntimeXPCConnection.swift`:

```swift
//
//  RuntimeXPCConnection.swift
//  RuntimeViewerPackages
//
//  Created by JH on 2025/3/22.
//

#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import Foundation
import SwiftyXPC
import OSLog

class RuntimeXPCConnection: RuntimeConnection {
    fileprivate let identifier: RuntimeSource.Identifier

    fileprivate let listener: SwiftyXPC.XPCListener

    fileprivate let serviceConnection: SwiftyXPC.XPCConnection

    fileprivate var connection: SwiftyXPC.XPCConnection? {
        didSet {
            guard let connection else { return }
            connection.errorHandler = { connection, error in
                print(error)
            }
        }
    }

    fileprivate static let logger = Logger(subsystem: "com.JH.RuntimeCommunication", category: "RuntimeXPCConnection")

    init(identifier: RuntimeSource.Identifier, modify: ((RuntimeXPCConnection) async throws -> Void)? = nil) async throws {
        self.identifier = identifier
        let listener = try SwiftyXPC.XPCListener(type: .anonymous, codeSigningRequirement: nil)
        listener.setMessageHandler(requestType: PingRequest.self) { connection, request in
            return .empty
        }
        listener.errorHandler = { connection, error in
            print(error)
        }
        self.listener = listener
        self.serviceConnection = try await Self.connectToMachService()
        try await modify?(self)
        listener.activate()
    }

    private static func connectToMachService() async throws -> SwiftyXPC.XPCConnection {
        let serviceConnection = try XPCConnection(type: .remoteMachService(serviceName: RuntimeViewerMachServiceName, isPrivilegedHelperTool: true))
        serviceConnection.activate()
        try await serviceConnection.sendMessage(request: PingRequest())
        Self.logger.info("Ping mach service successfully")
        return serviceConnection
    }

    enum Error: Swift.Error {
        case connectionNotAvailable
    }

    func sendMessage(name: String) async throws {
        guard let connection = connection else {
            throw Error.connectionNotAvailable
        }
        try await connection.sendMessage(name: name)
    }

    func sendMessage<Request: RuntimeRequest>(request: Request) async throws -> Request.Response {
        guard let connection = connection else {
            throw Error.connectionNotAvailable
        }
        return try await connection.sendMessage(request: request)
    }

    func sendMessage<Response>(name: String, request: some Codable) async throws -> Response where Response: Decodable, Response: Encodable, Response: Sendable {
        guard let connection = connection else {
            throw Error.connectionNotAvailable
        }
        return try await connection.sendMessage(name: name, request: request)
    }

    func sendMessage<Response>(name: String) async throws -> Response where Response: Decodable, Response: Encodable {
        guard let connection = connection else {
            throw Error.connectionNotAvailable
        }
        return try await connection.sendMessage(name: name)
    }

    func sendMessage(name: String, request: some Codable) async throws {
        guard let connection = connection else {
            throw Error.connectionNotAvailable
        }
        try await connection.sendMessage(name: name, request: request)
    }

    func setMessageHandler<Request: RuntimeRequest>(requestType: Request.Type = Request.self, handler: @escaping (Request) async throws -> Request.Response) {
        listener.setMessageHandler(name: Request.identifier) { connection, request in
            try await handler(request)
        }
    }

    func setMessageHandler<Request, Response>(name: String, handler: @escaping (Request) async throws -> Response) where Request: Decodable, Request: Encodable, Response: Decodable, Response: Encodable {
        listener.setMessageHandler(name: name) { (_: XPCConnection, request: Request) in
            try await handler(request)
        }
    }

    func setMessageHandler(name: String, handler: @escaping () async throws -> Void) {
        listener.setMessageHandler(name: name) { (_: XPCConnection) in
            try await handler()
        }
    }

    func setMessageHandler<Request>(name: String, handler: @escaping (Request) async throws -> Void) where Request: Decodable, Request: Encodable {
        listener.setMessageHandler(name: name) { (_: XPCConnection, request: Request) in
            try await handler(request)
        }
    }

    func setMessageHandler<Response>(name: String, handler: @escaping () async throws -> Response) where Response: Decodable, Response: Encodable {
        listener.setMessageHandler(name: name) { (_: XPCConnection) in
            try await handler()
        }
    }
}

private enum CommandIdentifiers {
    static let serverLaunched = command("serverLaunched")
    static let clientConnected = command("clientConnected")
    static func command(_ command: String) -> String { "com.JH.RuntimeViewer.RuntimeListings.\(command)" }
}

final class RuntimeXPCClientConnection: RuntimeXPCConnection {
    override init(identifier: RuntimeSource.Identifier, modify: ((RuntimeXPCConnection) async throws -> Void)? = nil) async throws {
        try await super.init(identifier: identifier, modify: modify)
        try await serviceConnection.sendMessage(request: RegisterEndpointRequest(identifier: identifier.rawValue, endpoint: listener.endpoint))

        if identifier == .macCatalyst {
            try await serviceConnection.sendMessage(request: LaunchCatalystHelperRequest(helperURL: RuntimeViewerCatalystHelperLauncher.helperURL))
        }
//        connection = try await withCheckedThrowingContinuation { continuation in
            listener.setMessageHandler(name: CommandIdentifiers.serverLaunched) { [weak self] (_: XPCConnection, endpoint: XPCEndpoint) in
//                do {
                guard let self else { return }
                let connection = try XPCConnection(type: .remoteServiceFromEndpoint(endpoint))
                connection.activate()
                _ = try await connection.sendMessage(request: PingRequest())
                self.connection = connection
                Self.logger.info("Ping server successfully")
//                    continuation.resume(returning: connection)
//                } catch {
//                    continuation.resume(throwing: error)
//                    throw error
//                }
            }
//        }
        
    }
}

final class RuntimeXPCServerConnection: RuntimeXPCConnection {
    override init(identifier: RuntimeSource.Identifier, modify: ((RuntimeXPCConnection) async throws -> Void)? = nil) async throws {
        try await super.init(identifier: identifier, modify: modify)
        let response = try await serviceConnection.sendMessage(request: FetchEndpointRequest(identifier: identifier.rawValue))
        let connection = try XPCConnection(type: .remoteServiceFromEndpoint(response.endpoint))
        connection.activate()
        try await serviceConnection.sendMessage(request: RegisterEndpointRequest(identifier: identifier.rawValue, endpoint: listener.endpoint))
        try await connection.sendMessage(name: CommandIdentifiers.serverLaunched, request: listener.endpoint)
        self.connection = connection
        Self.logger.info("Ping client successfully")
    }
}

#endif

```

`Core/Sources/RuntimeViewerCommunication/Requests/FetchEndpointRequest.swift`:

```swift
//
//  FetchEndpointRequest.swift
//  RuntimeViewerPackages
//
//  Created by JH on 11/30/24.
//

#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import Foundation
import SwiftyXPC

public struct FetchEndpointRequest: Codable, RuntimeRequest {
    public static let identifier: String = "com.JH.RuntimeViewerService.FetchEndpoint"

    public struct Response: RuntimeResponse, Codable {
        public let endpoint: XPCEndpoint

        public init(endpoint: XPCEndpoint) {
            self.endpoint = endpoint
        }
    }

    public let identifier: String

    public init(identifier: String) {
        self.identifier = identifier
    }
}
#endif

```

`Core/Sources/RuntimeViewerCommunication/Requests/FileOperationRequest.swift`:

```swift
import Foundation

public enum FileOperation: Codable {
    case createDirectory(url: URL, isIntermediateDirectories: Bool)
    case remove(url: URL)
    case move(from: URL, to: URL)
    case copy(from: URL, to: URL)
    case write(url: URL, data: Data)
}

public struct FileOperationRequest: Codable, RuntimeRequest {
    public typealias Response = VoidResponse

    public static let identifier = "com.JH.RuntimeViewerService.FileOperationRequest"

    public let operation: FileOperation

    public init(operation: FileOperation) {
        self.operation = operation
    }
}

```

`Core/Sources/RuntimeViewerCommunication/Requests/InjectApplicationRequest.swift`:

```swift
//
//  InjectApplicationRequest.swift
//  RuntimeViewerPackages
//
//  Created by JH on 11/30/24.
//

import Foundation

public struct InjectApplicationRequest: Codable, RuntimeRequest {
    public typealias Response = VoidResponse

    public static let identifier: String = "com.JH.RuntimeViewerService.InjectApplication"

    public let pid: pid_t

    public let dylibURL: URL

    public init(pid: pid_t, dylibURL: URL) {
        self.pid = pid
        self.dylibURL = dylibURL
    }
}

```

`Core/Sources/RuntimeViewerCommunication/Requests/LaunchCatalystHelperRequest.swift`:

```swift
//
//  LaunchCatalystHelperRequest.swift
//  RuntimeViewerPackages
//
//  Created by JH on 11/30/24.
//

import Foundation

public struct LaunchCatalystHelperRequest: Codable, RuntimeRequest {
    public static let identifier: String = "com.JH.RuntimeViewerService.LaunchCatalystHelper"

    public typealias Response = VoidResponse

    public let helperURL: URL

    public init(helperURL: URL) {
        self.helperURL = helperURL
    }
}

```

`Core/Sources/RuntimeViewerCommunication/Requests/PingRequest.swift`:

```swift
//
//  PingRequest.swift
//  RuntimeViewerPackages
//
//  Created by JH on 11/30/24.
//

import Foundation

public struct PingRequest: Codable, RuntimeRequest {
    public typealias Response = VoidResponse

    public static let identifier: String = "com.JH.RuntimeViewerService.Ping"

    public init() {}
}

```

`Core/Sources/RuntimeViewerCommunication/Requests/RegisterEndpointRequest.swift`:

```swift
//
//  RegisterEndpointRequest.swift
//  RuntimeViewerPackages
//
//  Created by JH on 11/29/24.
//

#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import Foundation
import SwiftyXPC

public struct RegisterEndpointRequest: Codable, RuntimeRequest {
    public static let identifier: String = "com.JH.RuntimeViewerService.RegisterEndpoint"

    public typealias Response = VoidResponse

    public let identifier: String

    public let endpoint: XPCEndpoint

    public init(identifier: String, endpoint: XPCEndpoint) {
        self.identifier = identifier
        self.endpoint = endpoint
    }
}

#endif

```

`Core/Sources/RuntimeViewerCommunication/RuntimeCommunicator.swift`:

```swift
//
//  RuntimeCommunicator.swift
//  RuntimeViewerPackages
//
//  Created by JH on 2025/3/22.
//

import Foundation
import OSLog

public final class RuntimeCommunicator {
    public init() {}

    public func connect(to source: RuntimeSource, modify: ((RuntimeConnection) async throws -> Void)? = nil) async throws -> RuntimeConnection {
        switch source {
        case .local:
            throw NSError(domain: "com.JH.RuntimeViewerService", code: 1, userInfo: [NSLocalizedDescriptionKey: "Local connection is not supported"])
        case let .remote(_, identifier, role):
            #if os(macOS)
            if role.isServer {
                return try await RuntimeXPCServerConnection(identifier: identifier, modify: modify)
            } else {
                return try await RuntimeXPCClientConnection(identifier: identifier, modify: modify)
            }
            #else
            throw NSError(domain: "com.JH.RuntimeViewerService", code: 1, userInfo: [NSLocalizedDescriptionKey: "Remote connection is not supported on this platform"])
            #endif
        case let .bonjourClient(endpoint):
            let runtimeConnection = try RuntimeNetworkClientConnection(endpoint: endpoint)
            try await modify?(runtimeConnection)
            return runtimeConnection
        case let .bonjourServer(name, _):
            let runtimeConnection = try await RuntimeNetworkServerConnection(name: name)
            try await modify?(runtimeConnection)
            return runtimeConnection
        }
    }
}

```

`Core/Sources/RuntimeViewerCommunication/RuntimeNetwork.swift`:

```swift
//
//  RuntimeNetworkError.swift
//  RuntimeViewerPackages
//
//  Created by JH on 2025/3/22.
//

import Foundation
import Network

public enum RuntimeNetworkError: Error {
    case notConnected
    case invalidPort
    case receiveFailed
}

public struct RuntimeNetworkRequestError: Error, Codable {
    public let message: String
}

struct RuntimeRequestData: Codable {
    let identifier: String

    let data: Data

    init(identifier: String, data: Data) {
        self.identifier = identifier
        self.data = data
    }
    
    
    init<Value: Codable>(identifier: String, value: Value) throws {
        self.identifier = identifier
        self.data = try JSONEncoder().encode(value)
    }

    init<Request: RuntimeRequest>(request: Request) throws {
        self.identifier = Request.identifier
        self.data = try JSONEncoder().encode(request)
    }
}

public enum RuntimeNetworkBonjour {
    public static let type = "_runtimeviewer._tcp"
}

public struct RuntimeNetworkEndpoint {
    public let name: String
    let endpoint: NWEndpoint
}

public class RuntimeNetworkBrowser {
    private let browser: NWBrowser

    public init() {
        let parameters = NWParameters()
        parameters.includePeerToPeer = true

        self.browser = NWBrowser(for: .bonjour(type: RuntimeNetworkBonjour.type, domain: nil), using: parameters)
    }

    public func start(handler: @escaping (RuntimeNetworkEndpoint) -> Void) {
        browser.stateUpdateHandler = { newState in
            print("browser.stateUpdateHandler \(newState)")
        }
        browser.browseResultsChangedHandler = { results, changes in
            for result in results {
                switch result.endpoint {
                case let .service(name, _, _, _):
                    handler(.init(name: name, endpoint: result.endpoint))
                default:
                    break
                }
            }
        }
        browser.start(queue: .main)
    }
}

```

`Core/Sources/RuntimeViewerCommunication/RuntimeRequestResponse.swift`:

```swift
import Foundation
import OSLog

public let RuntimeViewerMachServiceName = "com.JH.RuntimeViewerService"

public protocol RuntimeRequest: Codable {
    associatedtype Response: RuntimeResponse

    static var identifier: String { get }
}

public protocol RuntimeResponse: Codable {}

public struct VoidResponse: RuntimeResponse, Codable {
    public init() {}

    public static let empty: VoidResponse = .init()
}


//public struct AnyRuntimeRequest<Value: Codable>: RuntimeRequest {
//
//    public typealias Response = AnyRuntimeResponse<Value>
//
//    public static let identifier: String
//    
//    public var wrappedValue: Value
//
//    public init(identifier: String, wrappedValue: Value) {
//        self.identifier = identifier
//        self.wrappedValue = wrappedValue
//    }
//}
//
//
//public struct AnyRuntimeResponse<Value: Codable>: RuntimeResponse {
//    public var wrappedValue: Value
//}

```

`Core/Sources/RuntimeViewerCommunication/RuntimeSource.swift`:

```swift
import Foundation

extension RuntimeSource {
    public enum Role {
        case client
        case server
        public var isClient: Bool { self == .client }
        public var isServer: Bool { self == .server }
    }

    public struct Identifier: RawRepresentable, ExpressibleByStringLiteral {
        public let rawValue: String

        public init(rawValue: String) {
            self.rawValue = rawValue
        }

        public init(stringLiteral value: StringLiteralType) {
            self.init(rawValue: value)
        }
    }
}

public enum RuntimeSource: CustomStringConvertible {
    case local
    case remote(name: String, identifier: Identifier, role: Role)
    case bonjourClient(endpoint: RuntimeNetworkEndpoint)
    case bonjourServer(name: String, identifier: Identifier)

    public var description: String {
        switch self {
        case .local: return "My Mac"
        case let .remote(name, _, _): return name
        case let .bonjourClient(endpoint): return endpoint.name
        case let .bonjourServer(name, _): return name
        }
    }

    public var isRemote: Bool {
        switch self {
        case .remote: return true
        case .bonjourClient,
             .bonjourServer: return true
        default: return false
        }
    }

    public var remoteRole: Role? {
        switch self {
        case let .remote(_, _, role): return role
        case .bonjourClient: return .client
        case .bonjourServer: return .server
        default: return nil
        }
    }
}

#if os(macOS)
extension RuntimeSource {
    public static let macCatalystClient: Self = .remote(name: "My Mac (Mac Catalyst)", identifier: .macCatalyst, role: .client)
    public static let macCatalystServer: Self = .remote(name: "My Mac (Mac Catalyst)", identifier: .macCatalyst, role: .server)
}

extension RuntimeSource.Identifier {
    public static let macCatalyst: Self = "com.JH.RuntimeViewer.MacCatalyst"
}
#endif

```

`Core/Sources/RuntimeViewerCommunication/RuntimeViewerCatalystHelperLauncher.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)

import AppKit

enum RuntimeViewerCatalystHelperLauncher {
    static let appName = "RuntimeViewerCatalystHelper"
    static let helperURL = Bundle.main.bundleURL.appendingPathComponent("Contents").appendingPathComponent("Applications").appendingPathComponent("\(appName).app")
}

#endif

```

`Core/Sources/RuntimeViewerCommunication/SwiftyXPC+.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import Foundation
import SwiftyXPC

extension SwiftyXPC.XPCConnection {
    @discardableResult
    public func sendMessage<Request: RuntimeRequest>(request: Request) async throws -> Request.Response {
        try await sendMessage(name: type(of: request).identifier, request: request)
    }
}

extension SwiftyXPC.XPCListener {
    public func setMessageHandler<Request: RuntimeRequest>(requestType: Request.Type = Request.self, handler: @escaping (XPCConnection, Request) async throws -> Request.Response) {
        setMessageHandler(name: requestType.identifier) { (connection: XPCConnection, request: Request) -> Request.Response in
            try await handler(connection, request)
        }
    }
}

#endif

```

`Core/Sources/RuntimeViewerCore/RuntimeEngine.swift`:

```swift
import OSLog
import Combine
import Foundation
import MachO.dyld
import ClassDumpRuntime
import FoundationToolbox
import RuntimeViewerCommunication


public final class RuntimeEngine {
    private enum DyldRegisterNotifications {
        static let addImage = Notification.Name("com.JH.RuntimeViewerCore.DyldRegisterObserver.addImageNotification")
        static let removeImage = Notification.Name("com.JH.RuntimeViewerCore.DyldRegisterObserver.removeImageNotification")
    }

    public static let shared = RuntimeEngine()

    private static let logger = Logger(subsystem: "com.JH.RuntimeViewerCore", category: "RuntimeEngine")

//    private let queue = AsyncQueue()

    @Published public private(set) var classList: [String] = [] {
        didSet {
//            if let role = source.remoteRole, role.isServer, let connection {
//                queue.addOperation {
//                    try await connection.sendMessage(name: CommandIdentifiers.classList, request: self.classList)
//                }
//            }
        }
    }

    @Published public private(set) var protocolList: [String] = [] {
        didSet {
//            if let role = source.remoteRole, role.isServer, let connection {
//                queue.addOperation {
//                    try await connection.sendMessage(name: CommandIdentifiers.protocolList, request: self.protocolList)
//                }
//            }
        }
    }

    @Published public private(set) var imageList: [String] = [] {
        didSet {
//            if let role = source.remoteRole, role.isServer, let connection {
//                queue.addOperation {
//                    try await connection.sendMessage(name: CommandIdentifiers.imageList, request: self.imageList)
//                }
//            }
        }
    }

    @Published public private(set) var protocolToImage: [String: String] = [:] {
        didSet {
//            if let role = source.remoteRole, role.isServer, let connection {
//                queue.addOperation {
//                    try await connection.sendMessage(name: CommandIdentifiers.protocolToImage, request: self.protocolToImage)
//                }
//            }
        }
    }

    @Published public private(set) var imageToProtocols: [String: [String]] = [:] {
        didSet {
//            if let role = source.remoteRole, role.isServer, let connection {
//                queue.addOperation {
//                    try await connection.sendMessage(name: CommandIdentifiers.imageToProtocols, request: self.imageToProtocols)
//                }
//            }
        }
    }

    @Published public private(set) var imageNodes: [RuntimeNamedNode] = [] {
        didSet {
//            if let role = source.remoteRole, role.isServer, let connection {
//                queue.addOperation {
//                    try await connection.sendMessage(name: CommandIdentifiers.imageNodes, request: self.imageNodes)
//                }
//            }
        }
    }

    private enum CommandIdentifiers {
        static let classList = command("classList")
        static let protocolList = command("protocolList")
        static let imageList = command("imageList")
        static let protocolToImage = command("protocolToImage")
        static let imageToProtocols = command("imageToProtocols")
        static let loadImage = command("loadImage")
        static let serverLaunched = command("serverLaunched")
        static let isImageLoaded = command("isImageLoaded")
        static let classNamesInImage = command("classNamesInImage")
        static let patchImagePathForDyld = command("patchImagePathForDyld")
        static let semanticStringForRuntimeObjectWithOptions = command("semanticStringForRuntimeObjectWithOptions")
        static let imageNodes = command("imageNodes")
        static let runtimeObjectHierarchy = command("runtimeObjectHierarchy")
        static let runtimeObjectInfo = command("runtimeObjectInfo")
        static let imageNameOfClassName = command("imageNameOfClassName")
        static let observeRuntime = command("observeRuntime")
        static func command(_ command: String) -> String { "com.JH.RuntimeViewer.RuntimeListings.\(command)" }
    }

    public let source: RuntimeSource

    private let shouldReload = PassthroughSubject<Void, Never>()

    private let communicator = RuntimeCommunicator()

    private var subscriptions: Set<AnyCancellable> = []

    /// The connection to the sender or receiver
    private var connection: RuntimeConnection?

    public init() {
        self.source = .local
        observeRuntime()
    }

    #if canImport(AppKit) && !targetEnvironment(macCatalyst)
    public static func macCatalystClient() async throws -> Self {
        try await Self(source: .macCatalystClient)
    }

    public static func macCatalystServer() async throws -> Self {
        try await Self(source: .macCatalystServer)
    }
    #endif

    public init(source: RuntimeSource) async throws {
        self.source = source
        if let role = source.remoteRole {
            switch role {
            case .server:
                self.connection = try await communicator.connect(to: source) { connection in
                    self.connection = connection
                    self.setupMessageHandlerForServer()
                }
                
                observeRuntime()
            case .client:
                self.connection = try await communicator.connect(to: source) { connection in
                    self.connection = connection
                    self.setupMessageHandlerForClient()
                }
                print("Client connected")
            }
        } else {
            observeRuntime()
        }
    }

    private func setupMessageHandlerForServer() {
        setMessageHandlerBinding(forName: CommandIdentifiers.isImageLoaded, of: self) { $0.isImageLoaded(path:) }
        setMessageHandlerBinding(forName: CommandIdentifiers.loadImage, of: self) { $0.loadImage(at:) }
        setMessageHandlerBinding(forName: CommandIdentifiers.classNamesInImage, of: self) { $0.classNamesIn(image:) }
        setMessageHandlerBinding(forName: CommandIdentifiers.patchImagePathForDyld, of: self) { $0.patchImagePathForDyld(_:) }
        setMessageHandlerBinding(forName: CommandIdentifiers.runtimeObjectHierarchy, of: self) { $0.runtimeObjectHierarchy(_:) }
        setMessageHandlerBinding(forName: CommandIdentifiers.imageNameOfClassName, of: self) { $0.imageName(ofClass:) }
        connection?.setMessageHandler(name: CommandIdentifiers.semanticStringForRuntimeObjectWithOptions) { [unowned self] (request: SemanticStringRequest) -> Data? in
            try await semanticString(for: request.runtimeObject, options: request.options).map { try NSKeyedArchiver.archivedData(withRootObject: $0, requiringSecureCoding: true) }
        }
    }

    private func setupMessageHandlerForClient() {
        setMessageHandlerBinding(forName: CommandIdentifiers.classList, to: \.classList)
        setMessageHandlerBinding(forName: CommandIdentifiers.protocolList, to: \.protocolList)
        setMessageHandlerBinding(forName: CommandIdentifiers.imageList, to: \.imageList)
        setMessageHandlerBinding(forName: CommandIdentifiers.protocolToImage, to: \.protocolToImage)
        setMessageHandlerBinding(forName: CommandIdentifiers.imageToProtocols, to: \.imageToProtocols)
        setMessageHandlerBinding(forName: CommandIdentifiers.imageNodes, to: \.imageNodes)
    }

    private func setMessageHandlerBinding<Object: AnyObject, Request: Codable>(forName name: String, of object: Object, to function: @escaping (Object) -> ((Request) async throws -> Void)) {
        connection?.setMessageHandler(name: name) { [unowned object] (request: Request) in
            try await function(object)(request)
        }
    }

    private func setMessageHandlerBinding<Object: AnyObject, Request: Codable, Response: Codable>(forName name: String, of object: Object, to function: @escaping (Object) -> ((Request) async throws -> Response)) {
        connection?.setMessageHandler(name: name) { [unowned object] (request: Request) -> Response in
            let result = try await function(object)(request)
            return result
        }
    }

    private func setMessageHandlerBinding<Response: Codable>(forName name: String, to keyPath: ReferenceWritableKeyPath<RuntimeEngine, Response>) {
        connection?.setMessageHandler(name: name) { [weak self] (response: Response) in
            guard let self else { return }
            self[keyPath: keyPath] = response
        }
    }

    public func reloadData() {
        Self.logger.debug("Start reload")
        classList = Self.classNames()
        protocolList = Self.protocolNames()
        imageList = Self.imageNames()
        imageNodes = [Self.dyldSharedCacheImageRootNode, Self.otherImageRootNode]
        Self.logger.debug("End reload")
        sendRemoteDataIfNeeded()
    }

    private func observeRuntime() {
        classList = Self.classNames()
        protocolList = Self.protocolNames()
        imageList = Self.imageNames()
        let (protocolToImage, imageToProtocols) = Self.protocolImageTrackingFor(
            protocolList: protocolList, protocolToImage: [:], imageToProtocols: [:]
        ) ?? ([:], [:])
        self.protocolToImage = protocolToImage
        self.imageToProtocols = imageToProtocols
        imageNodes = [Self.dyldSharedCacheImageRootNode, Self.otherImageRootNode]

        shouldReload
            .debounce(for: .milliseconds(15), scheduler: DispatchQueue.main)
            .sink { [weak self] in
                guard let self else { return }
                reloadData()
            }
            .store(in: &subscriptions)

        $protocolList
            .combineLatest($protocolToImage, $imageToProtocols)
            .sink { [weak self] in
                guard let self else { return }
                guard let (protocolToImage, imageToProtocols) = Self.protocolImageTrackingFor(
                    protocolList: $0, protocolToImage: $1, imageToProtocols: $2
                ) else { return }
                self.protocolToImage = protocolToImage
                self.imageToProtocols = imageToProtocols
            }
            .store(in: &subscriptions)

//        observeDyldRegister()
        sendRemoteDataIfNeeded()
    }

    private func sendRemoteDataIfNeeded() {
        guard let role = source.remoteRole, role.isServer, let connection else { return }
        Task {
            try await connection.sendMessage(name: CommandIdentifiers.classList, request: self.classList)
            try await connection.sendMessage(name: CommandIdentifiers.protocolList, request: self.protocolList)
            try await connection.sendMessage(name: CommandIdentifiers.imageList, request: self.imageList)
            try await connection.sendMessage(name: CommandIdentifiers.imageNodes, request: self.imageNodes)
            try await connection.sendMessage(name: CommandIdentifiers.protocolToImage, request: self.protocolToImage)
            try await connection.sendMessage(name: CommandIdentifiers.imageToProtocols, request: self.imageToProtocols)
        }
    }

    private func observeDyldRegister() {
        _dyld_register_func_for_add_image { _, _ in
            NotificationCenter.default.post(name: DyldRegisterNotifications.addImage, object: nil)
        }

        _dyld_register_func_for_remove_image { _, _ in
            NotificationCenter.default.post(name: DyldRegisterNotifications.removeImage, object: nil)
        }

        NotificationCenter.default.publisher(for: DyldRegisterNotifications.addImage)
            .receive(on: DispatchQueue.main)
            .sink { [weak self] _ in
                guard let self else { return }
                self.shouldReload.send()
            }
            .store(in: &subscriptions)

        NotificationCenter.default.publisher(for: DyldRegisterNotifications.removeImage)
            .receive(on: DispatchQueue.main)
            .sink { [weak self] _ in
                guard let self else { return }
                self.shouldReload.send()
            }
            .store(in: &subscriptions)
    }

    private func startTimingReload() {
        Timer.publish(every: 15, on: .main, in: .default)
            .autoconnect()
            .sink { [weak self] _ in
                guard let self else { return }

                let classList = Self.classNames()
                let protocolList = Self.protocolNames()

                let refClassList = self.classList
                let refProtocolList = self.protocolList

                if classList != refClassList {
                    Self.logger.error("Watchdog: classList is out-of-date")
                    self.classList = classList
                }
                if protocolList != refProtocolList {
                    Self.logger.error("Watchdog: protocolList is out-of-date")
                    self.protocolList = protocolList
                }
            }
            .store(in: &subscriptions)
    }
}

// MARK: - Requests

extension RuntimeEngine {
    enum RequestError: Error {
        case senderConnectionIsLose
    }

    private func request<T>(local: () throws -> T, remote: (_ senderConnection: RuntimeConnection) async throws -> T) async throws -> T {
        if let remoteRole = source.remoteRole, remoteRole.isClient {
            guard let connection else { throw RequestError.senderConnectionIsLose }
            return try await remote(connection)
        } else {
            return try local()
        }
    }

    public func isImageLoaded(path: String) async throws -> Bool {
        try await request {
            imageList.contains(Self.patchImagePathForDyld(path))
        } remote: {
            return try await $0.sendMessage(name: CommandIdentifiers.isImageLoaded, request: path)
        }
    }

    public func loadImage(at path: String) async throws {
        try await request {
            try Self.loadImage(at: path)
            reloadData()
        } remote: {
            try await $0.sendMessage(name: CommandIdentifiers.loadImage, request: path)
        }
    }

    public func classNamesIn(image: String) async throws -> [String] {
        try await request {
            Self.classNamesIn(image: image)
        } remote: {
            return try await $0.sendMessage(name: CommandIdentifiers.classNamesInImage, request: image)
        }
    }

    public func patchImagePathForDyld(_ imagePath: String) async throws -> String {
        try await request {
            Self.patchImagePathForDyld(imagePath)
        } remote: {
            return try await $0.sendMessage(name: CommandIdentifiers.patchImagePathForDyld, request: imagePath)
        }
    }

    public func imageName(ofClass className: String) async throws -> String? {
        try await request {
            Self.imageName(ofClass: className)
        } remote: {
            return try await $0.sendMessage(name: CommandIdentifiers.imageNameOfClassName, request: className)
        }
    }

    private struct SemanticStringRequest: Codable {
        let runtimeObject: RuntimeObjectType
        let options: CDGenerationOptions
    }

    public func semanticString(for runtimeObject: RuntimeObjectType, options: CDGenerationOptions) async throws -> CDSemanticString? {
        try await request {
            runtimeObject.semanticString(for: options)
        } remote: {
            let semanticStringData: Data? = try await $0.sendMessage(name: CommandIdentifiers.semanticStringForRuntimeObjectWithOptions, request: SemanticStringRequest(runtimeObject: runtimeObject, options: options))
            return try semanticStringData.flatMap { try NSKeyedUnarchiver.unarchivedObject(ofClass: CDSemanticString.self, from: $0) }
        }
    }

    public func runtimeObjectHierarchy(_ runtimeObject: RuntimeObjectType) async throws -> [String] {
        try await request {
            runtimeObject.hierarchy()
        } remote: {
            return try await $0.sendMessage(name: CommandIdentifiers.runtimeObjectHierarchy, request: runtimeObject)
        }
    }

    public func runtimeObjectInfo(_ runtimeObject: RuntimeObjectType) async throws -> RuntimeObjectInfo {
        try await request {
            try runtimeObject.info()
        } remote: {
            return try await $0.sendMessage(name: CommandIdentifiers.runtimeObjectInfo, request: runtimeObject)
        }
    }
}

extension RuntimeEngine {
    private static func protocolImageTrackingFor(
        protocolList: [String], protocolToImage: [String: String], imageToProtocols: [String: [String]]
    ) -> ([String: String], [String: [String]])? {
        var protocolToImageCopy = protocolToImage
        var imageToProtocolsCopy = imageToProtocols

        var dlInfo = dl_info()
        var didChange = false

        for protocolName in protocolList {
            guard protocolToImageCopy[protocolName] == nil else { continue } // happy path

            guard let prtcl = NSProtocolFromString(protocolName) else {
//                logger.error("Failed to find protocol named '\(protocolName, privacy: .public)'")
                continue
            }

            guard dladdr(protocol_getName(prtcl), &dlInfo) != 0 else {
//                logger.warning("Failed to get dl_info for protocol named '\(protocolName, privacy: .public)'")
                continue
            }

            guard let abc = dlInfo.dli_fname else {
//                logger.error("Failed to get dli_fname for protocol named '\(protocolName, privacy: .public)'")
                continue
            }

            let imageName = String(cString: abc)
            protocolToImageCopy[protocolName] = imageName
            imageToProtocolsCopy[imageName, default: []].append(protocolName)

            didChange = true
        }
        guard didChange else { return nil }
        return (protocolToImageCopy, imageToProtocolsCopy)
    }
}

extension RuntimeEngine {
    private class func classNames() -> [String] {
        CDUtilities.classNames()
    }

    private class func imageNames() -> [String] {
        (0...)
            .lazy
            .map(_dyld_get_image_name)
            .prefix { $0 != nil }
            .compactMap { $0 }
            .map { String(cString: $0) }
    }

    private class func protocolNames() -> [String] {
        var protocolCount: UInt32 = 0
        guard let protocolList = objc_copyProtocolList(&protocolCount) else { return [] }

        let names = sequence(first: protocolList) { $0.successor() }
            .prefix(Int(protocolCount))
            .map { NSStringFromProtocol($0.pointee) }

        return names
    }

    private class func imageName(ofClass className: String) -> String? {
        class_getImageName(NSClassFromString(className)).map { String(cString: $0) }
    }

    private class func classNamesIn(image: String) -> [String] {
        patchImagePathForDyld(image).withCString { cString in
            var classCount: UInt32 = 0
            guard let classNames = objc_copyClassNamesForImage(cString, &classCount) else { return [] }

            let names = sequence(first: classNames) { $0.successor() }
                .prefix(Int(classCount))
                .map { String(cString: $0.pointee) }

            classNames.deallocate()

            return names
        }
    }

    private class func patchImagePathForDyld(_ imagePath: String) -> String {
        guard imagePath.starts(with: "/") else { return imagePath }
        let rootPath = ProcessInfo.processInfo.environment["DYLD_ROOT_PATH"]
        guard let rootPath else { return imagePath }
        return rootPath.appending(imagePath)
    }

    private class func loadImage(at path: String) throws {
        try path.withCString { cString in
            let handle = dlopen(cString, RTLD_LAZY)
            // get the error and copy it into an object we control since the error is shared
            let errPtr = dlerror()
            let errStr = errPtr.map { String(cString: $0) }
            guard handle != nil else {
                throw DlOpenError(message: errStr)
            }
        }
    }

    private class var dyldSharedCacheImageRootNode: RuntimeNamedNode {
        return .rootNode(for: CDUtilities.dyldSharedCacheImagePaths(), name: "Dyld Shared Cache")
    }

    private class var otherImageRootNode: RuntimeNamedNode {
        let dyldSharedCacheImagePaths = CDUtilities.dyldSharedCacheImagePaths()
        let allImagePaths = imageNames()
        let otherImagePaths = allImagePaths.filter { !dyldSharedCacheImagePaths.contains($0) }
        return .rootNode(for: otherImagePaths, name: "Others")
    }
}

public struct DlOpenError: Error {
    public let message: String?
}

```

`Core/Sources/RuntimeViewerCore/RuntimeImageLoadState.swift`:

```swift
import Foundation

public enum RuntimeImageLoadState {
    case notLoaded
    case loading
    case loaded
    case loadError(Error)
}

```

`Core/Sources/RuntimeViewerCore/RuntimeInjectClient.swift`:

```swift
//
//  RuntimeInjectClient.swift
//  RuntimeViewerPackages
//
//  Created by JH on 11/29/24.
//

#if os(macOS)

import OSLog
import SwiftyXPC
import Foundation
import RuntimeViewerCommunication

public final class RuntimeInjectClient {
    private static let logger = Logger(subsystem: "com.JH.RuntimeViewerCore", category: "RuntimeInjectClient")

    public static let shared = RuntimeInjectClient()

    private var connection: XPCConnection?

    private init() {}

    public var isInstalledServerFramework: Bool {
        FileManager.default.fileExists(atPath: serverFrameworkDestinationURL.path)
    }

    public let serverFrameworkDestinationURL = URL(fileURLWithPath: "/Library/Frameworks/RuntimeViewerServer.framework")

    public var serverFrameworkSourceURL: URL? {
        Bundle.main.url(forResource: "RuntimeViewerServer", withExtension: "framework")
    }

    private func connectionIfNeeded() throws -> XPCConnection {
        let connection: XPCConnection
        if let currentConnection = self.connection {
            connection = currentConnection
        } else {
            connection = try XPCConnection(type: .remoteMachService(serviceName: RuntimeViewerMachServiceName, isPrivilegedHelperTool: true))
            connection.activate()
            self.connection = connection
        }
        return connection
    }

    public func injectApplication(pid: pid_t, dylibURL: URL) async throws {
        try await connectionIfNeeded().sendMessage(request: InjectApplicationRequest(pid: pid, dylibURL: dylibURL))
    }

    public enum Error: LocalizedError {
        case serverFrameworkNotFound
        public var errorDescription: String? {
            switch self {
            case .serverFrameworkNotFound:
                return "Server framework not found."
            }
        }
    }

    public func installServerFrameworkIfNeeded() async throws {
//        guard !isInstalledServerFramework else { return }
        try await installServerFramework()
    }
    
    public func installServerFramework() async throws {
        guard let serverFrameworkSourceURL else {
            throw Error.serverFrameworkNotFound
        }
        try await connectionIfNeeded().sendMessage(request: FileOperationRequest(operation: .copy(from: serverFrameworkSourceURL, to: serverFrameworkDestinationURL)))
    }
}

#endif

```

`Core/Sources/RuntimeViewerCore/RuntimeNamedNode.swift`:

```swift
import Foundation

public final class RuntimeNamedNode: Codable {
    public let name: String

    public weak var parent: RuntimeNamedNode?

    public var children: [RuntimeNamedNode] = []

    private enum CodingKeys: CodingKey {
        case name
        case children
    }

    public init(_ name: String, parent: RuntimeNamedNode? = nil) {
        self.parent = parent
        self.name = name
    }

    public lazy var absolutePath: String = {
        guard let parent else { return "/" + name }
        let directory = parent.absolutePath
        return directory + "/" + name
    }()
    
    public var path: String { absolutePath.removeFirstPathComponent() }

    public var isLeaf: Bool { children.isEmpty }

    public func child(named name: String) -> RuntimeNamedNode {
        if let existing = children.first(where: { $0.name == name }) {
            return existing
        }
        let child = RuntimeNamedNode(name, parent: self)
        children.append(child)
        return child
    }

    public class func rootNode(for imagePaths: [String], name: String = "") -> RuntimeNamedNode {
        let root = RuntimeNamedNode(name)
        for path in imagePaths {
            var current = root
            for pathComponent in path.split(separator: "/") {
                switch pathComponent {
                case ".":
                    break // current
                case "..":
                    if let parent = current.parent {
                        current = parent
                    }
                default:
                    current = current.child(named: String(pathComponent))
                }
            }
        }
        return root
    }

    public func encode(to encoder: Encoder) throws {
        var container = encoder.container(keyedBy: CodingKeys.self)
        try container.encode(name, forKey: .name)
        try container.encode(children, forKey: .children)
    }

    public required init(from decoder: Decoder) throws {
        let container = try decoder.container(keyedBy: CodingKeys.self)
        self.name = try container.decode(String.self, forKey: .name)
        self.children = try container.decode([RuntimeNamedNode].self, forKey: .children)

        for child in children {
            child.parent = self
        }
    }
}

extension RuntimeNamedNode: Hashable {
    public static func == (lhs: RuntimeNamedNode, rhs: RuntimeNamedNode) -> Bool {
        lhs.name == rhs.name && lhs.children == rhs.children
    }

    public func hash(into hasher: inout Hasher) {
        hasher.combine(name)
        hasher.combine(children)
    }
}

extension String {
    /// 移除路径中的第一个组件，保持原始路径的绝对/相对特性
    /// 例如:
    /// - "/path/to/file" -> "/to/file"
    /// - "path/to/file" -> "to/file"
    /// - "/path" -> "/"
    /// - "path" -> ""
    /// - "/" -> "/"
    /// - "" -> ""
    func removeFirstPathComponent() -> String {
        let isAbsolute = self.hasPrefix("/")
        var components = self.split(separator: "/", omittingEmptySubsequences: true)
        
        guard !components.isEmpty else {
            return isAbsolute ? "/" : ""
        }
        
        components.removeFirst()
        
        if components.isEmpty {
            return isAbsolute ? "/" : ""
        }
        
        return isAbsolute ? "/" + components.joined(separator: "/") : components.joined(separator: "/")
    }
}

```

`Core/Sources/RuntimeViewerCore/RuntimeObjectType.swift`:

```swift
import Foundation
import ClassDumpRuntime

public enum RuntimeObjectType: Codable, Hashable, Identifiable {
    case `class`(named: String)
    case `protocol`(named: String)

    public var id: Self { self }
}

extension RuntimeObjectType {
    public var name: String {
        switch self {
        case let .class(name):
            return name
        case let .protocol(name):
            return name
        }
    }
}

private func getClassHierarchy(_ cls: AnyClass) -> [AnyClass] {
    var hierarcy = [AnyClass]()
    hierarcy.append(cls)
    var superclass: AnyClass? = class_getSuperclass(cls)
    while let currentSuperclass = superclass {
        hierarcy.append(currentSuperclass)
        superclass = class_getSuperclass(currentSuperclass)
    }

    return hierarcy
}

extension RuntimeObjectType {
    func hierarchy() -> [String] {
        switch self {
        case let .class(named):
            if let cls = NSClassFromString(named) {
                return getClassHierarchy(cls).map { NSStringFromClass($0) }
            } else {
                return []
            }
        case let .protocol(named):
            if let proto = NSProtocolFromString(named) {
                return (CDProtocolModel(with: proto).protocols ?? []).map { $0.name }
            } else {
                return []
            }
        }
    }
}

extension RuntimeObjectType {
    enum RuntimeError: Error {
        case fetchRuntimeObjectFailed
    }

    func semanticString(for options: CDGenerationOptions) -> CDSemanticString? {
        switch self {
        case let .class(named):
            if let cls = NSClassFromString(named) {
                let classModel = CDClassModel(with: cls)
                return classModel.semanticLines(with: options)
            } else {
                return nil
            }
        case let .protocol(named):
            if let proto = NSProtocolFromString(named) {
                let protocolModel = CDProtocolModel(with: proto)
                return protocolModel.semanticLines(with: options)
            } else {
                return nil
            }
        }
    }

    private func requestRuntimeObject<T>(class: (CDClassModel) throws -> T, protocol: (CDProtocolModel) throws -> T) throws -> T {
        switch self {
        case let .class(named):
            if let cls = NSClassFromString(named) {
                let classModel = CDClassModel(with: cls)
                return try `class`(classModel)
            } else {
                throw RuntimeError.fetchRuntimeObjectFailed
            }
        case let .protocol(named):
            if let proto = NSProtocolFromString(named) {
                let protocolModel = CDProtocolModel(with: proto)
                return try `protocol`(protocolModel)
            } else {
                throw RuntimeError.fetchRuntimeObjectFailed
            }
        }
    }

    func info() throws -> RuntimeObjectInfo {
        try requestRuntimeObject {
            .class(
                RuntimeClassObjectInfo(
                    numberOfIvars: $0.ivars?.count ?? 0,
                    numberOfInstanceProperties: $0.instanceProperties?.count ?? 0,
                    numberOfInstanceMethods: $0.instanceMethods?.count ?? 0,
                    numberOfClassProperties: $0.classProperties?.count ?? 0,
                    numberOfClassMethods: $0.classMethods?.count ?? 0,
                    numberOfConformProtocols: $0.protocols?.count ?? 0
                )
            )
        } `protocol`: {
            .protocol(
                RuntimeProtocolObjectInfo(
                    numberOfRequiredInstanceProperties: $0.requiredInstanceProperties?.count ?? 0,
                    numberOfRequiredInstanceMethods: $0.requiredInstanceMethods?.count ?? 0,
                    numberOfRequiredClassProperties: $0.requiredClassProperties?.count ?? 0,
                    numberOfRequiredClassMethods: $0.requiredClassMethods?.count ?? 0,
                    numberOfOptionalInstanceProperties: $0.optionalInstanceProperties?.count ?? 0,
                    numberOfOptionalInstanceMethods: $0.optionalInstanceMethods?.count ?? 0,
                    numberOfOptionalClassProperties: $0.optionalClassProperties?.count ?? 0,
                    numberOfOptionalClassMethods: $0.optionalClassMethods?.count ?? 0,
                    numberOfConformProtocols: $0.protocols?.count ?? 0
                )
            )
        }
    }
}

public enum RuntimeObjectInfo: Codable {
    case `class`(RuntimeClassObjectInfo)
    case `protocol`(RuntimeProtocolObjectInfo)
}

public struct RuntimeClassObjectInfo: Codable {
    public let numberOfIvars: Int
    public let numberOfInstanceProperties: Int
    public let numberOfInstanceMethods: Int
    public let numberOfClassProperties: Int
    public let numberOfClassMethods: Int
    public let numberOfConformProtocols: Int
}

public struct RuntimeProtocolObjectInfo: Codable {
    public let numberOfRequiredInstanceProperties: Int
    public let numberOfRequiredInstanceMethods: Int
    public let numberOfRequiredClassProperties: Int
    public let numberOfRequiredClassMethods: Int
    public let numberOfOptionalInstanceProperties: Int
    public let numberOfOptionalInstanceMethods: Int
    public let numberOfOptionalClassProperties: Int
    public let numberOfOptionalClassMethods: Int
    public let numberOfConformProtocols: Int
}

```

`Core/Sources/RuntimeViewerCore/RuntimeTypeSearchScope.swift`:

```swift
import Foundation

public enum RuntimeTypeSearchScope: Hashable {
    case all
    case classes
    case protocols
}

public extension RuntimeTypeSearchScope {
    var includesClasses: Bool {
        switch self {
        case .all: true
        case .classes: true
        case .protocols: false
        }
    }

    var includesProtocols: Bool {
        switch self {
        case .all: true
        case .classes: false
        case .protocols: true
        }
    }
}

```

`Core/Sources/RuntimeViewerCore/RuntimeViewerCore.swift`:

```swift
@_exported import ClassDumpRuntime
@_exported import ClassDumpRuntimeSwift

```

`LICENSE`:

```
MIT License

Copyright (c) 2025 MxIris-Reverse-Engineering

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

```

`README.md`:

```md
<img width="30%" src= "Resources/AppIcon.png">

# Runtime Viewer

Alternative to RuntimeBrowser with a more modern UI and more functionality

Powered by [ClassDumpRuntime](https://github.com/leptos-null/ClassDumpRuntime)

## Highlights
- Full in AppKit/UIKit, the text view supports type-defined jumps and the exact same highlighting style as Xcode.
- Support `macOS` frameworks and `iOSSupport` frameworks.
- Easy export of header files
- Loading custom macOS frameworks.
- Code Injection, view other app objc class headers (Needs disable SIP)
- (WIP) Support more iDevice using Bonjour (iOS, watchOS, tvOS, visionOS needs install RuntimeViewerMobileServer framework)

## Usage
The first time you use it you need to install the XPC helper program, this is used to communicate with other apps, click on the icon of the similar tool on the toolbar to install it.

If the Catalyst side and code injection applications do not appear in any directory, try restarting the application.

## Screenshots
![](./Resources/Screenshot-001.png)
![](./Resources/Screenshot-002.png)

```

`RuntimeViewer.xcworkspace/contents.xcworkspacedata`:

```xcworkspacedata
<?xml version="1.0" encoding="UTF-8"?>
<Workspace
   version = "1.0">
   <FileRef
      location = "group:Core">
   </FileRef>
   <FileRef
      location = "group:RuntimeViewerPackages">
   </FileRef>
   <FileRef
      location = "group:RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit.xcodeproj">
   </FileRef>
   <FileRef
      location = "group:RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit.xcodeproj">
   </FileRef>
</Workspace>

```

`RuntimeViewerPackages/Package.swift`:

```swift
// swift-tools-version: 5.10
// The swift-tools-version declares the minimum version of Swift required to build this package.

import PackageDescription

let appkitPlatforms: [Platform] = [.macOS]

let uikitPlatforms: [Platform] = [.iOS, .tvOS, .visionOS]

let package = Package(
    name: "RuntimeViewerPackages",
    platforms: [
        .iOS(.v14), .macOS(.v12), .macCatalyst(.v14), .tvOS(.v14), .visionOS(.v1),
    ],
    products: [
        .library(
            name: "RuntimeViewerUI",
            targets: ["RuntimeViewerUI"]
        ),
        .library(
            name: "RuntimeViewerArchitectures",
            targets: ["RuntimeViewerArchitectures"]
        ),
        .library(
            name: "RuntimeViewerApplication",
            targets: ["RuntimeViewerApplication"]
        ),
        .library(
            name: "RuntimeViewerService",
            targets: ["RuntimeViewerService"]
        ),
    ],
    dependencies: [
        .package(
            url: "https://github.com/ChimeHQ/Rearrange.git",
            .upToNextMajor(from: "1.6.0")
        ),
        .package(
            url: "https://github.com/Mx-Iris/UIFoundation",
            branch: "main"
        ),
        .package(
            url: "https://github.com/MxIris-Library-Forks/XCoordinator",
            branch: "master"
        ),
        .package(
            url: "https://github.com/Mx-Iris/CocoaCoordinator",
            branch: "main"
        ),
//        .package(
//            path: "/Volumes/Repositories/Private/Fork/Library/ClassDumpRuntime"
//        ),
        .package(
            url: "https://github.com/SnapKit/SnapKit",
            .upToNextMajor(from: "5.0.0")
        ),
        .package(
            url: "https://github.com/ReactiveX/RxSwift",
            .upToNextMajor(from: "6.0.0")
        ),
        .package(
            url: "https://github.com/Mx-Iris/RxSwiftPlus",
            branch: "main"
        ),
//        .package(
//            url: "https://github.com/RxSwiftCommunity/RxSwiftExt.git",
//            .upToNextMajor(from: "6.0.0")
//        ),
//        .package(
//            path: "/Volumes/Repositories/Private/Personal/Library/Multi/RxSwiftPlus"
//        ),
        .package(
            url: "https://github.com/Mx-Iris/RxAppKit",
            branch: "main"
        ),
        .package(
            url: "https://github.com/OpenUXKit/OpenUXKit",
            branch: "main"
        ),
        .package(
            url: "https://github.com/MxIris-Library-Forks/NSAttributedStringBuilder",
            branch: "master"
        ),
        .package(
            url: "https://github.com/Mx-Iris/SFSymbol",
            branch: "main"
        ),
//        .package(path: "/Volumes/Code/Personal/SFSymbol"),
        .package(
            url: "https://github.com/CombineCommunity/RxCombine",
            .upToNextMajor(from: "2.0.0")
        ),
        .package(
            url: "https://github.com/MxIris-Library-Forks/ide-icons",
            branch: "main"
        ),
//            .package(path: "/Volumes/Code/Personal/ide-icons"),
//        .package(
//            url: "https://github.com/krzyzanowskim/STTextView",
//            from: "0.9.5"
//        ),
        .package(
            url: "https://github.com/gringoireDM/RxEnumKit",
            branch: "master"
        ),
        .package(
            url: "https://github.com/Mx-Iris/RxUIKit",
            branch: "main"
        ),
//        .package(
//            path: "/Volumes/Repositories/Private/Fork/Library/SwiftyXPC"
//        ),
        .package(
            url: "https://github.com/MxIris-macOS-Library-Forks/filter-ui",
            branch: "main"
        ),
        .package(
            url: "https://github.com/TrGiLong/RxConcurrency",
            branch: "main"
        ),
        .package(
            url: "https://github.com/MxIris-Reverse-Engineering/MachInjector",
            branch: "main"
        ),
        .package(
            url: "https://github.com/MxIris-macOS-Library-Forks/SwiftyXPC",
            branch: "main"
        ),
        .package(
            url: "https://github.com/Mx-Iris/RunningApplicationKit",
            branch: "main"
        ),
        .package(path: "../Core"),
    ],
    targets: [
        .target(
            name: "RuntimeViewerArchitectures",
            dependencies: [
                .product(name: "RxSwift", package: "RxSwift"),
                .product(name: "RxCocoa", package: "RxSwift"),
                .product(name: "RxSwiftPlus", package: "RxSwiftPlus"),
                .product(name: "RxDefaultsPlus", package: "RxSwiftPlus"),
                .product(name: "RxAppKit", package: "RxAppKit", condition: .when(platforms: appkitPlatforms)),
                .product(name: "RxUIKit", package: "RxUIKit", condition: .when(platforms: uikitPlatforms)),
                .product(name: "RxCombine", package: "RxCombine"),
                .product(name: "RxEnumKit", package: "RxEnumKit"),
                .product(name: "RxConcurrency", package: "RxConcurrency"),
//                .product(name: "RxSwiftExt", package: "RxSwiftExt"),
                .product(name: "XCoordinator", package: "XCoordinator", condition: .when(platforms: uikitPlatforms)),
                .product(name: "XCoordinatorRx", package: "XCoordinator", condition: .when(platforms: uikitPlatforms)),
                .product(name: "CocoaCoordinator", package: "CocoaCoordinator", condition: .when(platforms: appkitPlatforms)),
                .product(name: "RxCocoaCoordinator", package: "CocoaCoordinator", condition: .when(platforms: appkitPlatforms)),
                .product(name: "OpenUXKitCoordinator", package: "CocoaCoordinator", condition: .when(platforms: appkitPlatforms)),
//                .product(name: "UXKitCoordinator", package: "CocoaCoordinator", condition: .when(platforms: [.macOS])),
            ]
        ),
        .target(
            name: "RuntimeViewerUI",
            dependencies: [
                .product(name: "UIFoundation", package: "UIFoundation"),
                .product(name: "UIFoundationToolbox", package: "UIFoundation"),
                .product(name: "SnapKit", package: "SnapKit"),
                .product(name: "OpenUXKit", package: "OpenUXKit", condition: .when(platforms: appkitPlatforms)),
//                .product(name: "UXKit", package: "OpenUXKit"),
                .product(name: "NSAttributedStringBuilder", package: "NSAttributedStringBuilder"),
                .product(name: "SFSymbol", package: "SFSymbol"),
                .product(name: "IDEIcons", package: "ide-icons"),
                .product(name: "FilterUI", package: "filter-ui", condition: .when(platforms: appkitPlatforms)),
                .product(name: "Rearrange", package: "Rearrange", condition: .when(platforms: appkitPlatforms)),
//                .product(name: "MachInjectorUI", package: "MachInjector", condition: .when(platforms: appkitPlatforms)),
                .product(name: "RunningApplicationKit", package: "RunningApplicationKit", condition: .when(platforms: appkitPlatforms)),
            ]
        ),
        .target(
            name: "RuntimeViewerApplication",
            dependencies: [
                .product(name: "RuntimeViewerCore", package: "Core"),
                "RuntimeViewerUI",
                "RuntimeViewerArchitectures",
            ]
        ),

        .target(
            name: "RuntimeViewerService",
            dependencies: [
                .product(name: "RuntimeViewerCommunication", package: "Core"),
                .product(name: "SwiftyXPC", package: "SwiftyXPC", condition: .when(platforms: appkitPlatforms)),
                .product(name: "MachInjector", package: "MachInjector", condition: .when(platforms: appkitPlatforms)),
            ]
        ),
    ]
)

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/AppDefaults.swift`:

```swift
import Foundation
import RxDefaultsPlus
import RuntimeViewerCore
import RuntimeViewerArchitectures

public class AppDefaults {
    public static let shared = AppDefaults()

    @UserDefault(key: "isInitialSetupSplitView", defaultValue: true)
    public var isInitialSetupSplitView: Bool

    @UserDefault(key: "generationOptions", defaultValue: .init())
    public var options: CDGenerationOptions

    @UserDefault(key: "themeProfile", defaultValue: XcodePresentationTheme())
    public var themeProfile: XcodePresentationTheme

    public static subscript<Value>(keyPath: ReferenceWritableKeyPath<AppDefaults, Value>) -> Value {
        set {
            shared[keyPath: keyPath] = newValue
        }
        get {
            shared[keyPath: keyPath]
        }
    }

    public static subscript<Value>(keyPath: KeyPath<AppDefaults, Value>) -> Value {
        shared[keyPath: keyPath]
    }
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/AppServices.swift`:

```swift
import Foundation
import RuntimeViewerCore
import RuntimeViewerArchitectures

public final class AppServices: NSObject {
    public static let shared = AppServices()

    @Observed
    public var runtimeEngine: RuntimeEngine = .shared
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/CDSemanticString+ThemeProfile.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import AppKit
#endif

#if canImport(UIKit)
import UIKit
#endif

import RuntimeViewerCore

public extension CDSemanticString {
    func attributedString(for provider: ThemeProfile) -> NSAttributedString {
        let attributedString = NSMutableAttributedString(string: "")
        enumerateTypes { string, type in
            var attributes: [NSAttributedString.Key: Any] = [
                .font: provider.font(for: type),
                .foregroundColor: provider.color(for: type),
            ]
            #if canImport(AppKit) && !targetEnvironment(macCatalyst)
            if type == .class || type == .protocol {
                attributes.updateValue(type == .class ? RuntimeObjectType.class(named: string) : RuntimeObjectType.protocol(named: string), forKey: .link)
            }
            #endif

            #if canImport(UIKit)
            if type == .class || type == .protocol {
                let scheme = type == .class ? "class" : "protocol"
                let host = string
                if let url = URL(string: "\(scheme)://\(host)") {
                    attributes.updateValue(url, forKey: .link)
                }
            }
            #endif
            attributedString.append(NSAttributedString(string: string, attributes: attributes))
        }
        return attributedString
    }
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/ContentPlaceholderViewModel.swift`:

```swift
import Foundation

public class ContentPlaceholderViewModel: ViewModel<ContentRoute> {}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/ContentRoute.swift`:

```swift
import Foundation
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerArchitectures

public enum ContentRoute: Routable {
    case placeholder
    case root(RuntimeObjectType)
    case next(RuntimeObjectType)
    case back
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/ContentTextViewModel.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import AppKit
#endif

#if canImport(UIKit)
import UIKit
#endif

import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerArchitectures

public class ContentTextViewModel: ViewModel<ContentRoute> {
    @Observed
    public private(set) var theme: ThemeProfile

    @Observed
    public private(set) var runtimeObject: RuntimeObjectType

    @Observed
    public private(set) var imageNameOfRuntimeObject: String?
    
    @Observed
    public private(set) var attributedString: NSAttributedString?

    public init(runtimeObject: RuntimeObjectType, appServices: AppServices, router: any Router<ContentRoute>) {
        self.runtimeObject = runtimeObject
        self.theme = XcodePresentationTheme()
        super.init(appServices: appServices, router: router)
        Task {
            do {
                switch runtimeObject {
                case .class(let named):
                    let imageName = try await appServices.runtimeEngine.imageName(ofClass: named)
                    await MainActor.run {
                        self.imageNameOfRuntimeObject = imageName
                    }
                case .protocol(let named):
                    self.imageNameOfRuntimeObject = appServices.runtimeEngine.protocolToImage[named]
                }
            } catch {
                print(error)
            }
        }
        Observable.combineLatest($runtimeObject, AppDefaults[\.$options], AppDefaults[\.$themeProfile])
            .observeOnMainScheduler()
            .flatMap { [unowned self] runtimeObject, options, theme -> NSAttributedString? in
                let semanticString = try await self.appServices.runtimeEngine.semanticString(for: runtimeObject, options: options)
                return await MainActor.run {
                    semanticString?.attributedString(for: theme)
                }
            }
            .catchAndReturn(nil)
            .bind(to: $attributedString)
            .disposed(by: rx.disposeBag)
    }

    public struct Input {
        public let runtimeObjectClicked: Signal<RuntimeObjectType>
        public init(runtimeObjectClicked: Signal<RuntimeObjectType>) {
            self.runtimeObjectClicked = runtimeObjectClicked
        }
    }

    public struct Output {
        public let attributedString: Driver<NSAttributedString>
        public let runtimeObjectName: Driver<String>
        public let theme: Driver<ThemeProfile>
        public let imageNameOfRuntimeObject: Driver<String?>
    }

//    private func setAttributedString(for options: CDGenerationOptions) {
//        switch runtimeObject {
//        case let .class(named):
//            if let cls = NSClassFromString(named) {
//                let classModel = CDClassModel(with: cls)
//                attributedString = classModel.semanticLines(with: options).attributedString(for: theme)
//            } else {
//                attributedString = NSAttributedString {
//                    AText("\(named) class not found.")
//                }
//            }
//        case let .protocol(named):
//            if let proto = NSProtocolFromString(named) {
//                let protocolModel = CDProtocolModel(with: proto)
//                attributedString = protocolModel.semanticLines(with: options).attributedString(for: theme)
//            } else {
//                attributedString = NSAttributedString {
//                    AText("\(named) protocol not found.")
//                }
//            }
//        }
//    }

    public func transform(_ input: Input) -> Output {
        input.runtimeObjectClicked.emit(with: self) { $0.router.trigger(.next($1)) }.disposed(by: rx.disposeBag)
        return Output(
            attributedString: $attributedString.asDriver().compactMap { $0 },
            runtimeObjectName: $runtimeObject.asDriver().map { $0.name },
            theme: $theme.asDriver(),
            imageNameOfRuntimeObject: $imageNameOfRuntimeObject.asDriver().map { $0?.box.lastPathComponent.box.deletingPathExtension }
        )
    }
}

extension NSAttributedString: @unchecked @retroactive Sendable {}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/Extensions.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import AppKit
#endif

#if canImport(UIKit)
import UIKit
#endif

import RuntimeViewerUI
import RuntimeViewerCore
import RuntimeViewerArchitectures

extension RuntimeObjectType {
    #if canImport(AppKit) && !targetEnvironment(macCatalyst)
    private static let iconSize: CGFloat = 16
    #endif

    #if canImport(UIKit)
    private static let iconSize: CGFloat = 24
    #endif

    public static let classIcon = IDEIcon("C", color: .yellow, style: .default, size: iconSize).image
    public static let protocolIcon = IDEIcon("Pr", color: .purple, style: .default, size: iconSize).image
//    public static let classIcon = SFSymbol(systemName: .cSquare).nsuiImage
//    public static let protocolIcon = SFSymbol(systemName: .pSquare).nsuiImage

    public var icon: NSUIImage {
        switch self {
        case .class: return Self.classIcon
        case .protocol: return Self.protocolIcon
        }
    }
}

extension RuntimeObjectType: @retroactive Comparable {
    public static func < (lhs: RuntimeObjectType, rhs: RuntimeObjectType) -> Bool {
        switch (lhs, rhs) {
        case (.class, .protocol):
            return true
        case (.protocol, .class):
            return false
        case let (.class(className1), .class(className2)):
            return className1 < className2
        case let (.protocol(protocolName1), .protocol(protocolName2)):
            return protocolName1 < protocolName2
        }
    }
}

extension RuntimeImageLoadState: @retroactive CaseAccessible {}

#if canImport(UIKit)

extension UIColor {
    static var labelColor: UIColor { .label }
}

#endif

extension RuntimeNamedNode: @retroactive Sequence {
    public func makeIterator() -> Iterator {
        return Iterator(node: self)
    }

    public struct Iterator: IteratorProtocol {
        var stack: [RuntimeNamedNode] = []

        init(node: RuntimeNamedNode) {
            self.stack = [node]
        }

        public mutating func next() -> RuntimeNamedNode? {
            if let node = stack.popLast() {
                stack.append(contentsOf: node.children.reversed())
                return node
            }
            return nil
        }
    }
}


extension RuntimeNamedNode {
    public static let frameworkIcon = SFSymbol(systemName: .latch2Case).nsuiImage

    public static let bundleIcon = SFSymbol(systemName: .shippingbox).nsuiImage

    public static let imageIcon = SFSymbol(systemName: .doc).nsuiImage

    public static let folderIcon = SFSymbol(systemName: .folder).nsuiImage

    public var icon: NSUIImage {
        if name.hasSuffix("framework") {
            Self.frameworkIcon
        } else if name.hasSuffix("bundle") {
            Self.bundleIcon
        } else if isLeaf {
            Self.imageIcon
        } else {
            Self.folderIcon
        }
    }
}

extension SFSymbol {
    public var nsuiImage: NSUIImage {
        #if canImport(AppKit) && !targetEnvironment(macCatalyst)
        return nsImage
        #endif

        #if canImport(UIKit)
        return uiImage
        #endif
    }
}

extension NSUIColor {
    convenience init(light: NSUIColor, dark: NSUIColor) {
        #if canImport(AppKit) && !targetEnvironment(macCatalyst)
        self.init(name: nil) { appearance in
            appearance.isLight ? light : dark
        }
        #endif

        #if canImport(UIKit)
        self.init { traitCollection in
            traitCollection.userInterfaceStyle == .light ? light : dark
        }
        #endif
    }
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/InspectorRoute.swift`:

```swift
import Foundation
import RuntimeViewerCore
import RuntimeViewerArchitectures

public enum InspectableObject {
    case node(RuntimeNamedNode)
    case object(RuntimeObjectType)
}

public enum InspectorRoute: Routable {
    case placeholder
    case root(InspectableObject)
    case next(InspectableObject)
    case back
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/InspectorViewModel.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import AppKit
#endif

#if canImport(UIKit)
import UIKit
#endif

import RuntimeViewerCore
import RuntimeViewerArchitectures
public class InspectorPlaceholderViewModel: ViewModel<InspectorRoute> {}
public class InspectorRuntimeObjectViewModel: ViewModel<InspectorRoute> {
    
    @Observed
    var runtimeObject: RuntimeObjectType
    
    @Observed
    var runtimeObjectHierarchy: [String] = []
    
    public struct Input {
        
    }

    public struct Output {
        
    }

    public func transform(_ input: Input) -> Output {
        Output()
    }
    
    init(runtimeObject: RuntimeObjectType, appServices: AppServices, router: any Router<InspectorRoute>) {
        self.runtimeObject = runtimeObject
        super.init(appServices: appServices, router: router)
//        $runtimeObject.flatMap { appServices.runtimeEngine. }
    }
}

public class InspectorRuntimeNodeViewModel: ViewModel<InspectorRoute> {
    @Observed
    var runtimeNode: RuntimeNamedNode
    
    init(runtimeNode: RuntimeNamedNode, appServices: AppServices, router: any Router<InspectorRoute>) {
        self.runtimeNode = runtimeNode
        super.init(appServices: appServices, router: router)
    }
}


```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/SecureCodingCodable.swift`:

```swift
import Foundation

@propertyWrapper
public struct SecureCodingCodable<T>: Codable, Hashable where T: NSObject & NSSecureCoding {
    public enum WrapperError: Error {
        case decoderError
    }
    public var wrappedValue: T

    public init(wrappedValue: T) {
        self.wrappedValue = wrappedValue
    }

    public func encode(to encoder: Encoder) throws {
        var container = encoder.singleValueContainer()
        let data = try NSKeyedArchiver.archivedData(withRootObject: wrappedValue, requiringSecureCoding: true)
        try container.encode(data)
    }

    public init(from decoder: Decoder) throws {
        let container = try decoder.singleValueContainer()
        let data = try container.decode(Data.self)
        guard let value = try NSKeyedUnarchiver.unarchivedObject(ofClass: T.self, from: data) else {
            throw WrapperError.decoderError
        }
        self.wrappedValue = value
    }
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/SidebarImageCellViewModel.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import AppKit
#endif

#if canImport(UIKit)
import UIKit
#endif

import RuntimeViewerUI
import RuntimeViewerCore
import RuntimeViewerArchitectures

public class SidebarImageCellViewModel: NSObject {
    let runtimeObject: RuntimeObjectType

    @Observed
    public private(set) var icon: NSUIImage?

    @Observed
    public private(set) var name: NSAttributedString

    public init(runtimeObject: RuntimeObjectType) {
        self.runtimeObject = runtimeObject
        self.icon = runtimeObject.icon
        self.name = NSAttributedString {
            AText(runtimeObject.name)
                .font(.systemFont(ofSize: 13))
                .foregroundColor(.labelColor)
        }
        super.init()
    }

    public override var hash: Int {
        var hasher = Hasher()
        hasher.combine(runtimeObject)
        return hasher.finalize()
    }

    public override func isEqual(_ object: Any?) -> Bool {
        guard let object = object as? Self else { return false }
        return runtimeObject == object.runtimeObject
    }
}

#if canImport(AppKit) && !targetEnvironment(macCatalyst)

extension SidebarImageCellViewModel: Differentiable {}

#endif

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/SidebarImageViewModel.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import AppKit
#endif

#if canImport(UIKit)
import UIKit
#endif

import RuntimeViewerUI
import RuntimeViewerCore
import RuntimeViewerArchitectures

public class SidebarImageViewModel: ViewModel<SidebarRoute> {
    private let namedNode: RuntimeNamedNode

    private let imagePath: String
    private let imageName: String

    private let runtimeEngine: RuntimeEngine

    @Observed private var searchString: String = ""
    @Observed private var searchScope: RuntimeTypeSearchScope = .all
    @Observed private var classNames: [String] = []
    @Observed private var protocolNames: [String] = []
    @Observed private var runtimeObjects: [RuntimeObjectType] = []
    @Observed private var loadState: RuntimeImageLoadState = .notLoaded

    public init(node namedNode: RuntimeNamedNode, appServices: AppServices, router: any Router<SidebarRoute>) {
        self.runtimeEngine = appServices.runtimeEngine
        self.namedNode = namedNode
        let imagePath = namedNode.path
        self.imagePath = imagePath
        self.imageName = namedNode.name
        super.init(appServices: appServices, router: router)
        Task {
            do {
                let classNames = try await runtimeEngine.classNamesIn(image: imagePath)
                let protocolNames = try runtimeEngine.imageToProtocols[await runtimeEngine.patchImagePathForDyld(imagePath)] ?? []
                let loadState: RuntimeImageLoadState = try await runtimeEngine.isImageLoaded(path: imagePath) ? .loaded : .notLoaded
                await MainActor.run {
                    self.classNames = classNames
                    self.protocolNames = protocolNames

                    let searchString = ""
                    let searchScope: RuntimeTypeSearchScope = .all

                    self.searchString = searchString
                    self.searchScope = searchScope

                    self.runtimeObjects = Self.runtimeObjectsFor(
                        classNames: classNames, protocolNames: protocolNames,
                        searchString: searchString, searchScope: searchScope
                    )

                    self.loadState = loadState
                }

                runtimeEngine.$classList
                    .asObservable()
                    .flatMap { [unowned self] _ in
                        try await runtimeEngine.classNamesIn(image: imagePath)
                    }
                    .catchAndReturn([])
                    .observeOnMainScheduler()
                    .bind(to: $classNames)
                    .disposed(by: rx.disposeBag)

                runtimeEngine.$imageToProtocols
                    .asObservable()
                    .flatMap { [unowned self] imageToProtocols in
                        try imageToProtocols[await runtimeEngine.patchImagePathForDyld(imagePath)] ?? []
                    }
                    .catchAndReturn([])
                    .observeOnMainScheduler()
                    .bind(to: $protocolNames)
                    .disposed(by: rx.disposeBag)

                let debouncedSearch = $searchString
                    .debounce(.milliseconds(80), scheduler: MainScheduler.instance)
                    .asObservable()

                $searchScope
                    .asPublisher()
                    .combineLatest(debouncedSearch.asPublisher(), $classNames.asPublisher(), $protocolNames.asPublisher()) {
                        Self.runtimeObjectsFor(
                            classNames: $2, protocolNames: $3,
                            searchString: $1, searchScope: $0
                        )
                    }
                    .asObservable()
                    .map { $0.sorted() }
                    .bind(to: $runtimeObjects)
                    .disposed(by: rx.disposeBag)

                runtimeEngine.$imageList
                    .asObservable()
                    .flatMap { [unowned self] imageList in
                        try imageList.contains(await runtimeEngine.patchImagePathForDyld(imagePath))
                    }
                    .catchAndReturn(false)
                    .filter { $0 } // only allow isLoaded to pass through; we don't want to erase an existing state
                    .map { _ in RuntimeImageLoadState.loaded }
                    .observeOnMainScheduler()
                    .bind(to: $loadState)
                    .disposed(by: rx.disposeBag)
            } catch {
                print(error)
            }
        }
    }

    public struct Input {
        public let runtimeObjectClicked: Signal<SidebarImageCellViewModel>
        public let loadImageClicked: Signal<Void>
        public let searchString: Signal<String>
        public init(runtimeObjectClicked: Signal<SidebarImageCellViewModel>, loadImageClicked: Signal<Void>, searchString: Signal<String>) {
            self.runtimeObjectClicked = runtimeObjectClicked
            self.loadImageClicked = loadImageClicked
            self.searchString = searchString
        }
    }

    public struct Output {
        public let runtimeObjects: Driver<[SidebarImageCellViewModel]>
        public let loadState: Driver<RuntimeImageLoadState>
        public let notLoadedText: Driver<String>
        public let errorText: Driver<String>
        public let emptyText: Driver<String>
        public let isEmpty: Driver<Bool>
        public let windowInitialTitles: Driver<(title: String, subtitle: String)>
        public let windowSubtitle: Signal<String>
    }

    @MainActor
    public func transform(_ input: Input) -> Output {

        input.searchString.emit(to: $searchString).disposed(by: rx.disposeBag)

        input.runtimeObjectClicked.emitOnNextMainActor { [weak self] viewModel in
            guard let self else { return }
            self.router.trigger(.selectedObject(viewModel.runtimeObject))
        }
        .disposed(by: rx.disposeBag)

        input.loadImageClicked.emitOnNextMainActor { [weak self] in
            guard let self else { return }
            tryLoadImage()
        }
        .disposed(by: rx.disposeBag)

        let runtimeObjects = $runtimeObjects.asDriver()
            .map {
                $0.map { SidebarImageCellViewModel(runtimeObject: $0) }
            }

        let errorText = $loadState
            .capture(case: RuntimeImageLoadState.loadError).map { [weak self] error in
                guard let self else { return "" }
                if let dlOpenError = error as? DlOpenError, let message = dlOpenError.message {
                    return message
                } else {
                    return "An unknown error occured trying to load '\(imagePath)'"
                }
            }
            .asDriver(onErrorJustReturn: "")
        let runtimeNodeName = namedNode.name
        return Output(
            runtimeObjects: runtimeObjects,
            loadState: $loadState.asDriver(),
            notLoadedText: .just("\(imageName) is not yet loaded"),
            errorText: errorText,
            emptyText: .just("\(imageName) is loaded however does not appear to contain any classes or protocols"),
            isEmpty: .combineLatest($classNames.asDriver(), $protocolNames.asDriver(), resultSelector: { $0.isEmpty && $1.isEmpty }).startWith(classNames.isEmpty && protocolNames.isEmpty),
            windowInitialTitles: .combineLatest($classNames.asDriver(), $protocolNames.asDriver(), resultSelector: { (runtimeNodeName, "Classes: \($0.count) Protocols: \($1.count)") }),
            windowSubtitle: input.runtimeObjectClicked.asSignal().map { "\($0.runtimeObject.name)" }
            
        )
    }

    private static func runtimeObjectsFor(classNames: [String], protocolNames: [String], searchString: String, searchScope: RuntimeTypeSearchScope) -> [RuntimeObjectType] {
        var ret: [RuntimeObjectType] = []
        if searchScope.includesClasses {
            ret += classNames.map { .class(named: $0) }
        }
        if searchScope.includesProtocols {
            ret += protocolNames.map { .protocol(named: $0) }
        }
        if searchString.isEmpty { return ret }
        return ret.filter { $0.name.localizedCaseInsensitiveContains(searchString) }
    }

    private func tryLoadImage() {
        Task {
            do {
                await MainActor.run {
                    loadState = .loading
                }
                try await runtimeEngine.loadImage(at: imagePath)
                await MainActor.run {
                    loadState = .loaded
                }
            } catch {
                await MainActor.run {
                    loadState = .loadError(error)
                }
            }
        }
    }
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/SidebarRootCellViewModel.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import AppKit
import RxAppKit
#endif

#if canImport(UIKit)
import UIKit
#endif

import RuntimeViewerCore
import RuntimeViewerArchitectures
import RuntimeViewerUI

public final class SidebarRootCellViewModel: NSObject, Sequence, OutlineNodeType {
    public let node: RuntimeNamedNode

    public weak var parent: SidebarRootCellViewModel?

    public var children: [SidebarRootCellViewModel] { _filteredChildren }

    public var isLeaf: Bool { children.isEmpty }

    private lazy var _filteredChildren: [SidebarRootCellViewModel] = _children

    private lazy var _children: [SidebarRootCellViewModel] = {
        let children = node.children.map { SidebarRootCellViewModel(node: $0, parent: self) }
        return children.sorted { $0.node.name < $1.node.name }
    }()

    private lazy var currentAndChildrenNames: String = {
        let childrenNames = _children.map { $0.currentAndChildrenNames }.joined(separator: " ")
        return "\(node.name) \(childrenNames)"
    }()

    var filter: String = "" {
        didSet {
            if filter.isEmpty {
                _children.forEach { $0.filter = filter }
                _filteredChildren = _children
            } else {
                _children.forEach { $0.filter = filter }
                _filteredChildren = _children.filter { $0.currentAndChildrenNames.localizedCaseInsensitiveContains(filter) }
            }
        }
    }

    @Observed
    public private(set) var icon: NSUIImage?

    @Observed
    public private(set) var name: NSAttributedString

    public init(node: RuntimeNamedNode, parent: SidebarRootCellViewModel?) {
        self.node = node
        self.parent = parent
        self.name = NSAttributedString {
            AText(node.name)
                .foregroundColor(.labelColor)
                .font(.systemFont(ofSize: 13))
        }
        self.icon = node.icon
    }

//    public override var hash: Int {
//        var hasher = Hasher()
//        hasher.combine(node)
//        return hasher.finalize()
//    }
//
//    public override func isEqual(_ object: Any?) -> Bool {
//        guard let object = object as? Self else { return false }
//        return node == object.node
//    }

    public func makeIterator() -> Iterator {
        return Iterator(node: self)
    }

    public struct Iterator: IteratorProtocol {
        var stack: [SidebarRootCellViewModel] = []

        init(node: SidebarRootCellViewModel) {
            self.stack = [node]
        }

        public mutating func next() -> SidebarRootCellViewModel? {
            if let node = stack.popLast() {
                stack.append(contentsOf: node.children.reversed())
                return node
            }
            return nil
        }
    }
}

#if canImport(AppKit) && !targetEnvironment(macCatalyst)

extension SidebarRootCellViewModel: Differentiable {}

#endif

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/SidebarRootViewModel.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import AppKit
import RxAppKit
#endif

#if canImport(UIKit)
import UIKit
#endif

import RuntimeViewerCore
import RuntimeViewerArchitectures
import RuntimeViewerUI

public final class SidebarRootViewModel: ViewModel<SidebarRoute> {
    @Observed
    private var nodes: [SidebarRootCellViewModel] = []

    @Observed
    private var filteredNodes: [SidebarRootCellViewModel]? = nil
    
    private var allNodes: [String: SidebarRootCellViewModel] = [:]

    @Observed
    private var searchString: String = ""

    public override init(appServices: AppServices, router: any Router<SidebarRoute>) {
        super.init(appServices: appServices, router: router)
        appServices.runtimeEngine.$imageNodes
            .asObservable()
            .observe(on: MainScheduler.instance)
            .map { $0.map { SidebarRootCellViewModel(node: $0, parent: nil) } }
            .bind(to: $nodes)
            .disposed(by: rx.disposeBag)
        $nodes.asDriver().driveOnNext { [weak self] nodes in
            guard let self else { return }
            var allNodes: [String: SidebarRootCellViewModel] = [:]
            for rootNode in nodes {
                allNodes[rootNode.node.name] = rootNode
                for node in rootNode {
                    allNodes[node.node.absolutePath] = node
                }
            }
            self.allNodes = allNodes
        }
        .disposed(by: rx.disposeBag)
    }
    
    public struct Input {
        public let clickedNode: Signal<SidebarRootCellViewModel>
        public let selectedNode: Signal<SidebarRootCellViewModel>
        public let searchString: Signal<String>
        public init(clickedNode: Signal<SidebarRootCellViewModel>, selectedNode: Signal<SidebarRootCellViewModel>, searchString: Signal<String>) {
            self.clickedNode = clickedNode
            self.selectedNode = selectedNode
            self.searchString = searchString
        }
    }

    public struct Output {
        public let nodes: Driver<[SidebarRootCellViewModel]>
        #if canImport(UIKit)
        public let filteredNodes: Driver<[SidebarRootCellViewModel]?>
        #endif
    }

    public func transform(_ input: Input) -> Output {
        input.clickedNode.emitOnNextMainActor { [weak self] viewModel in
            guard let self = self else { return }

            if viewModel.node.isLeaf {
                self.router.trigger(.clickedNode(viewModel.node))
            }
        }
        .disposed(by: rx.disposeBag)
        #if canImport(AppKit) && !targetEnvironment(macCatalyst)
        input.searchString.emit(with: self) {
            $0.nodes.first?.filter = $1
            $0.nodes = $0.nodes
        }.disposed(by: rx.disposeBag)
        return Output(nodes: $nodes.asDriver())
        #endif

        #if canImport(UIKit)

//        input.searchString.emit(with: self) { target, searchString in
//            if searchString.isEmpty {
//                target.filteredNodes = nil
//            } else {
//                let rootNode = [SidebarRootCellViewModel(node: CDUtilities.dyldSharedCacheImageRootNode, parent: nil)]
//                rootNode.filter = searchString
//                target.filteredNodes = rootNode
//            }
//        }.disposed(by: rx.disposeBag)
        
        return Output(nodes: $nodes.asDriver(), filteredNodes: $filteredNodes.asDriver())
        
        #endif
    }
}

#if canImport(AppKit) && !targetEnvironment(macCatalyst)
extension SidebarRootViewModel: NSOutlineViewDataSource {
    public func outlineView(_ outlineView: NSOutlineView, itemForPersistentObject object: Any) -> Any? {
        guard let path = object as? String else { return nil }
        let item = allNodes[path]
        return item
    }

    public func outlineView(_ outlineView: NSOutlineView, persistentObjectForItem item: Any?) -> Any? {
        guard let item = item as? SidebarRootCellViewModel else { return nil }
        let returnObject = item.node.parent != nil ? item.node.absolutePath : item.node.name
        return returnObject
    }
}
#endif



```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/SidebarRoute.swift`:

```swift
import Foundation
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerArchitectures

public enum SidebarRoute: Routable {
    case root
    case selectedNode(RuntimeNamedNode)
    case clickedNode(RuntimeNamedNode)
    case selectedObject(RuntimeObjectType)
    case back
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/ThemeProfile.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)
import AppKit
#endif

#if canImport(UIKit)
import UIKit
#endif

import UIFoundation
import RuntimeViewerCore

public struct AnyThemeProfile<Theme: ThemeProfile & Codable>: Codable {
    public var wrappedValue: Theme
    public init(wrappedValue: Theme) {
        self.wrappedValue = wrappedValue
    }
}

public protocol ThemeProfile {
    var selectionBackgroundColor: NSUIColor { set get }
    var backgroundColor: NSUIColor { set get }
    var fontSize: CGFloat { set get }
    func font(for type: CDSemanticType) -> NSUIFont
    func color(for type: CDSemanticType) -> NSUIColor
    mutating func fontSizeSmaller()
    mutating func fontSizeLarger()
}

public struct XcodePresentationTheme: ThemeProfile, Codable {
    @SecureCodingCodable
    public var selectionBackgroundColor: NSUIColor = #colorLiteral(red: 0.3904261589, green: 0.4343567491, blue: 0.5144847631, alpha: 1)
    
    @SecureCodingCodable
    public var backgroundColor: NSUIColor = .init(light: #colorLiteral(red: 1, green: 0.9999999404, blue: 1, alpha: 1), dark: #colorLiteral(red: 0.1251632571, green: 0.1258862913, blue: 0.1465735137, alpha: 1))

    public var fontSize: CGFloat = 13
    
    public func font(for type: CDSemanticType) -> NSUIFont {
        switch type {
        case .keyword:
            return .monospacedSystemFont(ofSize: fontSize, weight: .semibold)
        default:
            return .monospacedSystemFont(ofSize: fontSize, weight: .regular)
        }
    }

    private static var colorCache: [CDSemanticType: NSUIColor] = [:]
    
    public func color(for type: CDSemanticType) -> NSUIColor {
        if let existColor = Self.colorCache[type] {
            return existColor
        }
        let light: NSUIColor
        let dark: NSUIColor
        switch type {
        case .comment:
            light = #colorLiteral(red: 0.4095562398, green: 0.4524990916, blue: 0.4956067801, alpha: 1)
            dark = #colorLiteral(red: 0.4976348877, green: 0.5490466952, blue: 0.6000126004, alpha: 1)
        case .keyword:
            light = #colorLiteral(red: 0.7660875916, green: 0.1342913806, blue: 0.4595085979, alpha: 0.8)
            dark = #colorLiteral(red: 0.9686241746, green: 0.2627249062, blue: 0.6156817079, alpha: 1)
        case .variable,
             .method:
            light = #colorLiteral(red: 0.01979870349, green: 0.4877431393, blue: 0.6895453334, alpha: 1)
            dark = #colorLiteral(red: 0.2426597476, green: 0.7430019975, blue: 0.8773110509, alpha: 1)
        case .recordName,
             .class,
             .protocol:
            light = #colorLiteral(red: 0.2404940426, green: 0.115125142, blue: 0.5072092414, alpha: 1)
            dark = #colorLiteral(red: 0.853918612, green: 0.730949223, blue: 1, alpha: 1)
        case .numeric:
            light = #colorLiteral(red: 0.01564520039, green: 0.2087542713, blue: 1, alpha: 1)
            dark = #colorLiteral(red: 1, green: 0.9160019755, blue: 0.5006220341, alpha: 1)
        default:
            return .labelColor
        }
        let color = NSUIColor(light: light, dark: dark)
        Self.colorCache[type] = color
        return color
    }
    
    public mutating func fontSizeSmaller() {
        fontSize -= 1
    }
    
    public mutating func fontSizeLarger() {
        fontSize += 1
    }
}



```

`RuntimeViewerPackages/Sources/RuntimeViewerApplication/ViewModel.swift`:

```swift
import Foundation
import RuntimeViewerArchitectures

open class ViewModel<Route: Routable>: NSObject {
    public let appServices: AppServices

    public let errorRelay = PublishRelay<Error>()

    public unowned let router: any Router<Route>
    
    public init(appServices: AppServices, router: any Router<Route>) {
        self.appServices = appServices
        self.router = router
    }
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerArchitectures/RuntimeViewerArchitectures.swift`:

```swift
@_exported import RxSwift
@_exported import RxCocoa
//@_exported import RxSwiftExt
@_exported import RxSwiftPlus
@_exported import RxCombine
@_exported import RxDefaultsPlus
@_exported import RxEnumKit
@_exported import EnumKit
@_exported import RxConcurrency

#if canImport(AppKit) && !targetEnvironment(macCatalyst)
@_exported import RxAppKit
@_exported import CocoaCoordinator
@_exported import RxCocoaCoordinator
@_exported import OpenUXKitCoordinator
//@_exported import UXKitCoordinator
#endif

#if canImport(UIKit) && !os(macOS)
@_exported import RxUIKit
@_exported import XCoordinator
@_exported import XCoordinatorRx
public typealias Routable = Route
#endif

extension ObservableType {
    public func observeOnMainScheduler() -> Observable<Element> {
        observe(on: MainScheduler.instance)
    }
}

```

`RuntimeViewerPackages/Sources/RuntimeViewerService/RuntimeViewerService.swift`:

```swift
#if os(macOS)
import AppKit
import SwiftyXPC
import RuntimeViewerCommunication
import MachInjector

public final class RuntimeViewerService {
    private let listener: SwiftyXPC.XPCListener

    private var catalystHelperApplication: NSRunningApplication?

    private var endpointByIdentifier: [String: XPCEndpoint] = [:]

    private init() throws {
        self.listener = try .init(type: .machService(name: RuntimeViewerMachServiceName), codeSigningRequirement: nil)
        listener.setMessageHandler(handler: registerEndpoint)
        listener.setMessageHandler(handler: fetchEndpoint)
        listener.setMessageHandler(handler: launchCatalystHelper)
        listener.setMessageHandler(handler: ping)
        listener.setMessageHandler(handler: injectApplication)
        listener.setMessageHandler(handler: fileOperation)
        listener.activate()
    }

    private func ping(_ connection: XPCConnection, request: PingRequest) async throws -> PingRequest.Response {
        return .empty
    }

    private func fetchEndpoint(_ connection: XPCConnection, request: FetchEndpointRequest) async throws -> FetchEndpointRequest.Response {
        guard let endpoint = endpointByIdentifier[request.identifier] else {
            throw XPCError.unknown("No endpoint available")
        }
        return .init(endpoint: endpoint)
    }

    private func registerEndpoint(_ connection: XPCConnection, request: RegisterEndpointRequest) async throws -> RegisterEndpointRequest.Response {
        endpointByIdentifier[request.identifier] = request.endpoint
        return .empty
    }

    private func launchCatalystHelper(_ connection: XPCConnection, request: LaunchCatalystHelperRequest) async throws -> LaunchCatalystHelperRequest.Response {
        let configuration = NSWorkspace.OpenConfiguration()
        configuration.createsNewApplicationInstance = false
        configuration.addsToRecentItems = false
        configuration.activates = false
        catalystHelperApplication = try await NSWorkspace.shared.openApplication(at: request.helperURL, configuration: configuration)
        return .empty
    }

    private func fileOperation(_ connection: XPCConnection, request: FileOperationRequest) async throws -> FileOperationRequest.Response {
        let fileManager = FileManager.default
        switch request.operation {
        case let .createDirectory(url, isIntermediateDirectories):
            try fileManager.createDirectory(at: url, withIntermediateDirectories: isIntermediateDirectories)
        case let .remove(url: url):
            try fileManager.removeItem(at: url)
        case let .move(from: from, to: to):
            try fileManager.moveItem(at: from, to: to)
        case let .copy(from: from, to: to):
            if fileManager.fileExists(atPath: to.path) {
                try fileManager.removeItem(at: to)
            }
            try fileManager.copyItem(at: from, to: to)
        case let .write(url: url, data: data):
            try data.write(to: url)
        }
        return .empty
    }

    private func injectApplication(_ connection: XPCConnection, request: InjectApplicationRequest) async throws -> InjectApplicationRequest.Response {
        try await MainActor.run {
            try MachInjector.inject(pid: request.pid, dylibPath: request.dylibURL.path)
        }
        return .empty
    }

    public static func main() throws {
        try autoreleasepool {
            _ = try RuntimeViewerService()
            RunLoop.current.run()
        }
    }
}
#endif

```

`RuntimeViewerPackages/Sources/RuntimeViewerUI/RuntimeViewerUI.swift`:

```swift
@_exported import UIFoundation
@_exported import UIFoundationToolbox
@_exported import SnapKit
@_exported import NSAttributedStringBuilder
@_exported import SFSymbol
@_exported import IDEIcons

#if canImport(AppKit) && !targetEnvironment(macCatalyst)
@_exported import OpenUXKit
@_exported import FilterUI
//@_exported import MachInjectorUI
@_exported import RunningApplicationKit
@_exported import Rearrange
//@_exported import UXKit
//@_exported import STTextView
#endif

#if canImport(UIKit)

#endif

```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelper/AppDelegate.swift`:

```swift
//
//  AppDelegate.swift
//  RuntimeViewerCatalystHelper
//
//  Created by JH on 2024/6/25.
//

import UIKit

@main
class AppDelegate: UIResponder, UIApplicationDelegate {
    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        do {
            try AppKitBridge.shared.loadPlugins()
            AppKitBridge.shared.plugin?.launch()
        } catch {
            print(error)
        }
        return true
    }

    // MARK: UISceneSession Lifecycle

    func application(_ application: UIApplication, configurationForConnecting connectingSceneSession: UISceneSession, options: UIScene.ConnectionOptions) -> UISceneConfiguration {
        return UISceneConfiguration(name: "Default Configuration", sessionRole: connectingSceneSession.role)
    }

    func application(_ application: UIApplication, didDiscardSceneSessions sceneSessions: Set<UISceneSession>) {}
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelper/AppKitBridge.swift`:

```swift
import Foundation

//#if targetEnvironment(macCatalyst)

@objcMembers
@dynamicMemberLookup
class AppKitBridge: NSObject {
    static let shared = AppKitBridge()
    
    var plugin: AppKitPlugin?

    enum Error: Swift.Error {
        case failedCreateBundlePath
        case failedLoadBundleFile
        case failedLoadPrincipalClass
    }

    func loadPlugins() throws {
        guard let bundlePath = Bundle.main.builtInPlugInsURL?.appendingPathComponent("RuntimeViewerCatalystHelperPlugin.bundle").path else {
            throw Error.failedCreateBundlePath
        }

        guard let bundle = Bundle(path: bundlePath) else {
            throw Error.failedLoadBundleFile
        }
        
        guard let principalClass = bundle.principalClass as? AppKitPlugin.Type else {
            throw Error.failedLoadPrincipalClass
        }

        AppKitBridge.shared.plugin = principalClass.init()
    }
    
    subscript<Property>(dynamicMember keyPath: KeyPath<AppKitPlugin, Property>) -> Property {
        get {
            if let plugins = plugin {
               return plugins[keyPath: keyPath]
            } else {
                fatalError("请在成功加载插件后再访问成员")
            }
        }
    }
    
    subscript<Property>(dynamicMember keyPath: WritableKeyPath<AppKitPlugin, Property>) -> Property {
        set {
            if var plugins = plugin {
                plugins[keyPath: keyPath] = newValue
            } else {
                fatalError("请在成功加载插件后再访问成员")
            }
            
        }
        get {
            if let plugins = plugin {
               return plugins[keyPath: keyPath]
            } else {
                fatalError("请在成功加载插件后再访问成员")
            }
        }
    }
}
//#endif

```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelper/Assets.xcassets/AccentColor.colorset/Contents.json`:

```json
{
  "colors" : [
    {
      "idiom" : "universal"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelper/Assets.xcassets/AppIcon.appiconset/Contents.json`:

```json
{
  "images" : [
    {
      "idiom" : "universal",
      "platform" : "ios",
      "size" : "1024x1024"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelper/Assets.xcassets/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelper/Info.plist`:

```plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>UIApplicationSceneManifest</key>
	<dict>
		<key>UIApplicationSupportsMultipleScenes</key>
		<true/>
		<key>UISceneConfigurations</key>
		<dict>
			<key>UIWindowSceneSessionRoleApplication</key>
			<array>
				<dict>
					<key>UISceneConfigurationName</key>
					<string>Default Configuration</string>
					<key>UISceneDelegateClassName</key>
					<string>$(PRODUCT_MODULE_NAME).SceneDelegate</string>
				</dict>
			</array>
		</dict>
	</dict>
</dict>
</plist>

```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelper/RuntimeViewerCatalystHelper.entitlements`:

```entitlements
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict/>
</plist>

```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelper/SceneDelegate.swift`:

```swift
//
//  SceneDelegate.swift
//  RuntimeViewerCatalystHelper
//
//  Created by JH on 2024/6/25.
//

import UIKit

class SceneDelegate: UIResponder, UIWindowSceneDelegate {

    var window: UIWindow?


    func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
        // Use this method to optionally configure and attach the UIWindow `window` to the provided UIWindowScene `scene`.
        // If using a storyboard, the `window` property will automatically be initialized and attached to the scene.
        // This delegate does not imply the connecting scene or session are new (see `application:configurationForConnectingSceneSession` instead).
        guard let _ = (scene as? UIWindowScene) else { return }
//        let options = UIWindowSceneDestructionRequestOptions()
//        
//        UIApplication.shared.requestSceneSessionDestruction(session, options: options) {
//            print($0.localizedDescription)
//        }
    }

    func sceneDidDisconnect(_ scene: UIScene) {
        // Called as the scene is being released by the system.
        // This occurs shortly after the scene enters the background, or when its session is discarded.
        // Release any resources associated with this scene that can be re-created the next time the scene connects.
        // The scene may re-connect later, as its session was not necessarily discarded (see `application:didDiscardSceneSessions` instead).
    }

    func sceneDidBecomeActive(_ scene: UIScene) {
        // Called when the scene has moved from an inactive state to an active state.
        // Use this method to restart any tasks that were paused (or not yet started) when the scene was inactive.
    }

    func sceneWillResignActive(_ scene: UIScene) {
        // Called when the scene will move from an active state to an inactive state.
        // This may occur due to temporary interruptions (ex. an incoming phone call).
    }

    func sceneWillEnterForeground(_ scene: UIScene) {
        // Called as the scene transitions from the background to the foreground.
        // Use this method to undo the changes made on entering the background.
    }

    func sceneDidEnterBackground(_ scene: UIScene) {
        // Called as the scene transitions from the foreground to the background.
        // Use this method to save data, release shared resources, and store enough scene-specific state information
        // to restore the scene back to its current state.
    }


}


```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelperPlugin/AppKitPlugin.swift`:

```swift
//
//  AppKitPlugin.swift
//  AppKitPlugin
//
//  Created by JH on 2024/6/24.
//

import Foundation

@objc(AppKitPlugin)
protocol AppKitPlugin: NSObjectProtocol {
    init()
    func launch()
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerCatalystHelperPlugin/AppKitPluginImpl.swift`:

```swift
//
//  AppKitPluginImpl.swift
//  AppKitPlugin
//
//  Created by JH on 2024/6/24.
//

import AppKit
import RuntimeViewerCore

extension NSObject {
    @objc func rvch_makeKeyAndOrderFront(_ sender: Any?) {}
}

@objc(AppKitPluginImpl)
class AppKitPluginImpl: NSObject, AppKitPlugin {
    var observation: NSKeyValueObservation?

    var runtimeEngine: RuntimeEngine?

    override required init() {
        super.init()
        NSApplication.shared.setActivationPolicy(.prohibited)
        if let UINSWindow = objc_getClass("UINSWindow") as? AnyClass {
            let m1 = class_getInstanceMethod(UINSWindow, #selector(NSWindow.makeKeyAndOrderFront(_:)))
            let m2 = class_getInstanceMethod(UINSWindow, #selector(NSObject.rvch_makeKeyAndOrderFront(_:)))
            if let m1, let m2 {
                method_exchangeImplementations(m1, m2)
            }
        }
        NotificationCenter.default.addObserver(self, selector: #selector(setupWindow(_:)), name: Notification.Name("_NSWindowWillBecomeVisible"), object: nil)
    }

    @objc func setupWindow(_ notification: Notification) {
        if let window = notification.object as? NSWindow, let uinsWindowClass = NSClassFromString("UINSWindow"), window.isKind(of: uinsWindowClass) {
            window.setFrame(.zero, display: true)
        }
    }

    func launch() {
        Task {
            runtimeEngine = try await .macCatalystServer()
            // The host application quits, check if any of the two is running.
            // If none, quit the XPC service.

            let sequence = NSWorkspace.shared.notificationCenter
                .notifications(named: NSWorkspace.didTerminateApplicationNotification)
            for await notification in sequence {
                try Task.checkCancellation()
                guard let app = notification
                    .userInfo?[NSWorkspace.applicationUserInfoKey] as? NSRunningApplication,
                    app.isUserOfService
                else { continue }
                if NSWorkspace.shared.runningApplications.contains(where: \.isUserOfService) {
                    continue
                }
                await NSApplication.shared.terminate(nil)
            }
        }
    }
}

extension AppKitPluginImpl: NSWindowDelegate {
//    func windowDidBecomeKey(_ notification: Notification) {
//        NSApplication.shared.hide(nil)
//    }
}

extension NSRunningApplication {
    var isUserOfService: Bool {
        [
            "com.JH.RuntimeViewer",
        ].contains(bundleIdentifier)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerServer/RuntimeViewerServer.h`:

```h
//
//  RuntimeViewerServer.h
//  RuntimeViewerServer
//
//  Created by JH on 11/27/24.
//

#import <Foundation/Foundation.h>

//! Project version number for RuntimeViewerServer.
FOUNDATION_EXPORT double RuntimeViewerServerVersionNumber;

//! Project version string for RuntimeViewerServer.
FOUNDATION_EXPORT const unsigned char RuntimeViewerServerVersionString[];

// In this header, you should import all the public headers of your framework using statements like #import <RuntimeViewerServer/PublicHeader.h>



```

`RuntimeViewerUsingAppKit/RuntimeViewerServer/RuntimeViewerServerLoader.swift`:

```swift
//
//  Loader.swift
//  RuntimeViewerServer
//
//  Created by JH on 11/27/24.
//

import AppKit
import OSLog

internal import RuntimeViewerCore

let logger = Logger(subsystem: "com.JH.RumtimeViewerServer", category: "RumtimeViewerServer")

@objc
public final class RuntimeViewerServerLoader: NSObject {
    private static var runtimeEngine: RuntimeEngine?

    @objc public static func main() {
        logger.info("Attach successfully")
        let name = Bundle.main.infoDictionary?["CFBundleDisplayName"] as? String
        Task {
            do {
                runtimeEngine = try await RuntimeEngine(source: .remote(name: name ?? Bundle.main.name, identifier: .init(rawValue: Bundle.main.bundleIdentifier!), role: .server))
            } catch {
                logger.error("Failed to create runtime engine: \(error)")
            }
        }
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerServer/main.m`:

```m
//
//  main.m
//  RuntimeViewerServer
//
//  Created by JH on 11/27/24.
//

#import <Foundation/Foundation.h>
#import <RuntimeViewerServer-Swift.h>

static void __attribute__((constructor)) runtime_viewer_server_main(void) {
    [RuntimeViewerServerLoader main];
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit.xcodeproj/project.pbxproj`:

```pbxproj
// !$*UTF8*$!
{
	archiveVersion = 1;
	classes = {
	};
	objectVersion = 56;
	objects = {

/* Begin PBXBuildFile section */
		E91CD9972C2127AD00C989CC /* EventMonitor.swift in Sources */ = {isa = PBXBuildFile; fileRef = E91CD9962C2127AD00C989CC /* EventMonitor.swift */; };
		E924302C2D1EA96300246445 /* NSTextLayoutManager+.swift in Sources */ = {isa = PBXBuildFile; fileRef = E924302B2D1EA96300246445 /* NSTextLayoutManager+.swift */; };
		E924302E2D1EA99800246445 /* NSTextContentStorage+.swift in Sources */ = {isa = PBXBuildFile; fileRef = E924302D2D1EA99800246445 /* NSTextContentStorage+.swift */; };
		E92430302D1EAF5200246445 /* MinimapView.swift in Sources */ = {isa = PBXBuildFile; fileRef = E924302F2D1EAF5200246445 /* MinimapView.swift */; };
		E942AC882C274DF600A2F3D3 /* RuntimeViewerApplication in Frameworks */ = {isa = PBXBuildFile; productRef = E942AC872C274DF600A2F3D3 /* RuntimeViewerApplication */; };
		E942ACBF2C28865100A2F3D3 /* MainRoute.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942ACBE2C28865100A2F3D3 /* MainRoute.swift */; };
		E9432FE62C0D614900362862 /* AppDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9432FE52C0D614900362862 /* AppDelegate.swift */; };
		E9432FE82C0D614A00362862 /* Assets.xcassets in Resources */ = {isa = PBXBuildFile; fileRef = E9432FE72C0D614A00362862 /* Assets.xcassets */; };
		E9432FEB2C0D614A00362862 /* Base in Resources */ = {isa = PBXBuildFile; fileRef = E9432FEA2C0D614A00362862 /* Base */; };
		E94330182C0DA62500362862 /* SidebarRootViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E94330172C0DA62500362862 /* SidebarRootViewController.swift */; };
		E943301C2C0DB75B00362862 /* Then.swift in Sources */ = {isa = PBXBuildFile; fileRef = E943301B2C0DB75B00362862 /* Then.swift */; };
		E947C36A2C2A4D0400296B2E /* AppDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = E947C3692C2A4D0400296B2E /* AppDelegate.swift */; };
		E947C36C2C2A4D0400296B2E /* SceneDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = E947C36B2C2A4D0400296B2E /* SceneDelegate.swift */; };
		E947C3732C2A4D0500296B2E /* Assets.xcassets in Resources */ = {isa = PBXBuildFile; fileRef = E947C3722C2A4D0500296B2E /* Assets.xcassets */; };
		E94E36C62CF84AF8006101C8 /* AttachToProcessViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E94E36C52CF84AF8006101C8 /* AttachToProcessViewController.swift */; };
		E94E36C92CF87BD6006101C8 /* RuntimeViewerSymbols.swift in Sources */ = {isa = PBXBuildFile; fileRef = E94E36C82CF87BD6006101C8 /* RuntimeViewerSymbols.swift */; };
		E9530A3C2D9D5898008FBC7F /* SIPChecker.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9530A3B2D9D5898008FBC7F /* SIPChecker.swift */; };
		E975449A2C42BA5B00CC9DDD /* LoadFrameworksViewController.xib in Resources */ = {isa = PBXBuildFile; fileRef = E97544992C42BA5B00CC9DDD /* LoadFrameworksViewController.xib */; };
		E975449B2C42BA5B00CC9DDD /* LoadFrameworksViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E97544982C42BA5B00CC9DDD /* LoadFrameworksViewController.swift */; };
		E97544A42C42D11C00CC9DDD /* GenerationOptionsViewModel.swift in Sources */ = {isa = PBXBuildFile; fileRef = E97544A32C42D11C00CC9DDD /* GenerationOptionsViewModel.swift */; };
		E985A9CC2D9AF4FC005A573C /* RuntimeViewerCore in Frameworks */ = {isa = PBXBuildFile; productRef = E985A9CB2D9AF4FC005A573C /* RuntimeViewerCore */; };
		E985A9CE2D9AF505005A573C /* RuntimeViewerCore in Frameworks */ = {isa = PBXBuildFile; productRef = E985A9CD2D9AF505005A573C /* RuntimeViewerCore */; };
		E985A9D22D9AF512005A573C /* RuntimeViewerCore in Frameworks */ = {isa = PBXBuildFile; productRef = E985A9D12D9AF512005A573C /* RuntimeViewerCore */; };
		E985A9DA2D9AF7E5005A573C /* RuntimeViewerService in Frameworks */ = {isa = PBXBuildFile; productRef = E985A9D92D9AF7E5005A573C /* RuntimeViewerService */; };
		E985F5A42D8FF14800C3E5EE /* HelperInstaller.swift in Sources */ = {isa = PBXBuildFile; fileRef = E985F5A32D8FF14800C3E5EE /* HelperInstaller.swift */; };
		E99AE0BC2CBD4A840028B11E /* Document.swift in Sources */ = {isa = PBXBuildFile; fileRef = E99AE0BB2CBD4A840028B11E /* Document.swift */; };
		E99E61612C129DC2002C1A3D /* ContentTextViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E99E61602C129DC2002C1A3D /* ContentTextViewController.swift */; };
		E9A8252D2C0DECE400D9A85D /* SidebarCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A8252C2C0DECE400D9A85D /* SidebarCoordinator.swift */; };
		E9A825382C0E085200D9A85D /* MainCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825372C0E085200D9A85D /* MainCoordinator.swift */; };
		E9A8253A2C0E095500D9A85D /* SidebarImageViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825392C0E095500D9A85D /* SidebarImageViewController.swift */; };
		E9A825422C0E0B2300D9A85D /* MainWindowController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825412C0E0B2300D9A85D /* MainWindowController.swift */; };
		E9A825442C0E0B2800D9A85D /* MainSplitViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825432C0E0B2800D9A85D /* MainSplitViewController.swift */; };
		E9A825462C0E0B4900D9A85D /* ViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825452C0E0B4900D9A85D /* ViewController.swift */; };
		E9A8254A2C0E0E9F00D9A85D /* ContentCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825492C0E0E9F00D9A85D /* ContentCoordinator.swift */; };
		E9A8254C2C0E0EA600D9A85D /* InspectorCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A8254B2C0E0EA600D9A85D /* InspectorCoordinator.swift */; };
		E9A825502C0E0EB400D9A85D /* InspectorNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A8254F2C0E0EB400D9A85D /* InspectorNavigationController.swift */; };
		E9A825522C0E0F9F00D9A85D /* ContentNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825512C0E0F9F00D9A85D /* ContentNavigationController.swift */; };
		E9A825542C0E0FBD00D9A85D /* SidebarNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825532C0E0FBD00D9A85D /* SidebarNavigationController.swift */; };
		E9A825562C0E0FF300D9A85D /* ContentPlaceholderViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825552C0E0FF300D9A85D /* ContentPlaceholderViewController.swift */; };
		E9A825582C0E202600D9A85D /* MainViewModel.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A825572C0E202600D9A85D /* MainViewModel.swift */; };
		E9AA36222C3089AB00A9B2E4 /* InspectorPlaceholderViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9AA36212C3089AB00A9B2E4 /* InspectorPlaceholderViewController.swift */; };
		E9C9E9CD2C2D0F2100C4AA34 /* com.JH.RuntimeViewerService in Embed LaunchServices */ = {isa = PBXBuildFile; fileRef = E9E900E82C2D0D5B00FADDCC /* com.JH.RuntimeViewerService */; settings = {ATTRIBUTES = (CodeSignOnCopy, ); }; };
		E9C9E9D72C2D161000C4AA34 /* RuntimeViewerCatalystHelperPlugin.bundle in Embed PlugIns */ = {isa = PBXBuildFile; fileRef = E9E900DC2C2CF9A500FADDCC /* RuntimeViewerCatalystHelperPlugin.bundle */; platformFilter = maccatalyst; settings = {ATTRIBUTES = (CodeSignOnCopy, RemoveHeadersOnCopy, ); }; };
		E9C9E9DD2C2D169D00C4AA34 /* AppKitPlugin.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9C9E9DB2C2D169D00C4AA34 /* AppKitPlugin.swift */; };
		E9C9E9DE2C2D169D00C4AA34 /* AppKitPluginImpl.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9C9E9DC2C2D169D00C4AA34 /* AppKitPluginImpl.swift */; };
		E9C9E9DF2C2D16B000C4AA34 /* AppKitPlugin.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9C9E9DB2C2D169D00C4AA34 /* AppKitPlugin.swift */; };
		E9C9E9E02C2D172600C4AA34 /* AppKitBridge.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9A18BA72C2978DF00689B49 /* AppKitBridge.swift */; };
		E9C9E9F02C2D379200C4AA34 /* RuntimeViewerCatalystHelper.app in Embed Helpers */ = {isa = PBXBuildFile; fileRef = E9C9E9EF2C2D379200C4AA34 /* RuntimeViewerCatalystHelper.app */; settings = {ATTRIBUTES = (RemoveHeadersOnCopy, ); }; };
		E9CBCC162C13685400169ABF /* RuntimeViewerArchitectures in Frameworks */ = {isa = PBXBuildFile; productRef = E9CBCC152C13685400169ABF /* RuntimeViewerArchitectures */; };
		E9CBCC1A2C13685400169ABF /* RuntimeViewerUI in Frameworks */ = {isa = PBXBuildFile; productRef = E9CBCC192C13685400169ABF /* RuntimeViewerUI */; };
		E9CE07AF2C148FA00070A6E8 /* MainToolbarController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9CE07AE2C148FA00070A6E8 /* MainToolbarController.swift */; };
		E9CE07B92C1497B30070A6E8 /* SidebarRootTableCellView.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9CE07B82C1497B30070A6E8 /* SidebarRootTableCellView.swift */; };
		E9E900EB2C2D0D5B00FADDCC /* main.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9E900EA2C2D0D5B00FADDCC /* main.swift */; };
		E9EB37AC2C397024003E2859 /* InspectorClassViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9EB37AB2C397024003E2859 /* InspectorClassViewController.swift */; };
		E9F0A57E2C305C01001C36FB /* GenerationOptionsViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9F0A57D2C305C01001C36FB /* GenerationOptionsViewController.swift */; };
		E9F759422CF603DD00BE7A5F /* SidebarImageCellView.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9F759412CF603DD00BE7A5F /* SidebarImageCellView.swift */; };
		E9F759622CF76B2200BE7A5F /* RuntimeViewerServer.h in Headers */ = {isa = PBXBuildFile; fileRef = E9F759602CF76B2200BE7A5F /* RuntimeViewerServer.h */; settings = {ATTRIBUTES = (Public, ); }; };
		E9F759642CF76B3300BE7A5F /* main.m in Sources */ = {isa = PBXBuildFile; fileRef = E9F759632CF76B3300BE7A5F /* main.m */; };
		E9F759682CF76F4E00BE7A5F /* RuntimeViewerServerLoader.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9F759672CF76F4E00BE7A5F /* RuntimeViewerServerLoader.swift */; };
		E9F759692CF7817200BE7A5F /* RuntimeViewerServer.framework in Resources */ = {isa = PBXBuildFile; fileRef = E9F759512CF76B0F00BE7A5F /* RuntimeViewerServer.framework */; };
		E9F7596D2CF89BB000BE7A5F /* RuntimeEngineManager.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9F7596C2CF89BB000BE7A5F /* RuntimeEngineManager.swift */; };
		E9FD73CA2C16042F00E391F5 /* LineNumberGutter.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9FD73C92C16042F00E391F5 /* LineNumberGutter.swift */; };
/* End PBXBuildFile section */

/* Begin PBXContainerItemProxy section */
		E9C9E9D82C2D161000C4AA34 /* PBXContainerItemProxy */ = {
			isa = PBXContainerItemProxy;
			containerPortal = E9432FDA2C0D614900362862 /* Project object */;
			proxyType = 1;
			remoteGlobalIDString = E9E900DB2C2CF9A500FADDCC;
			remoteInfo = RuntimeViewerCatalystHelperPlugin;
		};
		E9C9E9E42C2D1E2700C4AA34 /* PBXContainerItemProxy */ = {
			isa = PBXContainerItemProxy;
			containerPortal = E9432FDA2C0D614900362862 /* Project object */;
			proxyType = 1;
			remoteGlobalIDString = E9E900E72C2D0D5B00FADDCC;
			remoteInfo = com.JH.RuntimeViewerService;
		};
		E9F7596A2CF7817A00BE7A5F /* PBXContainerItemProxy */ = {
			isa = PBXContainerItemProxy;
			containerPortal = E9432FDA2C0D614900362862 /* Project object */;
			proxyType = 1;
			remoteGlobalIDString = E9F759502CF76B0F00BE7A5F;
			remoteInfo = RuntimeViewerServer;
		};
/* End PBXContainerItemProxy section */

/* Begin PBXCopyFilesBuildPhase section */
		E9C9E9CC2C2D0F1B00C4AA34 /* Embed LaunchServices */ = {
			isa = PBXCopyFilesBuildPhase;
			buildActionMask = 2147483647;
			dstPath = Contents/Library/LaunchServices;
			dstSubfolderSpec = 1;
			files = (
				E9C9E9CD2C2D0F2100C4AA34 /* com.JH.RuntimeViewerService in Embed LaunchServices */,
			);
			name = "Embed LaunchServices";
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9C9E9DA2C2D161000C4AA34 /* Embed PlugIns */ = {
			isa = PBXCopyFilesBuildPhase;
			buildActionMask = 2147483647;
			dstPath = "";
			dstSubfolderSpec = 13;
			files = (
				E9C9E9D72C2D161000C4AA34 /* RuntimeViewerCatalystHelperPlugin.bundle in Embed PlugIns */,
			);
			name = "Embed PlugIns";
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9C9E9EB2C2D33F500C4AA34 /* Embed Helpers */ = {
			isa = PBXCopyFilesBuildPhase;
			buildActionMask = 2147483647;
			dstPath = ../Applications;
			dstSubfolderSpec = 6;
			files = (
				E9C9E9F02C2D379200C4AA34 /* RuntimeViewerCatalystHelper.app in Embed Helpers */,
			);
			name = "Embed Helpers";
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9F6CD052D9A7B1700DBFB50 /* Embed LaunchDaemon */ = {
			isa = PBXCopyFilesBuildPhase;
			buildActionMask = 2147483647;
			dstPath = Contents/Library/LaunchDaemons;
			dstSubfolderSpec = 1;
			files = (
			);
			name = "Embed LaunchDaemon";
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXCopyFilesBuildPhase section */

/* Begin PBXFileReference section */
		E91CD9962C2127AD00C989CC /* EventMonitor.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = EventMonitor.swift; sourceTree = "<group>"; };
		E924302B2D1EA96300246445 /* NSTextLayoutManager+.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = "NSTextLayoutManager+.swift"; sourceTree = "<group>"; };
		E924302D2D1EA99800246445 /* NSTextContentStorage+.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = "NSTextContentStorage+.swift"; sourceTree = "<group>"; };
		E924302F2D1EAF5200246445 /* MinimapView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MinimapView.swift; sourceTree = "<group>"; };
		E942ACBE2C28865100A2F3D3 /* MainRoute.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainRoute.swift; sourceTree = "<group>"; };
		E9432FE22C0D614900362862 /* RuntimeViewer.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = RuntimeViewer.app; sourceTree = BUILT_PRODUCTS_DIR; };
		E9432FE52C0D614900362862 /* AppDelegate.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AppDelegate.swift; sourceTree = "<group>"; };
		E9432FE72C0D614A00362862 /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; path = Assets.xcassets; sourceTree = "<group>"; };
		E9432FEA2C0D614A00362862 /* Base */ = {isa = PBXFileReference; lastKnownFileType = file.xib; name = Base; path = Base.lproj/MainMenu.xib; sourceTree = "<group>"; };
		E9432FEC2C0D614A00362862 /* RuntimeViewerUsingAppKit.entitlements */ = {isa = PBXFileReference; lastKnownFileType = text.plist.entitlements; path = RuntimeViewerUsingAppKit.entitlements; sourceTree = "<group>"; };
		E94330172C0DA62500362862 /* SidebarRootViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarRootViewController.swift; sourceTree = "<group>"; };
		E943301B2C0DB75B00362862 /* Then.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = Then.swift; sourceTree = "<group>"; };
		E947C3672C2A4D0400296B2E /* RuntimeViewerCatalystHelper.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = RuntimeViewerCatalystHelper.app; sourceTree = BUILT_PRODUCTS_DIR; };
		E947C3692C2A4D0400296B2E /* AppDelegate.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AppDelegate.swift; sourceTree = "<group>"; };
		E947C36B2C2A4D0400296B2E /* SceneDelegate.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SceneDelegate.swift; sourceTree = "<group>"; };
		E947C3722C2A4D0500296B2E /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; path = Assets.xcassets; sourceTree = "<group>"; };
		E947C3772C2A4D0500296B2E /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = "<group>"; };
		E94E36C52CF84AF8006101C8 /* AttachToProcessViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AttachToProcessViewController.swift; sourceTree = "<group>"; };
		E94E36C82CF87BD6006101C8 /* RuntimeViewerSymbols.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = RuntimeViewerSymbols.swift; sourceTree = "<group>"; };
		E9530A3B2D9D5898008FBC7F /* SIPChecker.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SIPChecker.swift; sourceTree = "<group>"; };
		E95CDA652DAA6FA300D97B03 /* Debug.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = Debug.xcconfig; sourceTree = "<group>"; };
		E95CDA662DAA6FA900D97B03 /* Release.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = Release.xcconfig; sourceTree = "<group>"; };
		E95CDA672DAA970300D97B03 /* Debug.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = Debug.xcconfig; sourceTree = "<group>"; };
		E95CDA682DAA970900D97B03 /* Release.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = Release.xcconfig; sourceTree = "<group>"; };
		E9668FFB2CEF7140007B344A /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = "<group>"; };
		E9668FFC2CEF7140007B344A /* launchd.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = launchd.plist; sourceTree = "<group>"; };
		E97544982C42BA5B00CC9DDD /* LoadFrameworksViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = LoadFrameworksViewController.swift; sourceTree = "<group>"; };
		E97544992C42BA5B00CC9DDD /* LoadFrameworksViewController.xib */ = {isa = PBXFileReference; lastKnownFileType = file.xib; path = LoadFrameworksViewController.xib; sourceTree = "<group>"; };
		E97544A32C42D11C00CC9DDD /* GenerationOptionsViewModel.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = GenerationOptionsViewModel.swift; sourceTree = "<group>"; };
		E985F5A32D8FF14800C3E5EE /* HelperInstaller.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = HelperInstaller.swift; sourceTree = "<group>"; };
		E99AE0BB2CBD4A840028B11E /* Document.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = Document.swift; sourceTree = "<group>"; };
		E99E61602C129DC2002C1A3D /* ContentTextViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ContentTextViewController.swift; sourceTree = "<group>"; };
		E9A18BA72C2978DF00689B49 /* AppKitBridge.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = AppKitBridge.swift; sourceTree = "<group>"; };
		E9A8252C2C0DECE400D9A85D /* SidebarCoordinator.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarCoordinator.swift; sourceTree = "<group>"; };
		E9A825372C0E085200D9A85D /* MainCoordinator.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainCoordinator.swift; sourceTree = "<group>"; };
		E9A825392C0E095500D9A85D /* SidebarImageViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarImageViewController.swift; sourceTree = "<group>"; };
		E9A825412C0E0B2300D9A85D /* MainWindowController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainWindowController.swift; sourceTree = "<group>"; };
		E9A825432C0E0B2800D9A85D /* MainSplitViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainSplitViewController.swift; sourceTree = "<group>"; };
		E9A825452C0E0B4900D9A85D /* ViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ViewController.swift; sourceTree = "<group>"; };
		E9A825492C0E0E9F00D9A85D /* ContentCoordinator.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ContentCoordinator.swift; sourceTree = "<group>"; };
		E9A8254B2C0E0EA600D9A85D /* InspectorCoordinator.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = InspectorCoordinator.swift; sourceTree = "<group>"; };
		E9A8254F2C0E0EB400D9A85D /* InspectorNavigationController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = InspectorNavigationController.swift; sourceTree = "<group>"; };
		E9A825512C0E0F9F00D9A85D /* ContentNavigationController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ContentNavigationController.swift; sourceTree = "<group>"; };
		E9A825532C0E0FBD00D9A85D /* SidebarNavigationController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarNavigationController.swift; sourceTree = "<group>"; };
		E9A825552C0E0FF300D9A85D /* ContentPlaceholderViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ContentPlaceholderViewController.swift; sourceTree = "<group>"; };
		E9A825572C0E202600D9A85D /* MainViewModel.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainViewModel.swift; sourceTree = "<group>"; };
		E9AA36212C3089AB00A9B2E4 /* InspectorPlaceholderViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = InspectorPlaceholderViewController.swift; sourceTree = "<group>"; };
		E9C9E9C92C2D0E3C00C4AA34 /* Config.xcconfig */ = {isa = PBXFileReference; lastKnownFileType = text.xcconfig; path = Config.xcconfig; sourceTree = "<group>"; };
		E9C9E9CE2C2D10C600C4AA34 /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist; path = Info.plist; sourceTree = "<group>"; };
		E9C9E9DB2C2D169D00C4AA34 /* AppKitPlugin.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = AppKitPlugin.swift; sourceTree = "<group>"; };
		E9C9E9DC2C2D169D00C4AA34 /* AppKitPluginImpl.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = AppKitPluginImpl.swift; sourceTree = "<group>"; };
		E9C9E9EF2C2D379200C4AA34 /* RuntimeViewerCatalystHelper.app */ = {isa = PBXFileReference; lastKnownFileType = wrapper.application; path = RuntimeViewerCatalystHelper.app; sourceTree = "<group>"; };
		E9CE07AE2C148FA00070A6E8 /* MainToolbarController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainToolbarController.swift; sourceTree = "<group>"; };
		E9CE07B82C1497B30070A6E8 /* SidebarRootTableCellView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarRootTableCellView.swift; sourceTree = "<group>"; };
		E9E900D72C2CF96500FADDCC /* RuntimeViewerCatalystHelper.entitlements */ = {isa = PBXFileReference; lastKnownFileType = text.plist.entitlements; path = RuntimeViewerCatalystHelper.entitlements; sourceTree = "<group>"; };
		E9E900DC2C2CF9A500FADDCC /* RuntimeViewerCatalystHelperPlugin.bundle */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = RuntimeViewerCatalystHelperPlugin.bundle; sourceTree = BUILT_PRODUCTS_DIR; };
		E9E900E82C2D0D5B00FADDCC /* com.JH.RuntimeViewerService */ = {isa = PBXFileReference; explicitFileType = "compiled.mach-o.executable"; includeInIndex = 0; path = com.JH.RuntimeViewerService; sourceTree = BUILT_PRODUCTS_DIR; };
		E9E900EA2C2D0D5B00FADDCC /* main.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = main.swift; sourceTree = "<group>"; };
		E9EB37AB2C397024003E2859 /* InspectorClassViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = InspectorClassViewController.swift; sourceTree = "<group>"; };
		E9F0A57D2C305C01001C36FB /* GenerationOptionsViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = GenerationOptionsViewController.swift; sourceTree = "<group>"; };
		E9F759412CF603DD00BE7A5F /* SidebarImageCellView.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarImageCellView.swift; sourceTree = "<group>"; };
		E9F759512CF76B0F00BE7A5F /* RuntimeViewerServer.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = RuntimeViewerServer.framework; sourceTree = BUILT_PRODUCTS_DIR; };
		E9F759602CF76B2200BE7A5F /* RuntimeViewerServer.h */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.h; path = RuntimeViewerServer.h; sourceTree = "<group>"; };
		E9F759632CF76B3300BE7A5F /* main.m */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.objc; path = main.m; sourceTree = "<group>"; };
		E9F759672CF76F4E00BE7A5F /* RuntimeViewerServerLoader.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = RuntimeViewerServerLoader.swift; sourceTree = "<group>"; };
		E9F7596C2CF89BB000BE7A5F /* RuntimeEngineManager.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = RuntimeEngineManager.swift; sourceTree = "<group>"; };
		E9FD73C92C16042F00E391F5 /* LineNumberGutter.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = LineNumberGutter.swift; sourceTree = "<group>"; };
/* End PBXFileReference section */

/* Begin PBXFrameworksBuildPhase section */
		E9432FDF2C0D614900362862 /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E985A9CC2D9AF4FC005A573C /* RuntimeViewerCore in Frameworks */,
				E9CBCC1A2C13685400169ABF /* RuntimeViewerUI in Frameworks */,
				E942AC882C274DF600A2F3D3 /* RuntimeViewerApplication in Frameworks */,
				E9CBCC162C13685400169ABF /* RuntimeViewerArchitectures in Frameworks */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E947C3642C2A4D0400296B2E /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9E900D92C2CF9A500FADDCC /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E985A9CE2D9AF505005A573C /* RuntimeViewerCore in Frameworks */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9E900E52C2D0D5B00FADDCC /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E985A9DA2D9AF7E5005A573C /* RuntimeViewerService in Frameworks */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9F7594E2CF76B0F00BE7A5F /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E985A9D22D9AF512005A573C /* RuntimeViewerCore in Frameworks */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXFrameworksBuildPhase section */

/* Begin PBXGroup section */
		E9432FD92C0D614900362862 = {
			isa = PBXGroup;
			children = (
				E9C9E9EF2C2D379200C4AA34 /* RuntimeViewerCatalystHelper.app */,
				E9432FE42C0D614900362862 /* RuntimeViewerUsingAppKit */,
				E947C3682C2A4D0400296B2E /* RuntimeViewerCatalystHelper */,
				E9E900E02C2CF9B000FADDCC /* RuntimeViewerCatalystHelperPlugin */,
				E9E900E92C2D0D5B00FADDCC /* com.JH.RuntimeViewerService */,
				E9F759612CF76B2200BE7A5F /* RuntimeViewerServer */,
				E9432FE32C0D614900362862 /* Products */,
				E9432FF32C0D637500362862 /* Frameworks */,
			);
			sourceTree = "<group>";
		};
		E9432FE32C0D614900362862 /* Products */ = {
			isa = PBXGroup;
			children = (
				E9432FE22C0D614900362862 /* RuntimeViewer.app */,
				E947C3672C2A4D0400296B2E /* RuntimeViewerCatalystHelper.app */,
				E9E900DC2C2CF9A500FADDCC /* RuntimeViewerCatalystHelperPlugin.bundle */,
				E9E900E82C2D0D5B00FADDCC /* com.JH.RuntimeViewerService */,
				E9F759512CF76B0F00BE7A5F /* RuntimeViewerServer.framework */,
			);
			name = Products;
			sourceTree = "<group>";
		};
		E9432FE42C0D614900362862 /* RuntimeViewerUsingAppKit */ = {
			isa = PBXGroup;
			children = (
				E9C9E9CE2C2D10C600C4AA34 /* Info.plist */,
				E9CE07C02C1498280070A6E8 /* App */,
				E9CE07BA2C1497EA0070A6E8 /* Base */,
				E9CE07BB2C1497F10070A6E8 /* Main */,
				E9CE07BC2C1497F70070A6E8 /* Sidebar */,
				E9CE07BD2C1498000070A6E8 /* Content */,
				E9CE07BE2C14980B0070A6E8 /* Inspector */,
				E97544A12C42D0D800CC9DDD /* Generation Options */,
				E97544A22C42D0F600CC9DDD /* Load Frameworks */,
				E94E36C42CF84A9F006101C8 /* Attach Process */,
				E9CE07BF2C14981D0070A6E8 /* Utils */,
				E94E36C72CF87BBC006101C8 /* Resources */,
				E9432FE72C0D614A00362862 /* Assets.xcassets */,
				E9432FE92C0D614A00362862 /* MainMenu.xib */,
				E9432FEC2C0D614A00362862 /* RuntimeViewerUsingAppKit.entitlements */,
				E95CDA672DAA970300D97B03 /* Debug.xcconfig */,
				E95CDA682DAA970900D97B03 /* Release.xcconfig */,
			);
			path = RuntimeViewerUsingAppKit;
			sourceTree = "<group>";
		};
		E9432FF32C0D637500362862 /* Frameworks */ = {
			isa = PBXGroup;
			children = (
			);
			name = Frameworks;
			sourceTree = "<group>";
		};
		E947C3682C2A4D0400296B2E /* RuntimeViewerCatalystHelper */ = {
			isa = PBXGroup;
			children = (
				E947C3692C2A4D0400296B2E /* AppDelegate.swift */,
				E9A18BA72C2978DF00689B49 /* AppKitBridge.swift */,
				E947C36B2C2A4D0400296B2E /* SceneDelegate.swift */,
				E947C3722C2A4D0500296B2E /* Assets.xcassets */,
				E9E900D72C2CF96500FADDCC /* RuntimeViewerCatalystHelper.entitlements */,
				E947C3772C2A4D0500296B2E /* Info.plist */,
			);
			path = RuntimeViewerCatalystHelper;
			sourceTree = "<group>";
		};
		E94E36C42CF84A9F006101C8 /* Attach Process */ = {
			isa = PBXGroup;
			children = (
				E94E36C52CF84AF8006101C8 /* AttachToProcessViewController.swift */,
			);
			path = "Attach Process";
			sourceTree = "<group>";
		};
		E94E36C72CF87BBC006101C8 /* Resources */ = {
			isa = PBXGroup;
			children = (
				E94E36C82CF87BD6006101C8 /* RuntimeViewerSymbols.swift */,
			);
			path = Resources;
			sourceTree = "<group>";
		};
		E97544A12C42D0D800CC9DDD /* Generation Options */ = {
			isa = PBXGroup;
			children = (
				E9F0A57D2C305C01001C36FB /* GenerationOptionsViewController.swift */,
				E97544A32C42D11C00CC9DDD /* GenerationOptionsViewModel.swift */,
			);
			path = "Generation Options";
			sourceTree = "<group>";
		};
		E97544A22C42D0F600CC9DDD /* Load Frameworks */ = {
			isa = PBXGroup;
			children = (
				E97544982C42BA5B00CC9DDD /* LoadFrameworksViewController.swift */,
				E97544992C42BA5B00CC9DDD /* LoadFrameworksViewController.xib */,
			);
			path = "Load Frameworks";
			sourceTree = "<group>";
		};
		E9CE07BA2C1497EA0070A6E8 /* Base */ = {
			isa = PBXGroup;
			children = (
				E9A825452C0E0B4900D9A85D /* ViewController.swift */,
			);
			path = Base;
			sourceTree = "<group>";
		};
		E9CE07BB2C1497F10070A6E8 /* Main */ = {
			isa = PBXGroup;
			children = (
				E942ACBE2C28865100A2F3D3 /* MainRoute.swift */,
				E9A825372C0E085200D9A85D /* MainCoordinator.swift */,
				E9A825412C0E0B2300D9A85D /* MainWindowController.swift */,
				E9CE07AE2C148FA00070A6E8 /* MainToolbarController.swift */,
				E9A825432C0E0B2800D9A85D /* MainSplitViewController.swift */,
				E9A825572C0E202600D9A85D /* MainViewModel.swift */,
			);
			path = Main;
			sourceTree = "<group>";
		};
		E9CE07BC2C1497F70070A6E8 /* Sidebar */ = {
			isa = PBXGroup;
			children = (
				E9A8252C2C0DECE400D9A85D /* SidebarCoordinator.swift */,
				E9A825532C0E0FBD00D9A85D /* SidebarNavigationController.swift */,
				E94330172C0DA62500362862 /* SidebarRootViewController.swift */,
				E9CE07B82C1497B30070A6E8 /* SidebarRootTableCellView.swift */,
				E9A825392C0E095500D9A85D /* SidebarImageViewController.swift */,
				E9F759412CF603DD00BE7A5F /* SidebarImageCellView.swift */,
			);
			path = Sidebar;
			sourceTree = "<group>";
		};
		E9CE07BD2C1498000070A6E8 /* Content */ = {
			isa = PBXGroup;
			children = (
				E9A825492C0E0E9F00D9A85D /* ContentCoordinator.swift */,
				E9A825512C0E0F9F00D9A85D /* ContentNavigationController.swift */,
				E9A825552C0E0FF300D9A85D /* ContentPlaceholderViewController.swift */,
				E99E61602C129DC2002C1A3D /* ContentTextViewController.swift */,
				E924302F2D1EAF5200246445 /* MinimapView.swift */,
				E924302D2D1EA99800246445 /* NSTextContentStorage+.swift */,
				E924302B2D1EA96300246445 /* NSTextLayoutManager+.swift */,
			);
			path = Content;
			sourceTree = "<group>";
		};
		E9CE07BE2C14980B0070A6E8 /* Inspector */ = {
			isa = PBXGroup;
			children = (
				E9A8254B2C0E0EA600D9A85D /* InspectorCoordinator.swift */,
				E9AA36212C3089AB00A9B2E4 /* InspectorPlaceholderViewController.swift */,
				E9A8254F2C0E0EB400D9A85D /* InspectorNavigationController.swift */,
				E9EB37AB2C397024003E2859 /* InspectorClassViewController.swift */,
			);
			path = Inspector;
			sourceTree = "<group>";
		};
		E9CE07BF2C14981D0070A6E8 /* Utils */ = {
			isa = PBXGroup;
			children = (
				E91CD9962C2127AD00C989CC /* EventMonitor.swift */,
				E943301B2C0DB75B00362862 /* Then.swift */,
				E9FD73C92C16042F00E391F5 /* LineNumberGutter.swift */,
				E985F5A32D8FF14800C3E5EE /* HelperInstaller.swift */,
				E9530A3B2D9D5898008FBC7F /* SIPChecker.swift */,
			);
			path = Utils;
			sourceTree = "<group>";
		};
		E9CE07C02C1498280070A6E8 /* App */ = {
			isa = PBXGroup;
			children = (
				E9432FE52C0D614900362862 /* AppDelegate.swift */,
				E99AE0BB2CBD4A840028B11E /* Document.swift */,
				E9F7596C2CF89BB000BE7A5F /* RuntimeEngineManager.swift */,
			);
			path = App;
			sourceTree = "<group>";
		};
		E9E900E02C2CF9B000FADDCC /* RuntimeViewerCatalystHelperPlugin */ = {
			isa = PBXGroup;
			children = (
				E9C9E9DB2C2D169D00C4AA34 /* AppKitPlugin.swift */,
				E9C9E9DC2C2D169D00C4AA34 /* AppKitPluginImpl.swift */,
			);
			path = RuntimeViewerCatalystHelperPlugin;
			sourceTree = "<group>";
		};
		E9E900E92C2D0D5B00FADDCC /* com.JH.RuntimeViewerService */ = {
			isa = PBXGroup;
			children = (
				E9E900EA2C2D0D5B00FADDCC /* main.swift */,
				E9C9E9C92C2D0E3C00C4AA34 /* Config.xcconfig */,
				E95CDA652DAA6FA300D97B03 /* Debug.xcconfig */,
				E95CDA662DAA6FA900D97B03 /* Release.xcconfig */,
				E9668FFB2CEF7140007B344A /* Info.plist */,
				E9668FFC2CEF7140007B344A /* launchd.plist */,
			);
			path = com.JH.RuntimeViewerService;
			sourceTree = "<group>";
		};
		E9F759612CF76B2200BE7A5F /* RuntimeViewerServer */ = {
			isa = PBXGroup;
			children = (
				E9F759602CF76B2200BE7A5F /* RuntimeViewerServer.h */,
				E9F759632CF76B3300BE7A5F /* main.m */,
				E9F759672CF76F4E00BE7A5F /* RuntimeViewerServerLoader.swift */,
			);
			path = RuntimeViewerServer;
			sourceTree = "<group>";
		};
/* End PBXGroup section */

/* Begin PBXHeadersBuildPhase section */
		E9F7594C2CF76B0F00BE7A5F /* Headers */ = {
			isa = PBXHeadersBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9F759622CF76B2200BE7A5F /* RuntimeViewerServer.h in Headers */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXHeadersBuildPhase section */

/* Begin PBXNativeTarget section */
		E9432FE12C0D614900362862 /* RuntimeViewerUsingAppKit */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = E9432FEF2C0D614A00362862 /* Build configuration list for PBXNativeTarget "RuntimeViewerUsingAppKit" */;
			buildPhases = (
				E9432FDE2C0D614900362862 /* Sources */,
				E9432FDF2C0D614900362862 /* Frameworks */,
				E9432FE02C0D614900362862 /* Resources */,
				E9F6CD052D9A7B1700DBFB50 /* Embed LaunchDaemon */,
				E9C9E9CC2C2D0F1B00C4AA34 /* Embed LaunchServices */,
				E9C9E9EB2C2D33F500C4AA34 /* Embed Helpers */,
			);
			buildRules = (
			);
			dependencies = (
				E9F7596B2CF7817A00BE7A5F /* PBXTargetDependency */,
				E9C9E9E52C2D1E2700C4AA34 /* PBXTargetDependency */,
			);
			name = RuntimeViewerUsingAppKit;
			packageProductDependencies = (
				E9CBCC152C13685400169ABF /* RuntimeViewerArchitectures */,
				E9CBCC192C13685400169ABF /* RuntimeViewerUI */,
				E942AC872C274DF600A2F3D3 /* RuntimeViewerApplication */,
				E985A9CB2D9AF4FC005A573C /* RuntimeViewerCore */,
			);
			productName = RuntimeViewerUsingAppKit;
			productReference = E9432FE22C0D614900362862 /* RuntimeViewer.app */;
			productType = "com.apple.product-type.application";
		};
		E947C3662C2A4D0400296B2E /* RuntimeViewerCatalystHelper */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = E947C37A2C2A4D0500296B2E /* Build configuration list for PBXNativeTarget "RuntimeViewerCatalystHelper" */;
			buildPhases = (
				E947C3632C2A4D0400296B2E /* Sources */,
				E947C3642C2A4D0400296B2E /* Frameworks */,
				E947C3652C2A4D0400296B2E /* Resources */,
				E9C9E9DA2C2D161000C4AA34 /* Embed PlugIns */,
				E9C9E9E92C2D296E00C4AA34 /* ShellScript */,
			);
			buildRules = (
			);
			dependencies = (
				E9C9E9D92C2D161000C4AA34 /* PBXTargetDependency */,
			);
			name = RuntimeViewerCatalystHelper;
			productName = RuntimeViewerCatalystHelper;
			productReference = E947C3672C2A4D0400296B2E /* RuntimeViewerCatalystHelper.app */;
			productType = "com.apple.product-type.application";
		};
		E9E900DB2C2CF9A500FADDCC /* RuntimeViewerCatalystHelperPlugin */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = E9E900DD2C2CF9A500FADDCC /* Build configuration list for PBXNativeTarget "RuntimeViewerCatalystHelperPlugin" */;
			buildPhases = (
				E9E900D82C2CF9A500FADDCC /* Sources */,
				E9E900D92C2CF9A500FADDCC /* Frameworks */,
				E9E900DA2C2CF9A500FADDCC /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
			);
			name = RuntimeViewerCatalystHelperPlugin;
			packageProductDependencies = (
				E985A9CD2D9AF505005A573C /* RuntimeViewerCore */,
			);
			productName = RuntimeViewerCatalystHelperPlugin;
			productReference = E9E900DC2C2CF9A500FADDCC /* RuntimeViewerCatalystHelperPlugin.bundle */;
			productType = "com.apple.product-type.bundle";
		};
		E9E900E72C2D0D5B00FADDCC /* com.JH.RuntimeViewerService */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = E9E900EC2C2D0D5B00FADDCC /* Build configuration list for PBXNativeTarget "com.JH.RuntimeViewerService" */;
			buildPhases = (
				E9E900E42C2D0D5B00FADDCC /* Sources */,
				E9E900E52C2D0D5B00FADDCC /* Frameworks */,
			);
			buildRules = (
			);
			dependencies = (
			);
			name = com.JH.RuntimeViewerService;
			packageProductDependencies = (
				E985A9D92D9AF7E5005A573C /* RuntimeViewerService */,
			);
			productName = com.JH.RuntimeViewerService;
			productReference = E9E900E82C2D0D5B00FADDCC /* com.JH.RuntimeViewerService */;
			productType = "com.apple.product-type.tool";
		};
		E9F759502CF76B0F00BE7A5F /* RuntimeViewerServer */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = E9F7595A2CF76B0F00BE7A5F /* Build configuration list for PBXNativeTarget "RuntimeViewerServer" */;
			buildPhases = (
				E9F7594C2CF76B0F00BE7A5F /* Headers */,
				E9F7594D2CF76B0F00BE7A5F /* Sources */,
				E9F7594E2CF76B0F00BE7A5F /* Frameworks */,
				E9F7594F2CF76B0F00BE7A5F /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
			);
			name = RuntimeViewerServer;
			packageProductDependencies = (
				E985A9D12D9AF512005A573C /* RuntimeViewerCore */,
			);
			productName = RuntimeViewerServer;
			productReference = E9F759512CF76B0F00BE7A5F /* RuntimeViewerServer.framework */;
			productType = "com.apple.product-type.framework";
		};
/* End PBXNativeTarget section */

/* Begin PBXProject section */
		E9432FDA2C0D614900362862 /* Project object */ = {
			isa = PBXProject;
			attributes = {
				BuildIndependentTargetsInParallel = 1;
				LastSwiftUpdateCheck = 1540;
				LastUpgradeCheck = 1640;
				TargetAttributes = {
					E9432FE12C0D614900362862 = {
						CreatedOnToolsVersion = 15.4;
					};
					E947C3662C2A4D0400296B2E = {
						CreatedOnToolsVersion = 15.4;
					};
					E9E900DB2C2CF9A500FADDCC = {
						CreatedOnToolsVersion = 15.4;
					};
					E9E900E72C2D0D5B00FADDCC = {
						CreatedOnToolsVersion = 15.4;
					};
					E9F759502CF76B0F00BE7A5F = {
						CreatedOnToolsVersion = 16.1;
						LastSwiftMigration = 1610;
					};
				};
			};
			buildConfigurationList = E9432FDD2C0D614900362862 /* Build configuration list for PBXProject "RuntimeViewerUsingAppKit" */;
			compatibilityVersion = "Xcode 14.0";
			developmentRegion = en;
			hasScannedForEncodings = 0;
			knownRegions = (
				en,
				Base,
			);
			mainGroup = E9432FD92C0D614900362862;
			packageReferences = (
			);
			productRefGroup = E9432FE32C0D614900362862 /* Products */;
			projectDirPath = "";
			projectRoot = "";
			targets = (
				E9432FE12C0D614900362862 /* RuntimeViewerUsingAppKit */,
				E947C3662C2A4D0400296B2E /* RuntimeViewerCatalystHelper */,
				E9E900DB2C2CF9A500FADDCC /* RuntimeViewerCatalystHelperPlugin */,
				E9E900E72C2D0D5B00FADDCC /* com.JH.RuntimeViewerService */,
				E9F759502CF76B0F00BE7A5F /* RuntimeViewerServer */,
			);
		};
/* End PBXProject section */

/* Begin PBXResourcesBuildPhase section */
		E9432FE02C0D614900362862 /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9F759692CF7817200BE7A5F /* RuntimeViewerServer.framework in Resources */,
				E9432FE82C0D614A00362862 /* Assets.xcassets in Resources */,
				E9432FEB2C0D614A00362862 /* Base in Resources */,
				E975449A2C42BA5B00CC9DDD /* LoadFrameworksViewController.xib in Resources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E947C3652C2A4D0400296B2E /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E947C3732C2A4D0500296B2E /* Assets.xcassets in Resources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9E900DA2C2CF9A500FADDCC /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9F7594F2CF76B0F00BE7A5F /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXResourcesBuildPhase section */

/* Begin PBXShellScriptBuildPhase section */
		E9C9E9E92C2D296E00C4AA34 /* ShellScript */ = {
			isa = PBXShellScriptBuildPhase;
			alwaysOutOfDate = 1;
			buildActionMask = 2147483647;
			files = (
			);
			inputFileListPaths = (
			);
			inputPaths = (
			);
			outputFileListPaths = (
			);
			outputPaths = (
			);
			runOnlyForDeploymentPostprocessing = 0;
			shellPath = /bin/sh;
			shellScript = "#!/bin/bash\n\n# 定义变量\nAPP_NAME=\"${TARGET_NAME}.app\"\nSRC_PATH=\"${BUILT_PRODUCTS_DIR}/${APP_NAME}\"\nDEST_PATH=\"${SRCROOT}\"\n\n# 检查目标目录是否存在该 app\nif [ -d \"${DEST_PATH}/${APP_NAME}\" ]; then\n    echo \"发现已存在的 ${APP_NAME},正在删除...\"\n    rm -rf \"${DEST_PATH}/${APP_NAME}\"\nfi\n\n# 复制 app 到目标路径\necho \"正在复制 ${APP_NAME} 到 ${DEST_PATH}...\"\ncp -f -R \"${SRC_PATH}\" \"${DEST_PATH}\"\n\n# 检查复制是否成功\nif [ $? -eq 0 ]; then\n    echo \"复制成功完成!\"\nelse\n    echo \"复制失败,请检查路径和权限.\"\n    exit 1\nfi\n";
		};
/* End PBXShellScriptBuildPhase section */

/* Begin PBXSourcesBuildPhase section */
		E9432FDE2C0D614900362862 /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9432FE62C0D614900362862 /* AppDelegate.swift in Sources */,
				E9A8252D2C0DECE400D9A85D /* SidebarCoordinator.swift in Sources */,
				E9A8253A2C0E095500D9A85D /* SidebarImageViewController.swift in Sources */,
				E9EB37AC2C397024003E2859 /* InspectorClassViewController.swift in Sources */,
				E99AE0BC2CBD4A840028B11E /* Document.swift in Sources */,
				E943301C2C0DB75B00362862 /* Then.swift in Sources */,
				E985F5A42D8FF14800C3E5EE /* HelperInstaller.swift in Sources */,
				E9AA36222C3089AB00A9B2E4 /* InspectorPlaceholderViewController.swift in Sources */,
				E9F759422CF603DD00BE7A5F /* SidebarImageCellView.swift in Sources */,
				E9A8254C2C0E0EA600D9A85D /* InspectorCoordinator.swift in Sources */,
				E9A825422C0E0B2300D9A85D /* MainWindowController.swift in Sources */,
				E9530A3C2D9D5898008FBC7F /* SIPChecker.swift in Sources */,
				E9F7596D2CF89BB000BE7A5F /* RuntimeEngineManager.swift in Sources */,
				E924302E2D1EA99800246445 /* NSTextContentStorage+.swift in Sources */,
				E94E36C92CF87BD6006101C8 /* RuntimeViewerSymbols.swift in Sources */,
				E9A825562C0E0FF300D9A85D /* ContentPlaceholderViewController.swift in Sources */,
				E9A825382C0E085200D9A85D /* MainCoordinator.swift in Sources */,
				E9A825462C0E0B4900D9A85D /* ViewController.swift in Sources */,
				E9A825522C0E0F9F00D9A85D /* ContentNavigationController.swift in Sources */,
				E942ACBF2C28865100A2F3D3 /* MainRoute.swift in Sources */,
				E92430302D1EAF5200246445 /* MinimapView.swift in Sources */,
				E9A825502C0E0EB400D9A85D /* InspectorNavigationController.swift in Sources */,
				E94330182C0DA62500362862 /* SidebarRootViewController.swift in Sources */,
				E99E61612C129DC2002C1A3D /* ContentTextViewController.swift in Sources */,
				E9F0A57E2C305C01001C36FB /* GenerationOptionsViewController.swift in Sources */,
				E9A825582C0E202600D9A85D /* MainViewModel.swift in Sources */,
				E91CD9972C2127AD00C989CC /* EventMonitor.swift in Sources */,
				E975449B2C42BA5B00CC9DDD /* LoadFrameworksViewController.swift in Sources */,
				E9CE07B92C1497B30070A6E8 /* SidebarRootTableCellView.swift in Sources */,
				E9A825542C0E0FBD00D9A85D /* SidebarNavigationController.swift in Sources */,
				E9A825442C0E0B2800D9A85D /* MainSplitViewController.swift in Sources */,
				E9FD73CA2C16042F00E391F5 /* LineNumberGutter.swift in Sources */,
				E9A8254A2C0E0E9F00D9A85D /* ContentCoordinator.swift in Sources */,
				E97544A42C42D11C00CC9DDD /* GenerationOptionsViewModel.swift in Sources */,
				E9CE07AF2C148FA00070A6E8 /* MainToolbarController.swift in Sources */,
				E924302C2D1EA96300246445 /* NSTextLayoutManager+.swift in Sources */,
				E94E36C62CF84AF8006101C8 /* AttachToProcessViewController.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E947C3632C2A4D0400296B2E /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9C9E9E02C2D172600C4AA34 /* AppKitBridge.swift in Sources */,
				E9C9E9DF2C2D16B000C4AA34 /* AppKitPlugin.swift in Sources */,
				E947C36A2C2A4D0400296B2E /* AppDelegate.swift in Sources */,
				E947C36C2C2A4D0400296B2E /* SceneDelegate.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9E900D82C2CF9A500FADDCC /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9C9E9DE2C2D169D00C4AA34 /* AppKitPluginImpl.swift in Sources */,
				E9C9E9DD2C2D169D00C4AA34 /* AppKitPlugin.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9E900E42C2D0D5B00FADDCC /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9E900EB2C2D0D5B00FADDCC /* main.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9F7594D2CF76B0F00BE7A5F /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9F759682CF76F4E00BE7A5F /* RuntimeViewerServerLoader.swift in Sources */,
				E9F759642CF76B3300BE7A5F /* main.m in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXSourcesBuildPhase section */

/* Begin PBXTargetDependency section */
		E9C9E9D92C2D161000C4AA34 /* PBXTargetDependency */ = {
			isa = PBXTargetDependency;
			platformFilter = maccatalyst;
			target = E9E900DB2C2CF9A500FADDCC /* RuntimeViewerCatalystHelperPlugin */;
			targetProxy = E9C9E9D82C2D161000C4AA34 /* PBXContainerItemProxy */;
		};
		E9C9E9E52C2D1E2700C4AA34 /* PBXTargetDependency */ = {
			isa = PBXTargetDependency;
			target = E9E900E72C2D0D5B00FADDCC /* com.JH.RuntimeViewerService */;
			targetProxy = E9C9E9E42C2D1E2700C4AA34 /* PBXContainerItemProxy */;
		};
		E9F7596B2CF7817A00BE7A5F /* PBXTargetDependency */ = {
			isa = PBXTargetDependency;
			target = E9F759502CF76B0F00BE7A5F /* RuntimeViewerServer */;
			targetProxy = E9F7596A2CF7817A00BE7A5F /* PBXContainerItemProxy */;
		};
/* End PBXTargetDependency section */

/* Begin PBXVariantGroup section */
		E9432FE92C0D614A00362862 /* MainMenu.xib */ = {
			isa = PBXVariantGroup;
			children = (
				E9432FEA2C0D614A00362862 /* Base */,
			);
			name = MainMenu.xib;
			sourceTree = "<group>";
		};
/* End PBXVariantGroup section */

/* Begin XCBuildConfiguration section */
		E9432FED2C0D614A00362862 /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++20";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_ENABLE_OBJC_WEAK = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				COPY_PHASE_STRIP = NO;
				DEAD_CODE_STRIPPING = YES;
				DEBUG_INFORMATION_FORMAT = dwarf;
				DEVELOPMENT_TEAM = D5Q73692VW;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_TESTABILITY = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = YES;
				GCC_C_LANGUAGE_STANDARD = gnu17;
				GCC_DYNAMIC_NO_PIC = NO;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_OPTIMIZATION_LEVEL = 0;
				GCC_PREPROCESSOR_DEFINITIONS = (
					"DEBUG=1",
					"$(inherited)",
				);
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				LOCALIZATION_PREFERS_STRING_CATALOGS = YES;
				MACOSX_DEPLOYMENT_TARGET = 11.0;
				MTL_ENABLE_DEBUG_INFO = INCLUDE_SOURCE;
				MTL_FAST_MATH = YES;
				ONLY_ACTIVE_ARCH = YES;
				SDKROOT = macosx;
				SWIFT_ACTIVE_COMPILATION_CONDITIONS = "DEBUG $(inherited)";
				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
			};
			name = Debug;
		};
		E9432FEE2C0D614A00362862 /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++20";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_ENABLE_OBJC_WEAK = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				COPY_PHASE_STRIP = NO;
				DEAD_CODE_STRIPPING = YES;
				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
				DEVELOPMENT_TEAM = D5Q73692VW;
				ENABLE_NS_ASSERTIONS = NO;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = YES;
				GCC_C_LANGUAGE_STANDARD = gnu17;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				LOCALIZATION_PREFERS_STRING_CATALOGS = YES;
				MACOSX_DEPLOYMENT_TARGET = 11.0;
				MTL_ENABLE_DEBUG_INFO = NO;
				MTL_FAST_MATH = YES;
				SDKROOT = macosx;
				SWIFT_COMPILATION_MODE = wholemodule;
			};
			name = Release;
		};
		E9432FF02C0D614A00362862 /* Debug */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = E95CDA672DAA970300D97B03 /* Debug.xcconfig */;
			buildSettings = {
				ALLOW_TARGET_PLATFORM_SPECIALIZATION = NO;
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				CODE_SIGN_ENTITLEMENTS = RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit.entitlements;
				CODE_SIGN_STYLE = Automatic;
				COMBINE_HIDPI_IMAGES = YES;
				CURRENT_PROJECT_VERSION = 1;
				DEAD_CODE_STRIPPING = YES;
				ENABLE_HARDENED_RUNTIME = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				FUSE_BUILD_SCRIPT_PHASES = NO;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_FILE = RuntimeViewerUsingAppKit/Info.plist;
				INFOPLIST_KEY_CFBundleDisplayName = RuntimeViewer;
				INFOPLIST_KEY_NSAppleEventsUsageDescription = "Allow authorization to launch other apps";
				INFOPLIST_KEY_NSHumanReadableCopyright = "";
				INFOPLIST_KEY_NSLocalNetworkUsageDescription = "Runtime Viewer requires local network permissions to use the Bonjour discovery service";
				INFOPLIST_KEY_NSMainNibFile = MainMenu;
				INFOPLIST_KEY_NSPrincipalClass = NSApplication;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/../Frameworks",
				);
				MACOSX_DEPLOYMENT_TARGET = 12.0;
				MARKETING_VERSION = 1.2.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewer;
				PRODUCT_NAME = RuntimeViewer;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
			};
			name = Debug;
		};
		E9432FF12C0D614A00362862 /* Release */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = E95CDA682DAA970900D97B03 /* Release.xcconfig */;
			buildSettings = {
				ALLOW_TARGET_PLATFORM_SPECIALIZATION = NO;
				ARCHS = "$(ARCHS_STANDARD)";
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				CODE_SIGN_ENTITLEMENTS = RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit.entitlements;
				CODE_SIGN_STYLE = Automatic;
				COMBINE_HIDPI_IMAGES = YES;
				CURRENT_PROJECT_VERSION = 1;
				DEAD_CODE_STRIPPING = YES;
				ENABLE_HARDENED_RUNTIME = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				FUSE_BUILD_SCRIPT_PHASES = NO;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_FILE = RuntimeViewerUsingAppKit/Info.plist;
				INFOPLIST_KEY_CFBundleDisplayName = RuntimeViewer;
				INFOPLIST_KEY_NSAppleEventsUsageDescription = "Allow authorization to launch other apps";
				INFOPLIST_KEY_NSHumanReadableCopyright = "";
				INFOPLIST_KEY_NSLocalNetworkUsageDescription = "Runtime Viewer requires local network permissions to use the Bonjour discovery service";
				INFOPLIST_KEY_NSMainNibFile = MainMenu;
				INFOPLIST_KEY_NSPrincipalClass = NSApplication;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/../Frameworks",
				);
				MACOSX_DEPLOYMENT_TARGET = 12.0;
				MARKETING_VERSION = 1.2.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewer;
				PRODUCT_NAME = RuntimeViewer;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
			};
			name = Release;
		};
		E947C3782C2A4D0500296B2E /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALLOW_TARGET_PLATFORM_SPECIALIZATION = NO;
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				BUILD_LIBRARY_FOR_DISTRIBUTION = NO;
				CODE_SIGN_ENTITLEMENTS = RuntimeViewerCatalystHelper/RuntimeViewerCatalystHelper.entitlements;
				CODE_SIGN_IDENTITY = "Apple Development";
				"CODE_SIGN_IDENTITY[sdk=macosx*]" = "Apple Development";
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				DERIVE_MACCATALYST_PRODUCT_BUNDLE_IDENTIFIER = NO;
				ENABLE_HARDENED_RUNTIME = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_FILE = RuntimeViewerCatalystHelper/Info.plist;
				INFOPLIST_KEY_LSBackgroundOnly = YES;
				INFOPLIST_KEY_LSUIElement = YES;
				INFOPLIST_KEY_UIApplicationSupportsIndirectInputEvents = YES;
				INFOPLIST_KEY_UILaunchStoryboardName = LaunchScreen;
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPad = "UIInterfaceOrientationPortrait UIInterfaceOrientationPortraitUpsideDown UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight";
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPhone = "UIInterfaceOrientationPortrait UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight";
				IPHONEOS_DEPLOYMENT_TARGET = 15.0;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				MARKETING_VERSION = 1.1.0;
				ONLY_ACTIVE_ARCH = NO;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerCatalystHelper;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SDKROOT = iphoneos;
				SKIP_INSTALL = YES;
				SUPPORTED_PLATFORMS = "iphoneos iphonesimulator";
				SUPPORTS_MACCATALYST = YES;
				SUPPORTS_MAC_DESIGNED_FOR_IPHONE_IPAD = NO;
				SUPPORTS_XR_DESIGNED_FOR_IPHONE_IPAD = NO;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2,6";
			};
			name = Debug;
		};
		E947C3792C2A4D0500296B2E /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALLOW_TARGET_PLATFORM_SPECIALIZATION = NO;
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				BUILD_LIBRARY_FOR_DISTRIBUTION = NO;
				CODE_SIGN_ENTITLEMENTS = RuntimeViewerCatalystHelper/RuntimeViewerCatalystHelper.entitlements;
				CODE_SIGN_IDENTITY = "Apple Development";
				"CODE_SIGN_IDENTITY[sdk=macosx*]" = "Apple Development";
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				DERIVE_MACCATALYST_PRODUCT_BUNDLE_IDENTIFIER = NO;
				ENABLE_HARDENED_RUNTIME = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = NO;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_FILE = RuntimeViewerCatalystHelper/Info.plist;
				INFOPLIST_KEY_LSBackgroundOnly = YES;
				INFOPLIST_KEY_LSUIElement = YES;
				INFOPLIST_KEY_UIApplicationSupportsIndirectInputEvents = YES;
				INFOPLIST_KEY_UILaunchStoryboardName = LaunchScreen;
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPad = "UIInterfaceOrientationPortrait UIInterfaceOrientationPortraitUpsideDown UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight";
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPhone = "UIInterfaceOrientationPortrait UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight";
				IPHONEOS_DEPLOYMENT_TARGET = 15.0;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				MARKETING_VERSION = 1.1.0;
				ONLY_ACTIVE_ARCH = NO;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerCatalystHelper;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SDKROOT = iphoneos;
				SKIP_INSTALL = YES;
				SUPPORTED_PLATFORMS = "iphoneos iphonesimulator";
				SUPPORTS_MACCATALYST = YES;
				SUPPORTS_MAC_DESIGNED_FOR_IPHONE_IPAD = NO;
				SUPPORTS_XR_DESIGNED_FOR_IPHONE_IPAD = NO;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2,6";
				VALIDATE_PRODUCT = NO;
			};
			name = Release;
		};
		E9E900DE2C2CF9A500FADDCC /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				CODE_SIGN_STYLE = Automatic;
				COMBINE_HIDPI_IMAGES = YES;
				CURRENT_PROJECT_VERSION = 1;
				DEAD_CODE_STRIPPING = YES;
				ENABLE_HARDENED_RUNTIME = YES;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_KEY_NSHumanReadableCopyright = "";
				INFOPLIST_KEY_NSPrincipalClass = AppKitPluginImpl;
				INSTALL_PATH = "$(LOCAL_LIBRARY_DIR)/Bundles";
				MACOSX_DEPLOYMENT_TARGET = 12.0;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerCatalystHelperPlugin;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SKIP_INSTALL = YES;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
				WRAPPER_EXTENSION = bundle;
			};
			name = Debug;
		};
		E9E900DF2C2CF9A500FADDCC /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				CODE_SIGN_STYLE = Automatic;
				COMBINE_HIDPI_IMAGES = YES;
				CURRENT_PROJECT_VERSION = 1;
				DEAD_CODE_STRIPPING = YES;
				ENABLE_HARDENED_RUNTIME = YES;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_KEY_NSHumanReadableCopyright = "";
				INFOPLIST_KEY_NSPrincipalClass = AppKitPluginImpl;
				INSTALL_PATH = "$(LOCAL_LIBRARY_DIR)/Bundles";
				MACOSX_DEPLOYMENT_TARGET = 12.0;
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerCatalystHelperPlugin;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SKIP_INSTALL = YES;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
				WRAPPER_EXTENSION = bundle;
			};
			name = Release;
		};
		E9E900ED2C2D0D5B00FADDCC /* Debug */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = E95CDA652DAA6FA300D97B03 /* Debug.xcconfig */;
			buildSettings = {
				CODE_SIGN_STYLE = Automatic;
				CREATE_INFOPLIST_SECTION_IN_BINARY = YES;
				DEAD_CODE_STRIPPING = YES;
				ENABLE_HARDENED_RUNTIME = YES;
				INFOPLIST_FILE = "$(SRCROOT)/$(TARGETNAME)/Info.plist";
				MACOSX_DEPLOYMENT_TARGET = 12.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerService;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SKIP_INSTALL = YES;
				SWIFT_VERSION = 5.0;
			};
			name = Debug;
		};
		E9E900EE2C2D0D5B00FADDCC /* Release */ = {
			isa = XCBuildConfiguration;
			baseConfigurationReference = E95CDA662DAA6FA900D97B03 /* Release.xcconfig */;
			buildSettings = {
				CODE_SIGN_STYLE = Automatic;
				CREATE_INFOPLIST_SECTION_IN_BINARY = YES;
				DEAD_CODE_STRIPPING = YES;
				ENABLE_HARDENED_RUNTIME = YES;
				INFOPLIST_FILE = "$(SRCROOT)/$(TARGETNAME)/Info.plist";
				MACOSX_DEPLOYMENT_TARGET = 12.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerService;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SKIP_INSTALL = YES;
				SWIFT_VERSION = 5.0;
			};
			name = Release;
		};
		E9F7595B2CF76B0F00BE7A5F /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUILD_LIBRARY_FOR_DISTRIBUTION = YES;
				CLANG_ENABLE_MODULES = YES;
				CODE_SIGN_IDENTITY = "";
				CODE_SIGN_STYLE = Automatic;
				COMBINE_HIDPI_IMAGES = YES;
				CURRENT_PROJECT_VERSION = 1;
				DEAD_CODE_STRIPPING = YES;
				DEFINES_MODULE = YES;
				DYLIB_COMPATIBILITY_VERSION = 1;
				DYLIB_CURRENT_VERSION = 1;
				DYLIB_INSTALL_NAME_BASE = "@rpath";
				ENABLE_MODULE_VERIFIER = NO;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_KEY_NSHumanReadableCopyright = "";
				INSTALL_PATH = "$(LOCAL_LIBRARY_DIR)/Frameworks";
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/../Frameworks",
					"@loader_path/Frameworks",
				);
				MACOSX_DEPLOYMENT_TARGET = 12.0;
				MARKETING_VERSION = 1.0;
				MODULE_VERIFIER_SUPPORTED_LANGUAGES = "objective-c objective-c++";
				MODULE_VERIFIER_SUPPORTED_LANGUAGE_STANDARDS = "gnu17 gnu++20";
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerServer;
				PRODUCT_NAME = "$(TARGET_NAME:c99extidentifier)";
				SKIP_INSTALL = YES;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_INSTALL_OBJC_HEADER = NO;
				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
				SWIFT_VERSION = 5.0;
				VERSIONING_SYSTEM = "apple-generic";
				VERSION_INFO_PREFIX = "";
			};
			name = Debug;
		};
		E9F7595C2CF76B0F00BE7A5F /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUILD_LIBRARY_FOR_DISTRIBUTION = YES;
				CLANG_ENABLE_MODULES = YES;
				CODE_SIGN_IDENTITY = "";
				CODE_SIGN_STYLE = Automatic;
				COMBINE_HIDPI_IMAGES = YES;
				CURRENT_PROJECT_VERSION = 1;
				DEAD_CODE_STRIPPING = YES;
				DEFINES_MODULE = YES;
				DYLIB_COMPATIBILITY_VERSION = 1;
				DYLIB_CURRENT_VERSION = 1;
				DYLIB_INSTALL_NAME_BASE = "@rpath";
				ENABLE_MODULE_VERIFIER = NO;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_KEY_NSHumanReadableCopyright = "";
				INSTALL_PATH = "$(LOCAL_LIBRARY_DIR)/Frameworks";
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/../Frameworks",
					"@loader_path/Frameworks",
				);
				MACOSX_DEPLOYMENT_TARGET = 12.0;
				MARKETING_VERSION = 1.0;
				MODULE_VERIFIER_SUPPORTED_LANGUAGES = "objective-c objective-c++";
				MODULE_VERIFIER_SUPPORTED_LANGUAGE_STANDARDS = "gnu17 gnu++20";
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerServer;
				PRODUCT_NAME = "$(TARGET_NAME:c99extidentifier)";
				SKIP_INSTALL = YES;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_INSTALL_OBJC_HEADER = NO;
				SWIFT_VERSION = 5.0;
				VERSIONING_SYSTEM = "apple-generic";
				VERSION_INFO_PREFIX = "";
			};
			name = Release;
		};
/* End XCBuildConfiguration section */

/* Begin XCConfigurationList section */
		E9432FDD2C0D614900362862 /* Build configuration list for PBXProject "RuntimeViewerUsingAppKit" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E9432FED2C0D614A00362862 /* Debug */,
				E9432FEE2C0D614A00362862 /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		E9432FEF2C0D614A00362862 /* Build configuration list for PBXNativeTarget "RuntimeViewerUsingAppKit" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E9432FF02C0D614A00362862 /* Debug */,
				E9432FF12C0D614A00362862 /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		E947C37A2C2A4D0500296B2E /* Build configuration list for PBXNativeTarget "RuntimeViewerCatalystHelper" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E947C3782C2A4D0500296B2E /* Debug */,
				E947C3792C2A4D0500296B2E /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		E9E900DD2C2CF9A500FADDCC /* Build configuration list for PBXNativeTarget "RuntimeViewerCatalystHelperPlugin" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E9E900DE2C2CF9A500FADDCC /* Debug */,
				E9E900DF2C2CF9A500FADDCC /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		E9E900EC2C2D0D5B00FADDCC /* Build configuration list for PBXNativeTarget "com.JH.RuntimeViewerService" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E9E900ED2C2D0D5B00FADDCC /* Debug */,
				E9E900EE2C2D0D5B00FADDCC /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		E9F7595A2CF76B0F00BE7A5F /* Build configuration list for PBXNativeTarget "RuntimeViewerServer" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E9F7595B2CF76B0F00BE7A5F /* Debug */,
				E9F7595C2CF76B0F00BE7A5F /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
/* End XCConfigurationList section */

/* Begin XCSwiftPackageProductDependency section */
		E942AC872C274DF600A2F3D3 /* RuntimeViewerApplication */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerApplication;
		};
		E985A9CB2D9AF4FC005A573C /* RuntimeViewerCore */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerCore;
		};
		E985A9CD2D9AF505005A573C /* RuntimeViewerCore */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerCore;
		};
		E985A9D12D9AF512005A573C /* RuntimeViewerCore */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerCore;
		};
		E985A9D92D9AF7E5005A573C /* RuntimeViewerService */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerService;
		};
		E9CBCC152C13685400169ABF /* RuntimeViewerArchitectures */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerArchitectures;
		};
		E9CBCC192C13685400169ABF /* RuntimeViewerUI */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerUI;
		};
/* End XCSwiftPackageProductDependency section */
	};
	rootObject = E9432FDA2C0D614900362862 /* Project object */;
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/App/AppDelegate.swift`:

```swift
//
//  AppDelegate.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import Cocoa
import RuntimeViewerCore
import RuntimeViewerApplication

@main
class AppDelegate: NSObject, NSApplicationDelegate {
    func applicationDidFinishLaunching(_ aNotification: Notification) {
        Task {
            do {
                try await RuntimeEngineManager.shared.launchSystemRuntimeEngines()
            } catch {
                NSLog("%@", error as NSError)
            }
        }
    }

    func applicationWillTerminate(_ aNotification: Notification) {}

    func applicationSupportsSecureRestorableState(_ app: NSApplication) -> Bool {
        return true
    }

    func applicationShouldTerminateAfterLastWindowClosed(_ sender: NSApplication) -> Bool {
        return true
    }
}

extension AppDelegate: NSMenuItemValidation {
    func validateMenuItem(_ menuItem: NSMenuItem) -> Bool {
        if menuItem.action == #selector(NSDocument.save(_:)) || menuItem.action == #selector(NSDocument.saveAs(_:)) || menuItem.action == #selector(NSDocument.revertToSaved(_:)) {
            return false
        }
        return true
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/App/Document.swift`:

```swift
//
//  Document.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/10/14.
//

import AppKit

class Document: NSDocument {
    lazy var mainCoordinator = MainCoordinator(appServices: .shared)

    override init() {
        super.init()
        // Add your subclass-specific initialization here.
    }

    override class var autosavesInPlace: Bool {
        return false
    }

    override func makeWindowControllers() {
        addWindowController(mainCoordinator.windowController)
    }

    override func data(ofType typeName: String) throws -> Data {
        // Insert code here to write your document to data of the specified type, throwing an error in case of failure.
        // Alternatively, you could remove this method and override fileWrapper(ofType:), write(to:ofType:), or write(to:ofType:for:originalContentsURL:) instead.
        throw NSError(domain: NSOSStatusErrorDomain, code: unimpErr, userInfo: nil)
    }

    override func read(from data: Data, ofType typeName: String) throws {
        // Insert code here to read your document from the given data of the specified type, throwing an error in case of failure.
        // Alternatively, you could remove this method and override read(from:ofType:) instead.
        // If you do, you should also override isEntireFileLoaded to return false if the contents are lazily loaded.
        throw NSError(domain: NSOSStatusErrorDomain, code: unimpErr, userInfo: nil)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/App/RuntimeEngineManager.swift`:

```swift
//
//  RuntimeEngineManager.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 11/28/24.
//

import Foundation
import RuntimeViewerCore
import RuntimeViewerCommunication
import RuntimeViewerArchitectures

public final class RuntimeEngineManager {
    public static let shared = RuntimeEngineManager()

    @Observed
    public private(set) var systemRuntimeEngines: [RuntimeEngine] = []

    @Observed
    public private(set) var attachedRuntimeEngines: [RuntimeEngine] = []
    
    @Observed
    public private(set) var bonjourRuntimeEngines: [RuntimeEngine] = []
    
    private let browser = RuntimeNetworkBrowser()
    
    private init() {
        browser.start { [weak self] endpoint in
            guard let self else { return }
            Task { @MainActor in
                self.bonjourRuntimeEngines.append(try await .init(source: .bonjourClient(endpoint: endpoint)))
            }
        }
    }
    
    public var runtimeEngines: [RuntimeEngine] {
        systemRuntimeEngines + attachedRuntimeEngines + bonjourRuntimeEngines
    }
    
    public nonisolated func launchSystemRuntimeEngines() async throws {
        systemRuntimeEngines.append(.shared)
        systemRuntimeEngines.append(try await .macCatalystClient())
    }
    
    public func launchAttachedRuntimeEngine(name: String, identifier: String) async throws {
        attachedRuntimeEngines.append(try await RuntimeEngine(source: .remote(name: name, identifier: .init(rawValue: identifier), role: .client)))
    }
}

extension RuntimeEngineManager: ReactiveCompatible {}

extension Reactive where Base == RuntimeEngineManager {
    public var runtimeEngines: Driver<[RuntimeEngine]> {
        Driver.combineLatest(base.$systemRuntimeEngines.asDriver(), base.$attachedRuntimeEngines.asDriver(), base.$bonjourRuntimeEngines.asDriver(), resultSelector: { $0 + $1 + $2 })
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Assets.xcassets/AccentColor.colorset/Contents.json`:

```json
{
  "colors" : [
    {
      "idiom" : "universal"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Assets.xcassets/AppIcon.appiconset/Contents.json`:

```json
{
  "images" : [
    {
      "filename" : "icon_16x16.png",
      "idiom" : "mac",
      "scale" : "1x",
      "size" : "16x16"
    },
    {
      "filename" : "icon_16x16@2x.png",
      "idiom" : "mac",
      "scale" : "2x",
      "size" : "16x16"
    },
    {
      "filename" : "icon_32x32.png",
      "idiom" : "mac",
      "scale" : "1x",
      "size" : "32x32"
    },
    {
      "filename" : "icon_32x32@2x.png",
      "idiom" : "mac",
      "scale" : "2x",
      "size" : "32x32"
    },
    {
      "filename" : "icon_128x128.png",
      "idiom" : "mac",
      "scale" : "1x",
      "size" : "128x128"
    },
    {
      "filename" : "icon_128x128@2x.png",
      "idiom" : "mac",
      "scale" : "2x",
      "size" : "128x128"
    },
    {
      "filename" : "icon_256x256.png",
      "idiom" : "mac",
      "scale" : "1x",
      "size" : "256x256"
    },
    {
      "filename" : "icon_256x256@2x.png",
      "idiom" : "mac",
      "scale" : "2x",
      "size" : "256x256"
    },
    {
      "filename" : "icon_512x512.png",
      "idiom" : "mac",
      "scale" : "1x",
      "size" : "512x512"
    },
    {
      "filename" : "icon_512x512@2x.png",
      "idiom" : "mac",
      "scale" : "2x",
      "size" : "512x512"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Assets.xcassets/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Assets.xcassets/app.fill.symbolset/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  },
  "symbols" : [
    {
      "filename" : "app.fill.svg",
      "idiom" : "universal"
    }
  ]
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Assets.xcassets/app.fill.symbolset/app.fill.svg`:

```svg
<?xml version="1.0" encoding="UTF-8"?>
<svg width="3300px" height="2200px" viewBox="0 0 3300 2200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>square.and.arrow.up</title>
    <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="square.and.arrow.up">
            <g id="Notes">
                <rect id="artboard" fill="#FFFFFF" fill-rule="nonzero" x="0" y="0" width="3300" height="2200"></rect>
                <line x1="263" y1="292" x2="3036" y2="292" id="路径" stroke="#000000" stroke-width="0.5"></line>
                <text id="Weight/Scale-Variations" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="322">Weight/Scale Variations</tspan>
                </text>
                <text id="Ultralight" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="533.711" y="322">Ultralight</tspan>
                </text>
                <text id="Thin" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="843.422" y="322">Thin</tspan>
                </text>
                <text id="Light" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1138.63" y="322">Light</tspan>
                </text>
                <text id="Regular" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1426.84" y="322">Regular</tspan>
                </text>
                <text id="Medium" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1723.06" y="322">Medium</tspan>
                </text>
                <text id="Semibold" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2015.77" y="322">Semibold</tspan>
                </text>
                <text id="Bold" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2326.48" y="322">Bold</tspan>
                </text>
                <text id="Heavy" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2618.19" y="322">Heavy</tspan>
                </text>
                <text id="Black" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2917.4" y="322">Black</tspan>
                </text>
                <line x1="263" y1="1903" x2="3036" y2="1903" id="路径" stroke="#000000" stroke-width="0.5"></line>
                <g id="编组" transform="translate(264.3672, 1918.0684)" fill="#000000" fill-rule="nonzero">
                    <path d="M7.88088,15.76172 C12.18752,15.76172 15.7715,12.1875 15.7715,7.88086 C15.7715,3.57422 12.17774,0 7.8711,0 C3.57422,0 0,3.57422 0,7.88086 C0,12.1875 3.58398,15.76172 7.88086,15.76172 L7.88088,15.76172 Z M7.88088,14.277344 C4.33596,14.277344 1.50392,11.435544 1.50392,7.880864 C1.50392,4.326184 4.32618,1.484384 7.8711,1.484384 C11.42578,1.484384 14.27734,4.326184 14.27734,7.880864 C14.27734,11.435544 11.43554,14.277344 7.88086,14.277344 L7.88088,14.277344 Z M4.28712,7.880864 C4.28712,8.310552 4.589854,8.60352 5.039074,8.60352 L7.138674,8.60352 L7.138674,10.72266 C7.138674,11.162114 7.431642,11.464848 7.86133,11.464848 C8.310548,11.464848 8.603518,11.162114 8.603518,10.72266 L8.603518,8.60352 L10.722658,8.60352 C11.162112,8.60352 11.464846,8.310552 11.464846,7.880864 C11.464846,7.44141 11.162112,7.138676 10.722658,7.138676 L8.603518,7.138676 L8.603518,5.029296 C8.603518,4.580078 8.31055,4.277342 7.86133,4.277342 C7.431642,4.277342 7.138674,4.580076 7.138674,5.029296 L7.138674,7.138676 L5.039074,7.138676 C4.589856,7.138676 4.28712,7.44141 4.28712,7.880864 Z" id="形状"></path>
                </g>
                <g id="编组" transform="translate(283.254, 1915.9883)" fill="#000000" fill-rule="nonzero">
                    <path d="M9.96094,19.92188 C15.41016,19.92188 19.92188,15.4004 19.92188,9.96094 C19.92188,4.51172 15.4004,0 9.95118,0 C4.51172,0 0,4.51172 0,9.96094 C0,15.4004 4.52148,19.92188 9.96094,19.92188 Z M9.96094,18.261724 C5.35156,18.261724 1.66992,14.570324 1.66992,9.960944 C1.66992,5.351564 5.3418,1.660164 9.95116,1.660164 C14.56052,1.660164 18.2617,5.351564 18.2617,9.960944 C18.2617,14.570324 14.5703,18.261724 9.96092,18.261724 L9.96094,18.261724 Z M5.4297,9.960944 C5.4297,10.43946 5.761732,10.761726 6.259778,10.761726 L9.130878,10.761726 L9.130878,13.642586 C9.130878,14.130868 9.46291,14.472664 9.941424,14.472664 C10.4297,14.472664 10.771502,14.140632 10.771502,13.642586 L10.771502,10.761726 L13.652362,10.761726 C14.140644,10.761726 14.48244,10.43946 14.48244,9.960944 C14.48244,9.472662 14.140644,9.130866 13.652362,9.130866 L10.771502,9.130866 L10.771502,6.259766 C10.771502,5.76172 10.4297,5.419922 9.941424,5.419922 C9.462908,5.419922 9.130878,5.761718 9.130878,6.259766 L9.130878,9.130866 L6.259778,9.130866 C5.761732,9.130866 5.4297,9.472662 5.4297,9.960944 Z" id="形状"></path>
                </g>
                <g id="编组" transform="translate(307.1798, 1913.2246)" fill="#000000" fill-rule="nonzero">
                    <path d="M12.71486,25.43944 C19.67776,25.43944 25.43946,19.67772 25.43946,12.7246 C25.43946,5.7617 19.66798,0 12.70508,0 C5.75196,0 -1.42108547e-15,5.76172 -1.42108547e-15,12.7246 C-1.42108547e-15,19.67772 5.76172,25.43944 12.71484,25.43944 L12.71486,25.43944 Z M12.71486,23.623034 C6.6797,23.623034 1.82618,18.759754 1.82618,12.724594 C1.82618,6.679674 6.66994,1.826154 12.70508,1.826154 C18.75,1.826154 23.61328,6.679674 23.61328,12.724594 C23.61328,18.759754 18.75976,23.623034 12.71484,23.623034 L12.71486,23.623034 Z M6.94338,12.724594 C6.94338,13.242172 7.314474,13.6035 7.861348,13.6035 L11.806668,13.6035 L11.806668,17.55858 C11.806668,18.09569 12.177762,18.476548 12.69534,18.476548 C13.23245,18.476548 13.603544,18.105454 13.603544,17.55858 L13.603544,13.6035 L17.558624,13.6035 C18.095734,13.6035 18.476592,13.242172 18.476592,12.724594 C18.476592,12.177718 18.105498,11.806626 17.558624,11.806626 L13.603544,11.806626 L13.603544,7.861306 C13.603544,7.31443 13.23245,6.933572 12.69534,6.933572 C12.177762,6.933572 11.806668,7.314432 11.806668,7.861306 L11.806668,11.806626 L7.861348,11.806626 C7.314472,11.806626 6.94338,12.17772 6.94338,12.724594 Z" id="形状"></path>
                </g>
                <text id="Design-Variations" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1953">Design Variations</tspan>
                </text>
                <text id="Symbols-are-supported-in-up-to-nine-weights-and-three-scales." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1971">Symbols are supported in up to nine weights and three scales.</tspan>
                </text>
                <text id="For-optimal-layout-with-text-and-other-symbols,-vertically-align" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1989">For optimal layout with text and other symbols, vertically align</tspan>
                </text>
                <text id="symbols-with-the-adjacent-text." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="2007">symbols with the adjacent text.</tspan>
                </text>
                <line x1="776" y1="1919" x2="776" y2="1933" id="路径" stroke="#00AEEF" stroke-width="0.5"></line>
                <g id="编组" transform="translate(778.4902, 1918.7324)" fill="#000000" fill-rule="nonzero">
                    <path d="M0.8203116,14.423832 C1.3378896,14.423832 1.5917956,14.2285116 1.7773436,13.681636 L3.0371096,10.234376 L8.7988296,10.234376 L10.0585956,13.681636 C10.2441424,14.228512 10.4980496,14.423832 11.0058616,14.423832 C11.5234396,14.423832 11.8554716,14.111324 11.8554716,13.623042 C11.8554716,13.4570264 11.8261748,13.300776 11.7480498,13.095698 L7.1679698,0.898438 C6.9433598,0.302734 6.5429698,0 5.9179698,0 C5.3125018,0 4.9023458,0.292968 4.6875018,0.888672 L0.1074218,13.105472 C0.0292968,13.31055 -3.55271368e-16,13.4668 -3.55271368e-16,13.632816 C-3.55271368e-16,14.121098 0.3125,14.423832 0.820312,14.423832 L0.8203116,14.423832 Z M3.5156316,8.750004 L5.8886716,2.177744 L5.9374998,2.177744 L8.3105398,8.750004 L3.5156316,8.750004 Z" id="形状"></path>
                </g>
                <line x1="792.836" y1="1919" x2="792.836" y2="1933" id="路径" stroke="#00AEEF" stroke-width="0.5"></line>
                <text id="Margins" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="1953">Margins</tspan>
                </text>
                <text id="Leading-and-trailing-margins-on-the-left-and-right-side-of-each-symbol" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="1971">Leading and trailing margins on the left and right side of each symbol</tspan>
                </text>
                <text id="can-be-adjusted-by-modifying-the-x-location-of-the-margin-guidelines." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="1989">can be adjusted by modifying the x-location of the margin guidelines.</tspan>
                </text>
                <text id="Modifications-are-automatically-applied-proportionally-to-all" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="2007">Modifications are automatically applied proportionally to all</tspan>
                </text>
                <text id="scales-and-weights." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="2025">scales and weights.</tspan>
                </text>
                <g id="编组" transform="translate(1291.2481, 1914.5174)" fill="#000000" fill-rule="nonzero">
                    <path d="M0.593687825,20.3477978 L2.29290583,22.0567818 C3.15228183,22.9259218 4.13860983,22.8673278 5.06634583,21.8419378 L15.7597058,10.0548378 L14.7929098,9.07827578 L4.17766983,20.7579558 C3.82610783,21.1583458 3.49407583,21.2560018 3.02532583,20.7872526 L1.85344983,19.6251426 C1.38469983,19.1661586 1.49212183,18.8243606 1.89251223,18.4630326 L13.3671122,7.66225258 L12.3905502,6.69545658 L0.798750225,17.5841366 C-0.187577775,18.5021046 -0.265703775,19.4786686 0.593672225,20.3478166 L0.593687825,20.3477978 Z M7.00970783,2.15443778 C6.58978583,2.56459378 6.56048983,3.14076578 6.79486383,3.53139178 C7.02923983,3.89271978 7.48822383,4.12709578 8.13275383,3.96107978 C9.59759783,3.61928378 11.1210338,3.56068978 12.5468138,4.49818978 L11.9608758,5.95326778 C11.6190798,6.78334578 11.7948602,7.36928378 12.3319698,7.91615778 L14.6268898,10.2306178 C15.1151718,10.7188998 15.5253278,10.7384298 16.0917338,10.6407738 L17.1561878,10.4454614 L17.8202498,11.1192894 L17.7811874,11.6759294 C17.742125,12.1739754 17.869078,12.5548354 18.3573594,13.0333514 L19.1190774,13.7755394 C19.5975934,14.2540554 20.2128274,14.2833514 20.6815774,13.8146018 L23.5917374,10.8946818 C24.0604874,10.4259318 24.0409554,9.83022778 23.5624406,9.35171378 L22.7909566,8.58999578 C22.3124406,8.11147978 21.9413466,7.95522978 21.4628326,7.99429178 L20.8866606,8.04311998 L20.2421286,7.40835398 L20.4862686,6.28530798 C20.6132218,5.71890198 20.4569718,5.27944798 19.8710346,4.69351198 L17.6737746,2.50601198 C14.3339346,-0.814308021 9.90033463,-0.736168021 7.00971463,2.15444998 L7.00970783,2.15443778 Z M8.50384783,2.52553178 C10.9354878,0.748187779 14.2265078,1.05092178 16.4530678,3.27748578 L18.8847078,5.68958578 C19.1190838,5.92396178 19.1581458,6.10950778 19.0897858,6.45130378 L18.7675198,7.93567978 L20.2714258,9.42005578 L21.2577538,9.36146198 C21.5116598,9.35169636 21.5897858,9.3712276 21.7850978,9.56653998 L22.3612698,10.142712 L19.9198698,12.584112 L19.3436978,12.00794 C19.1483854,11.8126276 19.1190878,11.734502 19.1288538,11.47083 L19.1972132,10.494268 L17.7030732,9.00989198 L16.1796352,9.26379798 C15.8573692,9.33215738 15.7108852,9.30286038 15.4667452,9.06848558 L13.4647852,7.06652558 C13.2108792,6.83214958 13.1815812,6.66613558 13.337832,6.29504158 L14.216738,4.20520158 C12.654238,2.75012358 10.622978,2.12512158 8.59173803,2.72082558 C8.43548803,2.75988798 8.37689403,2.63293498 8.50384743,2.52551318 L8.50384783,2.52553178 Z" id="形状"></path>
                </g>
                <text id="Exporting" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1289" y="1953">Exporting</tspan>
                </text>
                <text id="Symbols-should-be-outlined-when-exporting-to-ensure-the" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1289" y="1971">Symbols should be outlined when exporting to ensure the</tspan>
                </text>
                <text id="design-is-preserved-when-submitting-to-Xcode." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1289" y="1989">design is preserved when submitting to Xcode.</tspan>
                </text>
                <text id="template-version" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2952" y="1933">Template v.5.0</tspan>
                </text>
                <text id="Requires-Xcode-15-or-greater" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2865" y="1951">Requires Xcode 15 or greater</tspan>
                </text>
                <text id="descriptive-name" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2822" y="1969">Generated from square.and.arrow.up</tspan>
                </text>
                <text id="Typeset-at-100.0-points" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2901" y="1987">Typeset at 100.0 points</tspan>
                </text>
                <text id="Small" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="726">Small</tspan>
                </text>
                <text id="Medium" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1156">Medium</tspan>
                </text>
                <text id="Large" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1586">Large</tspan>
                </text>
            </g>
            <g id="Guides" transform="translate(263, 600.785)">
                <g id="H-reference" transform="translate(76.9937, 24.756)" fill="#27AAE1" fill-rule="nonzero">
                    <path d="M0,70.459 L2.644096,70.459 L28.334446,3.3267 L29.036646,3.3267 L29.036646,0 L27.128946,0 L0,70.459 Z M10.694846,45.9791 L45.987846,45.9791 L45.237846,43.7305 L11.444846,43.7305 L10.694846,45.9791 Z M54.125946,70.459 L56.770046,70.459 L29.644546,0 L28.438946,0 L28.438946,3.3267 L54.125946,70.459 Z" id="形状"></path>
                </g>
                <line x1="0" y1="95.215" x2="2773" y2="95.215" id="Baseline-S" stroke="#27AAE1" stroke-width="0.5"></line>
                <line x1="0" y1="24.756" x2="2773" y2="24.756" id="Capline-S" stroke="#27AAE1" stroke-width="0.5"></line>
                <g id="H-reference" transform="translate(76.9937, 454.756)" fill="#27AAE1" fill-rule="nonzero">
                    <path d="M0,70.459 L2.644096,70.459 L28.334446,3.3267 L29.036646,3.3267 L29.036646,0 L27.128946,0 L0,70.459 Z M10.694846,45.9791 L45.987846,45.9791 L45.237846,43.7305 L11.444846,43.7305 L10.694846,45.9791 Z M54.125946,70.459 L56.770046,70.459 L29.644546,0 L28.438946,0 L28.438946,3.3267 L54.125946,70.459 Z" id="形状"></path>
                </g>
                <line x1="0" y1="525.215" x2="2773" y2="525.215" id="Baseline-M" stroke="#27AAE1" stroke-width="0.5"></line>
                <line x1="0" y1="454.755" x2="2773" y2="454.755" id="Capline-M" stroke="#27AAE1" stroke-width="0.5"></line>
                <g id="H-reference" transform="translate(76.9937, 884.756)" fill="#27AAE1" fill-rule="nonzero">
                    <path d="M0,70.459 L2.644096,70.459 L28.334446,3.3267 L29.036646,3.3267 L29.036646,0 L27.128946,0 L0,70.459 Z M10.694846,45.9791 L45.987846,45.9791 L45.237846,43.7305 L11.444846,43.7305 L10.694846,45.9791 Z M54.125946,70.459 L56.770046,70.459 L29.644546,0 L28.438946,0 L28.438946,3.3267 L54.125946,70.459 Z" id="形状"></path>
                </g>
                <line x1="0" y1="955.215" x2="2773" y2="955.215" id="Baseline-L" stroke="#27AAE1" stroke-width="0.5"></line>
                <line x1="0" y1="884.755" x2="2773" y2="884.755" id="Capline-L" stroke="#27AAE1" stroke-width="0.5"></line>
                <line x1="254.797" y1="1.13686838e-13" x2="254.797" y2="119.336" id="left-margin-Ultralight-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="338.625" y1="1.13686838e-13" x2="338.625" y2="119.336" id="right-margin-Ultralight-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="1142.73" y1="1.13686838e-13" x2="1142.73" y2="119.336" id="left-margin-Regular-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="1230.96" y1="1.13686838e-13" x2="1230.96" y2="119.336" id="right-margin-Regular-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="2622.99" y1="1.13686838e-13" x2="2622.99" y2="119.336" id="left-margin-Black-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="2717.81" y1="1.13686838e-13" x2="2717.81" y2="119.336" id="right-margin-Black-S" stroke="#00AEEF" stroke-width="0.5"></line>
            </g>
            <g id="Symbols" transform="translate(524, 622)" fill="#000000" fill-rule="nonzero">
                <g id="Black-S" transform="translate(2373, 0)">
                    <path d="M42.3380475,46.9436927 C42.6479014,45.9577685 42.6760831,45.0070642 42.4225925,44.0915796 C42.1690442,43.1760951 41.6690435,42.4296137 40.9225904,41.8521356 C40.1760796,41.2746575 39.2817089,40.9859184 38.2394784,40.9859184 L32.4930183,40.9859184 L43.4789283,22.140892 C43.9014511,21.4084582 43.9929766,20.626757 43.7535047,19.7957885 C43.5140905,18.96482 43.0422714,18.3380745 42.3380475,17.915552 C41.6056709,17.5493352 40.8662271,17.4859337 40.1197163,17.7253477 C39.3732632,17.9648194 38.7465172,18.4366669 38.2394784,19.1408902 L37.3521459,20.4084576 L36.7183617,19.1408902 C36.2957812,18.3521509 35.6901498,17.8451124 34.9014675,17.6197748 C34.1127275,17.3943795 33.3521403,17.4929719 32.6197059,17.915552 C31.8591765,18.3943801 31.373281,19.0281637 31.1620196,19.8169031 C30.9507582,20.6056424 31.0704653,21.3803054 31.5211409,22.140892 L34.014135,26.4084611 L25.6056775,40.9859184 L19.0563434,40.9859184 C18.1830874,40.9859184 17.4577489,41.2676193 16.880328,41.831021 C16.3028494,42.3943651 16.0141101,43.1126648 16.0141101,43.9859201 C16.0141101,44.8310227 16.3028494,45.5352461 16.880328,46.0985901 C17.4577489,46.6619918 18.1830874,46.9436927 19.0563434,46.9436927 L42.3380475,46.9436927 Z M21.0000118,54.9718213 C21.7042357,55.3943437 22.4507176,55.4858979 23.2394576,55.2464839 C24.0281976,55.0070699 24.633829,54.5352513 25.0563518,53.8310279 L27.2957976,49.9859236 C27.0422493,49.4507323 26.6126594,49.0000283 26.007028,48.6338114 C25.4013967,48.2675945 24.6901346,48.0281516 23.8732418,47.9154828 C23.056349,47.802814 22.2253798,47.8591484 21.3803342,48.084486 L19.9014467,50.9154845 C19.5070767,51.6760711 19.401446,52.4507341 19.5845546,53.2394734 C19.7676055,54.0282128 20.2394246,54.6056621 21.0000118,54.9718213 Z M53.9577417,54.9718213 C54.6901761,54.5774516 55.1479476,53.9929641 55.3310562,53.2183588 C55.5141071,52.4436959 55.3943711,51.6760711 54.9718484,50.9154845 L52.7324025,46.9436927 L55.7324067,46.9436927 C56.6056628,46.9436927 57.3662211,46.6619918 58.0140817,46.0985901 C58.662,45.5352461 58.9859591,44.8310227 58.9859591,43.9859201 C58.9859591,43.1126648 58.6761052,42.3943651 58.0563974,41.831021 C57.436632,41.2676193 56.6619684,40.9859184 55.7324067,40.9859184 L49.3521625,40.9859184 L41.9578116,28.1408954 C41.1127084,28.6197234 40.4788953,29.4295774 40.0563725,30.5704572 C39.6338497,31.7112794 39.4577793,32.9436558 39.5281613,34.2675864 C39.598601,35.5915747 39.9295984,36.7465021 40.5211534,37.7323686 L49.8591725,53.8310279 C50.2816953,54.5915568 50.8802885,55.0844901 51.6549521,55.3098277 C52.4296157,55.535223 53.1972122,55.422535 53.9577417,54.9718213 Z M16.4788909,75 C11.1267432,75 7.04222159,73.5915505 4.22532603,70.7746514 C1.40844201,67.9577524 0,63.8732513 0,58.5211483 L0,16.4788949 C0,11.1268092 1.40844201,7.0422909 4.22532603,4.22533992 C7.04222159,1.40844664 11.1267432,0 16.4788909,0 L58.5211783,0 C63.8732683,0 67.9577611,1.40844664 70.7746567,4.22533992 C73.5915522,7.0422909 75,11.1268092 75,16.4788949 L75,58.5211483 C75,63.8732513 73.5915522,67.9577524 70.7746567,70.7746514 C67.9577611,73.5915505 63.8732683,75 58.5211783,75 L16.4788909,75 Z" id="形状"></path>
                </g>
                <g id="Regular-S" transform="translate(888, 2)">
                    <path d="M43.1986811,47.7243036 C43.4936734,46.7768914 43.5221584,45.8220391 43.284136,44.8597467 C43.0461135,43.897515 42.5567676,43.1054033 41.8160983,42.4834116 C41.0754896,41.8614199 40.1276818,41.5504241 38.9726749,41.5504241 L31.8107754,41.5504241 L44.3996952,19.7953519 C44.8445827,19.0243154 44.9776542,18.224794 44.7989096,17.3967877 C44.6201651,16.5687206 44.1296652,15.9322739 43.32741,15.4874475 C42.5314106,15.1003805 41.7268171,15.0266477 40.9136295,15.266249 C40.1003812,15.5057896 39.4721332,16.0079806 39.0288856,16.7728221 L37.9495854,18.7370975 L36.7508489,16.7728221 C36.2841573,16.0064623 35.6637139,15.5038764 34.8895185,15.2650647 C34.1153231,15.0262529 33.3427068,15.1003805 32.5716697,15.4874475 C31.772512,15.9322739 31.2843505,16.5687206 31.107185,17.3967877 C30.9300196,18.224794 31.0638806,19.0243154 31.5087681,19.7953519 L34.4821048,24.9508802 L24.789266,41.5504241 L17.2223216,41.5504241 C16.3669836,41.5504241 15.6283184,41.8469649 15.0063262,42.4400465 C14.384334,43.0331889 14.0733379,43.7878572 14.0733379,44.7040514 C14.0733379,45.5328472 14.3913489,46.2434216 15.0273711,46.8357744 C15.6634539,47.4281272 16.3951041,47.7243036 17.2223216,47.7243036 L43.1986811,47.7243036 Z M19.4535311,56.7639244 C20.2230499,57.2352922 21.0210536,57.3445552 21.8475422,57.0917136 C22.6739702,56.8388112 23.3088383,56.3276313 23.7521467,55.5581739 L26.1144539,51.3415549 C25.9068599,50.9263674 25.5076759,50.5263941 24.9169017,50.1416351 C24.3261275,49.756876 23.6014923,49.4903689 22.742996,49.3421137 C21.8845605,49.1938584 20.9808467,49.2383471 20.0318546,49.4755798 L18.5170809,52.5379217 C18.101893,53.3651992 17.9684268,54.1721607 18.1166821,54.9588062 C18.2649982,55.7454517 18.7106145,56.3471577 19.4535311,56.7639244 Z M56.4501948,56.7639244 C57.221232,56.319098 57.6961228,55.6959219 57.8748674,54.8943962 C58.053612,54.0929313 57.9205405,53.3074398 57.475653,52.5379217 L54.626399,47.7243036 L58.6345774,47.7243036 C59.5227125,47.7243036 60.278171,47.4281272 60.9009528,46.8357744 C61.5237346,46.2434216 61.8351255,45.5328472 61.8351255,44.7040514 C61.8351255,43.7597367 61.5307495,42.9980534 60.9219976,42.4190017 C60.3133065,41.83995 59.5508331,41.5504241 58.6345774,41.5504241 L51.2034678,41.5504241 L42.9293799,27.2803882 C42.1005833,27.8438917 41.4867904,28.7331801 41.0880011,29.9482534 C40.6892118,31.1633875 40.5495202,32.4741191 40.6689262,33.8804483 C40.7883322,35.2867169 41.1594261,36.509625 41.7822079,37.5491729 L52.2359409,55.5581739 C52.6791885,56.2995715 53.2859665,56.7966911 54.0562748,57.0495328 C54.8265224,57.3023745 55.6244957,57.2071716 56.4501948,56.7639244 Z M16.3513745,75 C11.0351357,75 6.98085909,73.6038257 4.1885446,70.8114772 C1.39618153,68.0191347 0,63.9648645 0,58.6486667 L0,16.3513788 C0,11.0351446 1.39618153,6.98087137 4.1885446,4.18855926 C6.98085909,1.39618642 11.0351357,0 16.3513745,0 L58.6486984,0 C63.963358,0 68.0172399,1.39734039 70.8103439,4.19202118 C73.603448,6.98670197 75,11.0398212 75,16.3513788 L75,58.6486667 C75,63.9601818 73.603448,68.0132828 70.8103439,70.8079697 C68.0172399,73.6026566 63.963358,75 58.6486984,75 L16.3513745,75 Z" id="形状"></path>
                </g>
                <g id="Ultralight-S" transform="translate(0, 1)">
                    <path d="M42.6214565,47.8134634 C42.8953452,46.8736361 42.9039934,45.9262766 42.6474009,44.9713849 C42.3908084,44.0164311 41.8913241,43.2283339 41.1489479,42.6070932 C40.4066337,41.9858525 39.4596468,41.6752322 38.3079874,41.6752322 L30.9976122,41.6752322 L43.8474466,19.4285726 C44.3014894,18.6414983 44.4304986,17.8458378 44.2344741,17.0415912 C44.0383876,16.2372826 43.5172674,15.6081067 42.6711135,15.1540635 C41.9403922,14.7316992 41.1804407,14.6632269 40.3912592,14.9486467 C39.6021397,15.2341286 38.9949721,15.7126593 38.5697563,16.3842391 L37.2636082,18.5119621 L36.0809518,16.3842391 C35.7409156,15.6837702 35.1485335,15.1980171 34.3038055,14.9269799 C33.4590155,14.6560046 32.6431146,14.7316992 31.8561029,15.1540635 C31.0676653,15.6081067 30.5898478,16.2372826 30.4226504,17.0415912 C30.255453,17.8458378 30.3988758,18.6414983 30.8529186,19.4285726 L33.765296,24.6089984 L23.9533767,41.6752322 L16.1479188,41.6752322 C15.3566295,41.6752322 14.6503647,41.9779173 14.0291245,42.5832875 C13.4078222,43.1887198 13.0971711,43.9317785 13.0971711,44.8124635 C13.0971711,45.6311548 13.4081632,46.3359942 14.0301474,46.9269819 C14.6521315,47.5179695 15.3580553,47.8134634 16.1479188,47.8134634 L42.6214565,47.8134634 Z M18.5480101,57.2039557 C19.3061947,57.6305356 20.0729965,57.7079659 20.8484154,57.4362467 C21.6238343,57.1645275 22.2241516,56.6495754 22.6493673,55.8913902 L25.1424494,51.7509738 C24.9305545,51.3272456 24.543527,50.9258352 23.9813669,50.5467426 C23.4192688,50.1676501 22.7137169,49.9024092 21.8647113,49.7510202 C21.0157678,49.5996931 20.1069691,49.6451036 19.1383154,49.8872517 L17.5512422,52.8903904 C17.1274524,53.6802544 16.9912209,54.4834781 17.1425479,55.3000615 C17.2938748,56.116645 17.7623623,56.7512763 18.5480101,57.2039557 Z M56.0657807,57.2039557 C56.8528544,56.7499125 57.3444035,56.1070049 57.540428,55.275233 C57.7364525,54.4435231 57.6074434,53.6485755 57.1534005,52.8903904 L54.2041988,47.8134634 L58.3772518,47.8134634 C59.2565104,47.8134634 60.0139821,47.5179695 60.6496669,46.9269819 C61.2853517,46.3359942 61.6031941,45.6311548 61.6031941,44.8124635 C61.6031941,43.9303526 61.2856926,43.186953 60.6506898,42.5822646 C60.0157489,41.9775763 59.2579363,41.6752322 58.3772518,41.6752322 L50.7511731,41.6752322 L42.3057529,27.2730925 C41.4870623,27.8482717 40.8877988,28.7491668 40.5079626,29.9757778 C40.1281884,31.2024507 40.0060605,32.5130634 40.141579,33.9076157 C40.2770976,35.3021681 40.6626992,36.5436266 41.298384,37.6319912 L51.968701,55.8913902 C52.3939168,56.6481495 52.9928082,57.1623888 53.7653754,57.4341079 C54.5380046,57.7058891 55.3048063,57.6291717 56.0657807,57.2039557 Z M14.0321002,75 C9.50537226,75 6.03501933,73.7930008 3.62104135,71.3790024 C1.20701378,68.9649979 0,65.4946393 0,60.9679266 L0,14.0320362 C0,9.50536693 1.20701378,6.03501142 3.62104135,3.62096965 C6.03501933,1.20698988 9.50537226,0 14.0321002,0 L60.9678812,0 C65.46572,0 68.9288507,1.22865675 71.3572732,3.68597024 C73.7857577,6.14322174 75,9.59191039 75,14.0320362 L75,60.9679266 C75,65.408071 73.7857577,68.8567876 71.3572732,71.3140763 C68.9288507,73.7713588 65.46572,75 60.9678812,75 L14.0321002,75 Z" id="形状"></path>
                </g>
            </g>
        </g>
    </g>
</svg>
```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Assets.xcassets/app.symbolset/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  },
  "symbols" : [
    {
      "filename" : "app.svg",
      "idiom" : "universal"
    }
  ]
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Assets.xcassets/app.symbolset/app.svg`:

```svg
<?xml version="1.0" encoding="UTF-8"?>
<svg width="3300px" height="2200px" viewBox="0 0 3300 2200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>square.and.arrow.up</title>
    <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="square.and.arrow.up">
            <g id="Notes">
                <rect id="artboard" fill="#FFFFFF" fill-rule="nonzero" x="0" y="0" width="3300" height="2200"></rect>
                <line x1="263" y1="292" x2="3036" y2="292" id="路径" stroke="#000000" stroke-width="0.5"></line>
                <text id="Weight/Scale-Variations" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="322">Weight/Scale Variations</tspan>
                </text>
                <text id="Ultralight" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="533.711" y="322">Ultralight</tspan>
                </text>
                <text id="Thin" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="843.422" y="322">Thin</tspan>
                </text>
                <text id="Light" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1138.63" y="322">Light</tspan>
                </text>
                <text id="Regular" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1426.84" y="322">Regular</tspan>
                </text>
                <text id="Medium" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1723.06" y="322">Medium</tspan>
                </text>
                <text id="Semibold" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2015.77" y="322">Semibold</tspan>
                </text>
                <text id="Bold" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2326.48" y="322">Bold</tspan>
                </text>
                <text id="Heavy" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2618.19" y="322">Heavy</tspan>
                </text>
                <text id="Black" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2917.4" y="322">Black</tspan>
                </text>
                <line x1="263" y1="1903" x2="3036" y2="1903" id="路径" stroke="#000000" stroke-width="0.5"></line>
                <g id="编组" transform="translate(264.3672, 1918.0684)" fill="#000000" fill-rule="nonzero">
                    <path d="M7.88088,15.76172 C12.18752,15.76172 15.7715,12.1875 15.7715,7.88086 C15.7715,3.57422 12.17774,0 7.8711,0 C3.57422,0 0,3.57422 0,7.88086 C0,12.1875 3.58398,15.76172 7.88086,15.76172 L7.88088,15.76172 Z M7.88088,14.277344 C4.33596,14.277344 1.50392,11.435544 1.50392,7.880864 C1.50392,4.326184 4.32618,1.484384 7.8711,1.484384 C11.42578,1.484384 14.27734,4.326184 14.27734,7.880864 C14.27734,11.435544 11.43554,14.277344 7.88086,14.277344 L7.88088,14.277344 Z M4.28712,7.880864 C4.28712,8.310552 4.589854,8.60352 5.039074,8.60352 L7.138674,8.60352 L7.138674,10.72266 C7.138674,11.162114 7.431642,11.464848 7.86133,11.464848 C8.310548,11.464848 8.603518,11.162114 8.603518,10.72266 L8.603518,8.60352 L10.722658,8.60352 C11.162112,8.60352 11.464846,8.310552 11.464846,7.880864 C11.464846,7.44141 11.162112,7.138676 10.722658,7.138676 L8.603518,7.138676 L8.603518,5.029296 C8.603518,4.580078 8.31055,4.277342 7.86133,4.277342 C7.431642,4.277342 7.138674,4.580076 7.138674,5.029296 L7.138674,7.138676 L5.039074,7.138676 C4.589856,7.138676 4.28712,7.44141 4.28712,7.880864 Z" id="形状"></path>
                </g>
                <g id="编组" transform="translate(283.254, 1915.9883)" fill="#000000" fill-rule="nonzero">
                    <path d="M9.96094,19.92188 C15.41016,19.92188 19.92188,15.4004 19.92188,9.96094 C19.92188,4.51172 15.4004,0 9.95118,0 C4.51172,0 0,4.51172 0,9.96094 C0,15.4004 4.52148,19.92188 9.96094,19.92188 Z M9.96094,18.261724 C5.35156,18.261724 1.66992,14.570324 1.66992,9.960944 C1.66992,5.351564 5.3418,1.660164 9.95116,1.660164 C14.56052,1.660164 18.2617,5.351564 18.2617,9.960944 C18.2617,14.570324 14.5703,18.261724 9.96092,18.261724 L9.96094,18.261724 Z M5.4297,9.960944 C5.4297,10.43946 5.761732,10.761726 6.259778,10.761726 L9.130878,10.761726 L9.130878,13.642586 C9.130878,14.130868 9.46291,14.472664 9.941424,14.472664 C10.4297,14.472664 10.771502,14.140632 10.771502,13.642586 L10.771502,10.761726 L13.652362,10.761726 C14.140644,10.761726 14.48244,10.43946 14.48244,9.960944 C14.48244,9.472662 14.140644,9.130866 13.652362,9.130866 L10.771502,9.130866 L10.771502,6.259766 C10.771502,5.76172 10.4297,5.419922 9.941424,5.419922 C9.462908,5.419922 9.130878,5.761718 9.130878,6.259766 L9.130878,9.130866 L6.259778,9.130866 C5.761732,9.130866 5.4297,9.472662 5.4297,9.960944 Z" id="形状"></path>
                </g>
                <g id="编组" transform="translate(307.1798, 1913.2246)" fill="#000000" fill-rule="nonzero">
                    <path d="M12.71486,25.43944 C19.67776,25.43944 25.43946,19.67772 25.43946,12.7246 C25.43946,5.7617 19.66798,0 12.70508,0 C5.75196,0 -1.42108547e-15,5.76172 -1.42108547e-15,12.7246 C-1.42108547e-15,19.67772 5.76172,25.43944 12.71484,25.43944 L12.71486,25.43944 Z M12.71486,23.623034 C6.6797,23.623034 1.82618,18.759754 1.82618,12.724594 C1.82618,6.679674 6.66994,1.826154 12.70508,1.826154 C18.75,1.826154 23.61328,6.679674 23.61328,12.724594 C23.61328,18.759754 18.75976,23.623034 12.71484,23.623034 L12.71486,23.623034 Z M6.94338,12.724594 C6.94338,13.242172 7.314474,13.6035 7.861348,13.6035 L11.806668,13.6035 L11.806668,17.55858 C11.806668,18.09569 12.177762,18.476548 12.69534,18.476548 C13.23245,18.476548 13.603544,18.105454 13.603544,17.55858 L13.603544,13.6035 L17.558624,13.6035 C18.095734,13.6035 18.476592,13.242172 18.476592,12.724594 C18.476592,12.177718 18.105498,11.806626 17.558624,11.806626 L13.603544,11.806626 L13.603544,7.861306 C13.603544,7.31443 13.23245,6.933572 12.69534,6.933572 C12.177762,6.933572 11.806668,7.314432 11.806668,7.861306 L11.806668,11.806626 L7.861348,11.806626 C7.314472,11.806626 6.94338,12.17772 6.94338,12.724594 Z" id="形状"></path>
                </g>
                <text id="Design-Variations" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1953">Design Variations</tspan>
                </text>
                <text id="Symbols-are-supported-in-up-to-nine-weights-and-three-scales." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1971">Symbols are supported in up to nine weights and three scales.</tspan>
                </text>
                <text id="For-optimal-layout-with-text-and-other-symbols,-vertically-align" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1989">For optimal layout with text and other symbols, vertically align</tspan>
                </text>
                <text id="symbols-with-the-adjacent-text." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="2007">symbols with the adjacent text.</tspan>
                </text>
                <line x1="776" y1="1919" x2="776" y2="1933" id="路径" stroke="#00AEEF" stroke-width="0.5"></line>
                <g id="编组" transform="translate(778.4902, 1918.7324)" fill="#000000" fill-rule="nonzero">
                    <path d="M0.8203116,14.423832 C1.3378896,14.423832 1.5917956,14.2285116 1.7773436,13.681636 L3.0371096,10.234376 L8.7988296,10.234376 L10.0585956,13.681636 C10.2441424,14.228512 10.4980496,14.423832 11.0058616,14.423832 C11.5234396,14.423832 11.8554716,14.111324 11.8554716,13.623042 C11.8554716,13.4570264 11.8261748,13.300776 11.7480498,13.095698 L7.1679698,0.898438 C6.9433598,0.302734 6.5429698,0 5.9179698,0 C5.3125018,0 4.9023458,0.292968 4.6875018,0.888672 L0.1074218,13.105472 C0.0292968,13.31055 -3.55271368e-16,13.4668 -3.55271368e-16,13.632816 C-3.55271368e-16,14.121098 0.3125,14.423832 0.820312,14.423832 L0.8203116,14.423832 Z M3.5156316,8.750004 L5.8886716,2.177744 L5.9374998,2.177744 L8.3105398,8.750004 L3.5156316,8.750004 Z" id="形状"></path>
                </g>
                <line x1="792.836" y1="1919" x2="792.836" y2="1933" id="路径" stroke="#00AEEF" stroke-width="0.5"></line>
                <text id="Margins" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="1953">Margins</tspan>
                </text>
                <text id="Leading-and-trailing-margins-on-the-left-and-right-side-of-each-symbol" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="1971">Leading and trailing margins on the left and right side of each symbol</tspan>
                </text>
                <text id="can-be-adjusted-by-modifying-the-x-location-of-the-margin-guidelines." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="1989">can be adjusted by modifying the x-location of the margin guidelines.</tspan>
                </text>
                <text id="Modifications-are-automatically-applied-proportionally-to-all" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="2007">Modifications are automatically applied proportionally to all</tspan>
                </text>
                <text id="scales-and-weights." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="776" y="2025">scales and weights.</tspan>
                </text>
                <g id="编组" transform="translate(1291.2481, 1914.5174)" fill="#000000" fill-rule="nonzero">
                    <path d="M0.593687825,20.3477978 L2.29290583,22.0567818 C3.15228183,22.9259218 4.13860983,22.8673278 5.06634583,21.8419378 L15.7597058,10.0548378 L14.7929098,9.07827578 L4.17766983,20.7579558 C3.82610783,21.1583458 3.49407583,21.2560018 3.02532583,20.7872526 L1.85344983,19.6251426 C1.38469983,19.1661586 1.49212183,18.8243606 1.89251223,18.4630326 L13.3671122,7.66225258 L12.3905502,6.69545658 L0.798750225,17.5841366 C-0.187577775,18.5021046 -0.265703775,19.4786686 0.593672225,20.3478166 L0.593687825,20.3477978 Z M7.00970783,2.15443778 C6.58978583,2.56459378 6.56048983,3.14076578 6.79486383,3.53139178 C7.02923983,3.89271978 7.48822383,4.12709578 8.13275383,3.96107978 C9.59759783,3.61928378 11.1210338,3.56068978 12.5468138,4.49818978 L11.9608758,5.95326778 C11.6190798,6.78334578 11.7948602,7.36928378 12.3319698,7.91615778 L14.6268898,10.2306178 C15.1151718,10.7188998 15.5253278,10.7384298 16.0917338,10.6407738 L17.1561878,10.4454614 L17.8202498,11.1192894 L17.7811874,11.6759294 C17.742125,12.1739754 17.869078,12.5548354 18.3573594,13.0333514 L19.1190774,13.7755394 C19.5975934,14.2540554 20.2128274,14.2833514 20.6815774,13.8146018 L23.5917374,10.8946818 C24.0604874,10.4259318 24.0409554,9.83022778 23.5624406,9.35171378 L22.7909566,8.58999578 C22.3124406,8.11147978 21.9413466,7.95522978 21.4628326,7.99429178 L20.8866606,8.04311998 L20.2421286,7.40835398 L20.4862686,6.28530798 C20.6132218,5.71890198 20.4569718,5.27944798 19.8710346,4.69351198 L17.6737746,2.50601198 C14.3339346,-0.814308021 9.90033463,-0.736168021 7.00971463,2.15444998 L7.00970783,2.15443778 Z M8.50384783,2.52553178 C10.9354878,0.748187779 14.2265078,1.05092178 16.4530678,3.27748578 L18.8847078,5.68958578 C19.1190838,5.92396178 19.1581458,6.10950778 19.0897858,6.45130378 L18.7675198,7.93567978 L20.2714258,9.42005578 L21.2577538,9.36146198 C21.5116598,9.35169636 21.5897858,9.3712276 21.7850978,9.56653998 L22.3612698,10.142712 L19.9198698,12.584112 L19.3436978,12.00794 C19.1483854,11.8126276 19.1190878,11.734502 19.1288538,11.47083 L19.1972132,10.494268 L17.7030732,9.00989198 L16.1796352,9.26379798 C15.8573692,9.33215738 15.7108852,9.30286038 15.4667452,9.06848558 L13.4647852,7.06652558 C13.2108792,6.83214958 13.1815812,6.66613558 13.337832,6.29504158 L14.216738,4.20520158 C12.654238,2.75012358 10.622978,2.12512158 8.59173803,2.72082558 C8.43548803,2.75988798 8.37689403,2.63293498 8.50384743,2.52551318 L8.50384783,2.52553178 Z" id="形状"></path>
                </g>
                <text id="Exporting" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1289" y="1953">Exporting</tspan>
                </text>
                <text id="Symbols-should-be-outlined-when-exporting-to-ensure-the" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1289" y="1971">Symbols should be outlined when exporting to ensure the</tspan>
                </text>
                <text id="design-is-preserved-when-submitting-to-Xcode." fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="1289" y="1989">design is preserved when submitting to Xcode.</tspan>
                </text>
                <text id="template-version" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2952" y="1933">Template v.5.0</tspan>
                </text>
                <text id="Requires-Xcode-15-or-greater" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2865" y="1951">Requires Xcode 15 or greater</tspan>
                </text>
                <text id="descriptive-name" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2822" y="1969">Generated from square.and.arrow.up</tspan>
                </text>
                <text id="Typeset-at-100.0-points" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="2901" y="1987">Typeset at 100.0 points</tspan>
                </text>
                <text id="Small" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="726">Small</tspan>
                </text>
                <text id="Medium" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1156">Medium</tspan>
                </text>
                <text id="Large" fill="#000000" fill-rule="nonzero" font-family="Helvetica" font-size="13" font-weight="normal">
                    <tspan x="263" y="1586">Large</tspan>
                </text>
            </g>
            <g id="Guides" transform="translate(263, 600.785)">
                <g id="H-reference" transform="translate(76.9937, 24.756)" fill="#27AAE1" fill-rule="nonzero">
                    <path d="M0,70.459 L2.644096,70.459 L28.334446,3.3267 L29.036646,3.3267 L29.036646,0 L27.128946,0 L0,70.459 Z M10.694846,45.9791 L45.987846,45.9791 L45.237846,43.7305 L11.444846,43.7305 L10.694846,45.9791 Z M54.125946,70.459 L56.770046,70.459 L29.644546,0 L28.438946,0 L28.438946,3.3267 L54.125946,70.459 Z" id="形状"></path>
                </g>
                <line x1="0" y1="95.215" x2="2773" y2="95.215" id="Baseline-S" stroke="#27AAE1" stroke-width="0.5"></line>
                <line x1="0" y1="24.756" x2="2773" y2="24.756" id="Capline-S" stroke="#27AAE1" stroke-width="0.5"></line>
                <g id="H-reference" transform="translate(76.9937, 454.756)" fill="#27AAE1" fill-rule="nonzero">
                    <path d="M0,70.459 L2.644096,70.459 L28.334446,3.3267 L29.036646,3.3267 L29.036646,0 L27.128946,0 L0,70.459 Z M10.694846,45.9791 L45.987846,45.9791 L45.237846,43.7305 L11.444846,43.7305 L10.694846,45.9791 Z M54.125946,70.459 L56.770046,70.459 L29.644546,0 L28.438946,0 L28.438946,3.3267 L54.125946,70.459 Z" id="形状"></path>
                </g>
                <line x1="0" y1="525.215" x2="2773" y2="525.215" id="Baseline-M" stroke="#27AAE1" stroke-width="0.5"></line>
                <line x1="0" y1="454.755" x2="2773" y2="454.755" id="Capline-M" stroke="#27AAE1" stroke-width="0.5"></line>
                <g id="H-reference" transform="translate(76.9937, 884.756)" fill="#27AAE1" fill-rule="nonzero">
                    <path d="M0,70.459 L2.644096,70.459 L28.334446,3.3267 L29.036646,3.3267 L29.036646,0 L27.128946,0 L0,70.459 Z M10.694846,45.9791 L45.987846,45.9791 L45.237846,43.7305 L11.444846,43.7305 L10.694846,45.9791 Z M54.125946,70.459 L56.770046,70.459 L29.644546,0 L28.438946,0 L28.438946,3.3267 L54.125946,70.459 Z" id="形状"></path>
                </g>
                <line x1="0" y1="955.215" x2="2773" y2="955.215" id="Baseline-L" stroke="#27AAE1" stroke-width="0.5"></line>
                <line x1="0" y1="884.755" x2="2773" y2="884.755" id="Capline-L" stroke="#27AAE1" stroke-width="0.5"></line>
                <line x1="254.797" y1="1.13686838e-13" x2="254.797" y2="119.336" id="left-margin-Ultralight-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="338.625" y1="1.13686838e-13" x2="338.625" y2="119.336" id="right-margin-Ultralight-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="1142.73" y1="1.13686838e-13" x2="1142.73" y2="119.336" id="left-margin-Regular-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="1230.96" y1="1.13686838e-13" x2="1230.96" y2="119.336" id="right-margin-Regular-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="2622.99" y1="1.13686838e-13" x2="2622.99" y2="119.336" id="left-margin-Black-S" stroke="#00AEEF" stroke-width="0.5"></line>
                <line x1="2717.81" y1="1.13686838e-13" x2="2717.81" y2="119.336" id="right-margin-Black-S" stroke="#00AEEF" stroke-width="0.5"></line>
            </g>
            <g id="Symbols" transform="translate(521, 623)" fill="#000000" fill-rule="nonzero">
                <g id="Black-S" transform="translate(2375, 0)">
                    <path d="M42.3380475,46.9436927 C42.6479014,45.9577685 42.6760831,45.0070642 42.4225925,44.0915796 C42.1690442,43.1760951 41.6690435,42.4296137 40.9225904,41.8521356 C40.1760796,41.2746575 39.2817089,40.9859184 38.2394784,40.9859184 L32.4930183,40.9859184 L43.4789283,22.140892 C43.9014511,21.4084582 43.9929766,20.626757 43.7535047,19.7957885 C43.5140905,18.96482 43.0422714,18.3380745 42.3380475,17.915552 C41.6056709,17.5493352 40.8662271,17.4859337 40.1197163,17.7253477 C39.3732632,17.9648194 38.7465172,18.4366669 38.2394784,19.1408902 L37.3521459,20.4084576 L36.7183617,19.1408902 C36.2957812,18.3521509 35.6901498,17.8451124 34.9014675,17.6197748 C34.1127275,17.3943795 33.3521403,17.4929719 32.6197059,17.915552 C31.8591765,18.3943801 31.373281,19.0281637 31.1620196,19.8169031 C30.9507582,20.6056424 31.0704653,21.3803054 31.5211409,22.140892 L34.014135,26.4084611 L25.6056775,40.9859184 L19.0563434,40.9859184 C18.1830874,40.9859184 17.4577489,41.2676193 16.880328,41.831021 C16.3028494,42.3943651 16.0141101,43.1126648 16.0141101,43.9859201 C16.0141101,44.8310227 16.3028494,45.5352461 16.880328,46.0985901 C17.4577489,46.6619918 18.1830874,46.9436927 19.0563434,46.9436927 L42.3380475,46.9436927 Z M21.0000118,54.9718213 C21.7042357,55.3943437 22.4507176,55.4858979 23.2394576,55.2464839 C24.0281976,55.0070699 24.633829,54.5352513 25.0563518,53.8310279 L27.2957976,49.9859236 C27.0422493,49.4507323 26.6126594,49.0000283 26.007028,48.6338114 C25.4013967,48.2675945 24.6901346,48.0281516 23.8732418,47.9154828 C23.056349,47.802814 22.2253798,47.8591484 21.3803342,48.084486 L19.9014467,50.9154845 C19.5070767,51.6760711 19.401446,52.4507341 19.5845546,53.2394734 C19.7676055,54.0282128 20.2394246,54.6056621 21.0000118,54.9718213 Z M53.9577417,54.9718213 C54.6901761,54.5774516 55.1479476,53.9929641 55.3310562,53.2183588 C55.5141071,52.4436959 55.3943711,51.6760711 54.9718484,50.9154845 L52.7324025,46.9436927 L55.7324067,46.9436927 C56.6056628,46.9436927 57.3662211,46.6619918 58.0140817,46.0985901 C58.662,45.5352461 58.9859591,44.8310227 58.9859591,43.9859201 C58.9859591,43.1126648 58.6761052,42.3943651 58.0563974,41.831021 C57.436632,41.2676193 56.6619684,40.9859184 55.7324067,40.9859184 L49.3521625,40.9859184 L41.9578116,28.1408954 C41.1127084,28.6197234 40.4788953,29.4295774 40.0563725,30.5704572 C39.6338497,31.7112794 39.4577793,32.9436558 39.5281613,34.2675864 C39.598601,35.5915747 39.9295984,36.7465021 40.5211534,37.7323686 L49.8591725,53.8310279 C50.2816953,54.5915568 50.8802885,55.0844901 51.6549521,55.3098277 C52.4296157,55.535223 53.1972122,55.422535 53.9577417,54.9718213 Z M16.4788909,75 C11.1267432,75 7.04222159,73.5915505 4.22532603,70.7746514 C1.40844201,67.9577524 0,63.8732513 0,58.5211483 L0,16.4788949 C0,11.1268092 1.40844201,7.0422909 4.22532603,4.22533992 C7.04222159,1.40844664 11.1267432,0 16.4788909,0 L58.5211783,0 C63.8732683,0 67.9577611,1.40844664 70.7746567,4.22533992 C73.5915522,7.0422909 75,11.1268092 75,16.4788949 L75,58.5211483 C75,63.8732513 73.5915522,67.9577524 70.7746567,70.7746514 C67.9577611,73.5915505 63.8732683,75 58.5211783,75 L16.4788909,75 Z M58.5211783,62.7464883 C60.0986583,62.7464883 61.1338507,62.683107 61.6267555,62.5563445 C62.1197179,62.429582 62.4296007,62.1197226 62.5564037,61.6267663 C62.683149,61.1338099 62.7465216,60.098604 62.7465216,58.5211483 L62.7465216,16.4788949 C62.7465216,14.9014162 62.683149,13.8661958 62.5564037,13.3732337 C62.4296007,12.8802717 62.1197179,12.570418 61.6267555,12.4436728 C61.1338507,12.3169276 60.0986583,12.253555 58.5211783,12.253555 L16.4788909,12.253555 C14.901411,12.253555 13.8661897,12.3169276 13.3732272,12.4436728 C12.8802647,12.570418 12.5704109,12.8802717 12.4436656,13.3732337 C12.3169202,13.8661958 12.2535476,14.9014162 12.2535476,16.4788949 L12.2535476,58.5211483 C12.2535476,60.098604 12.3169202,61.1338099 12.4436656,61.6267663 C12.5704109,62.1197226 12.8802647,62.429582 13.3732272,62.5563445 C13.8661897,62.683107 14.901411,62.7464883 16.4788909,62.7464883 L58.5211783,62.7464883 Z" id="形状"></path>
                </g>
                <g id="Regular-S" transform="translate(891, 0)">
                    <path d="M43.2316455,47.7192089 C43.5278654,46.7713412 43.5574692,45.8160725 43.3204569,44.8534029 C43.0835053,43.8906727 42.5947697,43.0983159 41.8542504,42.4763327 C41.113731,41.8542889 40.1658637,41.5432669 39.0106486,41.5432669 L31.8572386,41.5432669 L44.431327,19.8163193 C44.8756265,19.0461958 45.0089042,18.2464381 44.8311601,17.4170463 C44.6534161,16.5876544 44.1646805,15.9508087 43.3649536,15.506509 C42.5651659,15.1214168 41.7579774,15.0473467 40.9433878,15.2842984 C40.128859,15.5213109 39.4994145,16.0248788 39.0550543,16.7950024 L37.9887719,18.7499454 L36.7890905,16.7950024 C36.3151872,16.0248788 35.6931436,15.5213109 34.9229598,15.2842984 C34.1528366,15.0473467 33.3827134,15.1214168 32.6125902,15.506509 C31.8128026,15.9508087 31.3240368,16.5876544 31.1462927,17.4170463 C30.9686093,18.2464381 31.1019174,19.0461958 31.5462169,19.8163193 L34.5231266,24.9703841 L24.8370457,41.5432669 L17.2838026,41.5432669 C16.4248073,41.5432669 15.684288,41.8394566 15.0622444,42.431836 C14.4402008,43.0242761 14.129179,43.7796281 14.129179,44.697892 C14.129179,45.5272838 14.4476018,46.2381694 15.0844472,46.8305488 C15.7212927,47.4229889 16.4544111,47.7192089 17.2838026,47.7192089 L43.2316455,47.7192089 Z M19.5053607,56.738754 C20.2754839,57.2126575 21.0752412,57.3237324 21.9046326,57.0719787 C22.734024,56.8202251 23.3708695,56.3092561 23.815169,55.5390719 L26.1700352,51.318164 C25.9626873,50.9034681 25.5627935,50.5035741 24.9703537,50.1184819 C24.3779746,49.7333898 23.6522875,49.4668039 22.7932923,49.3187243 C21.9342364,49.1705839 21.0307748,49.21502 20.0829076,49.4520324 L18.5722954,52.517755 C18.1575997,53.3471468 18.0242916,54.1543055 18.1723712,54.9392309 C18.3205115,55.724217 18.7648413,56.324058 19.5053607,56.738754 Z M56.4721831,56.738754 C57.2423063,56.2944542 57.7162399,55.6724104 57.893984,54.8726224 C58.0716674,54.0728343 57.9383593,53.2878786 57.4940598,52.517755 L54.6504581,47.7192089 L58.6493356,47.7192089 C59.5379346,47.7192089 60.2932559,47.4229889 60.9152994,46.8305488 C61.537343,46.2381694 61.8483648,45.5272838 61.8483648,44.697892 C61.8483648,43.7500243 61.5447439,42.9872713 60.9375023,42.4096332 C60.3302606,41.8320557 59.5675384,41.5432669 58.6493356,41.5432669 L51.2293095,41.5432669 L42.9650294,27.2807547 C42.135638,27.843591 41.5210257,28.7322207 41.1211926,29.946644 C40.7212988,31.1611279 40.5805898,32.4718545 40.6990656,33.8788239 C40.8175414,35.2857932 41.1878011,36.5076477 41.8098447,37.5443875 L52.2511862,55.5390719 C52.6954857,56.2795917 53.3027274,56.7757587 54.0729112,57.027573 C54.8430344,57.2793267 55.6427917,57.1830537 56.4721831,56.738754 Z M16.4840453,75 C11.1226655,75 7.03497663,73.5930094 4.2209787,70.7790283 C1.4069929,67.9650472 0,63.8773655 0,58.5159831 L0,16.4839805 C0,11.1225981 1.4069929,7.03490725 4.2209787,4.22090795 C7.03497663,1.40696932 11.1226655,0 16.4840453,0 L58.5160275,0 C63.8774073,0 67.9650658,1.40696932 70.7790031,4.22090795 C73.593001,7.03490725 75,11.1225981 75,16.4839805 L75,58.5159831 C75,63.8773655 73.593001,67.9650472 70.7790031,70.7790283 C67.9650658,73.5930094 63.8774073,75 58.5160275,75 L16.4840453,75 Z M58.5160275,68.3353041 C61.2411534,68.3353041 63.2923988,68.0687182 64.6697637,67.5355464 C66.0471285,67.0023685 67.0023967,66.0470938 67.5355682,64.6697222 C68.0687398,63.2923567 68.3353255,61.2411104 68.3353255,58.5159831 L68.3353255,16.4839805 C68.3353255,13.7588532 68.0687398,11.7076069 67.5355682,10.3302414 C67.0023967,8.95287584 66.0471285,7.99760719 64.6697637,7.4644354 C63.2923988,6.93126361 61.2411534,6.66467771 58.5160275,6.66467771 L16.4840453,6.66467771 C13.7589194,6.66467771 11.707674,6.93126361 10.3303091,7.4644354 C8.95294429,7.99760719 7.9976761,8.95287584 7.46450457,10.3302414 C6.93127238,11.7076069 6.66465628,13.7588532 6.66465628,16.4839805 L6.66465628,58.5159831 C6.66465628,61.2411104 6.93127238,63.2923567 7.46450457,64.6697222 C7.9976761,66.0470938 8.95294429,67.0023685 10.3303091,67.5355464 C11.707674,68.0687182 13.7589194,68.3353041 16.4840453,68.3353041 L58.5160275,68.3353041 Z" id="形状"></path>
                </g>
                <g id="Ultralight-S">
                    <path d="M42.3105762,48 C42.5811025,47.0625553 42.5886137,46.117555 42.3331098,45.1649992 C42.0776059,44.2124435 41.5815897,43.4262025 40.8450613,42.8062764 C40.1085328,42.1864122 39.1690788,41.8764801 38.0266993,41.8764801 L30.7667253,41.8764801 L43.5280369,19.6503641 C43.9790167,18.8641541 44.1067994,18.0703576 43.9113851,17.2689746 C43.7159708,16.4676535 43.1973903,15.8401719 42.3556434,15.3865296 C41.6341374,14.9631715 40.8825865,14.8951406 40.1009908,15.1824371 C39.3193952,15.4697335 38.7181606,15.9460114 38.2972872,16.6112708 L36.9895998,18.7431415 L35.8171139,16.6112708 C35.4864365,15.9157892 34.9002243,15.4319558 34.0584775,15.1597704 C33.2167307,14.8875851 32.4050594,14.9631715 31.6234638,15.3865296 C30.8418681,15.8401719 30.3683855,16.4676535 30.203016,17.2689746 C30.0377081,18.0703576 30.1805132,18.8641541 30.6314314,19.6503641 L33.5173941,24.8213282 L23.7772468,41.8764801 L16.0212567,41.8764801 C15.2395994,41.8764801 14.5406577,42.1788567 13.9244316,42.7836098 C13.3081439,43.3884248 13,44.1293015 13,45.0062399 C13,45.822734 13.3081439,46.5258021 13.9244316,47.1154441 C14.5406577,47.705148 15.2395994,48 16.0212567,48 L42.3105762,48 Z M18.4580026,57.6092064 C19.2099521,58.0372348 19.9694167,58.113655 20.7363966,57.838467 C21.5033764,57.5633417 22.0974147,57.0436153 22.5185113,56.2792878 L25,52.1060107 C24.7894517,51.6779823 24.405931,51.2729018 23.8494378,50.8907694 C23.2930063,50.5085743 22.5936939,50.2410565 21.7515007,50.0882161 C20.9093074,49.935313 20.0069619,49.9811777 19.0444641,50.2258101 L17.4654441,53.2525019 C17.0443475,54.047385 16.9089818,54.8575772 17.059347,55.6830785 C17.2097123,56.5085797 17.6759308,57.1506224 18.4580026,57.6092064 Z M56.3338897,56.6170247 C57.1388952,56.1676153 57.6420316,55.5309315 57.8432989,54.7069734 C58.0445661,53.8830152 57.9129878,53.0965181 57.448564,52.347482 L54.4297456,47.3139923 L58.7024893,47.3139923 C59.6004557,47.3139923 60.3745166,47.0218517 61.0246719,46.4375703 C61.6748906,45.8533504 62,45.1567474 62,44.3477614 C62,43.4788868 61.6748906,42.7448229 61.0246719,42.1455694 C60.3745166,41.5463773 59.6004557,41.2467813 58.7024893,41.2467813 L50.8999596,41.2467813 L42.2614479,27 C41.4254343,27.5693092 40.8139281,28.4606726 40.4269294,29.6740903 C40.0398673,30.8875693 39.9159934,32.1834257 40.0553079,33.5616596 C40.1946858,34.939832 40.5894841,36.1682525 41.2397028,37.246921 L52.15398,55.3137129 C52.5874592,56.062749 53.1989654,56.5720776 53.9884986,56.8416987 C54.7780318,57.1113812 55.5598288,57.0364898 56.3338897,56.6170247 Z M13.909071,75 C9.42425985,75 5.98485994,73.8030305 3.59087128,71.4090915 C1.19695709,69.0151525 0,65.5757588 0,61.0909104 L0,13.9090896 C0,9.4242164 1.19695709,5.9848165 3.59087128,3.5908899 C5.98485994,1.1969633 9.42425985,0 13.909071,0 L61.0909104,0 C65.545498,0 68.9773265,1.21967749 71.3863959,3.65903246 C73.7954653,6.0984495 75,9.51513522 75,13.9090896 L75,61.0909104 C75,65.4848462 73.7954653,68.9015133 71.3863959,71.3409117 C68.9773265,73.7803039 65.545498,75 61.0909104,75 L13.909071,75 Z M60.9706744,73 C63.4730523,73 65.6286734,72.5176221 67.4375379,71.5528663 C69.2464642,70.5881082 70.6257727,69.2088069 71.5754636,67.4149623 C72.5251545,65.6211217 73,63.473035 73,60.9707024 L73,14.0293161 C73,11.5269403 72.5251545,9.37885363 71.5754636,7.58505618 C70.6257727,5.79119697 69.2464642,4.41188948 67.4375379,3.44713369 C65.6286734,2.4823779 63.4730523,2 60.9706744,2 L14.0292329,2 C11.4967856,2 9.33363162,2.47484508 7.53977102,3.42453525 C5.74591041,4.37422541 4.37413465,5.74596922 3.42444375,7.53976668 C2.47481458,9.33362588 2,11.496809 2,14.0293161 L2,60.9707024 C2,63.5031848 2.47481458,65.6663463 3.42444375,67.460187 C4.37413465,69.2540302 5.74591041,70.6257925 7.53977102,71.575474 C9.33363162,72.525158 11.4967856,73 14.0292329,73 L60.9706744,73 Z" id="形状"></path>
                </g>
            </g>
        </g>
    </g>
</svg>
```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Assets.xcassets/inject.symbolset/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  },
  "symbols" : [
    {
      "filename" : "syringe.svg",
      "idiom" : "universal"
    }
  ]
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Assets.xcassets/inject.symbolset/syringe.svg`:

```svg
<?xml version="1.0" encoding="UTF-8"?>
<!--Generator: Apple Native CoreSVG 341-->
<!DOCTYPE svg
PUBLIC "-//W3C//DTD SVG 1.1//EN"
       "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 3300 2200">
 <!--glyph: "100837", point size: 100.0, font version: "20.0d10e1", template writer version: "138.0.0"-->
 <style>.defaults {-sfsymbols-wiggle-style:linear;-sfsymbols-wiggle-angle:135}

.monochrome-0 {-sfsymbols-motion-group:0;-sfsymbols-layer-tags:syringe}

.multicolor-0:tintColor {-sfsymbols-motion-group:0;-sfsymbols-layer-tags:syringe}

.hierarchical-0:primary {-sfsymbols-motion-group:0;-sfsymbols-layer-tags:syringe}

.SFSymbolsPreviewWireframe {fill:none;opacity:1.0;stroke:black;stroke-width:0.5}
</style>
 <g id="Notes">
  <rect height="2200" id="artboard" style="fill:white;opacity:1" width="3300" x="0" y="0"/>
  <line style="fill:none;stroke:black;opacity:1;stroke-width:0.5;" x1="263" x2="3036" y1="292" y2="292"/>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;font-weight:bold;" transform="matrix(1 0 0 1 263 322)">Weight/Scale Variations</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:middle;" transform="matrix(1 0 0 1 559.711 322)">Ultralight</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:middle;" transform="matrix(1 0 0 1 856.422 322)">Thin</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:middle;" transform="matrix(1 0 0 1 1153.13 322)">Light</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:middle;" transform="matrix(1 0 0 1 1449.84 322)">Regular</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:middle;" transform="matrix(1 0 0 1 1746.56 322)">Medium</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:middle;" transform="matrix(1 0 0 1 2043.27 322)">Semibold</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:middle;" transform="matrix(1 0 0 1 2339.98 322)">Bold</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:middle;" transform="matrix(1 0 0 1 2636.69 322)">Heavy</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:middle;" transform="matrix(1 0 0 1 2933.4 322)">Black</text>
  <line style="fill:none;stroke:black;opacity:1;stroke-width:0.5;" x1="263" x2="3036" y1="1903" y2="1903"/>
  <g transform="matrix(0.2 0 0 0.2 263 1933)">
   <path d="m46.2402 4.15039c21.7773 0 39.4531-17.627 39.4531-39.4043s-17.6758-39.4043-39.4531-39.4043c-21.7285 0-39.4043 17.627-39.4043 39.4043s17.6758 39.4043 39.4043 39.4043Zm0-7.42188c-17.6758 0-31.9336-14.3066-31.9336-31.9824s14.2578-31.9824 31.9336-31.9824 31.9824 14.3066 31.9824 31.9824-14.3066 31.9824-31.9824 31.9824Zm-17.9688-31.9824c0 2.14844 1.51367 3.61328 3.75977 3.61328h10.498v10.5957c0 2.19727 1.46484 3.71094 3.61328 3.71094 2.24609 0 3.71094-1.51367 3.71094-3.71094v-10.5957h10.5957c2.19727 0 3.71094-1.46484 3.71094-3.61328 0-2.19727-1.51367-3.71094-3.71094-3.71094h-10.5957v-10.5469c0-2.24609-1.46484-3.75977-3.71094-3.75977-2.14844 0-3.61328 1.51367-3.61328 3.75977v10.5469h-10.498c-2.24609 0-3.75977 1.51367-3.75977 3.71094Z"/>
  </g>
  <g transform="matrix(0.2 0 0 0.2 281.506 1933)">
   <path d="m58.5449 14.5508c27.4902 0 49.8047-22.3145 49.8047-49.8047s-22.3145-49.8047-49.8047-49.8047-49.8047 22.3145-49.8047 49.8047 22.3145 49.8047 49.8047 49.8047Zm0-8.30078c-22.9492 0-41.5039-18.5547-41.5039-41.5039s18.5547-41.5039 41.5039-41.5039 41.5039 18.5547 41.5039 41.5039-18.5547 41.5039-41.5039 41.5039Zm-22.6562-41.5039c0 2.39258 1.66016 4.00391 4.15039 4.00391h14.3555v14.4043c0 2.44141 1.66016 4.15039 4.05273 4.15039 2.44141 0 4.15039-1.66016 4.15039-4.15039v-14.4043h14.4043c2.44141 0 4.15039-1.61133 4.15039-4.00391 0-2.44141-1.70898-4.15039-4.15039-4.15039h-14.4043v-14.3555c0-2.49023-1.70898-4.19922-4.15039-4.19922-2.39258 0-4.05273 1.70898-4.05273 4.19922v14.3555h-14.3555c-2.49023 0-4.15039 1.70898-4.15039 4.15039Z"/>
  </g>
  <g transform="matrix(0.2 0 0 0.2 304.924 1933)">
   <path d="m74.8535 28.3203c35.1074 0 63.623-28.4668 63.623-63.5742s-28.5156-63.623-63.623-63.623-63.5742 28.5156-63.5742 63.623 28.4668 63.5742 63.5742 63.5742Zm0-9.08203c-30.127 0-54.4922-24.3652-54.4922-54.4922s24.3652-54.4922 54.4922-54.4922 54.4922 24.3652 54.4922 54.4922-24.3652 54.4922-54.4922 54.4922Zm-28.8574-54.4922c0 2.58789 1.85547 4.39453 4.58984 4.39453h19.7266v19.7754c0 2.68555 1.85547 4.58984 4.44336 4.58984 2.68555 0 4.54102-1.85547 4.54102-4.58984v-19.7754h19.7754c2.68555 0 4.58984-1.80664 4.58984-4.39453 0-2.73438-1.85547-4.58984-4.58984-4.58984h-19.7754v-19.7266c0-2.73438-1.85547-4.63867-4.54102-4.63867-2.58789 0-4.44336 1.9043-4.44336 4.63867v19.7266h-19.7266c-2.73438 0-4.58984 1.85547-4.58984 4.58984Z"/>
  </g>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;font-weight:bold;" transform="matrix(1 0 0 1 263 1953)">Design Variations</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 263 1971)">Symbols are supported in up to nine weights and three scales.</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 263 1989)">For optimal layout with text and other symbols, vertically align</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 263 2007)">symbols with the adjacent text.</text>
  <line style="fill:none;stroke:#00AEEF;stroke-width:0.5;opacity:1.0;" x1="776" x2="776" y1="1919" y2="1933"/>
  <g transform="matrix(0.2 0 0 0.2 776 1933)">
   <path d="m16.5527 0.78125c2.58789 0 3.85742-0.976562 4.78516-3.71094l6.29883-17.2363h28.8086l6.29883 17.2363c0.927734 2.73438 2.19727 3.71094 4.73633 3.71094 2.58789 0 4.24805-1.5625 4.24805-4.00391 0-0.830078-0.146484-1.61133-0.537109-2.63672l-22.9004-60.9863c-1.12305-2.97852-3.125-4.49219-6.25-4.49219-3.02734 0-5.07812 1.46484-6.15234 4.44336l-22.9004 61.084c-0.390625 1.02539-0.537109 1.80664-0.537109 2.63672 0 2.44141 1.5625 3.95508 4.10156 3.95508Zm13.4766-28.3691 11.8652-32.8613h0.244141l11.8652 32.8613Z"/>
  </g>
  <line style="fill:none;stroke:#00AEEF;stroke-width:0.5;opacity:1.0;" x1="792.836" x2="792.836" y1="1919" y2="1933"/>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;font-weight:bold;" transform="matrix(1 0 0 1 776 1953)">Margins</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 776 1971)">Leading and trailing margins on the left and right side of each symbol</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 776 1989)">can be adjusted by modifying the x-location of the margin guidelines.</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 776 2007)">Modifications are automatically applied proportionally to all</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 776 2025)">scales and weights.</text>
  <g transform="matrix(0.2 0 0 0.2 1289 1933)">
   <path d="m14.209 9.32617 8.49609 8.54492c4.29688 4.3457 9.22852 4.05273 13.8672-1.07422l53.4668-58.9355-4.83398-4.88281-53.0762 58.3984c-1.75781 2.00195-3.41797 2.49023-5.76172 0.146484l-5.85938-5.81055c-2.34375-2.29492-1.80664-4.00391 0.195312-5.81055l57.373-54.0039-4.88281-4.83398-57.959 54.4434c-4.93164 4.58984-5.32227 9.47266-1.02539 13.8184Zm32.0801-90.9668c-2.09961 2.05078-2.24609 4.93164-1.07422 6.88477 1.17188 1.80664 3.4668 2.97852 6.68945 2.14844 7.32422-1.70898 14.9414-2.00195 22.0703 2.68555l-2.92969 7.27539c-1.70898 4.15039-0.830078 7.08008 1.85547 9.81445l11.4746 11.5723c2.44141 2.44141 4.49219 2.53906 7.32422 2.05078l5.32227-0.976562 3.32031 3.36914-0.195312 2.7832c-0.195312 2.49023 0.439453 4.39453 2.88086 6.78711l3.80859 3.71094c2.39258 2.39258 5.46875 2.53906 7.8125 0.195312l14.5508-14.5996c2.34375-2.34375 2.24609-5.32227-0.146484-7.71484l-3.85742-3.80859c-2.39258-2.39258-4.24805-3.17383-6.64062-2.97852l-2.88086 0.244141-3.22266-3.17383 1.2207-5.61523c0.634766-2.83203-0.146484-5.0293-3.07617-7.95898l-10.9863-10.9375c-16.6992-16.6016-38.8672-16.2109-53.3203-1.75781Zm7.4707 1.85547c12.1582-8.88672 28.6133-7.37305 39.7461 3.75977l12.1582 12.0605c1.17188 1.17188 1.36719 2.09961 1.02539 3.80859l-1.61133 7.42188 7.51953 7.42188 4.93164-0.292969c1.26953-0.0488281 1.66016 0.0488281 2.63672 1.02539l2.88086 2.88086-12.207 12.207-2.88086-2.88086c-0.976562-0.976562-1.12305-1.36719-1.07422-2.68555l0.341797-4.88281-7.4707-7.42188-7.61719 1.26953c-1.61133 0.341797-2.34375 0.195312-3.56445-0.976562l-10.0098-10.0098c-1.26953-1.17188-1.41602-2.00195-0.634766-3.85742l4.39453-10.4492c-7.8125-7.27539-17.9688-10.4004-28.125-7.42188-0.78125 0.195312-1.07422-0.439453-0.439453-0.976562Z"/>
  </g>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;font-weight:bold;" transform="matrix(1 0 0 1 1289 1953)">Exporting</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 1289 1971)">Symbols should be outlined when exporting to ensure the</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 1289 1989)">design is preserved when submitting to Xcode.</text>
  <text id="template-version" style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:end;" transform="matrix(1 0 0 1 3036 1933)">Template v.6.0</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:end;" transform="matrix(1 0 0 1 3036 1951)">Requires Xcode 16 or greater</text>
  <text id="descriptive-name" style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:end;" transform="matrix(1 0 0 1 3036 1969)">Generated from syringe</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;text-anchor:end;" transform="matrix(1 0 0 1 3036 1987)">Typeset at 100.0 points</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 263 726)">Small</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 263 1156)">Medium</text>
  <text style="stroke:none;fill:black;font-family:sans-serif;font-size:13;" transform="matrix(1 0 0 1 263 1586)">Large</text>
 </g>
 <g id="Guides">
  <g id="H-reference" style="fill:#27AAE1;stroke:none;" transform="matrix(1 0 0 1 339 696)">
   <path d="M0.993654 0L3.63775 0L29.3281-67.1323L30.0303-67.1323L30.0303-70.459L28.1226-70.459ZM11.6885-24.4799L46.9815-24.4799L46.2315-26.7285L12.4385-26.7285ZM55.1196 0L57.7637 0L30.6382-70.459L29.4326-70.459L29.4326-67.1323Z"/>
  </g>
  <line id="Baseline-S" style="fill:none;stroke:#27AAE1;opacity:1;stroke-width:0.5;" x1="263" x2="3036" y1="696" y2="696"/>
  <line id="Capline-S" style="fill:none;stroke:#27AAE1;opacity:1;stroke-width:0.5;" x1="263" x2="3036" y1="625.541" y2="625.541"/>
  <g id="H-reference" style="fill:#27AAE1;stroke:none;" transform="matrix(1 0 0 1 339 1126)">
   <path d="M0.993654 0L3.63775 0L29.3281-67.1323L30.0303-67.1323L30.0303-70.459L28.1226-70.459ZM11.6885-24.4799L46.9815-24.4799L46.2315-26.7285L12.4385-26.7285ZM55.1196 0L57.7637 0L30.6382-70.459L29.4326-70.459L29.4326-67.1323Z"/>
  </g>
  <line id="Baseline-M" style="fill:none;stroke:#27AAE1;opacity:1;stroke-width:0.5;" x1="263" x2="3036" y1="1126" y2="1126"/>
  <line id="Capline-M" style="fill:none;stroke:#27AAE1;opacity:1;stroke-width:0.5;" x1="263" x2="3036" y1="1055.54" y2="1055.54"/>
  <g id="H-reference" style="fill:#27AAE1;stroke:none;" transform="matrix(1 0 0 1 339 1556)">
   <path d="M0.993654 0L3.63775 0L29.3281-67.1323L30.0303-67.1323L30.0303-70.459L28.1226-70.459ZM11.6885-24.4799L46.9815-24.4799L46.2315-26.7285L12.4385-26.7285ZM55.1196 0L57.7637 0L30.6382-70.459L29.4326-70.459L29.4326-67.1323Z"/>
  </g>
  <line id="Baseline-L" style="fill:none;stroke:#27AAE1;opacity:1;stroke-width:0.5;" x1="263" x2="3036" y1="1556" y2="1556"/>
  <line id="Capline-L" style="fill:none;stroke:#27AAE1;opacity:1;stroke-width:0.5;" x1="263" x2="3036" y1="1485.54" y2="1485.54"/>
  <line id="right-margin-Black-S" style="fill:none;stroke:#00AEEF;stroke-width:0.5;opacity:1.0;" x1="2994.26" x2="2994.26" y1="600.785" y2="720.121"/>
  <line id="left-margin-Black-S" style="fill:none;stroke:#00AEEF;stroke-width:0.5;opacity:1.0;" x1="2872.54" x2="2872.54" y1="600.785" y2="720.121"/>
  <line id="right-margin-Regular-S" style="fill:none;stroke:#00AEEF;stroke-width:0.5;opacity:1.0;" x1="1503.09" x2="1503.09" y1="600.785" y2="720.121"/>
  <line id="left-margin-Regular-S" style="fill:none;stroke:#00AEEF;stroke-width:0.5;opacity:1.0;" x1="1396.6" x2="1396.6" y1="600.785" y2="720.121"/>
  <line id="right-margin-Ultralight-S" style="fill:none;stroke:#00AEEF;stroke-width:0.5;opacity:1.0;" x1="609.303" x2="609.303" y1="600.785" y2="720.121"/>
  <line id="left-margin-Ultralight-S" style="fill:none;stroke:#00AEEF;stroke-width:0.5;opacity:1.0;" x1="510.12" x2="510.12" y1="600.785" y2="720.121"/>
 </g>
 <g id="Symbols">
  <g id="Black-S" transform="matrix(1 0 0 1 2872.54 696)">
   <path class="monochrome-0 multicolor-0:tintColor hierarchical-0:primary SFSymbolsPreviewWireframe" d="M10.5469 13.4277C12.793 15.625 16.2109 15.4785 18.457 13.2812L33.3008-1.51367L25.293-9.47266L10.498 5.32227C8.25195 7.56836 8.20312 11.1816 10.5469 13.4277ZM21.9238-7.56836L31.4453 1.95312C36.6211 7.12891 43.7012 6.93359 49.1699 1.46484L87.6953-37.0605L79.6387-45.166L41.8457-7.37305C40.7715-6.29883 39.3066-6.34766 38.1836-7.4707L31.2988-14.3066C30.1758-15.3809 30.1758-16.8945 31.2988-18.0176L68.9941-55.7617L60.9375-63.8184L22.3145-25.2441C16.8945-19.8242 16.6992-12.793 21.9238-7.56836ZM30.6641-25.6348L39.1113-17.1387C40.0391-16.1621 41.6016-16.2109 42.5781-17.1387C43.6035-18.1152 43.5547-19.6289 42.5781-20.6055L34.1309-29.0527ZM38.9648-33.8867L47.4121-25.4395C48.3887-24.4629 49.9023-24.4629 50.8789-25.4395C51.8555-26.416 51.8555-27.9785 50.8789-28.9062L42.3828-37.3535ZM47.2168-42.1875L55.7129-33.7402C56.6895-32.8125 58.1543-32.7637 59.1309-33.7402C60.1074-34.7168 60.0586-36.1816 59.1309-37.1582L50.6836-45.6543ZM55.5176-50.4883L63.9648-41.9922C64.8926-41.0156 66.4551-41.0645 67.4316-41.9922C68.457-42.9688 68.4082-44.4824 67.4316-45.459L58.9844-53.9062ZM54.6387-66.3574L90.1855-30.8105C93.1152-27.8809 97.7539-27.8809 100.684-30.8105C103.564-33.6914 103.613-38.3789 100.684-41.3086L65.1367-76.8555C62.1582-79.834 57.5684-79.7852 54.6387-76.8555C51.709-73.9258 51.709-69.2871 54.6387-66.3574ZM62.793-65.7715L89.5508-38.9648L98.584-48.0469C101.514-50.9766 101.514-55.6152 98.584-58.5449L96.0449-61.084L98.4375-63.5742L100.244-61.7188C103.125-58.7891 107.861-58.8379 110.742-61.7188C113.672-64.6484 113.672-69.2871 110.742-72.2168L97.3145-85.6445C94.3848-88.5742 89.7461-88.5742 86.8164-85.6445C83.9355-82.7637 83.8867-78.0273 86.8164-75.1465L88.6719-73.3398L86.2305-70.8984L82.3242-74.8047C79.3945-77.7344 74.7559-77.7344 71.8262-74.8047Z"/>
  </g>
  <g id="Regular-S" transform="matrix(1 0 0 1 1396.6 696)">
   <path class="monochrome-0 multicolor-0:tintColor hierarchical-0:primary SFSymbolsPreviewWireframe" d="M9.7168 7.61719C10.8887 8.74023 12.6953 8.69141 13.916 7.51953L30.3711-8.93555L26.1719-13.0859L9.7168 3.36914C8.54492 4.54102 8.44727 6.44531 9.7168 7.61719ZM22.9492-12.8906L30.3711-5.51758C34.4238-1.51367 40.0391-1.66016 44.2871-5.95703L84.5215-46.1426L79.541-51.123L39.4043-10.9863C38.0371-9.61914 36.2305-9.7168 34.7656-11.1328L28.5156-17.334C27.0996-18.75 27.0996-20.6055 28.5156-21.9727L68.6035-62.0605L63.5742-67.0898L23.3887-26.8555C18.9941-22.4121 18.8477-16.8945 22.9492-12.8906ZM29.1992-30.5664L38.7207-20.9961C39.5508-20.2148 40.7227-20.2148 41.5039-21.0449C42.2363-21.8262 42.1875-22.998 41.4551-23.7793L31.8848-33.3008ZM37.1582-38.4766L46.6797-28.9062C47.4609-28.1738 48.6816-28.1738 49.4629-28.9062C50.1953-29.6875 50.1465-30.9082 49.4141-31.6895L39.8438-41.2109ZM45.1172-46.4844L54.6387-36.8652C55.4199-36.1328 56.6406-36.1328 57.4219-36.8652C58.1543-37.6465 58.1543-38.8672 57.373-39.6973L47.8027-49.2188ZM53.0762-54.3945L62.5977-44.8242C63.3789-44.0918 64.5508-44.0918 65.332-44.8242C66.1133-45.5078 66.0645-46.8262 65.332-47.6074L55.7617-57.1289ZM56.8359-68.457L85.9375-39.3066C87.3047-37.9395 89.5508-37.9395 90.918-39.3066C92.2852-40.6738 92.2852-42.9199 90.918-44.2871L61.8164-73.4375C60.3516-74.8535 58.2031-74.8047 56.8359-73.4375C55.4688-72.0703 55.3711-69.9219 56.8359-68.457ZM64.5996-68.0176L85.4492-47.0703L88.0859-49.7559C89.4531-51.0742 89.502-53.3691 88.0859-54.6875L82.9102-59.8633L87.207-64.1113L91.6992-59.668C93.0664-58.3008 95.3125-58.3008 96.6797-59.668C97.998-61.0352 97.998-63.2812 96.6797-64.6484L83.3496-77.9297C81.9824-79.2969 79.7363-79.2969 78.3691-77.9297C77.002-76.5625 77.002-74.3164 78.3691-72.9492L82.8613-68.457L78.6133-64.209L72.168-70.6055C70.8008-71.9727 68.5547-71.9727 67.1875-70.6055Z"/>
  </g>
  <g id="Ultralight-S" transform="matrix(1 0 0 1 510.12 696)">
   <path class="monochrome-0 multicolor-0:tintColor hierarchical-0:primary SFSymbolsPreviewWireframe" d="M9.12647 5.16506C9.48097 5.51614 10.1978 5.60354 10.6011 5.15822L27.147-11.4331L25.6724-12.9497L9.12647 3.59619C8.68115 4.04151 8.67431 4.71974 9.12647 5.16506ZM22.5405-15.1157L29.4175-8.24217C32.562-5.10105 36.815-5.1113 40.0186-8.27293L79.9351-48.1406L78.315-49.7153L38.2236-9.57862C36.1299-7.48488 33.3242-7.49172 31.1328-9.63429L23.9292-16.8799C21.7413-19.0225 21.7413-21.8769 23.8838-23.9707L64.0171-64.0586L62.3936-65.6367L22.5713-25.7202C19.3574-22.5483 19.3472-18.3022 22.5405-15.1157ZM28.5181-30.8843L37.313-21.9951C37.689-21.6225 38.4068-21.668 38.8247-21.9985C39.2393-22.3711 39.2359-23.1343 38.8213-23.5068L29.9321-32.3472ZM36.4771-38.7944L45.272-29.9961C45.69-29.5815 46.3203-29.5815 46.7383-29.9961C47.1529-30.3686 47.104-30.999 46.7349-31.417L37.8911-40.3027ZM44.3906-46.7568L53.231-37.9551C53.6489-37.5859 54.2793-37.5405 54.6973-37.9551C55.1118-38.3276 55.1118-38.958 54.6939-39.3794L45.8501-48.2197ZM52.3496-54.7124L61.1445-45.8232C61.5625-45.4541 62.2349-45.4541 62.6074-45.8232C63.0254-46.2798 63.022-46.917 62.6074-47.335L53.7637-56.1753ZM57.9712-69.0474L83.3491-43.666C83.7627-43.2524 84.4649-43.2524 84.8785-43.666C85.3375-44.125 85.3375-44.8271 84.8785-45.2407L59.5459-70.6221C59.0801-71.0391 58.3848-71.0357 57.9712-70.6221C57.5122-70.1631 57.5054-69.5132 57.9712-69.0474ZM63.0103-66.2012L80.4541-48.7051L83.6358-51.8901C84.0494-52.3457 84.0528-53.0059 83.6812-53.3706L76.462-60.5898L83.4834-67.6987L88.4751-62.665C88.9341-62.2514 89.6363-62.2968 90.0499-62.665C90.46-63.124 90.46-63.8262 90.0499-64.2852L78.627-75.7046C78.168-76.1182 77.4658-76.1182 77.0068-75.7046C76.6387-75.291 76.5933-74.5889 77.0068-74.1753L81.9985-69.1836L74.9351-62.1655L67.7178-69.334C67.3042-69.7476 66.6021-69.793 66.1885-69.334Z"/>
  </g>
 </g>
</svg>

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Attach Process/AttachToProcessViewController.swift`:

```swift
//
//  AttachViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/11/28.
//

import AppKit
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerApplication
import RuntimeViewerArchitectures

class AttachToProcessViewModel: ViewModel<MainRoute> {
    struct Input {
        let attachToProcess: Signal<NSRunningApplication>
        let cancel: Signal<Void>
    }

    struct Output {}

    func transform(_ input: Input) -> Output {
        input.cancel.emit(to: router.rx.trigger(.dismiss)).disposed(by: rx.disposeBag)
        input.attachToProcess.emit(onNext: { [weak self] app in
            guard let self,
                  let name = app.localizedName,
                  let bundleIdentifier = app.bundleIdentifier
            else { return }

            Task {
                do {
                    try await RuntimeInjectClient.shared.installServerFrameworkIfNeeded()
                    guard let dylibURL = Bundle(url: RuntimeInjectClient.shared.serverFrameworkDestinationURL)?.executableURL else { return }
                    try await RuntimeEngineManager.shared.launchAttachedRuntimeEngine(name: name, identifier: bundleIdentifier)
                    try await RuntimeInjectClient.shared.injectApplication(pid: app.processIdentifier, dylibURL: dylibURL)
                } catch {
                    print(error, error.localizedDescription)
                }

                await MainActor.run {
                    self.router.trigger(.dismiss)
                }
            }
        }).disposed(by: rx.disposeBag)
        return Output()
    }
}

class AttachToProcessViewController: AppKitViewController<AttachToProcessViewModel> {
    let pickerViewController: RunningApplicationPickerViewController

    let attachRelay = PublishRelay<NSRunningApplication>()

    let cancelRelay = PublishRelay<Void>()

    override init(viewModel: AttachToProcessViewModel? = nil) {
        let configuration = RunningApplicationPickerViewController.Configuration(title: "Attach To Process", description: "Select a running application to attach to", cancelButtonTitle: "Cancel", confirmButtonTitle: "Attach")
        self.pickerViewController = RunningApplicationPickerViewController(configuration: configuration)
        super.init(viewModel: viewModel)
    }

    override func viewDidLoad() {
        super.viewDidLoad()

        hierarchy {
            pickerViewController
        }

        pickerViewController.view.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }

        pickerViewController.delegate = self
    }

    override func setupBindings(for viewModel: AttachToProcessViewModel) {
        super.setupBindings(for: viewModel)

        let input = AttachToProcessViewModel.Input(attachToProcess: attachRelay.asSignal(), cancel: cancelRelay.asSignal())

        _ = viewModel.transform(input)
    }
}

extension AttachToProcessViewController: RunningApplicationPickerViewController.Delegate {
    func runningApplicationPickerViewController(_ viewController: RunningApplicationPickerViewController, didConfirmApplication application: NSRunningApplication) {
        attachRelay.accept(application)
    }

    func runningApplicationPickerViewControllerWasCancel(_ viewController: RunningApplicationPickerViewController) {
        cancelRelay.accept(())
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Base.lproj/MainMenu.xib`:

```xib
<?xml version="1.0" encoding="UTF-8"?>
<document type="com.apple.InterfaceBuilder3.Cocoa.XIB" version="3.0" toolsVersion="32700.99.1234" targetRuntime="MacOSX.Cocoa" propertyAccessControl="none" useAutolayout="YES" customObjectInstantitationMethod="direct">
    <dependencies>
        <deployment identifier="macosx"/>
        <plugIn identifier="com.apple.InterfaceBuilder.CocoaPlugin" version="22690"/>
    </dependencies>
    <objects>
        <customObject id="-2" userLabel="File's Owner" customClass="NSApplication">
            <connections>
                <outlet property="delegate" destination="Voe-Tx-rLC" id="GzC-gU-4Uq"/>
            </connections>
        </customObject>
        <customObject id="-1" userLabel="First Responder" customClass="FirstResponder"/>
        <customObject id="-3" userLabel="Application" customClass="NSObject"/>
        <customObject id="Voe-Tx-rLC" customClass="AppDelegate" customModule="RuntimeViewer" customModuleProvider="target"/>
        <customObject id="YLy-65-1bz" customClass="NSFontManager"/>
        <menu title="Main Menu" systemMenu="main" id="AYu-sK-qS6">
            <items>
                <menuItem title="RuntimeViewerUsingAppKit" id="1Xt-HY-uBw">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="RuntimeViewerUsingAppKit" systemMenu="apple" id="uQy-DD-JDr">
                        <items>
                            <menuItem title="About RuntimeViewerUsingAppKit" id="5kV-Vb-QxS">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="orderFrontStandardAboutPanel:" target="-1" id="Exp-CZ-Vem"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="VOq-y0-SEH"/>
                            <menuItem title="Preferences…" keyEquivalent="," id="BOF-NM-1cW"/>
                            <menuItem isSeparatorItem="YES" id="wFC-TO-SCJ"/>
                            <menuItem title="Services" id="NMo-om-nkz">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Services" systemMenu="services" id="hz9-B4-Xy5"/>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="4je-JR-u6R"/>
                            <menuItem title="Hide RuntimeViewerUsingAppKit" keyEquivalent="h" id="Olw-nP-bQN">
                                <connections>
                                    <action selector="hide:" target="-1" id="PnN-Uc-m68"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Hide Others" keyEquivalent="h" id="Vdr-fp-XzO">
                                <modifierMask key="keyEquivalentModifierMask" option="YES" command="YES"/>
                                <connections>
                                    <action selector="hideOtherApplications:" target="-1" id="VT4-aY-XCT"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Show All" id="Kd2-mp-pUS">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="unhideAllApplications:" target="-1" id="Dhg-Le-xox"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="kCx-OE-vgT"/>
                            <menuItem title="Quit RuntimeViewerUsingAppKit" keyEquivalent="q" id="4sb-4s-VLi">
                                <connections>
                                    <action selector="terminate:" target="-1" id="Te7-pn-YzF"/>
                                </connections>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="File" id="dMs-cI-mzQ">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="File" id="bib-Uj-vzu">
                        <items>
                            <menuItem title="New" keyEquivalent="n" id="Was-JA-tGl">
                                <connections>
                                    <action selector="newDocument:" target="-1" id="4Si-XN-c54"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Open…" keyEquivalent="o" id="IAo-SY-fd9">
                                <connections>
                                    <action selector="openDocument:" target="-1" id="bVn-NM-KNZ"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Open Recent" id="tXI-mr-wws">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Open Recent" systemMenu="recentDocuments" id="oas-Oc-fiZ">
                                    <items>
                                        <menuItem title="Clear Menu" id="vNY-rz-j42">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="clearRecentDocuments:" target="-1" id="Daa-9d-B3U"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="m54-Is-iLE"/>
                            <menuItem title="Close" keyEquivalent="w" id="DVo-aG-piG">
                                <connections>
                                    <action selector="performClose:" target="-1" id="HmO-Ls-i7Q"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Save…" enabled="NO" keyEquivalent="s" id="pxx-59-PXV"/>
                            <menuItem title="Save As…" enabled="NO" keyEquivalent="S" id="Bw7-FT-i3A"/>
                            <menuItem title="Revert to Saved" enabled="NO" keyEquivalent="r" id="KaW-ft-85H"/>
                            <menuItem isSeparatorItem="YES" id="aJh-i4-bef"/>
                            <menuItem title="Page Setup…" keyEquivalent="P" id="qIS-W8-SiK">
                                <modifierMask key="keyEquivalentModifierMask" shift="YES" command="YES"/>
                                <connections>
                                    <action selector="runPageLayout:" target="-1" id="Din-rz-gC5"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Print…" keyEquivalent="p" id="aTl-1u-JFS">
                                <connections>
                                    <action selector="print:" target="-1" id="qaZ-4w-aoO"/>
                                </connections>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="Edit" id="5QF-Oa-p0T">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="Edit" id="W48-6f-4Dl">
                        <items>
                            <menuItem title="Undo" keyEquivalent="z" id="dRJ-4n-Yzg">
                                <connections>
                                    <action selector="undo:" target="-1" id="M6e-cu-g7V"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Redo" keyEquivalent="Z" id="6dh-zS-Vam">
                                <connections>
                                    <action selector="redo:" target="-1" id="oIA-Rs-6OD"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="WRV-NI-Exz"/>
                            <menuItem title="Cut" keyEquivalent="x" id="uRl-iY-unG">
                                <connections>
                                    <action selector="cut:" target="-1" id="YJe-68-I9s"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Copy" keyEquivalent="c" id="x3v-GG-iWU">
                                <connections>
                                    <action selector="copy:" target="-1" id="G1f-GL-Joy"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Paste" keyEquivalent="v" id="gVA-U4-sdL">
                                <connections>
                                    <action selector="paste:" target="-1" id="UvS-8e-Qdg"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Paste and Match Style" keyEquivalent="V" id="WeT-3V-zwk">
                                <modifierMask key="keyEquivalentModifierMask" option="YES" command="YES"/>
                                <connections>
                                    <action selector="pasteAsPlainText:" target="-1" id="cEh-KX-wJQ"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Delete" id="pa3-QI-u2k">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="delete:" target="-1" id="0Mk-Ml-PaM"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Select All" keyEquivalent="a" id="Ruw-6m-B2m">
                                <connections>
                                    <action selector="selectAll:" target="-1" id="VNm-Mi-diN"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="uyl-h8-XO2"/>
                            <menuItem title="Find" id="4EN-yA-p0u">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Find" id="1b7-l0-nxx">
                                    <items>
                                        <menuItem title="Find…" tag="1" keyEquivalent="f" id="Xz5-n4-O0W">
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="cD7-Qs-BN4"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Find and Replace…" tag="12" keyEquivalent="f" id="YEy-JH-Tfz">
                                            <modifierMask key="keyEquivalentModifierMask" option="YES" command="YES"/>
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="WD3-Gg-5AJ"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Find Next" tag="2" keyEquivalent="g" id="q09-fT-Sye">
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="NDo-RZ-v9R"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Find Previous" tag="3" keyEquivalent="G" id="OwM-mh-QMV">
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="HOh-sY-3ay"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Use Selection for Find" tag="7" keyEquivalent="e" id="buJ-ug-pKt">
                                            <connections>
                                                <action selector="performFindPanelAction:" target="-1" id="U76-nv-p5D"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Jump to Selection" keyEquivalent="j" id="S0p-oC-mLd">
                                            <connections>
                                                <action selector="centerSelectionInVisibleArea:" target="-1" id="IOG-6D-g5B"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem title="Spelling and Grammar" id="Dv1-io-Yv7">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Spelling" id="3IN-sU-3Bg">
                                    <items>
                                        <menuItem title="Show Spelling and Grammar" keyEquivalent=":" id="HFo-cy-zxI">
                                            <connections>
                                                <action selector="showGuessPanel:" target="-1" id="vFj-Ks-hy3"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Check Document Now" keyEquivalent=";" id="hz2-CU-CR7">
                                            <connections>
                                                <action selector="checkSpelling:" target="-1" id="fz7-VC-reM"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="bNw-od-mp5"/>
                                        <menuItem title="Check Spelling While Typing" id="rbD-Rh-wIN">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleContinuousSpellChecking:" target="-1" id="7w6-Qz-0kB"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Check Grammar With Spelling" id="mK6-2p-4JG">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleGrammarChecking:" target="-1" id="muD-Qn-j4w"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Correct Spelling Automatically" id="78Y-hA-62v">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticSpellingCorrection:" target="-1" id="2lM-Qi-WAP"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem title="Substitutions" id="9ic-FL-obx">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Substitutions" id="FeM-D8-WVr">
                                    <items>
                                        <menuItem title="Show Substitutions" id="z6F-FW-3nz">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="orderFrontSubstitutionsPanel:" target="-1" id="oku-mr-iSq"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="gPx-C9-uUO"/>
                                        <menuItem title="Smart Copy/Paste" id="9yt-4B-nSM">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleSmartInsertDelete:" target="-1" id="3IJ-Se-DZD"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Smart Quotes" id="hQb-2v-fYv">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticQuoteSubstitution:" target="-1" id="ptq-xd-QOA"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Smart Dashes" id="rgM-f4-ycn">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticDashSubstitution:" target="-1" id="oCt-pO-9gS"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Smart Links" id="cwL-P1-jid">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticLinkDetection:" target="-1" id="Gip-E3-Fov"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Data Detectors" id="tRr-pd-1PS">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticDataDetection:" target="-1" id="R1I-Nq-Kbl"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Text Replacement" id="HFQ-gK-NFA">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleAutomaticTextReplacement:" target="-1" id="DvP-Fe-Py6"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem title="Transformations" id="2oI-Rn-ZJC">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Transformations" id="c8a-y6-VQd">
                                    <items>
                                        <menuItem title="Make Upper Case" id="vmV-6d-7jI">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="uppercaseWord:" target="-1" id="sPh-Tk-edu"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Make Lower Case" id="d9M-CD-aMd">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="lowercaseWord:" target="-1" id="iUZ-b5-hil"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Capitalize" id="UEZ-Bs-lqG">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="capitalizeWord:" target="-1" id="26H-TL-nsh"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem title="Speech" id="xrE-MZ-jX0">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Speech" id="3rS-ZA-NoH">
                                    <items>
                                        <menuItem title="Start Speaking" id="Ynk-f8-cLZ">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="startSpeaking:" target="-1" id="654-Ng-kyl"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Stop Speaking" id="Oyz-dy-DGm">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="stopSpeaking:" target="-1" id="dX8-6p-jy9"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="Format" id="jxT-CU-nIS">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="Format" id="GEO-Iw-cKr">
                        <items>
                            <menuItem title="Font" id="Gi5-1S-RQB">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Font" systemMenu="font" id="aXa-aM-Jaq">
                                    <items>
                                        <menuItem title="Show Fonts" keyEquivalent="t" id="Q5e-8K-NDq">
                                            <connections>
                                                <action selector="orderFrontFontPanel:" target="YLy-65-1bz" id="WHr-nq-2xA"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Bold" tag="2" keyEquivalent="b" id="GB9-OM-e27">
                                            <connections>
                                                <action selector="addFontTrait:" target="YLy-65-1bz" id="hqk-hr-sYV"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Italic" tag="1" keyEquivalent="i" id="Vjx-xi-njq">
                                            <connections>
                                                <action selector="addFontTrait:" target="YLy-65-1bz" id="IHV-OB-c03"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Underline" keyEquivalent="u" id="WRG-CD-K1S">
                                            <connections>
                                                <action selector="underline:" target="-1" id="FYS-2b-JAY"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="5gT-KC-WSO"/>
                                        <menuItem title="Bigger" tag="3" keyEquivalent="+" id="Ptp-SP-VEL">
                                            <connections>
                                                <action selector="modifyFont:" target="YLy-65-1bz" id="Uc7-di-UnL"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Smaller" tag="4" keyEquivalent="-" id="i1d-Er-qST">
                                            <connections>
                                                <action selector="modifyFont:" target="YLy-65-1bz" id="HcX-Lf-eNd"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="kx3-Dk-x3B"/>
                                        <menuItem title="Kern" id="jBQ-r6-VK2">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <menu key="submenu" title="Kern" id="tlD-Oa-oAM">
                                                <items>
                                                    <menuItem title="Use Default" id="GUa-eO-cwY">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="useStandardKerning:" target="-1" id="6dk-9l-Ckg"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem title="Use None" id="cDB-IK-hbR">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="turnOffKerning:" target="-1" id="U8a-gz-Maa"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem title="Tighten" id="46P-cB-AYj">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="tightenKerning:" target="-1" id="hr7-Nz-8ro"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem title="Loosen" id="ogc-rX-tC1">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="loosenKerning:" target="-1" id="8i4-f9-FKE"/>
                                                        </connections>
                                                    </menuItem>
                                                </items>
                                            </menu>
                                        </menuItem>
                                        <menuItem title="Ligatures" id="o6e-r0-MWq">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <menu key="submenu" title="Ligatures" id="w0m-vy-SC9">
                                                <items>
                                                    <menuItem title="Use Default" id="agt-UL-0e3">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="useStandardLigatures:" target="-1" id="7uR-wd-Dx6"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem title="Use None" id="J7y-lM-qPV">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="turnOffLigatures:" target="-1" id="iX2-gA-Ilz"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem title="Use All" id="xQD-1f-W4t">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="useAllLigatures:" target="-1" id="KcB-kA-TuK"/>
                                                        </connections>
                                                    </menuItem>
                                                </items>
                                            </menu>
                                        </menuItem>
                                        <menuItem title="Baseline" id="OaQ-X3-Vso">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <menu key="submenu" title="Baseline" id="ijk-EB-dga">
                                                <items>
                                                    <menuItem title="Use Default" id="3Om-Ey-2VK">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="unscript:" target="-1" id="0vZ-95-Ywn"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem title="Superscript" id="Rqc-34-cIF">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="superscript:" target="-1" id="3qV-fo-wpU"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem title="Subscript" id="I0S-gh-46l">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="subscript:" target="-1" id="Q6W-4W-IGz"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem title="Raise" id="2h7-ER-AoG">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="raiseBaseline:" target="-1" id="4sk-31-7Q9"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem title="Lower" id="1tx-W0-xDw">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="lowerBaseline:" target="-1" id="OF1-bc-KW4"/>
                                                        </connections>
                                                    </menuItem>
                                                </items>
                                            </menu>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="Ndw-q3-faq"/>
                                        <menuItem title="Show Colors" keyEquivalent="C" id="bgn-CT-cEk">
                                            <connections>
                                                <action selector="orderFrontColorPanel:" target="-1" id="mSX-Xz-DV3"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="iMs-zA-UFJ"/>
                                        <menuItem title="Copy Style" keyEquivalent="c" id="5Vv-lz-BsD">
                                            <modifierMask key="keyEquivalentModifierMask" option="YES" command="YES"/>
                                            <connections>
                                                <action selector="copyFont:" target="-1" id="GJO-xA-L4q"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Paste Style" keyEquivalent="v" id="vKC-jM-MkH">
                                            <modifierMask key="keyEquivalentModifierMask" option="YES" command="YES"/>
                                            <connections>
                                                <action selector="pasteFont:" target="-1" id="JfD-CL-leO"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                            <menuItem title="Text" id="Fal-I4-PZk">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <menu key="submenu" title="Text" id="d9c-me-L2H">
                                    <items>
                                        <menuItem title="Align Left" keyEquivalent="{" id="ZM1-6Q-yy1">
                                            <connections>
                                                <action selector="alignLeft:" target="-1" id="zUv-R1-uAa"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Center" keyEquivalent="|" id="VIY-Ag-zcb">
                                            <connections>
                                                <action selector="alignCenter:" target="-1" id="spX-mk-kcS"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Justify" id="J5U-5w-g23">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="alignJustified:" target="-1" id="ljL-7U-jND"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Align Right" keyEquivalent="}" id="wb2-vD-lq4">
                                            <connections>
                                                <action selector="alignRight:" target="-1" id="r48-bG-YeY"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="4s2-GY-VfK"/>
                                        <menuItem title="Writing Direction" id="H1b-Si-o9J">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <menu key="submenu" title="Writing Direction" id="8mr-sm-Yjd">
                                                <items>
                                                    <menuItem title="Paragraph" enabled="NO" id="ZvO-Gk-QUH">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                    </menuItem>
                                                    <menuItem id="YGs-j5-SAR">
                                                        <string key="title">	Default</string>
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="makeBaseWritingDirectionNatural:" target="-1" id="qtV-5e-UBP"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem id="Lbh-J2-qVU">
                                                        <string key="title">	Left to Right</string>
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="makeBaseWritingDirectionLeftToRight:" target="-1" id="S0X-9S-QSf"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem id="jFq-tB-4Kx">
                                                        <string key="title">	Right to Left</string>
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="makeBaseWritingDirectionRightToLeft:" target="-1" id="5fk-qB-AqJ"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem isSeparatorItem="YES" id="swp-gr-a21"/>
                                                    <menuItem title="Selection" enabled="NO" id="cqv-fj-IhA">
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                    </menuItem>
                                                    <menuItem id="Nop-cj-93Q">
                                                        <string key="title">	Default</string>
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="makeTextWritingDirectionNatural:" target="-1" id="lPI-Se-ZHp"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem id="BgM-ve-c93">
                                                        <string key="title">	Left to Right</string>
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="makeTextWritingDirectionLeftToRight:" target="-1" id="caW-Bv-w94"/>
                                                        </connections>
                                                    </menuItem>
                                                    <menuItem id="RB4-Sm-HuC">
                                                        <string key="title">	Right to Left</string>
                                                        <modifierMask key="keyEquivalentModifierMask"/>
                                                        <connections>
                                                            <action selector="makeTextWritingDirectionRightToLeft:" target="-1" id="EXD-6r-ZUu"/>
                                                        </connections>
                                                    </menuItem>
                                                </items>
                                            </menu>
                                        </menuItem>
                                        <menuItem isSeparatorItem="YES" id="fKy-g9-1gm"/>
                                        <menuItem title="Show Ruler" id="vLm-3I-IUL">
                                            <modifierMask key="keyEquivalentModifierMask"/>
                                            <connections>
                                                <action selector="toggleRuler:" target="-1" id="FOx-HJ-KwY"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Copy Ruler" keyEquivalent="c" id="MkV-Pr-PK5">
                                            <modifierMask key="keyEquivalentModifierMask" control="YES" command="YES"/>
                                            <connections>
                                                <action selector="copyRuler:" target="-1" id="71i-fW-3W2"/>
                                            </connections>
                                        </menuItem>
                                        <menuItem title="Paste Ruler" keyEquivalent="v" id="LVM-kO-fVI">
                                            <modifierMask key="keyEquivalentModifierMask" control="YES" command="YES"/>
                                            <connections>
                                                <action selector="pasteRuler:" target="-1" id="cSh-wd-qM2"/>
                                            </connections>
                                        </menuItem>
                                    </items>
                                </menu>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="View" id="H8h-7b-M4v">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="View" id="HyV-fh-RgO">
                        <items>
                            <menuItem title="Show Toolbar" keyEquivalent="t" id="snW-S8-Cw5">
                                <modifierMask key="keyEquivalentModifierMask" option="YES" command="YES"/>
                                <connections>
                                    <action selector="toggleToolbarShown:" target="-1" id="BXY-wc-z0C"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Customize Toolbar…" id="1UK-8n-QPP">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="runToolbarCustomizationPalette:" target="-1" id="pQI-g3-MTW"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="hB3-LF-h0Y"/>
                            <menuItem title="Show Sidebar" keyEquivalent="s" id="kIP-vf-haE">
                                <modifierMask key="keyEquivalentModifierMask" control="YES" command="YES"/>
                                <connections>
                                    <action selector="toggleSidebar:" target="-1" id="iwa-gc-5KM"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Enter Full Screen" keyEquivalent="f" id="4J7-dP-txa">
                                <modifierMask key="keyEquivalentModifierMask" control="YES" command="YES"/>
                                <connections>
                                    <action selector="toggleFullScreen:" target="-1" id="dU3-MA-1Rq"/>
                                </connections>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="Window" id="aUF-d1-5bR">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="Window" systemMenu="window" id="Td7-aD-5lo">
                        <items>
                            <menuItem title="Minimize" keyEquivalent="m" id="OY7-WF-poV">
                                <connections>
                                    <action selector="performMiniaturize:" target="-1" id="VwT-WD-YPe"/>
                                </connections>
                            </menuItem>
                            <menuItem title="Zoom" id="R4o-n2-Eq4">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="performZoom:" target="-1" id="DIl-cC-cCs"/>
                                </connections>
                            </menuItem>
                            <menuItem isSeparatorItem="YES" id="eu3-7i-yIM"/>
                            <menuItem title="Bring All to Front" id="LE2-aR-0XJ">
                                <modifierMask key="keyEquivalentModifierMask"/>
                                <connections>
                                    <action selector="arrangeInFront:" target="-1" id="DRN-fu-gQh"/>
                                </connections>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
                <menuItem title="Help" id="wpr-3q-Mcd">
                    <modifierMask key="keyEquivalentModifierMask"/>
                    <menu key="submenu" title="Help" systemMenu="help" id="F2S-fz-NVQ">
                        <items>
                            <menuItem title="RuntimeViewerUsingAppKit Help" keyEquivalent="?" id="FKE-Sm-Kum">
                                <connections>
                                    <action selector="showHelp:" target="-1" id="y7X-2Q-9no"/>
                                </connections>
                            </menuItem>
                        </items>
                    </menu>
                </menuItem>
            </items>
            <point key="canvasLocation" x="200" y="121"/>
        </menu>
    </objects>
</document>

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Base/ViewController.swift`:

```swift
//
//  ViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerArchitectures

class UXKitViewController<ViewModelType>: UXViewController {
    var viewModel: ViewModelType?

    init(viewModel: ViewModelType? = nil) {
        self.viewModel = viewModel
        super.init(nibName: nil, bundle: nil)
    }

    @available(*, unavailable)
    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    func setupBindings(for viewModel: ViewModelType) {
        rx.disposeBag = DisposeBag()
        self.viewModel = viewModel
    }
}

class UXVisualEffectViewController<ViewModelType>: UXKitViewController<ViewModelType> {
    let contentView = NSVisualEffectView()

    override func viewDidLoad() {
        super.viewDidLoad()

        hierarchy {
            contentView
        }

        contentView.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }
    }
}

class AppKitViewController<ViewModelType>: NSViewController {
    var viewModel: ViewModelType?

    init(viewModel: ViewModelType? = nil) {
        self.viewModel = viewModel
        super.init(nibName: nil, bundle: nil)
    }

    @available(*, unavailable)
    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    func setupBindings(for viewModel: ViewModelType) {
        rx.disposeBag = DisposeBag()
        self.viewModel = viewModel
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Content/ContentCoordinator.swift`:

```swift
//
//  EditorCoordinator.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

typealias ContentTransition = Transition<Void, ContentNavigationController>

class ContentCoordinator: ViewCoordinator<ContentRoute, ContentTransition> {
    protocol Delegate: AnyObject {
        func contentCoordinator(_ contentCoordinator: ContentCoordinator, completeTransition: ContentRoute)
    }

    let appServices: AppServices

    weak var delegate: Delegate?

    init(appServices: AppServices, delegate: Delegate) {
        self.delegate = delegate
        self.appServices = appServices
        super.init(rootViewController: .init(nibName: nil, bundle: nil), initialRoute: nil)
    }

    override func prepareTransition(for route: ContentRoute) -> ContentTransition {
        switch route {
        case .placeholder:
            let contentPlaceholderViewController = ContentPlaceholderViewController()
            let contentPlaceholderViewModel = ContentPlaceholderViewModel(appServices: appServices, router: self)
            contentPlaceholderViewController.setupBindings(for: contentPlaceholderViewModel)
            return .set([contentPlaceholderViewController], animated: false)
        case let .root(runtimeObjectType):
            let contentTextViewController = ContentTextViewController()
            let contentTextViewModel = ContentTextViewModel(runtimeObject: runtimeObjectType, appServices: appServices, router: self)
            contentTextViewController.setupBindings(for: contentTextViewModel)
            return .set([contentTextViewController], animated: false)
        case let .next(runtimeObjectType):
            let contentTextViewController = ContentTextViewController()
            let contentTextViewModel = ContentTextViewModel(runtimeObject: runtimeObjectType, appServices: appServices, router: self)
            contentTextViewController.setupBindings(for: contentTextViewModel)
            return .push(contentTextViewController, animated: true)
        case .back:
            return .pop(animated: true)
        }
    }

    override func completeTransition(for route: ContentRoute) {
        delegate?.contentCoordinator(self, completeTransition: route)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Content/ContentNavigationController.swift`:

```swift
//
//  ContentNavigationController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI

class ContentNavigationController: UXNavigationController {
    override func viewDidLoad() {
        super.viewDidLoad()
        
        isToolbarHidden = true
        isNavigationBarHidden = true
        view.canDrawSubviewsIntoLayer = true
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Content/ContentPlaceholderViewController.swift`:

```swift
//
//  ContentPlaceholderViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerCore
import RuntimeViewerArchitectures
import RuntimeViewerApplication

class ContentPlaceholderViewController: UXKitViewController<ContentPlaceholderViewModel> {
    let placeholderLabel = Label("Select a runtime object")

    override func viewDidLoad() {
        super.viewDidLoad()
        hierarchy {
            placeholderLabel
        }

        placeholderLabel.snp.makeConstraints { make in
            make.center.equalToSuperview()
        }

        placeholderLabel.do {
            $0.font = .systemFont(ofSize: 20, weight: .regular)
            $0.textColor = .secondaryLabelColor
        }
    }
    
    override func viewDidAppear() {
        super.viewDidAppear()
        
        view.window?.title = "Runtime Viewer"
        view.window?.subtitle = ""
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Content/ContentTextViewController.swift`:

```swift
//
//  ContentTextViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/7.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerCore
import RuntimeViewerApplication
import RuntimeViewerArchitectures

class ContentTextView: NSTextView {
    override func clicked(onLink link: Any, at charIndex: Int) {}
    override var acceptableDragTypes: [NSPasteboard.PasteboardType] { [] }
}

class ContentTextViewController: UXKitViewController<ContentTextViewModel>, NSTextViewDelegate {
    override var acceptsFirstResponder: Bool { true }

    let scrollView = ContentTextView.scrollableTextView()

    var textView: ContentTextView { scrollView.documentView as! ContentTextView }

//    lazy var lineNumberGutter = LineNumberGutter(withTextView: textView, foregroundColor: .secondaryLabelColor, backgroundColor: .clear)

    let eventMonitor = EventMonitor()

    let jumpToDefinitionRelay = PublishRelay<RuntimeObjectType>()

    override func viewDidLoad() {
        super.viewDidLoad()

        hierarchy {
            scrollView
        }

        scrollView.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }

        scrollView.do {
            $0.drawsBackground = true
        }

        textView.do {
            $0.isSelectable = true
            $0.isEditable = false
            $0.usesFindBar = true
            $0.textContainerInset = .init(width: 5.0, height: 5.0)
            $0.linkTextAttributes = [:]
            $0.delegate = self
        }
    }

    var isPressedCommand: Bool = false

    override func setupBindings(for viewModel: ContentTextViewModel) {
        super.setupBindings(for: viewModel)

        let input = ContentTextViewModel.Input(
            runtimeObjectClicked: Signal.of(textView.rx.methodInvoked(#selector(ContentTextView.clicked(onLink:at:))).map { $0[0] as! RuntimeObjectType }.asSignalOnErrorJustComplete().filter { [unowned self] _ in isPressedCommand }, jumpToDefinitionRelay.asSignal()).merge()
        )
        let output = viewModel.transform(input)

        output.attributedString.drive(with: self, onNext: { target, attributedString in
            target.textView.textStorage?.setAttributedString(attributedString)
        })
        .disposed(by: rx.disposeBag)

        output.theme.drive(with: self, onNext: {
            $0.textView.backgroundColor = $1.backgroundColor
            $0.scrollView.backgroundColor = $1.backgroundColor
        })
        .disposed(by: rx.disposeBag)
        rx.viewDidAppear.asDriver().flatMapLatest { output.imageNameOfRuntimeObject }.compactMap { $0 }.drive(with: self) { $0.view.window?.title = $1 }.disposed(by: rx.disposeBag)
        rx.viewDidAppear.asDriver().flatMapLatest { output.runtimeObjectName }.drive(with: self) { $0.view.window?.subtitle = $1 }.disposed(by: rx.disposeBag)

        eventMonitor.addLocalMonitorForEvents(matching: [.flagsChanged]) { [weak self] event in
            guard let self = self else { return event }
            isPressedCommand = event.modifierFlags.contains(.command)
            if isPressedCommand {
                textView.linkTextAttributes = [
                    .cursor: NSCursor.pointingHand,
                ]
            } else {
                textView.linkTextAttributes = [:]
            }
            return event
        }
    }

    func textView(_ view: NSTextView, menu: NSMenu, for event: NSEvent, at charIndex: Int) -> NSMenu? {
        var newMenuItems: [NSMenuItem] = []
        if let runtimeObjectType = view.attributedString().attributes(at: charIndex, effectiveRange: nil)[.link] as? RuntimeObjectType {
            let menuItem = JumpToDefinitionMenuItem(runtimeObjectType: runtimeObjectType)
            menuItem.target = self
            menuItem.action = #selector(jumpToDefinitionAction(_:))
            newMenuItems.append(menuItem)
        }
        newMenuItems.append(contentsOf: menu.items.filter { $0.action?.isStandardAction ?? false })
        menu.items = newMenuItems
        return menu
    }

    @objc func jumpToDefinitionAction(_ sender: JumpToDefinitionMenuItem) {
        jumpToDefinitionRelay.accept(sender.runtimeObjectType)
    }
}

class JumpToDefinitionMenuItem: NSMenuItem {
    let runtimeObjectType: RuntimeObjectType

    init(runtimeObjectType: RuntimeObjectType) {
        self.runtimeObjectType = runtimeObjectType
        super.init(title: "Jump to Definition", action: nil, keyEquivalent: "")
    }

    @available(*, unavailable)
    required init(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
}

extension Selector {
    var isStandardAction: Bool {
        self == #selector(NSText.cut(_:)) || self == #selector(NSText.copy(_:)) || self == #selector(NSText.paste(_:))
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Content/MinimapView.swift`:

```swift
import AppKit

// MARK: -

// MARK: Minimap view for macOS

/// Customised text view for the minimap.
///
class MinimapView: NSTextView {
    // Highlight the current line.
    //
    override func drawBackground(in rect: NSRect) {
        let rectWithinBounds = rect.intersection(bounds)
        super.drawBackground(in: rectWithinBounds)

        guard let textLayoutManager = textLayoutManager,
              let textContentStorage = textContentStorage
        else { return }

        let viewportRange = textLayoutManager.textViewportLayoutController.viewportRange

        // If the selection is an insertion point, highlight the corresponding line
        if let location = insertionPoint,
           let textLocation = textContentStorage.textLocation(for: location) {
            if viewportRange == nil
                || viewportRange!.contains(textLocation)
                || viewportRange!.endLocation.compare(textLocation) == .orderedSame {
                drawBackgroundHighlight(
                    within: rectWithinBounds,
                    forLineContaining: textLocation,
                    withColour: .textBackgroundColor
                )
            }
        }
    }
}

extension NSFont {
    /// The constant adavance for a (horizontal) monospace font.
    ///
    var maximumHorizontalAdvancement: CGFloat { maximumAdvancement.width }

    /// The line height (which is an exting property on `UIFont`).
    ///
    var lineHeight: CGFloat { ceil(ascender - descender - leading) }
}

// MARK: -

// MARK: Minimap layout functionality

class MinimapLineFragment: NSTextLineFragment {
    /// Text line fragment that we base our derived fragment on.
    ///
    /// `NSTextLineFragment` is a class cluster; hence, we need to embded a fragment generated by TextKit for us to get
    /// at its properties.
    ///
    private let textLineFragment: NSTextLineFragment

    /// All rendering attribute runs applying to this line.
    ///
    private let attributes: [MinimapLayoutFragment.AttributeRun]

    /// The advacement per glyph (for a monospaced font).
    ///
    private let advancement: CGFloat

    init(_ textLineFragment: NSTextLineFragment, attributes: [MinimapLayoutFragment.AttributeRun]) {
        self.textLineFragment = textLineFragment
        self.attributes = attributes

        let attributedString = textLineFragment.attributedString,
            range = textLineFragment.characterRange

        // Determine the advancement per glyph (assuming a monospaced font), scaling it down for the minimap.
        let font = if range.length > 0,
                      let font = attributedString.attribute(.font, at: range.location, effectiveRange: nil) as? NSFont { font }
        else { NSFont.monospacedSystemFont(ofSize: NSFont.systemFontSize, weight: .regular) }
        self.advancement = font.maximumHorizontalAdvancement / minimapRatio

        super.init(attributedString: attributedString, range: range)
    }

    @available(*, unavailable)
    required init?(coder aDecoder: NSCoder) { fatalError("init(coder:) has not been implemented") }

    override var glyphOrigin: CGPoint { CGPoint(
        x: textLineFragment.glyphOrigin.x / minimapRatio,
        y: textLineFragment.glyphOrigin.y / minimapRatio
    ) }

    override var typographicBounds: CGRect {
        CGRect(
            x: textLineFragment.typographicBounds.minX / minimapRatio,
            y: textLineFragment.typographicBounds.minY / minimapRatio,
            width: textLineFragment.typographicBounds.width / minimapRatio,
            height: textLineFragment.typographicBounds.height / minimapRatio
        )
    }

    override func characterIndex(for point: CGPoint) -> Int {
        textLineFragment.characterIndex(for: CGPoint(x: point.x * minimapRatio, y: point.y * minimapRatio))
    }

    override func fractionOfDistanceThroughGlyph(for point: CGPoint) -> CGFloat {
        textLineFragment.fractionOfDistanceThroughGlyph(for: point)
    }

    override func locationForCharacter(at index: Int) -> CGPoint {
        let point = textLineFragment.locationForCharacter(at: index)
        return CGPoint(x: point.x / minimapRatio, y: point.y / minimapRatio)
    }

    // Draw boxes using a character's foreground colour instead of actual glyphs.
    override func draw(at point: CGPoint, in context: CGContext) {
        // Leave some space between glyph boxes on adjacent lines
        let gap = typographicBounds.height * 0.3

        for attribute in attributes {
            let attributeRect = CGRect(
                x: floor(point.x + advancement * CGFloat(attribute.range.location)),
                y: floor(point.y + gap / 2),
                width: floor(advancement * CGFloat(attribute.range.length)),
                height: typographicBounds.height - gap
            )
            if let colour = attribute.attributes[.foregroundColor] as? NSColor {
                colour.withAlphaComponent(0.50).setFill()
            }
            NSBezierPath(rect: attributeRect).fill()
        }
    }
}

/// Minimap layout fragments replaces all line fragments by a our own variant of minimap line fragments, which draw
/// coloured boxes instead of actual glyphs.
///
class MinimapLayoutFragment: NSTextLayoutFragment {
    private var _textLineFragments: [NSTextLineFragment] = []

    private var observation: NSKeyValueObservation?

    override var layoutFragmentFrame: CGRect {
        CGRect(
            x: super.layoutFragmentFrame.minX,
            y: super.layoutFragmentFrame.minY,
            width: super.layoutFragmentFrame.width / minimapRatio,
            height: super.layoutFragmentFrame.height / minimapRatio
        )
    }

    // NB: We don't override `renderingSurfaceBounds` as that is calculated on the basis of `layoutFragmentFrame`.

    @objc override dynamic var textLineFragments: [NSTextLineFragment] {
        return _textLineFragments
    }

    override init(textElement: NSTextElement, range rangeInElement: NSTextRange?) {
        super.init(textElement: textElement, range: rangeInElement)
        self.observation = super.observe(\.textLineFragments, options: [.new]) { [weak self] _, _ in

            // NB: We cannot use `change.newValue` as this seems to pull the value from the subclass property (which we
            //     want to update here). Instead, we need to directly access `super`. This is, however as per Swift 5.9
            //     not possible in a closure weakly capturing `self` (which we need to do here to avoid a retain cycle).
            //     Hence, we defer to an auxilliary method.
            self?.updateTextLineFragments()
        }
    }

    typealias AttributeRun = (attributes: [NSAttributedString.Key: Any], range: NSRange)

    // We don't draw white space and control characters
    private let invisibleCharacterers = CharacterSet.whitespacesAndNewlines.union(CharacterSet.controlCharacters)
    private lazy var invertedInvisibleCharacters = invisibleCharacterers.inverted

    /// Update the text line fragments from the corresponding property of `super`.
    ///
    private func updateTextLineFragments() {
        if let textLayoutManager = textLayoutManager {
            var location = rangeInElement.location
            _textLineFragments = []
            for fragment in super.textLineFragments {
                guard let string = (fragment.attributedString.string[fragment.characterRange].flatMap { String($0) })
                else { break }

                let attributeRuns
                    = if let endLocation = textLayoutManager.location(location, offsetBy: fragment.characterRange.length),
                    let textRange = NSTextRange(location: location, end: endLocation) {
                    textLayoutManager.renderingAttributes(in: textRange).map { attributeRun in
                        (
                            attributes: attributeRun.attributes,
                            range: NSRange(
                                location: textLayoutManager.offset(from: location, to: attributeRun.textRange.location),
                                length: textLayoutManager.offset(from: attributeRun.textRange.location, to: attributeRun.textRange.endLocation)
                            )
                        )
                    }
                } else { [AttributeRun]() }

                var attributeRunsWithoutWhitespace: [AttributeRun] = []
                for (attributes, range) in attributeRuns {
                    if attributes[.hideInvisibles] == nil {
                        attributeRunsWithoutWhitespace.append((attributes: attributes, range: range))
                    } else {
                        var remainingRange = range
                        while remainingRange.length > 0,
                              let match = string.rangeOfCharacter(from: invisibleCharacterers, range: remainingRange.range(in: string)) {
                            let lower = match.lowerBound.utf16Offset(in: string),
                                upper = min(match.upperBound.utf16Offset(in: string), remainingRange.max)

                            // If we have got a prefix with visible characters, emit an attribute run covering those.
                            if lower > remainingRange.location {
                                attributeRunsWithoutWhitespace.append((
                                    attributes: attributes,
                                    range: NSRange(
                                        location: remainingRange.location,
                                        length: lower - remainingRange.location
                                    )
                                ))
                            }

                            // Advance the remaining range to after the character found in `match`.
                            remainingRange = NSRange(
                                location: upper,
                                length: remainingRange.length - (upper - remainingRange.location)
                            )

                            if let nextVisibleCharacter = string.rangeOfCharacter(
                                from: invertedInvisibleCharacters,
                                range: remainingRange.range(in: string)
                            ) {
                                // If there is another visible character, the new remaining range starts with that character.
                                let lower = nextVisibleCharacter.lowerBound.utf16Offset(in: string)
                                remainingRange = NSRange(
                                    location: lower,
                                    length: remainingRange.length - (lower - remainingRange.location)
                                )

                            } else { // If there are no more visible characters, we are done.
                                remainingRange.length = 0
                            }
                        }
                    }
                }
                _textLineFragments.append(MinimapLineFragment(fragment, attributes: attributeRunsWithoutWhitespace))
                location = textLayoutManager.location(location, offsetBy: fragment.characterRange.length) ?? location
            }
        }
    }

    @available(*, unavailable)
    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
}

class MinimapTextLayoutManagerDelegate: NSObject, NSTextLayoutManagerDelegate {
    // We create instances of our own flavour of layout fragments
    func textLayoutManager(_ textLayoutManager: NSTextLayoutManager,
                           textLayoutFragmentFor location: NSTextLocation,
                           in textElement: NSTextElement)
        -> NSTextLayoutFragment {
        guard let paragraph = textElement as? NSTextParagraph
        else { return NSTextLayoutFragment(textElement: textElement, range: nil) }

        return MinimapLayoutFragment(textElement: paragraph, range: nil)
    }
}

let minimapRatio = CGFloat(8)

extension NSAttributedString.Key {
    /// Attribute to indicate that an attribute run has the default styling and not a token-specific styling.
    ///
    static let hideInvisibles: NSAttributedString.Key = .init("hideInvisibles")
}

extension NSTextView {
    typealias Color = NSColor
    typealias Font = NSFont

    var optTextLayoutManager: NSTextLayoutManager? { textLayoutManager }
    var optTextContainer: NSTextContainer? { textContainer }
    var optTextContentStorage: NSTextContentStorage? { textContentStorage }

    var textBackgroundColor: Color? { backgroundColor }
    var textFont: Font? { font }
    var textContainerOrigin: CGPoint { return CGPoint(x: textContainerInset.width, y: textContainerInset.height) }

    var text: String! {
        get { string }
        set { string = newValue }
    }

    var insertionPoint: Int? {
        if let selection = selectedRanges.first as? NSRange, selection.length == 0 { return selection.location }
        else { return nil }
    }

    var documentVisibleRect: CGRect { enclosingScrollView?.documentVisibleRect ?? bounds }

    var contentSize: CGSize { bounds.size }

    func drawBackgroundHighlight(within rect: CGRect,
                                 forLineContaining textLocation: NSTextLocation,
                                 withColour colour: NSColor) {
        guard let textLayoutManager = optTextLayoutManager else { return }

        colour.setFill()
        if let fragmentFrame = textLayoutManager.textLayoutFragment(for: textLocation)?.layoutFragmentFrameWithoutExtraLineFragment,
           let highlightRect = lineBackgroundRect(y: fragmentFrame.minY, height: fragmentFrame.height) {
            let clippedRect = highlightRect.intersection(rect)
            if !clippedRect.isNull { NSBezierPath(rect: clippedRect).fill() }

        } else
        if let previousLocation = optTextContentStorage?.location(textLocation, offsetBy: -1),
           let fragmentFrame = textLayoutManager.textLayoutFragment(for: previousLocation)?.layoutFragmentFrameExtraLineFragment,
           let highlightRect = lineBackgroundRect(y: fragmentFrame.minY, height: fragmentFrame.height) {
            let clippedRect = highlightRect.intersection(rect)
            if !clippedRect.isNull { NSBezierPath(rect: clippedRect).fill() }
        }
    }

    func lineBackgroundRect(y: CGFloat, height: CGFloat) -> CGRect? {
        // We start at x = 0 as it looks nicer in case we overscoll when horizontal scrolling is enabled (i.e., when lines
        // are not wrapped).
        return CGRect(x: 0, y: y, width: bounds.size.width, height: height)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Content/NSTextContentStorage+.swift`:

```swift
import SwiftUI

extension NSTextContentStorage {
    /// Convert a text location to a character location within this text content storage.
    ///
    /// - Parameter textLocation: The text location to convert.
    /// - Returns: The corresponding character position in the underlying text storage.
    ///
    func location(for textLocation: NSTextLocation) -> Int {
        offset(from: documentRange.location, to: textLocation)
    }

    /// Convert a character location into a text location within this text content storage.
    ///
    /// - Parameter location: The character location to convert.
    /// - Returns: The corresponding text location.
    ///
    func textLocation(for location: Int) -> NSTextLocation? {
        self.location(documentRange.location, offsetBy: location)
    }

    /// Convert a text range to a character range within this text content storage.
    ///
    /// - Parameter textRange: The text range to convert.
    /// - Returns: The corresponding character range in the underlying text storage.
    ///
    func range(for textRange: NSTextRange) -> NSRange {
        NSRange(
            location: offset(from: documentRange.location, to: textRange.location),
            length: offset(from: textRange.location, to: textRange.endLocation)
        )
    }

    /// Convert a character range to a text range within this text content storage.
    ///
    /// - Parameter range: The character range to convert.
    /// - Returns: The corresponding text range in the underlying text storage if there exists a corresponding valid text
    ///     range.
    ///
    func textRange(for range: NSRange) -> NSTextRange? {
        // NB: `NSTextRange(location:end:)` crashes if `end` is before `start` (instead of returning `nil`).
        guard range.length >= 0 else { return nil }

        if let start = location(documentRange.location, offsetBy: range.location),
           let end = location(start, offsetBy: range.length) {
            return NSTextRange(location: start, end: end)
        } else { return nil }
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Content/NSTextLayoutManager+.swift`:

```swift
import SwiftUI

// MARK: -

// MARK: 'NSTextLayoutFragment' extras

extension NSTextLayoutFragment {
    /// Yield the layout fragment's frame, but without the height of an extra line fragment if present.
    ///
    var layoutFragmentFrameWithoutExtraLineFragment: CGRect {
        var frame = layoutFragmentFrame

        // If this layout fragment's last line fragment is for an empty string, then it is an extra line fragment and we
        // deduct its height from the layout fragment's height.
        if let lastTextLineFragment = textLineFragments.last, lastTextLineFragment.characterRange.length == 0 {
            frame.size.height -= lastTextLineFragment.typographicBounds.height
        }
        return frame
    }

    /// This is a temporary kludge to fix the height of the extra line fragment in case the size of the font used in the
    /// rest of the layout fragment varies from the standard font size. In TextKit 2, it is far from clear how to
    /// indicate the metrics to be used in a nicer manner. (Just setting the default font of the text view doesn't seem
    /// to work.)
    ///
    /// The solution here only works if there is at least one other line fragment (but that's always the case if the
    /// displayed string is now empty) and we use them same font height everywhere (which is the case for a code view).
    /// We simply use height of another line fragement for that of the extra line fragment and adjust the overall frame
    /// accordingly.
    ///
    var layoutFragmentFrameAdjustedKludge: CGRect {
        var frame = layoutFragmentFrame

        // If this layout fragment's last line fragment is for an empty string, then it is an extra line fragment and we
        // deduct its height from the layout fragment's height.
        if let firstTextLineFragment = textLineFragments.first,
           let lastTextLineFragment = textLineFragments.last,
           lastTextLineFragment.characterRange.length == 0 {
            frame.size.height -= lastTextLineFragment.typographicBounds.height
            frame.size.height += firstTextLineFragment.typographicBounds.height
        }
        return frame
    }

    /// Yield the frame of the layout fragment's extra line fragment if present (which is the case if this the last
    /// line fragment and it is terminated by a newline character).
    ///
    var layoutFragmentFrameExtraLineFragment: CGRect? {
        // If this layout fragment's last line fragment is for an empty string, then it is an extra line fragment and
        // return its bounds.
        if let lastTextLineFragment = textLineFragments.last, lastTextLineFragment.characterRange.length == 0 {
            let height = lastTextLineFragment.typographicBounds.height
            return CGRect(
                x: layoutFragmentFrame.minX,
                y: layoutFragmentFrame.maxY - height,
                width: layoutFragmentFrame.width,
                height: height
            )
        } else {
            return nil
        }
    }
}

// MARK: -

// MARK: 'NSTextLayoutManager' extras

extension NSTextLayoutManager {
    /// Yield the height of the entire set of text fragments covering the given text range.
    ///
    /// - Parameter textRange: The text range for which we want to compute the height of the text fragments.
    /// - Returns: The height of the text fragments.
    ///
    /// If there are gaps, they are included. If the range reaches until the end of the text and there is extra line
    /// fragment, then it is included, too.
    ///
    func textLayoutFragmentExtent(for textRange: NSTextRange) -> (y: CGFloat, height: CGFloat)? {
        let location = textRange.location

        if location.compare(documentRange.endLocation) == .orderedSame { // Start of range == end of the document
            if let lastLocation = textContentManager?.location(textRange.endLocation, offsetBy: -1),
               let lastTextLayoutFragment = textLayoutFragment(for: lastLocation),
               let lastTextLineFragment = lastTextLayoutFragment.textLineFragments.last,
               lastTextLineFragment.characterRange.length == 0 { // trailing newline at the end of the document
                // Extra line fragement
                let typographicBounds = lastTextLineFragment.typographicBounds
                return (
                    y: lastTextLayoutFragment.layoutFragmentFrame.minY + typographicBounds.minY,
                    height: typographicBounds.height
                )

            } else { // no trailing newline at the end of the document
                if let endLocation = textContentManager?.location(textRange.endLocation, offsetBy: -1),
                   let endFrame = textLayoutFragment(for: endLocation)?.layoutFragmentFrame {
                    return (y: endFrame.minY, height: endFrame.height)

                } else { return nil }
            }

        } else {
            let endLocation = if textRange.isEmpty { nil as NSTextLocation? }
            else { textContentManager?.location(textRange.endLocation, offsetBy: -1) },
                startFragment = textLayoutFragment(for: location),
                startFrame = startFragment?.layoutFragmentFrame,
                endFragment = if let endLocation { textLayoutFragment(for: endLocation) }
            else { nil as NSTextLayoutFragment? },
                endFrame = endFragment?.layoutFragmentFrameAdjustedKludge

            switch (startFrame, endFrame) {
            case (nil, nil): return nil
            case (.some(let startFrame), nil): return (y: startFrame.minY, height: startFrame.height)
            case (nil, let .some(endFrame)): return (y: endFrame.minY, height: endFrame.height)
            case let (.some(startFrame), .some(endFrame)):
                if startFrame.minY < endFrame.minY {
                    return (y: startFrame.minY, height: endFrame.maxY - startFrame.minY)
                } else {
                    return (y: endFrame.minY, height: startFrame.maxY - endFrame.minY)
                }
            }
        }
    }

    /// Enumerate all the text layout fragments that lie (partly) in the given range.
    ///
    /// - Parameters:
    ///   - range: The range for which we want to enumerate the text layout fragments.
    ///   - options: Enumeration options.
    ///   - block: The block to invoke on each eumerated text layout fragment.
    /// - Returns: See `NSTextLayoutFragment.enumerateTextLayoutFragments(from:options:using:)`.
    ///
    @discardableResult
    func enumerateTextLayoutFragments(in textRange: NSTextRange,
                                      options: NSTextLayoutFragment.EnumerationOptions = [],
                                      using block: (NSTextLayoutFragment) -> Bool)
        -> NSTextLocation? {
        // FIXME: This doesn't work if the options include `.reverse`.
        enumerateTextLayoutFragments(from: textRange.location, options: options) { textLayoutFragment in
            textLayoutFragment.rangeInElement.location.compare(textRange.endLocation) == .orderedAscending
                && block(textLayoutFragment)
        }
    }

    /// Compute the smallest rect that encompasses all text layout fragments that (partly) lie in the given range.
    ///
    /// - Parameter textRange: The range for which we want to compute the bounding box.
    /// - Returns: The bounding box.
    ///
    func textLayoutFragmentBoundingRect(for textRange: NSTextRange) -> CGRect {
        var boundingBox: CGRect = .null
        enumerateTextLayoutFragments(in: textRange, options: [.ensuresExtraLineFragment]) { textLayoutFragment in
            boundingBox = boundingBox.union(textLayoutFragment.layoutFragmentFrame)
            return true
        }
        return boundingBox
    }

    /// Determine the bounding rect of the first text segment of a given text range.
    ///
    /// - Parameter textRange: The text range for which we want to determine the first segment.
    /// - Returns: The bounding rect of the first text segment if any.
    ///
    func boundingRectOfFirstTextSegment(for textRange: NSTextRange) -> CGRect? {
        var result: CGRect?
        enumerateTextSegments(in: textRange, type: .standard, options: .rangeNotRequired) { _, rect, _, _ in
            result = rect
            return false
        }
        return result
    }

    /// Enumerates the rendering attributes within a given range.
    ///
    /// - Parameters:
    ///   - textRange: The text range whose rendering attributes are to be enumerated.
    ///   - reverse: Whether to enumerate in reverse; i.e., right-to-left.
    ///   - block: A closure invoked for each attribute run within the range.
    ///
    func enumerateRenderingAttributes(in textRange: NSTextRange,
                                      reverse: Bool,
                                      using block: (NSTextLayoutManager, [NSAttributedString.Key: Any], NSTextRange) -> Void) {
        if !reverse {
            enumerateRenderingAttributes(from: textRange.location, reverse: false) { textLayoutManager, attributes, attributeRange in

                if let clippedRange = attributeRange.intersection(textRange) {
                    block(textLayoutManager, attributes, clippedRange)
                }
                return attributeRange.endLocation.compare(textRange.endLocation) == .orderedAscending
            }

        } else {
            enumerateRenderingAttributes(from: textRange.endLocation, reverse: true) { textLayoutManager, attributes, attributeRange in

                if let clippedRange = attributeRange.intersection(textRange) {
                    block(textLayoutManager, attributes, clippedRange)
                }
                return attributeRange.location.compare(textRange.location) == .orderedDescending
            }
        }
    }

    /// A set of string attributes together with a text range to which they apply.
    ///
    typealias AttributeRun = (attributes: [NSAttributedString.Key: Any], textRange: NSTextRange)

    /// Collect all rendering attributes and their character ranges within a given text range.
    ///
    /// - Parameter textRange: The text range in which we want to collect rendering attributes.
    /// - Returns: An array of pairs and associated range for all rendering attributes within the given text range.
    ///
    func renderingAttributes(in textRange: NSTextRange) -> [AttributeRun] {
        var attributes: [(attributes: [NSAttributedString.Key: Any], textRange: NSTextRange)] = []
        enumerateRenderingAttributes(in: textRange, reverse: false) { attributes.append((attributes: $1, textRange: $2)) }
        return attributes
    }
}

// MARK: -

// MARK: 'NSTextLayoutManager' workaround

// There appears to be a bug in the implementation of 'NSTextLayoutManager' on at least macOS 14. Specifically, during
// processing of an edit operation, a closure stored in `renderingAttributesValidator` gets called before the layout
// manager has updated its data structures to text locations *after* the edit. As a result, calls to
// `setRenderingAttributes(_:for:)` (and related methods) will set rendering attributes in the vicinity of the edit
// location for shifted character ranges (if the edit operation changes the length of the text).
//
// It turns out that we can work around this issue by delaying the calls to `setRenderingAttributes(_:for:)` until after
// `NSTextContentManager.hasEditingTransaction` is `false`. We achieve this by using KVO to observe
// `hasEditingTransaction`, in order to trigger attribute setting after the editing transaction has completed.
//
// Unfortunately, the fix involving `NSTextContentManager.hasEditingTransaction`, on its own, is not sufficient, as
// `hasEditingTransaction` is not being used in case of a a paste command or in case of an undo/redo. In these cases,
// we wait until the `CodeViewDelegate` receives a `textDidChange` notification to trigger setting the attributes.

extension NSTextLayoutManager {
    private final class PendingTextLayoutFragments {
        var fragments: [NSTextLayoutFragment] = []
    }

    /// Notifies the layout manager that the rendering attributes in the given range need to be validated and redisplayed.
    ///
    /// - Parameter for: The range whose attributes need to be validated and redeisplayed.
    ///
    /// NB: This may be a large range. In this case, the work should be cut up to avoid unresponsiveness.
    ///
    func redisplayRenderingAttributes(for textRange: NSTextRange) {
        enumerateTextLayoutFragments(in: textRange) { textLayoutFragment in

            // We spawn a task per layout fragment to cut up the work.
            Task { @MainActor in // The non-sendable warnings are bogus as this goes to the `MainActor`.
                renderingAttributesValidator?(self, textLayoutFragment)
            }
            return true
        }

        // FIXME: Ensure that all the tasks with `renderingAttributesValidator` have complete before running the following.
        // FIXME: Well actually, only those within the viewport, for better responsiveness!
        _ = if let viewportRange = textViewportLayoutController.viewportRange
        { textRange.intersection(viewportRange) ?? textRange } else { textRange }
        // NB: Setting rendering attributes does not trigger redrawing of the affected area. We need to do that explicitly.
        Task { @MainActor in // The non-sendable warnings are bogus as this goes to the `MainActor`.
//            if let textContentStorage = textContentManager as? NSTextContentStorage,
//               let textStorage = textContentStorage.textStorage {
            // This seems the most reliable way to force a redraw of the affected (visible) area.
//                let range = textContentStorage.range(for: visibleTextRange)

            // FIXME: This code has been disabled, because it interferes with the setting of the `selectedRanges` (specifically, the
            // FIXME: insertion point) from macOS 15.1 (maybe already 15.0) onwards — see Issue #114.
//        textContentStorage.processEditing(for: textStorage,
//                                          edited: .editedAttributes,
//                                          range: range,
//                                          changeInLength: 0,
//                                          invalidatedRange: range)
//            }
        }
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Debug.xcconfig`:

```xcconfig
SMPrivilegedExecutable = identifier "com.JH.RuntimeViewerService" and anchor apple generic and certificate leaf[subject.CN] = "Apple Development: JieHui Lai (4ZZALU97YZ)" and certificate 1[field.1.2.840.113635.100.6.2.1] /* exists */



```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Generation Options/GenerationOptionsViewController.swift`:

```swift
//
//  GenerationOptionsViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/29.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

class GenerationOptionsViewController: AppKitViewController<GenerationOptionsViewModel<MainRoute>> {
    let generationOptionsLabel = Label("Generation Options")

    let stripProtocolConformanceCheckbox = CheckboxButton(title: "Strip Protocol Conformance")

    let stripOverridesCheckbox = CheckboxButton(title: "Strip Overrides")

    let stripDuplicatesCheckbox = CheckboxButton(title: "Strip Duplicates")

    let stripSynthesizedCheckbox = CheckboxButton(title: "Strip Synthesized")

    let stripCtorMethodCheckbox = CheckboxButton(title: "Strip Ctor Method")

    let stripDtorMethodCheckbox = CheckboxButton(title: "Strip Dtor Method")

    let addSymbolImageCommentsCheckbox = CheckboxButton(title: "Add Symbol Image Comments")

    let addIvarOffsetCommentsCheckbox = CheckboxButton(title: "Add Ivar Offset Comments")

    let expandIvarRecordTypeMembersCheckbox = CheckboxButton(title: "Expand Ivar Record Type Members")
    
    lazy var generationOptionsView = VStackView(alignment: .left, spacing: 10) {
        generationOptionsLabel
        stripProtocolConformanceCheckbox
        stripOverridesCheckbox
        stripDuplicatesCheckbox
        stripSynthesizedCheckbox
        stripCtorMethodCheckbox
        stripDtorMethodCheckbox
        addSymbolImageCommentsCheckbox
        addIvarOffsetCommentsCheckbox
        expandIvarRecordTypeMembersCheckbox
    }

    override func viewDidLoad() {
        super.viewDidLoad()

        hierarchy {
            generationOptionsView
        }

        generationOptionsView.snp.makeConstraints { make in
            make.edges.equalToSuperview().inset(15)
        }

        preferredContentSize = generationOptionsView.fittingSize.inset(15)
    }

    override func setupBindings(for viewModel: GenerationOptionsViewModel<MainRoute>) {
        super.setupBindings(for: viewModel)

        let input = GenerationOptionsViewModel<MainRoute>.Input(
            stripProtocolConformanceChecked: stripProtocolConformanceCheckbox.rx.state.asSignal().map { $0 == .on },
            stripOverridesChecked: stripOverridesCheckbox.rx.state.asSignal().map { $0 == .on },
            stripDuplicatesChecked: stripDuplicatesCheckbox.rx.state.asSignal().map { $0 == .on },
            stripSynthesizedChecked: stripSynthesizedCheckbox.rx.state.asSignal().map { $0 == .on },
            stripCtorMethodChecked: stripCtorMethodCheckbox.rx.state.asSignal().map { $0 == .on },
            stripDtorMethodChecked: stripDtorMethodCheckbox.rx.state.asSignal().map { $0 == .on },
            addSymbolImageCommentsChecked: addSymbolImageCommentsCheckbox.rx.state.asSignal().map { $0 == .on },
            addIvarOffsetCommentsChecked: addIvarOffsetCommentsCheckbox.rx.state.asSignal().map { $0 == .on },
            expandIvarRecordTypeMembersChecked: expandIvarRecordTypeMembersCheckbox.rx.state.asSignal().map { $0 == .on }
        )
        let output = viewModel.transform(input)

        output.stripProtocolConformanceChecked.drive(stripProtocolConformanceCheckbox.rx.isCheck).disposed(by: rx.disposeBag)
        output.stripOverridesChecked.drive(stripOverridesCheckbox.rx.isCheck).disposed(by: rx.disposeBag)
        output.stripDuplicatesChecked.drive(stripDuplicatesCheckbox.rx.isCheck).disposed(by: rx.disposeBag)
        output.stripSynthesizedChecked.drive(stripSynthesizedCheckbox.rx.isCheck).disposed(by: rx.disposeBag)
        output.stripCtorMethodChecked.drive(stripCtorMethodCheckbox.rx.isCheck).disposed(by: rx.disposeBag)
        output.stripDtorMethodChecked.drive(stripDtorMethodCheckbox.rx.isCheck).disposed(by: rx.disposeBag)
        output.addSymbolImageCommentsChecked.drive(addSymbolImageCommentsCheckbox.rx.isCheck).disposed(by: rx.disposeBag)
        output.addIvarOffsetCommentsChecked.drive(addIvarOffsetCommentsCheckbox.rx.isCheck).disposed(by: rx.disposeBag)
        output.expandIvarRecordTypeMembersChecked.drive(expandIvarRecordTypeMembersCheckbox.rx.isCheck).disposed(by: rx.disposeBag)
    }
}

extension CGSize {
    func inset(_ value: CGFloat) -> CGSize {
        return .init(width: width + value * 2, height: height + value * 2)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Generation Options/GenerationOptionsViewModel.swift`:

```swift
//
//  GenerationOptionsViewModel.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/7/13.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

class GenerationOptionsViewModel<Route: Routable>: ViewModel<Route> {
    public struct Input {
        public let stripProtocolConformanceChecked: Signal<Bool>
        public let stripOverridesChecked: Signal<Bool>
        public let stripDuplicatesChecked: Signal<Bool>
        public let stripSynthesizedChecked: Signal<Bool>
        public let stripCtorMethodChecked: Signal<Bool>
        public let stripDtorMethodChecked: Signal<Bool>
        public let addSymbolImageCommentsChecked: Signal<Bool>
        public let addIvarOffsetCommentsChecked: Signal<Bool>
        public let expandIvarRecordTypeMembersChecked: Signal<Bool>
        public init(
            stripProtocolConformanceChecked: Signal<Bool>,
            stripOverridesChecked: Signal<Bool>,
            stripDuplicatesChecked: Signal<Bool>,
            stripSynthesizedChecked: Signal<Bool>,
            stripCtorMethodChecked: Signal<Bool>,
            stripDtorMethodChecked: Signal<Bool>,
            addSymbolImageCommentsChecked: Signal<Bool>,
            addIvarOffsetCommentsChecked: Signal<Bool>,
            expandIvarRecordTypeMembersChecked: Signal<Bool>
        ) {
            self.stripProtocolConformanceChecked = stripProtocolConformanceChecked
            self.stripOverridesChecked = stripOverridesChecked
            self.stripDuplicatesChecked = stripDuplicatesChecked
            self.stripSynthesizedChecked = stripSynthesizedChecked
            self.stripCtorMethodChecked = stripCtorMethodChecked
            self.stripDtorMethodChecked = stripDtorMethodChecked
            self.addSymbolImageCommentsChecked = addSymbolImageCommentsChecked
            self.addIvarOffsetCommentsChecked = addIvarOffsetCommentsChecked
            self.expandIvarRecordTypeMembersChecked = expandIvarRecordTypeMembersChecked
        }
    }

    public struct Output {
        public let stripProtocolConformanceChecked: Driver<Bool>
        public let stripOverridesChecked: Driver<Bool>
        public let stripDuplicatesChecked: Driver<Bool>
        public let stripSynthesizedChecked: Driver<Bool>
        public let stripCtorMethodChecked: Driver<Bool>
        public let stripDtorMethodChecked: Driver<Bool>
        public let addSymbolImageCommentsChecked: Driver<Bool>
        public let addIvarOffsetCommentsChecked: Driver<Bool>
        public let expandIvarRecordTypeMembersChecked: Driver<Bool>
    }

    public func transform(_ input: Input) -> Output {
        input.stripProtocolConformanceChecked.emitOnNext { AppDefaults[\.options].stripProtocolConformance = $0 }.disposed(by: rx.disposeBag)
        input.stripOverridesChecked.emitOnNext { AppDefaults[\.options].stripOverrides = $0 }.disposed(by: rx.disposeBag)
        input.stripDuplicatesChecked.emitOnNext { AppDefaults[\.options].stripDuplicates = $0 }.disposed(by: rx.disposeBag)
        input.stripSynthesizedChecked.emitOnNext { AppDefaults[\.options].stripSynthesized = $0 }.disposed(by: rx.disposeBag)
        input.stripCtorMethodChecked.emitOnNext { AppDefaults[\.options].stripCtorMethod = $0 }.disposed(by: rx.disposeBag)
        input.stripDtorMethodChecked.emitOnNext { AppDefaults[\.options].stripDtorMethod = $0 }.disposed(by: rx.disposeBag)
        input.addSymbolImageCommentsChecked.emitOnNext { AppDefaults[\.options].addSymbolImageComments = $0 }.disposed(by: rx.disposeBag)
        input.addIvarOffsetCommentsChecked.emitOnNext { AppDefaults[\.options].addIvarOffsetComments = $0 }.disposed(by: rx.disposeBag)
        input.expandIvarRecordTypeMembersChecked.emitOnNext { AppDefaults[\.options].expandIvarRecordTypeMembers = $0 }.disposed(by: rx.disposeBag)
        return Output(
            stripProtocolConformanceChecked: AppDefaults[\.$options].asDriverOnErrorJustComplete().map(\.stripProtocolConformance),
            stripOverridesChecked: AppDefaults[\.$options].asDriverOnErrorJustComplete().map(\.stripOverrides),
            stripDuplicatesChecked: AppDefaults[\.$options].asDriverOnErrorJustComplete().map(\.stripDuplicates),
            stripSynthesizedChecked: AppDefaults[\.$options].asDriverOnErrorJustComplete().map(\.stripSynthesized),
            stripCtorMethodChecked: AppDefaults[\.$options].asDriverOnErrorJustComplete().map(\.stripCtorMethod),
            stripDtorMethodChecked: AppDefaults[\.$options].asDriverOnErrorJustComplete().map(\.stripDtorMethod),
            addSymbolImageCommentsChecked: AppDefaults[\.$options].asDriverOnErrorJustComplete().map(\.addSymbolImageComments),
            addIvarOffsetCommentsChecked: AppDefaults[\.$options].asDriverOnErrorJustComplete().map(\.addIvarOffsetComments),
            expandIvarRecordTypeMembersChecked: AppDefaults[\.$options].asDriverOnErrorJustComplete().map(\.expandIvarRecordTypeMembers)
        )
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Info.plist`:

```plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>CFBundleDocumentTypes</key>
	<array>
		<dict>
			<key>CFBundleTypeName</key>
			<string>RuntimeViewer Document</string>
			<key>CFBundleTypeRole</key>
			<string>Editor</string>
			<key>LSHandlerRank</key>
			<string>Default</string>
			<key>LSItemContentTypes</key>
			<array>
				<string>com.JH.RuntimeViewer.Document</string>
			</array>
			<key>NSDocumentClass</key>
			<string>$(PRODUCT_MODULE_NAME).Document</string>
		</dict>
	</array>
	<key>NSBonjourServices</key>
	<array>
		<string>_runtimeviewer._tcp</string>
	</array>
	<key>SMPrivilegedExecutables</key>
	<dict>
		<key>com.JH.RuntimeViewerService</key>
		<string>$(SMPrivilegedExecutable)</string>
	</dict>
	<key>UTImportedTypeDeclarations</key>
	<array>
		<dict>
			<key>UTTypeConformsTo</key>
			<array>
				<string>public.data</string>
			</array>
			<key>UTTypeDescription</key>
			<string>RuntimeViewer Document</string>
			<key>UTTypeIcons</key>
			<dict/>
			<key>UTTypeIdentifier</key>
			<string>com.JH.RuntimeViewer.Document</string>
			<key>UTTypeTagSpecification</key>
			<dict>
				<key>public.filename-extension</key>
				<array>
					<string>runtimedocument</string>
				</array>
			</dict>
		</dict>
	</array>
</dict>
</plist>

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Inspector/InspectorClassViewController.swift`:

```swift
//
//  InspectorClassViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/7/6.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerApplication
import RuntimeViewerArchitectures

class InspectorClassViewModel: ViewModel<InspectorRoute> {
    @Observed
    private var runtimeClassName: String

    struct Input {}

    struct Output {
        let classHierarchy: Driver<String>
    }

    func transform(_ input: Input) -> Output {
        return Output(
            classHierarchy: $runtimeClassName.flatMapLatest { [unowned self] runtimeClassName in
                do {
                    return try await appServices.runtimeEngine.runtimeObjectHierarchy(.class(named: runtimeClassName)).joined(separator: "\n")
                } catch {
                    print(error.localizedDescription)
                    return runtimeClassName
                }
            }.catchAndReturn(runtimeClassName).observeOnMainScheduler().asDriverOnErrorJustComplete()
        )
    }

    init(runtimeClassName: String, appServices: AppServices, router: any Router<InspectorRoute>) {
        self.runtimeClassName = runtimeClassName
        super.init(appServices: appServices, router: router)
    }
}

class InspectorDisclosureView<ContentView: NSView>: XiblessView {
    class HeaderView: XiblessView {
        let titleLabel = Label()

        let disclosureButton = Button()

        override init(frame frameRect: CGRect) {
            super.init(frame: frameRect)
            hierarchy {
                titleLabel
                disclosureButton
            }
            titleLabel.snp.makeConstraints { make in
                make.top.left.equalToSuperview().inset(15)
                make.bottom.equalToSuperview()
            }

            disclosureButton.snp.makeConstraints { make in
                make.top.right.equalToSuperview().inset(15)
                make.left.greaterThanOrEqualTo(titleLabel.snp.right).offset(15)
            }

            titleLabel.textColor = .secondaryLabelColor
            titleLabel.font = .systemFont(ofSize: 12, weight: .bold)
            disclosureButton.title = "Hide"
            disclosureButton.alternateTitle = "Show"
            disclosureButton.setButtonType(.toggle)
            disclosureButton.contentTintColor = .secondaryLabelColor
            disclosureButton.font = .systemFont(ofSize: 12, weight: .bold)
            disclosureButton.isBordered = false

            disclosureButton.alphaValue = 0.0
        }

        override func updateTrackingAreas() {
            super.updateTrackingAreas()
            trackingAreas.forEach(removeTrackingArea(_:))

            addTrackingArea(NSTrackingArea(rect: bounds, options: [.mouseEnteredAndExited, .activeInKeyWindow, .inVisibleRect], owner: self, userInfo: nil))
        }

        override func mouseEntered(with event: NSEvent) {
            super.mouseEntered(with: event)
            disclosureButton.alphaValue = 1.0
        }

        override func mouseExited(with event: NSEvent) {
            super.mouseExited(with: event)
            disclosureButton.alphaValue = 0.0
        }
    }

    let headerView: HeaderView

    let contentView: ContentView

    var title: String = "" {
        didSet {
            headerView.titleLabel.stringValue = title
        }
    }

    init(contentView: ContentView) {
        self.headerView = HeaderView()
        self.contentView = contentView
        super.init(frame: .zero)
        hierarchy {
            headerView
            contentView
        }

        headerView.snp.makeConstraints { make in
            make.top.left.right.equalToSuperview()
        }

        setupContentViewConstraints(for: headerView.disclosureButton.state)

        headerView.disclosureButton.box.setAction { [weak self] button in
            guard let self, let button else { return }
            setupContentViewConstraints(for: button.state)
        }
    }

    func setupContentViewConstraints(for disclosureState: NSControl.StateValue) {
        contentView.snp.remakeConstraints { make in
            make.top.equalTo(headerView.snp.bottom).offset(15)
            make.left.bottom.equalToSuperview().inset(15)
            make.right.lessThanOrEqualToSuperview().inset(15)
            switch disclosureState {
            case .on:
                make.height.equalTo(0)
            default:
                break
            }
        }
    }
}

class InspectorClassHierarchyView: InspectorDisclosureView<Label> {
    var hierarchyString: String = "" {
        didSet {
            contentView.stringValue = hierarchyString
        }
    }

    init() {
        super.init(contentView: .init())
        title = "Hierarchy"
        contentView.setContentCompressionResistancePriority(.defaultLow, for: .horizontal)
        contentView.textColor = .controlTextColor
        contentView.font = .systemFont(ofSize: 12, weight: .regular)
    }
}

@available(macOS 14.0, *)
#Preview(traits: .fixedLayout(width: 500, height: 700)) {
    InspectorClassHierarchyView().then {
        $0.hierarchyString = "NSView\nNSResponder\nNSObject"
        $0.backgroundColor = .controlBackgroundColor
    }
}

class InspectorClassViewController: UXVisualEffectViewController<InspectorClassViewModel> {
    let classHierarchyView = InspectorClassHierarchyView()

    lazy var contentStackView = VStackView {
        classHierarchyView
    }

    override func viewDidLoad() {
        super.viewDidLoad()

        hierarchy {
            contentStackView
        }

        contentStackView.snp.makeConstraints { make in
            make.edges.equalTo(view.safeAreaLayoutGuide)
        }
    }

    override func setupBindings(for viewModel: InspectorClassViewModel) {
        super.setupBindings(for: viewModel)

        let input = InspectorClassViewModel.Input()
        let output = viewModel.transform(input)
        output.classHierarchy.drive(classHierarchyView.contentView.rx.stringValue).disposed(by: rx.disposeBag)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Inspector/InspectorCoordinator.swift`:

```swift
//
//  InspectorCoordinator.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerCore
import RuntimeViewerArchitectures
import RuntimeViewerApplication

typealias InspectorTransition = Transition<Void, InspectorNavigationController>

class InspectorCoordinator: ViewCoordinator<InspectorRoute, InspectorTransition> {
    let appServices: AppServices

    init(appServices: AppServices) {
        self.appServices = appServices
        super.init(rootViewController: .init(nibName: nil, bundle: nil), initialRoute: nil)
    }

    override func prepareTransition(for route: InspectorRoute) -> InspectorTransition {
        switch route {
        case .placeholder:
            let viewModel = InspectorPlaceholderViewModel(appServices: appServices, router: self)
            let viewController = InspectorPlaceholderViewController()
            viewController.setupBindings(for: viewModel)
            return .set([viewController], animated: false)
        case let .root(inspectableObject):
            return .set([makeTransition(for: inspectableObject)], animated: false)
        case let .next(inspectableObject):
            return .push(makeTransition(for: inspectableObject), animated: false)
        case .back:
            return .pop(animated: false)
        }
    }

    func makeTransition(for inspectableObject: InspectableObject) -> UXViewController {
        switch inspectableObject {
        case .node(_):
            let viewModel = InspectorPlaceholderViewModel(appServices: appServices, router: self)
            let viewController = InspectorPlaceholderViewController()
            viewController.setupBindings(for: viewModel)
            return viewController
        case let .object(runtimeObjectType):
            switch runtimeObjectType {
            case let .class(named):
                let viewModel = InspectorClassViewModel(runtimeClassName: named, appServices: appServices, router: self)
                let viewController = InspectorClassViewController()
                viewController.setupBindings(for: viewModel)
                return viewController
            case .protocol(_):
                let viewModel = InspectorPlaceholderViewModel(appServices: appServices, router: self)
                let viewController = InspectorPlaceholderViewController()
                viewController.setupBindings(for: viewModel)
                return viewController
            }
        }
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Inspector/InspectorNavigationController.swift`:

```swift
//
//  InspectorViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

class InspectorNavigationController: UXNavigationController {
    override func viewDidLoad() {
        super.viewDidLoad()

        isToolbarHidden = true
        isNavigationBarHidden = true
        view.canDrawSubviewsIntoLayer = true
    }
}

extension CheckboxButton {
    convenience init(title: String, titleFont: NSFont? = nil, titleColor: NSColor? = nil, titleSpacing: CGFloat = 5.0) {
        self.init()
        self.attributedTitle = NSAttributedString {
            AText(title)
                .font(titleFont ?? .systemFont(ofSize: 13))
                .foregroundColor(titleColor ?? .labelColor)
                .paragraphStyle(NSMutableParagraphStyle().then {
                    $0.firstLineHeadIndent = titleSpacing
                    $0.lineBreakMode = .byClipping
                })
        }
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Inspector/InspectorPlaceholderViewController.swift`:

```swift
//
//  InspectorPlaceholderViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/30.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerApplication
import RuntimeViewerArchitectures

class InspectorPlaceholderViewController: UXVisualEffectViewController<InspectorPlaceholderViewModel> {
    let placeholderLabel = Label("No Selection")
    
    override func viewDidLoad() {
        super.viewDidLoad()
        hierarchy {
            placeholderLabel
        }

        placeholderLabel.snp.makeConstraints { make in
            make.center.equalToSuperview()
        }

        placeholderLabel.do {
            $0.font = .systemFont(ofSize: 18, weight: .regular)
            $0.textColor = .secondaryLabelColor
        }
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Load Frameworks/LoadFrameworksViewController.swift`:

```swift
#if canImport(AppKit) && !targetEnvironment(macCatalyst)

import AppKit
import RuntimeViewerUI
import RuntimeViewerApplication

class LoadFrameworksViewModel: ViewModel<MainRoute> {
    
}


class LoadFrameworksViewController: AppKitViewController<LoadFrameworksViewModel> {

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do view setup here.
    }
    
}

#endif

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Load Frameworks/LoadFrameworksViewController.xib`:

```xib
<?xml version="1.0" encoding="UTF-8"?>
<document type="com.apple.InterfaceBuilder3.Cocoa.XIB" version="3.0" toolsVersion="32700.99.1234" targetRuntime="MacOSX.Cocoa" propertyAccessControl="none" useAutolayout="YES" customObjectInstantitationMethod="direct">
    <dependencies>
        <deployment identifier="macosx"/>
        <plugIn identifier="com.apple.InterfaceBuilder.CocoaPlugin" version="22690"/>
        <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
    </dependencies>
    <objects>
        <customObject id="-2" userLabel="File's Owner" customClass="LoadFrameworksViewController" customModule="RuntimeViewer" customModuleProvider="target">
            <connections>
                <outlet property="view" destination="Hz6-mo-xeY" id="0bl-1N-x8E"/>
            </connections>
        </customObject>
        <customObject id="-1" userLabel="First Responder" customClass="FirstResponder"/>
        <customObject id="-3" userLabel="Application" customClass="NSObject"/>
        <customView misplaced="YES" id="Hz6-mo-xeY">
            <rect key="frame" x="0.0" y="0.0" width="1250" height="554"/>
            <autoresizingMask key="autoresizingMask" flexibleMaxX="YES" flexibleMinY="YES"/>
            <subviews>
                <box boxType="custom" borderType="none" cornerRadius="4" title="Box" translatesAutoresizingMaskIntoConstraints="NO" id="Fl2-0y-EnG">
                    <rect key="frame" x="0.0" y="578" width="1250" height="145"/>
                    <view key="contentView" id="WLB-cx-6mB">
                        <rect key="frame" x="0.0" y="0.0" width="1250" height="145"/>
                        <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                        <subviews>
                            <button verticalHuggingPriority="750" fixedFrame="YES" translatesAutoresizingMaskIntoConstraints="NO" id="eOh-BQ-aHD">
                                <rect key="frame" x="39" y="54" width="62" height="40"/>
                                <autoresizingMask key="autoresizingMask" flexibleMaxX="YES" flexibleMinY="YES"/>
                                <buttonCell key="cell" type="push" title="Load" bezelStyle="rounded" alignment="center" controlSize="large" borderStyle="border" imageScaling="proportionallyDown" inset="2" id="vw4-8t-031">
                                    <behavior key="behavior" pushIn="YES" lightByBackground="YES" lightByGray="YES"/>
                                    <font key="font" metaFont="system"/>
                                </buttonCell>
                            </button>
                        </subviews>
                    </view>
                    <color key="fillColor" name="windowBackgroundColor" catalog="System" colorSpace="catalog"/>
                </box>
                <scrollView autohidesScrollers="YES" horizontalLineScroll="24" horizontalPageScroll="10" verticalLineScroll="24" verticalPageScroll="10" usesPredominantAxisScrolling="NO" translatesAutoresizingMaskIntoConstraints="NO" id="YfC-LH-2Cy">
                    <rect key="frame" x="0.0" y="0.0" width="1250" height="578"/>
                    <clipView key="contentView" id="8Lu-A7-jST">
                        <rect key="frame" x="1" y="1" width="1248" height="576"/>
                        <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                        <subviews>
                            <tableView verticalHuggingPriority="750" allowsExpansionToolTips="YES" columnAutoresizingStyle="lastColumnOnly" tableStyle="inset" multipleSelection="NO" autosaveColumns="NO" rowHeight="24" rowSizeStyle="automatic" viewBased="YES" id="TXQ-jM-53l">
                                <rect key="frame" x="0.0" y="0.0" width="1248" height="576"/>
                                <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                                <size key="intercellSpacing" width="17" height="0.0"/>
                                <color key="backgroundColor" name="controlBackgroundColor" catalog="System" colorSpace="catalog"/>
                                <color key="gridColor" name="gridColor" catalog="System" colorSpace="catalog"/>
                                <tableColumns>
                                    <tableColumn identifier="AutomaticTableColumnIdentifier.0" width="1000" minWidth="40" maxWidth="1000" id="miR-bb-ZaC">
                                        <tableHeaderCell key="headerCell" lineBreakMode="truncatingTail" borderStyle="border">
                                            <color key="textColor" name="headerTextColor" catalog="System" colorSpace="catalog"/>
                                            <color key="backgroundColor" name="headerColor" catalog="System" colorSpace="catalog"/>
                                        </tableHeaderCell>
                                        <textFieldCell key="dataCell" lineBreakMode="truncatingTail" selectable="YES" editable="YES" title="Text Cell" id="2RS-bP-Pmh">
                                            <font key="font" metaFont="system"/>
                                            <color key="textColor" name="controlTextColor" catalog="System" colorSpace="catalog"/>
                                            <color key="backgroundColor" name="controlBackgroundColor" catalog="System" colorSpace="catalog"/>
                                        </textFieldCell>
                                        <tableColumnResizingMask key="resizingMask" resizeWithTable="YES" userResizable="YES"/>
                                        <prototypeCellViews>
                                            <tableCellView id="JYm-8e-dp7">
                                                <rect key="frame" x="18" y="0.0" width="995" height="24"/>
                                                <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                                                <subviews>
                                                    <textField horizontalHuggingPriority="251" verticalHuggingPriority="750" horizontalCompressionResistancePriority="250" fixedFrame="YES" translatesAutoresizingMaskIntoConstraints="NO" id="GKb-Kh-sQf">
                                                        <rect key="frame" x="0.0" y="4" width="995" height="16"/>
                                                        <autoresizingMask key="autoresizingMask" widthSizable="YES" flexibleMinY="YES" flexibleMaxY="YES"/>
                                                        <textFieldCell key="cell" lineBreakMode="truncatingTail" sendsActionOnEndEditing="YES" title="Table View Cell" id="KeF-h9-SN4">
                                                            <font key="font" usesAppearanceFont="YES"/>
                                                            <color key="textColor" name="controlTextColor" catalog="System" colorSpace="catalog"/>
                                                            <color key="backgroundColor" name="textBackgroundColor" catalog="System" colorSpace="catalog"/>
                                                        </textFieldCell>
                                                    </textField>
                                                </subviews>
                                                <connections>
                                                    <outlet property="textField" destination="GKb-Kh-sQf" id="01c-fh-Kwq"/>
                                                </connections>
                                            </tableCellView>
                                        </prototypeCellViews>
                                    </tableColumn>
                                </tableColumns>
                            </tableView>
                        </subviews>
                    </clipView>
                    <scroller key="horizontalScroller" hidden="YES" wantsLayer="YES" verticalHuggingPriority="750" horizontal="YES" id="imX-uk-6ka">
                        <rect key="frame" x="1" y="119" width="223" height="15"/>
                        <autoresizingMask key="autoresizingMask"/>
                    </scroller>
                    <scroller key="verticalScroller" hidden="YES" wantsLayer="YES" verticalHuggingPriority="750" horizontal="NO" id="Mf6-fD-jRW">
                        <rect key="frame" x="224" y="17" width="15" height="102"/>
                        <autoresizingMask key="autoresizingMask"/>
                    </scroller>
                </scrollView>
            </subviews>
            <constraints>
                <constraint firstItem="Fl2-0y-EnG" firstAttribute="top" secondItem="Hz6-mo-xeY" secondAttribute="top" id="10o-a0-Qyd"/>
                <constraint firstItem="YfC-LH-2Cy" firstAttribute="leading" secondItem="Hz6-mo-xeY" secondAttribute="leading" id="6YK-pZ-2dJ"/>
                <constraint firstItem="YfC-LH-2Cy" firstAttribute="height" secondItem="Hz6-mo-xeY" secondAttribute="height" multiplier="0.8" id="Qw6-DA-uOB"/>
                <constraint firstAttribute="trailing" secondItem="YfC-LH-2Cy" secondAttribute="trailing" id="Wwp-kX-LTl"/>
                <constraint firstItem="Fl2-0y-EnG" firstAttribute="leading" secondItem="Hz6-mo-xeY" secondAttribute="leading" id="YOE-km-dUJ"/>
                <constraint firstAttribute="bottom" secondItem="YfC-LH-2Cy" secondAttribute="bottom" id="dUe-Rv-LRq"/>
                <constraint firstItem="YfC-LH-2Cy" firstAttribute="top" secondItem="Fl2-0y-EnG" secondAttribute="bottom" id="yRD-mj-aaB"/>
                <constraint firstAttribute="trailing" secondItem="Fl2-0y-EnG" secondAttribute="trailing" id="zfd-D4-91L"/>
            </constraints>
            <point key="canvasLocation" x="348" y="388"/>
        </customView>
    </objects>
</document>

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Main/MainCoordinator.swift`:

```swift
//
//  MainCoordinator.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

typealias MainTransition = SceneTransition<MainWindowController, MainSplitViewController>

class MainCoordinator: SceneCoordinator<MainRoute, MainTransition> {
    let appServices: AppServices

    lazy var sidebarCoordinator = SidebarCoordinator(appServices: appServices, delegate: self)

    lazy var contentCoordinator = ContentCoordinator(appServices: appServices, delegate: self)

    lazy var inspectorCoordinator = InspectorCoordinator(appServices: appServices)

    init(appServices: AppServices) {
        self.appServices = appServices
        super.init(windowController: .init(), initialRoute: .main(.shared))
    }

    lazy var viewModel = MainViewModel(appServices: appServices, router: self)

    override func prepareTransition(for route: MainRoute) -> MainTransition {
        switch route {
        case let .main(runtimeEngine):
            appServices.runtimeEngine = runtimeEngine
            removeChild(sidebarCoordinator)
            removeChild(contentCoordinator)
            removeChild(inspectorCoordinator)
            sidebarCoordinator = SidebarCoordinator(appServices: appServices, delegate: self)
            contentCoordinator = ContentCoordinator(appServices: appServices, delegate: self)
            inspectorCoordinator = InspectorCoordinator(appServices: appServices)
            viewModel.completeTransition = sidebarCoordinator.rx.didCompleteTransition()
            windowController.setupBindings(for: viewModel)
            return .multiple(
                .show(windowController.splitViewController),
                .set(sidebar: sidebarCoordinator, content: contentCoordinator, inspector: inspectorCoordinator),
                .route(on: sidebarCoordinator, to: .root),
                .route(on: contentCoordinator, to: .placeholder),
                .route(on: inspectorCoordinator, to: .placeholder)
            )
        case let .select(runtimeObject):
            return .route(on: contentCoordinator, to: .root(runtimeObject))
//        case let .inspect(inspectableType):
//            return .route(on: inspectorCoordinator, to: .select(inspectableType))
        case .sidebarBack:
            return .route(on: sidebarCoordinator, to: .back)
        case .contentBack:
            return .route(on: contentCoordinator, to: .back)
        case let .generationOptions(sender):
            let viewController = GenerationOptionsViewController()
            let viewModel = GenerationOptionsViewModel(appServices: appServices, router: self)
            viewController.setupBindings(for: viewModel)
            return .presentOnRoot(viewController, mode: .asPopover(relativeToRect: sender.bounds, ofView: sender, preferredEdge: .maxY, behavior: .transient))
        case .loadFramework:
            return .none()
        case .attachToProcess:
            let viewController = AttachToProcessViewController()
            let viewModel = AttachToProcessViewModel(appServices: appServices, router: self)
            viewController.setupBindings(for: viewModel)
            viewController.preferredContentSize = .init(width: 800, height: 600)
            return .presentOnRoot(viewController, mode: .asSheet)
        case .dismiss:
            return .dismiss()
        }
    }

    override func completeTransition(for route: MainRoute) {
        switch route {
        case .main:
            windowController.splitViewController.setupSplitViewItems()

        default:
            break
        }
    }
}

extension MainCoordinator: SidebarCoordinator.Delegate {
    func sidebarCoordinator(_ sidebarCoordinator: SidebarCoordinator, completeTransition route: SidebarRoute) {
//        if sidebarCoordinator.rootViewController.viewControllers.count < 2 {
//            windowController.toolbarController.toolbar.removeItem(at: .Main.sidebarBack)
//        } else if !windowController.toolbarController.toolbar.items.contains(where: { $0.itemIdentifier == .Main.sidebarBack }) {
//            windowController.toolbarController.toolbar.insertItem(withItemIdentifier: .Main.sidebarBack, at: 0)
//        }
        switch route {
        case .selectedNode:
            break
        case let .clickedNode(runtimeNamedNode):
            windowController.window?.title = runtimeNamedNode.name
        case let .selectedObject(runtimeObjectType):
            contentCoordinator.contextTrigger(.root(runtimeObjectType))
        case .back:
            contentCoordinator.contextTrigger(.placeholder)
        default:
            break
        }
    }
}

extension MainCoordinator: ContentCoordinator.Delegate {
    func contentCoordinator(_ contentCoordinator: ContentCoordinator, completeTransition route: ContentRoute) {
        if contentCoordinator.rootViewController.viewControllers.count < 2 {
            windowController.toolbarController.toolbar.removeItem(at: .Main.contentBack)
        } else if !windowController.toolbarController.toolbar.items.contains(where: { $0.itemIdentifier == .Main.contentBack }) {
            windowController.toolbarController.toolbar.insertItem(withItemIdentifier: .Main.contentBack, at: 0)
        }
        switch route {
        case .placeholder:
            inspectorCoordinator.contextTrigger(.placeholder)
        case let .root(runtimeObjectType):
            inspectorCoordinator.contextTrigger(.root(.object(runtimeObjectType)))
        case let .next(runtimeObjectType):
            inspectorCoordinator.contextTrigger(.next(.object(runtimeObjectType)))
        case .back:
            inspectorCoordinator.contextTrigger(.back)
        }
    }
}

extension NSToolbar {
    func removeItem(at itemIdentifier: NSToolbarItem.Identifier) {
        if let index = items.firstIndex(where: { $0.itemIdentifier == itemIdentifier }) {
            removeItem(at: index)
        }
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Main/MainRoute.swift`:

```swift
//
//  MainRoute.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/22.
//

import Foundation
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

public enum MainRoute: Routable {
    case main(RuntimeEngine)
    case select(RuntimeObjectType)
    case sidebarBack
    case contentBack
    case generationOptions(sender: NSView)
    case loadFramework
    case attachToProcess
    case dismiss
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Main/MainSplitViewController.swift`:

```swift
//
//  MainSplitViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerApplication

class MainSplitViewController: NSSplitViewController {
    var viewModel: MainViewModel?

    private static let autosaveName = "com.JH.RuntimeViewer.MainSplitViewController.autosaveName"

    private static let identifier = "com.JH.RuntimeViewer.MainSplitViewController.identifier"

    override func viewDidLoad() {
        super.viewDidLoad()
        splitView.identifier = .init(Self.identifier)
        splitView.autosaveName = Self.autosaveName

        if AppDefaults[\.isInitialSetupSplitView] {
            view.frame = .init(x: 0, y: 0, width: 1280, height: 800)
        }
    }

    func setupSplitViewItems() {
        splitViewItems[0].do {
            $0.minimumThickness = 250
            $0.maximumThickness = 400
        } 

        splitViewItems[1].do {
            $0.minimumThickness = 600
        }

        splitViewItems[2].do {
            $0.minimumThickness = 200
        }

        if AppDefaults[\.isInitialSetupSplitView] {
            splitView.setPosition(250, ofDividerAt: 0)
            AppDefaults[\.isInitialSetupSplitView] = false
        }
    }

    @objc func _toggleInspector(_ sender: Any?) {
        guard let inspectorItem = splitViewItems.filter({ $0.behavior == .inspector }).first else { return }
        inspectorItem.animator().isCollapsed = !inspectorItem.isCollapsed
    }
}

/* Fix UXKit Exception
extension NSViewController {
    @objc func transitionCoordinator() -> Any? {
        return nil
    }

    @objc func _ancestorViewControllerOfClass(_ class: Any?) -> Any? {
        return nil
    }
}
*/

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Main/MainToolbarController.swift`:

```swift
//
//  MainToolbarController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/8.
//

import AppKit
import RuntimeViewerUI
import RxAppKit
import RuntimeViewerCommunication

extension RuntimeSource: @retroactive RxMenuItemRepresentable {}
extension RuntimeSource: MainMenuItemRepresentable {

    public var title: String { description }

    var icon: NSImage {
        switch self {
        case .local:
            return .symbol(systemName: .display)
        case .remote(_, let identifier, _):
            if identifier == .macCatalyst {
                return .symbol(systemName: .display)
            } else {
                return .symbol(name: RuntimeViewerSymbols.appFill)
            }
        case .bonjourClient(_):
            return .symbol(systemName: .bonjour)
        case .bonjourServer(_, _):
            return .symbol(systemName: .bonjour)
        }
    }
}

extension NSToolbarItem.Identifier {
    enum Main {
        static let sidebarBack: NSToolbarItem.Identifier = "sidebarBack"
        static let contentBack: NSToolbarItem.Identifier = "contentBack"
        static let share: NSToolbarItem.Identifier = "share"
        static let save: NSToolbarItem.Identifier = "save"
        static let inspector: NSToolbarItem.Identifier = "inspector"
        static let switchSource: NSToolbarItem.Identifier = "switchSource"
        static let inspectorTrackingSeparator: NSToolbarItem.Identifier = "inspectorTrackingSeparator"
        static let generationOptions: NSToolbarItem.Identifier = "generationOptions"
        static let fontSizeSmaller: NSToolbarItem.Identifier = "fontSizeSmaller"
        static let fontSizeLarger: NSToolbarItem.Identifier = "fontSizeLarger"
        static let loadFrameworks: NSToolbarItem.Identifier = "loadFrameworks"
        static let installHelper: NSToolbarItem.Identifier = "installHelper"
        static let helperStatus: NSToolbarItem.Identifier = "helperStatus"
        static let attach: NSToolbarItem.Identifier = "attach"
    }
}

class MainToolbarController: NSObject, NSToolbarDelegate {
    protocol Delegate: AnyObject {
        var splitView: NSSplitView { get }
    }

    class IconButtonToolbarItem: NSToolbarItem {
        let button = ToolbarButton()

        convenience init(itemIdentifier: NSToolbarItem.Identifier, icon: SFSymbol.SystemSymbolName) {
            self.init(itemIdentifier: itemIdentifier, icon: icon as SFSymbol.SymbolName)
        }
        
        convenience init(itemIdentifier: NSToolbarItem.Identifier, icon: RuntimeViewerSymbols) {
            self.init(itemIdentifier: itemIdentifier, icon: icon as SFSymbol.SymbolName)
        }
        
        init(itemIdentifier: NSToolbarItem.Identifier, icon: SFSymbol.SymbolName) {
            super.init(itemIdentifier: itemIdentifier)
            view = button
            button.title = ""
            button.image = SFSymbol(name: icon).nsImage
        }
    }

    class InspectorToolbarItem: NSToolbarItem {
        let inspectorButton = ToolbarButton()
        init() {
            super.init(itemIdentifier: .Main.inspector)
            view = inspectorButton
            inspectorButton.title = ""
            inspectorButton.image = SFSymbol(systemName: .sidebarRight).nsImage
            inspectorButton.action = #selector(MainSplitViewController._toggleInspector(_:))
        }
    }

    class SwitchSourceToolbarItem: NSToolbarItem {
        let popUpButton = NSPopUpButton()

        init() {
            super.init(itemIdentifier: .Main.switchSource)
            view = popUpButton
            popUpButton.controlSize = .large
            popUpButton.bezelStyle = .toolbar
        }
    }

    let toolbar: NSToolbar

    unowned let delegate: Delegate

    let sidebarBackItem = IconButtonToolbarItem(itemIdentifier: .Main.sidebarBack, icon: .chevronBackward)

    let contentBackItem = IconButtonToolbarItem(itemIdentifier: .Main.contentBack, icon: .chevronBackward).then {
        $0.isNavigational = true
    }

    let attachItem = IconButtonToolbarItem(itemIdentifier: .Main.attach, icon: .inject)
    
    let inspectorItem = InspectorToolbarItem()

    let saveItem = IconButtonToolbarItem(itemIdentifier: .Main.save, icon: .squareAndArrowDown)

    let switchSourceItem = SwitchSourceToolbarItem()

    let generationOptionsItem = IconButtonToolbarItem(itemIdentifier: .Main.generationOptions, icon: .ellipsisCurlybraces)

    lazy var inspectorTrackingSeparatorItem = NSTrackingSeparatorToolbarItem(identifier: .Main.inspectorTrackingSeparator, splitView: delegate.splitView, dividerIndex: 1)

    let sharingServicePickerItem = NSSharingServicePickerToolbarItem(itemIdentifier: .Main.share)

    let fontSizeSmallerItem = IconButtonToolbarItem(itemIdentifier: .Main.fontSizeSmaller, icon: .textformatSizeSmaller)

    let fontSizeLargerItem = IconButtonToolbarItem(itemIdentifier: .Main.fontSizeLarger, icon: .textformatSizeLarger)

    let loadFrameworksItem = IconButtonToolbarItem(itemIdentifier: .Main.loadFrameworks, icon: .latch2Case)
    
    let installHelperItem =  IconButtonToolbarItem(itemIdentifier: .Main.installHelper, icon: .wrenchAndScrewdriver)
    
    init(delegate: Delegate) {
        self.delegate = delegate
        self.toolbar = NSToolbar()
        super.init()

        toolbar.delegate = self
        toolbar.displayMode = .iconOnly
    }

    func toolbarDefaultItemIdentifiers(_ toolbar: NSToolbar) -> [NSToolbarItem.Identifier] {
        [
            .toggleSidebar,
            .Main.sidebarBack,
            .flexibleSpace,
            .sidebarTrackingSeparator,
            .Main.contentBack,
            .Main.switchSource,
            .Main.attach,
            .Main.installHelper,
            .Main.loadFrameworks,
            .Main.fontSizeSmaller,
            .Main.fontSizeLarger,
            .Main.generationOptions,
            .Main.save,
            .Main.share,
            .Main.inspectorTrackingSeparator,
            .flexibleSpace,
            .Main.inspector,
        ]
    }

    func toolbarAllowedItemIdentifiers(_ toolbar: NSToolbar) -> [NSToolbarItem.Identifier] {
        [
            .Main.sidebarBack,
            .flexibleSpace,
            .toggleSidebar,
            .sidebarTrackingSeparator,
            .Main.inspectorTrackingSeparator,
            .Main.inspector,
            .Main.share,
            .Main.save,
            .Main.switchSource,
            .Main.generationOptions,
            .Main.fontSizeSmaller,
            .Main.fontSizeLarger,
            .Main.loadFrameworks,
            .Main.installHelper,
            .Main.attach
        ]
    }

    func toolbar(_ toolbar: NSToolbar, itemForItemIdentifier itemIdentifier: NSToolbarItem.Identifier, willBeInsertedIntoToolbar flag: Bool) -> NSToolbarItem? {
        switch itemIdentifier {
        case .Main.sidebarBack:
            return sidebarBackItem
        case .Main.inspector:
            return inspectorItem
        case .Main.inspectorTrackingSeparator:
            return inspectorTrackingSeparatorItem
        case .Main.share:
            return sharingServicePickerItem
        case .Main.save:
            return saveItem
        case .Main.switchSource:
            return switchSourceItem
        case .Main.generationOptions:
            return generationOptionsItem
        case .Main.contentBack:
            return contentBackItem
        case .Main.fontSizeSmaller:
            return fontSizeSmallerItem
        case .Main.fontSizeLarger:
            return fontSizeLargerItem
        case .Main.loadFrameworks:
            return loadFrameworksItem
        case .Main.installHelper:
            return installHelperItem
        case .Main.attach:
            return attachItem
        default:
            return nil
        }
    }
}

extension NSToolbarItem.Identifier: @retroactive ExpressibleByStringLiteral {
    public init(stringLiteral value: StringLiteralType) {
        self.init(value)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Main/MainViewModel.swift`:

```swift
//
//  MainViewModel.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/4.
//

import AppKit
import RuntimeViewerCore
import UniformTypeIdentifiers
import RuntimeViewerArchitectures
import RuntimeViewerApplication
import RuntimeViewerCommunication

enum MessageError: LocalizedError {
    case message(String)

    var errorDescription: String? {
        switch self {
        case let .message(message):
            return message
        }
    }
}

class MainViewModel: ViewModel<MainRoute> {
    struct Input {
        let sidebarBackClick: Signal<Void>
        let contentBackClick: Signal<Void>
        let saveClick: Signal<Void>
        let switchSource: Signal<Int>
        let generationOptionsClick: Signal<NSView>
        let fontSizeSmallerClick: Signal<Void>
        let fontSizeLargerClick: Signal<Void>
        let loadFrameworksClick: Signal<Void>
        let installHelperClick: Signal<Void>
        let attachToProcessClick: Signal<Void>
    }

    struct Output {
        let sharingServiceItems: Observable<[Any]>
        let isSavable: Driver<Bool>
        let isSidebarBackHidden: Driver<Bool>
        let runtimeSources: Driver<[RuntimeSource]>
        let selectedRuntimeSourceIndex: Driver<Int>
    }

    var completeTransition: Observable<SidebarRoute>? {
        didSet {
            completeTransitionDisposable?.dispose()
            completeTransitionDisposable = completeTransition?.map { if case let .selectedObject(runtimeObject) = $0 { runtimeObject } else { nil } }.bind(to: $selectedRuntimeObject)
        }
    }

    var completeTransitionDisposable: Disposable?
    
    let selectedRuntimeSourceIndex = BehaviorRelay(value: 0)

    let runtimeEngineManager = RuntimeEngineManager.shared

    @Observed
    var selectedRuntimeObject: RuntimeObjectType?

    func transform(_ input: Input) -> Output {
        rx.disposeBag = DisposeBag()

        input.loadFrameworksClick.emitOnNext { [weak self] in
            guard let self else { return }
            Task { @MainActor in
                let openPanel = NSOpenPanel()
                openPanel.allowedContentTypes = [.framework]
                openPanel.allowsMultipleSelection = true
                openPanel.canChooseDirectories = true
                let result = await openPanel.begin()
                guard result == .OK else { return }
                openPanel.urls.forEach { url in
                    do {
                        try Bundle(url: url)?.loadAndReturnError()
                        self.appServices.runtimeEngine.reloadData()
                    } catch {
                        print(error)
                        NSAlert(error: error).runModal()
                    }
                }
            }
        }
        .disposed(by: rx.disposeBag)
        input.installHelperClick.emitOnNext { [weak self] in
            guard let self else { return }
            Task {
                do {
                    try await RuntimeHelperClient.shared.install()
                } catch {
                    print(error)
                    self.errorRelay.accept(error)
                }
            }
        }
        .disposed(by: rx.disposeBag)

        input.fontSizeSmallerClick.emitOnNext {
            AppDefaults[\.themeProfile].fontSizeSmaller()
        }
        .disposed(by: rx.disposeBag)
        input.fontSizeLargerClick.emitOnNext {
            AppDefaults[\.themeProfile].fontSizeLarger()
        }
        .disposed(by: rx.disposeBag)
        input.attachToProcessClick.emitOnNextMainActor { [weak self] in
            guard let self else { return }
            if SIPChecker.isDisabled() {
                router.trigger(.attachToProcess)
            } else {
                errorRelay.accept(MessageError.message("SIP is enabled. Please disable SIP to attach to process."))
            }
        }
        .disposed(by: rx.disposeBag)
        input.sidebarBackClick.emit(to: router.rx.trigger(.sidebarBack)).disposed(by: rx.disposeBag)
        input.contentBackClick.emit(to: router.rx.trigger(.contentBack)).disposed(by: rx.disposeBag)
        input.generationOptionsClick.emit(with: self) { $0.router.trigger(.generationOptions(sender: $1)) }.disposed(by: rx.disposeBag)
        input.saveClick.withLatestFrom($selectedRuntimeObject.asSignalOnErrorJustComplete()).filterNil()
            .emitOnNext { [weak self] runtimeObject in
                guard let self else { return }
                Task { @MainActor in
                    let savePanel = NSSavePanel()
                    savePanel.allowedContentTypes = [.cHeader]
                    savePanel.nameFieldStringValue = runtimeObject.name
                    let result = await savePanel.begin()
                    guard result == .OK, let url = savePanel.url else { return }
                    Task {
                        do {
                            let semanticString = try await self.appServices.runtimeEngine.semanticString(for: runtimeObject, options: AppDefaults[\.options])
                            try semanticString?.string().write(to: url, atomically: true, encoding: .utf8)
                        } catch {
                            print(error)
                        }
                    }
                }
            }
            .disposed(by: rx.disposeBag)
        input.switchSource.emit(with: self) {
            $0.router.trigger(.main($0.runtimeEngineManager.runtimeEngines[$1]))
            $0.selectedRuntimeSourceIndex.accept($1)
        }.disposed(by: rx.disposeBag)

        let sharingServiceItems = completeTransition?.map { [weak self] router -> [Any] in
            guard let self else { return [] }
            switch router {
            case let .selectedObject(runtimeObjectType):
                let item = NSItemProvider()
                item.registerDataRepresentation(forTypeIdentifier: UTType.cHeader.identifier, visibility: .all) { completion in
                    Task {
                        do {
                            let semanticString = try await self.appServices.runtimeEngine.semanticString(for: runtimeObjectType, options: AppDefaults[\.options])
                            completion(semanticString?.string().data(using: .utf8), nil)
                        } catch {
                            completion(nil, error)
                        }
                    }
                    return nil
                }
                if #available(macOS 13.0, *) {
                    let icon = NSWorkspace.shared.icon(for: .cHeader)
                    let previewItem = NSPreviewRepresentingActivityItem(item: item, title: runtimeObjectType.name + ".h", image: nil, icon: icon)
                    return [previewItem]
                } else {
                    return [item]
                }
            default:
                return []
            }
        }

        return Output(
            sharingServiceItems: sharingServiceItems ?? .empty(),
            isSavable: $selectedRuntimeObject.asDriver().map { $0 != nil },
            isSidebarBackHidden: completeTransition?.map {
                if case .clickedNode = $0 { false } else if case .selectedObject = $0 { false } else { true }
            }.asDriver(onErrorJustReturn: true) ?? .empty(),
            runtimeSources: runtimeEngineManager.rx.runtimeEngines.map { $0.map(\.source) },
            selectedRuntimeSourceIndex: selectedRuntimeSourceIndex.asDriver()
        )
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Main/MainWindowController.swift`:

```swift
//
//  MainWindowController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerArchitectures

class MainWindow: NSWindow {
    static let identifier: NSUserInterfaceItemIdentifier = "com.JH.RuntimeViewer.MainWindow"
    static let frameAutosaveName = "com.JH.RuntimeViewer.MainWindow.FrameAutosaveName"

    init() {
        super.init(contentRect: .zero, styleMask: [.titled, .closable, .miniaturizable, .resizable, .fullSizeContentView], backing: .buffered, defer: false)
    }
}

extension Reactive where Base: NSMenu {
    func selectedItemIndex() -> ControlEvent<Int> {
        let source = itemSelected(Any?.self).compactMap { [weak base] menuItem, _ -> Int? in
            guard let self = base else { return nil }
            return self.items.firstIndex(of: menuItem)
        }.share()
        return ControlEvent(events: source)
    }
}

protocol MainMenuItemRepresentable: RxMenuItemRepresentable {
    var icon: NSImage { get }
}

extension Reactive where Base: NSPopUpButton {
    func items<MenuItemRepresentable: MainMenuItemRepresentable>() -> Binder<[MenuItemRepresentable]> {
        Binder(base) { (target: NSPopUpButton, items: [MenuItemRepresentable]) in
            target.removeAllItems()
            items.forEach { item in
                target.addItem(withTitle: item.title)
                if let menuItem = target.item(withTitle: item.title) {
                    menuItem.image = item.icon
                }
            }
        }
    }
}

class MainWindowController: XiblessWindowController<MainWindow> {
    lazy var toolbarController = MainToolbarController(delegate: self)

    lazy var splitViewController = MainSplitViewController()

    var viewModel: MainViewModel?

    func setupBindings(for viewModel: MainViewModel) {
        rx.disposeBag = DisposeBag()
        self.viewModel = viewModel

        let input = MainViewModel.Input(
            sidebarBackClick: toolbarController.sidebarBackItem.button.rx.click.asSignal(),
            contentBackClick: toolbarController.contentBackItem.button.rx.click.asSignal(),
            saveClick: toolbarController.saveItem.button.rx.click.asSignal(),
            switchSource: toolbarController.switchSourceItem.popUpButton.rx.selectedItemIndex().asSignal(),
            generationOptionsClick: toolbarController.generationOptionsItem.button.rx.clickWithSelf.asSignal().map { $0 },
            fontSizeSmallerClick: toolbarController.fontSizeSmallerItem.button.rx.click.asSignal(),
            fontSizeLargerClick: toolbarController.fontSizeLargerItem.button.rx.click.asSignal(),
            loadFrameworksClick: toolbarController.loadFrameworksItem.button.rx.click.asSignal(),
            installHelperClick: toolbarController.installHelperItem.button.rx.click.asSignal(),
            attachToProcessClick: toolbarController.attachItem.button.rx.click.asSignal()
        )
        let output = viewModel.transform(input)
        output.sharingServiceItems.bind(to: toolbarController.sharingServicePickerItem.rx.items).disposed(by: rx.disposeBag)
        output.isSavable.drive(toolbarController.saveItem.button.rx.isEnabled).disposed(by: rx.disposeBag)
        output.isSidebarBackHidden.drive(toolbarController.sidebarBackItem.button.rx.isHidden).disposed(by: rx.disposeBag)
        output.selectedRuntimeSourceIndex.drive(toolbarController.switchSourceItem.popUpButton.rx.selectedIndex()).disposed(by: rx.disposeBag)
        output.runtimeSources.drive(toolbarController.switchSourceItem.popUpButton.rx.items()).disposed(by: rx.disposeBag)
        viewModel.errorRelay.asSignal().emitOnNextMainActor { error in
            NSAlert(error: error).runModal()
        }
        .disposed(by: rx.disposeBag)
    }

    init() {
        super.init(windowGenerator: .init())
    }

    override func windowDidLoad() {
        super.windowDidLoad()
        contentWindow.title = "Runtime Viewer"
        contentWindow.toolbar = toolbarController.toolbar
        contentWindow.identifier = MainWindow.identifier
        contentWindow.setFrame(.init(origin: .zero, size: .init(width: 1280, height: 800)), display: true)
        contentWindow.box.positionCenter()
        contentWindow.setFrameAutosaveName(MainWindow.frameAutosaveName)
    }
}

extension MainWindowController: MainToolbarController.Delegate {
    var splitView: NSSplitView {
        splitViewController.splitView
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Release.xcconfig`:

```xcconfig
SMPrivilegedExecutable = anchor apple generic and identifier "com.JH.RuntimeViewerService" and (certificate leaf[field.1.2.840.113635.100.6.1.9] /* exists */ or certificate 1[field.1.2.840.113635.100.6.2.6] /* exists */ and certificate leaf[field.1.2.840.113635.100.6.1.13] /* exists */ and certificate leaf[subject.OU] = D5Q73692VW)

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Resources/RuntimeViewerSymbols.swift`:

```swift
//
//  RuntimeViewerSymbols.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/11/28.
//

import Foundation
import SFSymbol

enum RuntimeViewerSymbols: String, SFSymbol.SymbolName {
    case inject
    case app
    case appFill = "app.fill"

    var bundle: Bundle? { .main }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit.entitlements`:

```entitlements
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>com.apple.security.automation.apple-events</key>
	<true/>
</dict>
</plist>

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Sidebar/SidebarCoordinator.swift`:

```swift
//
//  SidebarCoordinator.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

typealias SidebarTransition = Transition<Void, SidebarNavigationController>

class SidebarCoordinator: ViewCoordinator<SidebarRoute, SidebarTransition> {
    protocol Delegate: AnyObject {
        func sidebarCoordinator(_ sidebarCoordinator: SidebarCoordinator, completeTransition: SidebarRoute)
    }

    let appServices: AppServices

    weak var delegate: Delegate?

    init(appServices: AppServices, delegate: Delegate? = nil) {
        self.appServices = appServices
        self.delegate = delegate
        super.init(rootViewController: .init(nibName: nil, bundle: nil), initialRoute: nil)
    }

    override func prepareTransition(for route: SidebarRoute) -> SidebarTransition {
        switch route {
        case .root:
            let viewController = SidebarRootViewController()
            let viewModel = SidebarRootViewModel(appServices: appServices, router: self)
            viewController.setupBindings(for: viewModel)
            return .push(viewController, animated: false)
        case let .clickedNode(clickedNode):
            let imageViewController = SidebarImageViewController()
            let imageViewModel = SidebarImageViewModel(node: clickedNode, appServices: appServices, router: self)
            imageViewController.setupBindings(for: imageViewModel)
            return .push(imageViewController, animated: true)
        case .back:
            return .pop(animated: true)
        default:
            return .none()
        }
    }

    override func completeTransition(for route: SidebarRoute) {
        super.completeTransition(for: route)
        delegate?.sidebarCoordinator(self, completeTransition: route)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Sidebar/SidebarImageCellView.swift`:

```swift
//
//  SidebarImageCellView.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 11/26/24.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerCore
import RuntimeViewerApplication

class SidebarImageCellView: ImageTextTableCellView {
    func bind(to viewModel: SidebarImageCellViewModel) {
        rx.disposeBag = DisposeBag()
        viewModel.$icon.asDriver().drive(_imageView.rx.image).disposed(by: rx.disposeBag)
        viewModel.$name.asDriver().drive(_textField.rx.attributedStringValue).disposed(by: rx.disposeBag)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Sidebar/SidebarImageViewController.swift`:

```swift
//
//  SidebarImageViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerCore
import RuntimeViewerApplication

class SidebarImageViewController: UXVisualEffectViewController<SidebarImageViewModel> {
    let tabView = NSTabView()

    let imageNotLoadedView = ImageLoadableView()

    let imageLoadingView = ImageLoadingView()

    let imageLoadedView = ImageLoadedView()

    let imageLoadErrorView = ImageLoadableView()

    let filterSearchField = FilterSearchField()

    let bottomSeparatorView = NSBox()

    private var previousWindowSubtitle: String = ""
    
    private var previousWindowTitle: String = ""
    
    override func viewDidLoad() {
        super.viewDidLoad()

        contentView.hierarchy {
            tabView
            bottomSeparatorView
            filterSearchField
        }

        tabView.snp.makeConstraints { make in
            make.top.left.right.equalToSuperview()
            make.bottom.equalTo(bottomSeparatorView.snp.top)
        }

        bottomSeparatorView.snp.makeConstraints { make in
            make.left.right.equalToSuperview()
            make.bottom.equalTo(filterSearchField.snp.top).offset(-5)
            make.height.equalTo(1)
        }

        filterSearchField.snp.makeConstraints { make in
            make.left.right.bottom.equalToSuperview().inset(5)
        }

        bottomSeparatorView.do {
            $0.boxType = .separator
        }

        tabView.do {
            $0.addTabViewItem(NSTabViewItem(view: imageNotLoadedView, loadState: .notLoaded))
            $0.addTabViewItem(NSTabViewItem(view: imageLoadingView, loadState: .loading))
            $0.addTabViewItem(NSTabViewItem(view: imageLoadedView, loadState: .loaded))
            $0.addTabViewItem(NSTabViewItem(view: imageLoadErrorView, loadState: .loadError(Optional.none)))
            $0.tabViewType = .noTabsNoBorder
            $0.tabPosition = .none
            $0.tabViewBorderType = .none
        }
    }

    override func setupBindings(for viewModel: SidebarImageViewModel) {
        super.setupBindings(for: viewModel)

        let input = SidebarImageViewModel.Input(
            runtimeObjectClicked: imageLoadedView.tableView.rx.modelSelected().asSignal(),
            loadImageClicked: Signal.of(
                imageNotLoadedView.loadImageButton.rx.click.asSignal(),
                imageLoadErrorView.loadImageButton.rx.click.asSignal()
            ).merge(),
            searchString: filterSearchField.rx.stringValue.asSignal()
        )

        let output = viewModel.transform(input)

        output.runtimeObjects.drive(imageLoadedView.tableView.rx.items) { tableView, _, _, item in
            let cellView = tableView.box.makeView(ofClass: SidebarImageCellView.self, owner: nil)
            cellView.bind(to: item)
            return cellView
        }
        .disposed(by: rx.disposeBag)

        output.errorText.drive(imageLoadErrorView.titleLabel.rx.stringValue).disposed(by: rx.disposeBag)

        output.notLoadedText.drive(imageNotLoadedView.titleLabel.rx.stringValue).disposed(by: rx.disposeBag)

        output.emptyText.drive(imageLoadedView.emptyLabel.rx.stringValue).disposed(by: rx.disposeBag)

        output.isEmpty.not().drive(imageLoadedView.emptyLabel.rx.isHidden).disposed(by: rx.disposeBag)

//        rx.viewWillDisappear.asDriver().driveOnNext { [weak self] in
//            guard let self else { return }
//            view.window?.title = previousWindowTitle
//            view.window?.subtitle = previousWindowSubtitle
//        }
//        .disposed(by: rx.disposeBag)
//        
        output.windowInitialTitles.driveOnNext { [weak self] in
            guard let self, let window = view.window else { return }
            previousWindowTitle = window.title
            previousWindowSubtitle = window.subtitle
            window.title = $0.title
            window.subtitle = $0.subtitle
        }
        .disposed(by: rx.disposeBag)
//        
//        rx.viewWillAppear.asSignal().flatMapLatest { output.windowSubtitle }.emitOnNext { [weak self] in
//            guard let self, let window = view.window else { return }
//            window.subtitle = $0
//        }.disposed(by:rx.disposeBag)
        
        output.loadState.driveOnNextMainActor { [weak self] loadState in
            guard let self else { return }
            tabView.selectTabViewItem(withIdentifier: loadState.tabViewItemIdentifier)
        }
        .disposed(by: rx.disposeBag)
    }
}

extension Void?: @retroactive Error {}

extension RuntimeImageLoadState {
    var tabViewItemIdentifier: String {
        switch self {
        case .notLoaded:
            return "notLoaded"
        case .loading:
            return "loading"
        case .loaded:
            return "loaded"
        case .loadError:
            return "loadError"
        }
    }
}

extension SidebarImageViewController {
    class ImageLoadedView: XiblessView {
        let (scrollView, tableView): (ScrollView, SingleColumnTableView) = SingleColumnTableView.scrollableTableView()

        let emptyLabel = Label()

        override init(frame frameRect: NSRect) {
            super.init(frame: frameRect)

            hierarchy {
                scrollView
                emptyLabel
            }

            scrollView.snp.makeConstraints { make in
                make.edges.equalToSuperview()
            }

            emptyLabel.snp.makeConstraints { make in
                make.center.equalToSuperview()
                make.left.right.equalToSuperview().inset(15)
            }

            emptyLabel.do {
                $0.alignment = .center
            }
        }
    }

    class ImageLoadingView: XiblessView {
        let loadingIndicator: MaterialLoadingIndicator = .init(radius: 25, color: .controlAccentColor)

        override init(frame frameRect: CGRect) {
            super.init(frame: frameRect)

            hierarchy {
                loadingIndicator
            }

            loadingIndicator.snp.makeConstraints { make in
                make.center.equalToSuperview()
                make.size.equalTo(50)
            }

            loadingIndicator.startAnimating()
        }
    }

    class ImageLoadableView: XiblessView {
        let titleLabel = Label()

        let loadImageButton = PushButton()

        lazy var contentView = VStackView(alignment: .vStackCenter, spacing: 10) {
            titleLabel
                .gravity(.center)
            loadImageButton
                .gravity(.center)
        }

        override init(frame frameRect: CGRect) {
            super.init(frame: frameRect)

            hierarchy {
                contentView
            }

            contentView.snp.makeConstraints { make in
                make.center.equalToSuperview()
                make.width.equalTo(200)
            }

            titleLabel.do {
                $0.isSelectable = true
                $0.alignment = .center
            }

            loadImageButton.do {
                $0.title = "Load now"
            }
        }
    }
}

extension NSTabViewItem {
    convenience init(view: NSView, loadState: RuntimeImageLoadState) {
        self.init(identifier: loadState.tabViewItemIdentifier)
        let vc = NSViewController()
        vc.view = view
        self.viewController = vc
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Sidebar/SidebarNavigationController.swift`:

```swift
//
//  SidebarNavigationController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI

class SidebarNavigationController: UXNavigationController {
    override func viewDidLoad() {
        super.viewDidLoad()
        
        isToolbarHidden = true
        isNavigationBarHidden = true
        view.canDrawSubviewsIntoLayer = true
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Sidebar/SidebarRootTableCellView.swift`:

```swift
//
//  SidebarRootTableCellView.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/8.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

class SidebarRootTableCellView: ImageTextTableCellView {
    func bind(to viewModel: SidebarRootCellViewModel) {
        rx.disposeBag = DisposeBag()
        viewModel.$icon.asDriver().drive(_imageView.rx.image).disposed(by: rx.disposeBag)
        viewModel.$name.asDriver().drive(_textField.rx.attributedStringValue).disposed(by: rx.disposeBag)
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Sidebar/SidebarRootViewController.swift`:

```swift
//
//  SidebarViewController.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2024/6/3.
//

import AppKit
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

class SidebarRootViewController: UXVisualEffectViewController<SidebarRootViewModel> {
    let (scrollView, outlineView): (ScrollView, OutlineView) = OutlineView.scrollableOutlineView()

    let filterSearchField = FilterSearchField()

    let bottomSeparatorView = NSBox()

    override func viewDidLoad() {
        super.viewDidLoad()

        contentView.hierarchy {
            scrollView
            bottomSeparatorView
            filterSearchField
        }

        scrollView.snp.makeConstraints { make in
            make.top.left.right.equalToSuperview()
            make.bottom.equalTo(bottomSeparatorView.snp.top)
        }

        bottomSeparatorView.snp.makeConstraints { make in
            make.left.right.equalToSuperview()
            make.bottom.equalTo(filterSearchField.snp.top).offset(-5)
            make.height.equalTo(1)
        }

        filterSearchField.snp.makeConstraints { make in
            make.left.right.bottom.equalToSuperview().inset(5)
        }

        bottomSeparatorView.do {
            $0.boxType = .separator
        }

        outlineView.do {
            $0.addTableColumn(NSTableColumn(identifier: .init("Default")))
            $0.headerView = nil
        }
    }

    override func setupBindings(for viewModel: SidebarRootViewModel) {
        super.setupBindings(for: viewModel)
        
        
        let input = SidebarRootViewModel.Input(
            clickedNode: outlineView.rx.modelDoubleClicked().asSignal(),
            selectedNode: outlineView.rx.modelSelected().asSignal(),
            searchString: filterSearchField.rx.stringValue.asSignal()
        )

        let output = viewModel.transform(input)

        output.nodes.drive(outlineView.rx.nodes) { (outlineView: NSOutlineView, tableColumn: NSTableColumn?, node: SidebarRootCellViewModel) -> NSView? in
            let cellView = outlineView.box.makeView(ofClass: SidebarRootTableCellView.self, owner: nil)
            cellView.bind(to: node)
            return cellView
        }
        .disposed(by: rx.disposeBag)

//        output.nodes.mapToVoid().drive(with: self) { $0.outlineView.setNeedsReloadAutosaveExpandedItems() }.disposed(by: rx.disposeBag)
        
        

        outlineView.rx.setDataSource(viewModel).disposed(by: rx.disposeBag)
        outlineView.autosaveExpandedItems = true
        outlineView.autosaveName = "com.JH.RuntimeViewer.SidebarRootViewController.autosaveName.\(viewModel.appServices.runtimeEngine.source.description)"
        outlineView.identifier = "com.JH.RuntimeViewer.SidebarRootViewController.identifier.\(viewModel.appServices.runtimeEngine.source.description)"
        
    }
}

extension NSOutlineView {
    func setNeedsReloadAutosaveExpandedItems() {
        autosaveExpandedItems = !autosaveExpandedItems
        autosaveExpandedItems = !autosaveExpandedItems
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Utils/EventMonitor.swift`:

```swift
//
//  EventMonitor.swift
//  XMLViewer
//
//  Created by JH on 2024/3/21.
//

import AppKit

class EventMonitor {
    private var monitors: [Any?] = []

    func addGlobalMonitorForEvents(matching mask: NSEvent.EventTypeMask, handler block: @escaping (NSEvent) -> Void) {
        monitors.append(NSEvent.addGlobalMonitorForEvents(matching: mask, handler: block))
    }

    func addLocalMonitorForEvents(matching mask: NSEvent.EventTypeMask, handler block: @escaping (NSEvent) -> NSEvent?) {
        monitors.append(NSEvent.addLocalMonitorForEvents(matching: mask, handler: block))
    }

    deinit {
        monitors.forEach(NSEvent.removeMonitor(_:))
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Utils/HelperInstaller.swift`:

```swift
#if os(macOS)
import Foundation
import ServiceManagement
import RuntimeViewerCommunication
import SwiftyXPC
import OSLog

public final class RuntimeHelperClient {
    public enum Error: LocalizedError {
        case message(String)

        public var errorDescription: String? {
            switch self {
            case .message(let message):
                return message
            }
        }
    }

    private static let logger = Logger(subsystem: "com.JH.RuntimeViewerCore", category: "RuntimeInjectClient")

    public static let shared = RuntimeHelperClient()

    private var connection: XPCConnection?

    private func connectionIfNeeded() throws -> XPCConnection {
        let connection: XPCConnection
        if let currentConnection = self.connection {
            connection = currentConnection
        } else {
            connection = try XPCConnection(type: .remoteMachService(serviceName: RuntimeViewerMachServiceName, isPrivilegedHelperTool: true))
            connection.activate()
            self.connection = connection
        }
        return connection
    }

    public func isInstalled() async -> Bool {
        do {
            let connection = try connectionIfNeeded()
            try await connection.sendMessage(request: PingRequest())
            return true
        } catch {
            return false
        }
    }

    public func install() async throws {
//        guard await !isInstalled() else { throw Error.message("Helper already installed") }
        func executeAuthorizationFunction(_ authorizationFunction: () -> (OSStatus)) throws {
            let osStatus = authorizationFunction()
            guard osStatus == errAuthorizationSuccess else {
                throw Error.message(String(describing: SecCopyErrorMessageString(osStatus, nil)))
            }
        }

        func authorizationRef(
            _ rights: UnsafePointer<AuthorizationRights>?,
            _ environment: UnsafePointer<AuthorizationEnvironment>?,
            _ flags: AuthorizationFlags
        ) throws -> AuthorizationRef? {
            var authRef: AuthorizationRef?
            try executeAuthorizationFunction { AuthorizationCreate(rights, environment, flags, &authRef) }
            return authRef
        }
        var cfError: Unmanaged<CFError>?

        var authItem: AuthorizationItem = kSMRightBlessPrivilegedHelper.withCString {
            AuthorizationItem(name: $0, valueLength: 0, value: UnsafeMutableRawPointer(bitPattern: 0), flags: 0)
        }

        var authRights = AuthorizationRights(count: 1, items: withUnsafeMutablePointer(to: &authItem) { $0 })

        let authRef = try authorizationRef(&authRights, nil, [.interactionAllowed, .extendRights, .preAuthorize])
        SMJobBless(kSMDomainSystemLaunchd, RuntimeViewerMachServiceName as CFString, authRef, &cfError)
        if let error = cfError?.takeRetainedValue() {
            throw error
        }
    }
}
#endif

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Utils/LineNumberGutter.swift`:

```swift
//
// LineNumberGutter.swift
// LineNumberTextView
// https://github.com/raphaelhanneken/line-number-text-view
//
// The MIT License (MIT)
//
// Copyright (c) 2015 Raphael Hanneken
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

import Cocoa

/// Defines the width of the gutter view.
private let GUTTER_WIDTH: CGFloat = 40.0


/// Adds line numbers to a NSTextField.
class LineNumberGutter: NSRulerView {

    /// Holds the background color.
    @Invalidating(.display)
    var backgroundColor: NSColor = .controlBackgroundColor

    /// Holds the text color.
    @Invalidating(.display)
    var foregroundColor: NSColor = .secondaryLabelColor

    @Invalidating(.display)
    var font: NSFont = NSFont(descriptor: NSFont.monospacedDigitSystemFont(ofSize: 0, weight: .regular).fontDescriptor.withSymbolicTraits(.condensed), size: 0) ?? NSFont.monospacedSystemFont(ofSize: 0, weight: .regular)
    
    ///  Initializes a LineNumberGutter with the given attributes.
    ///
    ///  - parameter textView:        NSTextView to attach the LineNumberGutter to.
    ///  - parameter foregroundColor: Defines the foreground color.
    ///  - parameter backgroundColor: Defines the background color.
    ///
    ///  - returns: An initialized LineNumberGutter object.
    init(withTextView textView: NSTextView, foregroundColor: NSColor, backgroundColor: NSColor) {
        // Set the color preferences.
        self.backgroundColor = backgroundColor
        self.foregroundColor = foregroundColor

        // Make sure everything's set up properly before initializing properties.
        super.init(scrollView: textView.enclosingScrollView, orientation: .verticalRuler)

        // Set the rulers clientView to the supplied textview.
        self.clientView = textView
        // Define the ruler's width.
        self.ruleThickness = GUTTER_WIDTH
    }

    ///  Initializes a default LineNumberGutter, attached to the given textView.
    ///  Default foreground color: hsla(0, 0, 0, 0.55);
    ///  Default background color: hsla(0, 0, 0.95, 1);
    ///
    ///  - parameter textView: NSTextView to attach the LineNumberGutter to.
    ///
    ///  - returns: An initialized LineNumberGutter object.
    convenience init(withTextView textView: NSTextView) {
        let fg = NSColor(calibratedHue: 0, saturation: 0, brightness: 0, alpha: 1)
        let bg = NSColor(calibratedHue: 0, saturation: 0, brightness: 0, alpha: 1)
        // Call the designated initializer.
        self.init(withTextView: textView, foregroundColor: fg, backgroundColor: bg)
    }

    required init(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    ///  Draws the line numbers.
    ///
    ///  - parameter rect: NSRect to draw the gutter view in.
    override func drawHashMarksAndLabels(in rect: NSRect) {
        // Set the current background color...
        self.backgroundColor.set()
        // ...and fill the given rect.
        bounds.fill()

        // Unwrap the clientView, the layoutManager and the textContainer, since we'll
        // them sooner or later.
        guard let textView      = self.clientView as? NSTextView,
              let layoutManager = textView.layoutManager,
              let textContainer = textView.textContainer
        else {
            return
        }

        let content = textView.string

        // Get the range of the currently visible glyphs.
        let visibleGlyphsRange = layoutManager.glyphRange(forBoundingRect: textView.visibleRect, in: textContainer)

        // Check how many lines are out of the current bounding rect.
        var lineNumber: Int = 1
        do {
            // Define a regular expression to find line breaks.
            let newlineRegex = try NSRegularExpression(pattern: "\n", options: [])
            // Check how many lines are out of view; From the glyph at index 0
            // to the first glyph in the visible rect.
            lineNumber += newlineRegex.numberOfMatches(in: content, options: [], range: NSMakeRange(0, visibleGlyphsRange.location))
        } catch {
            return
        }

        // Get the index of the first glyph in the visible rect, as starting point...
        var firstGlyphOfLineIndex = visibleGlyphsRange.location

        // ...then loop through all visible glyphs, line by line.
        while firstGlyphOfLineIndex < NSMaxRange(visibleGlyphsRange) {
            // Get the character range of the line we're currently in.
            let charRangeOfLine  = (content as NSString).lineRange(for: NSRange(location: layoutManager.characterIndexForGlyph(at: firstGlyphOfLineIndex), length: 0))
            // Get the glyph range of the line we're currently in.
            let glyphRangeOfLine = layoutManager.glyphRange(forCharacterRange: charRangeOfLine, actualCharacterRange: nil)

            var firstGlyphOfRowIndex = firstGlyphOfLineIndex
            var lineWrapCount        = 0

            // Loop through all rows (soft wraps) of the current line.
            while firstGlyphOfRowIndex < NSMaxRange(glyphRangeOfLine) {
                // The effective range of glyphs within the current line.
                var effectiveRange = NSRange(location: 0, length: 0)
                // Get the rect for the current line fragment.
                let lineRect = layoutManager.lineFragmentRect(forGlyphAt: firstGlyphOfRowIndex, effectiveRange: &effectiveRange, withoutAdditionalLayout: true)

                // Draw the current line number;
                // When lineWrapCount > 0 the current line spans multiple rows.
                if lineWrapCount == 0 {
                    self.drawLineNumber(num: lineNumber, atYPosition: lineRect.minY)
                } else {
                    break
                }

                // Move to the next row.
                firstGlyphOfRowIndex = NSMaxRange(effectiveRange)
                lineWrapCount+=1
            }

            // Move to the next line.
            firstGlyphOfLineIndex = NSMaxRange(glyphRangeOfLine)
            lineNumber+=1
        }

        // Draw another line number for the extra line fragment.
        if let _ = layoutManager.extraLineFragmentTextContainer {
            self.drawLineNumber(num: lineNumber, atYPosition: layoutManager.extraLineFragmentRect.minY)
        }
    }


    func drawLineNumber(num: Int, atYPosition yPos: CGFloat) {
        // Unwrap the text view.
        guard let textView = self.clientView as? NSTextView else {
            return
        }
        // Define attributes for the attributed string.
        let attrs = [NSAttributedString.Key.font: font, NSAttributedString.Key.foregroundColor: self.foregroundColor]
        // Define the attributed string.
        let attributedString = NSAttributedString(string: "\(num)", attributes: attrs)
        // Get the NSZeroPoint from the text view.
        let relativePoint    = self.convert(NSZeroPoint, from: textView)
        // Calculate the x position, within the gutter.
        let xPosition        = GUTTER_WIDTH - (attributedString.size().width + 5)
        // Draw the attributed string to the calculated point.
        attributedString.draw(at: NSPoint(x: xPosition, y: relativePoint.y + yPos))
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Utils/SIPChecker.swift`:

```swift
//
//  SIPChecker.swift
//  RuntimeViewerUsingAppKit
//
//  Created by JH on 2025/4/2.
//

import Foundation

enum SIPChecker {

    static func isDisabled() -> Bool {
        let task = Process()
        task.launchPath = "/usr/bin/csrutil"
        task.arguments = ["status"]

        let pipe = Pipe()
        task.standardOutput = pipe

        task.launch()

        let data = pipe.fileHandleForReading.readDataToEndOfFile()

        guard let output = String(data: data, encoding: .utf8) else { return false }

        return output.contains("disabled")
    }
}

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/Utils/Then.swift`:

```swift
// The MIT License (MIT)
//
// Copyright (c) 2015 Suyeol Jeon (xoul.kr)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.

import Foundation
#if !os(Linux)
import CoreGraphics
#endif

#if os(macOS) && !targetEnvironment(macCatalyst)
import AppKit
#endif

#if os(iOS) || os(tvOS)
import UIKit.UIGeometry
#endif

protocol Then {}

extension Then where Self: Any {
    /// Makes it available to set properties with closures just after initializing and copying the value types.
    ///
    ///     let frame = CGRect().with {
    ///       $0.origin.x = 10
    ///       $0.size.width = 100
    ///     }
    @inlinable
    func with(_ block: (inout Self) throws -> Void) rethrows -> Self {
        var copy = self
        try block(&copy)
        return copy
    }

    /// Makes it available to execute something with closures.
    ///
    ///     UserDefaults.standard.do {
    ///       $0.set("devxoul", forKey: "username")
    ///       $0.set("devxoul@gmail.com", forKey: "email")
    ///       $0.synchronize()
    ///     }
    @inlinable
    func `do`(_ block: (Self) throws -> Void) rethrows {
        try block(self)
    }
}

extension Then where Self: AnyObject {
    /// Makes it available to set properties with closures just after initializing.
    ///
    ///     let label = UILabel().then {
    ///       $0.textAlignment = .center
    ///       $0.textColor = UIColor.black
    ///       $0.text = "Hello, World!"
    ///     }
    @inlinable
    @discardableResult
    func then(_ block: (Self) throws -> Void) rethrows -> Self {
        try block(self)
        return self
    }
}

extension Then {
    @inlinable
    func `as`<T>(_ transform: (Self) throws -> T) rethrows -> T {
        try transform(self)
    }
}


extension NSObject: Then {}

#if !os(Linux)
extension CGPoint: Then {}
extension CGRect: Then {}
extension CGSize: Then {}
extension CGVector: Then {}
#endif

extension Array: Then {}
extension Dictionary: Then {}
extension Set: Then {}
extension JSONDecoder: Then {}
extension JSONEncoder: Then {}


#if os(macOS) && !targetEnvironment(macCatalyst)
extension NSEdgeInsets: Then {}
extension NSRectEdge: Then {}
#endif

#if os(iOS) || os(tvOS)
extension UIEdgeInsets: Then {}
extension UIOffset: Then {}
extension UIRectEdge: Then {}
#endif

```

`RuntimeViewerUsingAppKit/RuntimeViewerUsingAppKit/com.JH.RuntimeViewerService.plist`:

```plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>Label</key>
	<string>com.JH.RuntimeViewerService</string>
	<key>BundleProgram</key>
	<string>Contents/Library/LaunchServices</string>
	<key>MachServices</key>
	<dict>
		<key>com.JH.RuntimeViewerService</key>
		<true/>
	</dict>
</dict>
</plist>

```

`RuntimeViewerUsingAppKit/com.JH.RuntimeViewerService/Config.xcconfig`:

```xcconfig
OTHER_LDFLAGS = $(inherited) -sectcreate __TEXT __launchd_plist "$(SRCROOT)/com.JH.RuntimeViewerService/launchd.plist"


```

`RuntimeViewerUsingAppKit/com.JH.RuntimeViewerService/Debug.xcconfig`:

```xcconfig
#include "Config.xcconfig"

SMAuthorizedClient = identifier "com.JH.RuntimeViewer" and anchor apple generic and certificate leaf[subject.CN] = "Apple Development: JieHui Lai (4ZZALU97YZ)" and certificate 1[field.1.2.840.113635.100.6.2.1] /* exists */

```

`RuntimeViewerUsingAppKit/com.JH.RuntimeViewerService/Info.plist`:

```plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>CFBundleIdentifier</key>
	<string>$(PRODUCT_BUNDLE_IDENTIFIER)</string>
	<key>CFBundleInfoDictionaryVersion</key>
	<string>6.0</string>
	<key>CFBundleName</key>
	<string>com.JH.RuntimeViewerService</string>
	<key>CFBundleShortVersionString</key>
	<string>1.0.0</string>
	<key>CFBundleVersion</key>
	<string>1</string>
	<key>SMAuthorizedClients</key>
	<array>
		<string>$(SMAuthorizedClient)</string>
	</array>
</dict>
</plist>

```

`RuntimeViewerUsingAppKit/com.JH.RuntimeViewerService/Release.xcconfig`:

```xcconfig
#include "Config.xcconfig"

SMAuthorizedClient = anchor apple generic and identifier "com.JH.RuntimeViewer" and (certificate leaf[field.1.2.840.113635.100.6.1.9] /* exists */ or certificate 1[field.1.2.840.113635.100.6.2.6] /* exists */ and certificate leaf[field.1.2.840.113635.100.6.1.13] /* exists */ and certificate leaf[subject.OU] = D5Q73692VW)

```

`RuntimeViewerUsingAppKit/com.JH.RuntimeViewerService/launchd.plist`:

```plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>Label</key>
	<string>com.JH.RuntimeViewerService</string>
	<key>MachServices</key>
	<dict>
		<key>com.JH.RuntimeViewerService</key>
		<true/>
	</dict>
</dict>
</plist>

```

`RuntimeViewerUsingAppKit/com.JH.RuntimeViewerService/main.swift`:

```swift
//
//  main.swift
//  com.JH.RuntimeViewerService
//
//  Created by JH on 2024/6/27.
//

import Foundation
import RuntimeViewerService

try RuntimeViewerService.main()

```

`RuntimeViewerUsingUIKit/RuntimeViewerMobileServer/RuntimeViewerMobileServer.h`:

```h
//
//  RuntimeViewerMobileServer.h
//  RuntimeViewerMobileServer
//
//  Created by JH on 2025/3/31.
//

#import <Foundation/Foundation.h>

//! Project version number for RuntimeViewerMobileServer.
FOUNDATION_EXPORT double RuntimeViewerMobileServerVersionNumber;

//! Project version string for RuntimeViewerMobileServer.
FOUNDATION_EXPORT const unsigned char RuntimeViewerMobileServerVersionString[];

// In this header, you should import all the public headers of your framework using statements like #import <RuntimeViewerMobileServer/PublicHeader.h>



```

`RuntimeViewerUsingUIKit/RuntimeViewerMobileServer/RuntimeViewerServerLoader.swift`:

```swift
//
//  Loader.swift
//  RuntimeViewerServer
//
//  Created by JH on 11/27/24.
//

import UIKit

internal import RuntimeViewerCore

@objc
public final class RuntimeViewerServerLoader: NSObject {
    private static var runtimeEngine: RuntimeEngine?

    @objc public static func main() {
        NSLog("Attach successfully")
        Task {
            do {
                let name = await UIDevice.current.name
                runtimeEngine = try await RuntimeEngine(source: .bonjourServer(name: name, identifier: .init(rawValue: name)))
            } catch {
                NSLog("Failed to create runtime engine: \(error)")
            }
        }
    }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerMobileServer/main.m`:

```m
//
//  main.m
//  RuntimeViewerServer
//
//  Created by JH on 11/27/24.
//

#import <Foundation/Foundation.h>
#import <RuntimeViewerMobileServer-Swift.h>

static void __attribute__((constructor)) runtime_viewer_server_main(void) {
    [RuntimeViewerServerLoader main];
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit.xcodeproj/project.pbxproj`:

```pbxproj
// !$*UTF8*$!
{
	archiveVersion = 1;
	classes = {
	};
	objectVersion = 70;
	objects = {

/* Begin PBXBuildFile section */
		E9038FA32C31A8200051B6AC /* Assets.xcassets in Resources */ = {isa = PBXBuildFile; fileRef = E9038FA22C31A8200051B6AC /* Assets.xcassets */; };
		E9038FAB2C31A8500051B6AC /* SidebarRootViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC8F2C27CF4F00A2F3D3 /* SidebarRootViewController.swift */; };
		E9038FAC2C31A8500051B6AC /* MainSplitViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E95441BB2C26E99400DFFD40 /* MainSplitViewController.swift */; };
		E9038FAD2C31A8500051B6AC /* ContentCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC952C28654F00A2F3D3 /* ContentCoordinator.swift */; };
		E9038FAE2C31A8500051B6AC /* ContentNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC972C28658A00A2F3D3 /* ContentNavigationController.swift */; };
		E9038FAF2C31A8500051B6AC /* SceneDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9432FC72C0D612000362862 /* SceneDelegate.swift */; };
		E9038FB02C31A8500051B6AC /* SidebarCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC8B2C27CF0A00A2F3D3 /* SidebarCoordinator.swift */; };
		E9038FB12C31A8500051B6AC /* Then.swift in Sources */ = {isa = PBXBuildFile; fileRef = E947C39D2C2AB7E400296B2E /* Then.swift */; };
		E9038FB22C31A8500051B6AC /* MainViewModel.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942ACA32C28682C00A2F3D3 /* MainViewModel.swift */; };
		E9038FB32C31A8500051B6AC /* InspectorNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC9F2C2866E600A2F3D3 /* InspectorNavigationController.swift */; };
		E9038FB42C31A8500051B6AC /* SidebarImageViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC922C28210100A2F3D3 /* SidebarImageViewController.swift */; };
		E9038FB52C31A8500051B6AC /* AppDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9432FC52C0D612000362862 /* AppDelegate.swift */; };
		E9038FB62C31A8500051B6AC /* SidebarNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC8D2C27CF3400A2F3D3 /* SidebarNavigationController.swift */; };
		E9038FB72C31A8500051B6AC /* ContentPlaceholderViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC992C28659C00A2F3D3 /* ContentPlaceholderViewController.swift */; };
		E9038FB82C31A8500051B6AC /* ContentTextViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC9B2C2865A300A2F3D3 /* ContentTextViewController.swift */; };
		E9038FB92C31A8500051B6AC /* ViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9432FC92C0D612000362862 /* ViewController.swift */; };
		E9038FBA2C31A8500051B6AC /* InspectorCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942ACA12C2866F400A2F3D3 /* InspectorCoordinator.swift */; };
		E9038FBB2C31A8500051B6AC /* MainCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC762C270C0000A2F3D3 /* MainCoordinator.swift */; };
		E9038FBD2C31A8810051B6AC /* RuntimeViewerApplication in Frameworks */ = {isa = PBXBuildFile; productRef = E9038FBC2C31A8810051B6AC /* RuntimeViewerApplication */; };
		E9038FBF2C31A8810051B6AC /* RuntimeViewerArchitectures in Frameworks */ = {isa = PBXBuildFile; productRef = E9038FBE2C31A8810051B6AC /* RuntimeViewerArchitectures */; };
		E9038FC32C31A8810051B6AC /* RuntimeViewerUI in Frameworks */ = {isa = PBXBuildFile; productRef = E9038FC22C31A8810051B6AC /* RuntimeViewerUI */; };
		E942AC772C270C0000A2F3D3 /* MainCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC762C270C0000A2F3D3 /* MainCoordinator.swift */; };
		E942AC8A2C27556800A2F3D3 /* RuntimeViewerApplication in Frameworks */ = {isa = PBXBuildFile; productRef = E942AC892C27556800A2F3D3 /* RuntimeViewerApplication */; };
		E942AC8C2C27CF0A00A2F3D3 /* SidebarCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC8B2C27CF0A00A2F3D3 /* SidebarCoordinator.swift */; };
		E942AC8E2C27CF3400A2F3D3 /* SidebarNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC8D2C27CF3400A2F3D3 /* SidebarNavigationController.swift */; };
		E942AC902C27CF4F00A2F3D3 /* SidebarRootViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC8F2C27CF4F00A2F3D3 /* SidebarRootViewController.swift */; };
		E942AC932C28210100A2F3D3 /* SidebarImageViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC922C28210100A2F3D3 /* SidebarImageViewController.swift */; };
		E942AC962C28654F00A2F3D3 /* ContentCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC952C28654F00A2F3D3 /* ContentCoordinator.swift */; };
		E942AC982C28658A00A2F3D3 /* ContentNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC972C28658A00A2F3D3 /* ContentNavigationController.swift */; };
		E942AC9A2C28659C00A2F3D3 /* ContentPlaceholderViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC992C28659C00A2F3D3 /* ContentPlaceholderViewController.swift */; };
		E942AC9C2C2865A300A2F3D3 /* ContentTextViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC9B2C2865A300A2F3D3 /* ContentTextViewController.swift */; };
		E942ACA02C2866E600A2F3D3 /* InspectorNavigationController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942AC9F2C2866E600A2F3D3 /* InspectorNavigationController.swift */; };
		E942ACA22C2866F400A2F3D3 /* InspectorCoordinator.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942ACA12C2866F400A2F3D3 /* InspectorCoordinator.swift */; };
		E942ACA42C28682C00A2F3D3 /* MainViewModel.swift in Sources */ = {isa = PBXBuildFile; fileRef = E942ACA32C28682C00A2F3D3 /* MainViewModel.swift */; };
		E9432FC62C0D612000362862 /* AppDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9432FC52C0D612000362862 /* AppDelegate.swift */; };
		E9432FC82C0D612000362862 /* SceneDelegate.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9432FC72C0D612000362862 /* SceneDelegate.swift */; };
		E9432FCA2C0D612000362862 /* ViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E9432FC92C0D612000362862 /* ViewController.swift */; };
		E9432FCF2C0D612100362862 /* Assets.xcassets in Resources */ = {isa = PBXBuildFile; fileRef = E9432FCE2C0D612100362862 /* Assets.xcassets */; };
		E9432FF82C0D638200362862 /* RuntimeViewerUI in Frameworks */ = {isa = PBXBuildFile; productRef = E9432FF72C0D638200362862 /* RuntimeViewerUI */; };
		E947C39E2C2AB7E400296B2E /* Then.swift in Sources */ = {isa = PBXBuildFile; fileRef = E947C39D2C2AB7E400296B2E /* Then.swift */; };
		E95441B82C26E94700DFFD40 /* RuntimeViewerArchitectures in Frameworks */ = {isa = PBXBuildFile; productRef = E95441B72C26E94700DFFD40 /* RuntimeViewerArchitectures */; };
		E95441BC2C26E99400DFFD40 /* MainSplitViewController.swift in Sources */ = {isa = PBXBuildFile; fileRef = E95441BB2C26E99400DFFD40 /* MainSplitViewController.swift */; };
		E985A9D42D9AF51E005A573C /* RuntimeViewerCore in Frameworks */ = {isa = PBXBuildFile; productRef = E985A9D32D9AF51E005A573C /* RuntimeViewerCore */; };
		E985A9D62D9AF52E005A573C /* RuntimeViewerCore in Frameworks */ = {isa = PBXBuildFile; productRef = E985A9D52D9AF52E005A573C /* RuntimeViewerCore */; };
		E985A9D82D9AF536005A573C /* RuntimeViewerCore in Frameworks */ = {isa = PBXBuildFile; productRef = E985A9D72D9AF536005A573C /* RuntimeViewerCore */; };
		E9AA36242C318A7300A9B2E4 /* LaunchScreen.storyboard in Resources */ = {isa = PBXBuildFile; fileRef = E9AA36232C318A7300A9B2E4 /* LaunchScreen.storyboard */; platformFilter = ios; };
/* End PBXBuildFile section */

/* Begin PBXFileReference section */
		E9038F982C31A81F0051B6AC /* RuntimeViewer.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = RuntimeViewer.app; sourceTree = BUILT_PRODUCTS_DIR; };
		E9038FA22C31A8200051B6AC /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; path = Assets.xcassets; sourceTree = "<group>"; };
		E9038FA72C31A8200051B6AC /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = "<group>"; };
		E9401C562D9ADC33007646F6 /* RuntimeViewerMobileServer.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = RuntimeViewerMobileServer.framework; sourceTree = BUILT_PRODUCTS_DIR; };
		E942AC762C270C0000A2F3D3 /* MainCoordinator.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainCoordinator.swift; sourceTree = "<group>"; };
		E942AC8B2C27CF0A00A2F3D3 /* SidebarCoordinator.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarCoordinator.swift; sourceTree = "<group>"; };
		E942AC8D2C27CF3400A2F3D3 /* SidebarNavigationController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarNavigationController.swift; sourceTree = "<group>"; };
		E942AC8F2C27CF4F00A2F3D3 /* SidebarRootViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarRootViewController.swift; sourceTree = "<group>"; };
		E942AC922C28210100A2F3D3 /* SidebarImageViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SidebarImageViewController.swift; sourceTree = "<group>"; };
		E942AC952C28654F00A2F3D3 /* ContentCoordinator.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ContentCoordinator.swift; sourceTree = "<group>"; };
		E942AC972C28658A00A2F3D3 /* ContentNavigationController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ContentNavigationController.swift; sourceTree = "<group>"; };
		E942AC992C28659C00A2F3D3 /* ContentPlaceholderViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ContentPlaceholderViewController.swift; sourceTree = "<group>"; };
		E942AC9B2C2865A300A2F3D3 /* ContentTextViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ContentTextViewController.swift; sourceTree = "<group>"; };
		E942AC9F2C2866E600A2F3D3 /* InspectorNavigationController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = InspectorNavigationController.swift; sourceTree = "<group>"; };
		E942ACA12C2866F400A2F3D3 /* InspectorCoordinator.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = InspectorCoordinator.swift; sourceTree = "<group>"; };
		E942ACA32C28682C00A2F3D3 /* MainViewModel.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainViewModel.swift; sourceTree = "<group>"; };
		E9432FC22C0D612000362862 /* RuntimeViewerUsingUIKit.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = RuntimeViewerUsingUIKit.app; sourceTree = BUILT_PRODUCTS_DIR; };
		E9432FC52C0D612000362862 /* AppDelegate.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = AppDelegate.swift; sourceTree = "<group>"; };
		E9432FC72C0D612000362862 /* SceneDelegate.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = SceneDelegate.swift; sourceTree = "<group>"; };
		E9432FC92C0D612000362862 /* ViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = ViewController.swift; sourceTree = "<group>"; };
		E9432FCE2C0D612100362862 /* Assets.xcassets */ = {isa = PBXFileReference; lastKnownFileType = folder.assetcatalog; path = Assets.xcassets; sourceTree = "<group>"; };
		E9432FD32C0D612100362862 /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = "<group>"; };
		E9432FF22C0D617200362862 /* RuntimeViewerUsingUIKit.entitlements */ = {isa = PBXFileReference; lastKnownFileType = text.plist.entitlements; path = RuntimeViewerUsingUIKit.entitlements; sourceTree = "<group>"; };
		E947C39D2C2AB7E400296B2E /* Then.swift */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.swift; path = Then.swift; sourceTree = "<group>"; };
		E95441BB2C26E99400DFFD40 /* MainSplitViewController.swift */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.swift; path = MainSplitViewController.swift; sourceTree = "<group>"; };
		E9AA36232C318A7300A9B2E4 /* LaunchScreen.storyboard */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = file.storyboard; path = LaunchScreen.storyboard; sourceTree = "<group>"; };
/* End PBXFileReference section */

/* Begin PBXFileSystemSynchronizedBuildFileExceptionSet section */
		E9401C5C2D9ADC33007646F6 /* PBXFileSystemSynchronizedBuildFileExceptionSet */ = {
			isa = PBXFileSystemSynchronizedBuildFileExceptionSet;
			publicHeaders = (
				RuntimeViewerMobileServer.h,
			);
			target = E9401C552D9ADC33007646F6 /* RuntimeViewerMobileServer */;
		};
/* End PBXFileSystemSynchronizedBuildFileExceptionSet section */

/* Begin PBXFileSystemSynchronizedRootGroup section */
		E9401C572D9ADC33007646F6 /* RuntimeViewerMobileServer */ = {isa = PBXFileSystemSynchronizedRootGroup; exceptions = (E9401C5C2D9ADC33007646F6 /* PBXFileSystemSynchronizedBuildFileExceptionSet */, ); explicitFileTypes = {}; explicitFolders = (); path = RuntimeViewerMobileServer; sourceTree = "<group>"; };
/* End PBXFileSystemSynchronizedRootGroup section */

/* Begin PBXFrameworksBuildPhase section */
		E9038F952C31A81F0051B6AC /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E985A9D62D9AF52E005A573C /* RuntimeViewerCore in Frameworks */,
				E9038FBF2C31A8810051B6AC /* RuntimeViewerArchitectures in Frameworks */,
				E9038FBD2C31A8810051B6AC /* RuntimeViewerApplication in Frameworks */,
				E9038FC32C31A8810051B6AC /* RuntimeViewerUI in Frameworks */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9401C532D9ADC33007646F6 /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E985A9D82D9AF536005A573C /* RuntimeViewerCore in Frameworks */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9432FBF2C0D612000362862 /* Frameworks */ = {
			isa = PBXFrameworksBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E985A9D42D9AF51E005A573C /* RuntimeViewerCore in Frameworks */,
				E95441B82C26E94700DFFD40 /* RuntimeViewerArchitectures in Frameworks */,
				E942AC8A2C27556800A2F3D3 /* RuntimeViewerApplication in Frameworks */,
				E9432FF82C0D638200362862 /* RuntimeViewerUI in Frameworks */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXFrameworksBuildPhase section */

/* Begin PBXGroup section */
		E9038F992C31A81F0051B6AC /* RuntimeViewerUsingVision */ = {
			isa = PBXGroup;
			children = (
				E9038FA22C31A8200051B6AC /* Assets.xcassets */,
				E9038FA72C31A8200051B6AC /* Info.plist */,
			);
			path = RuntimeViewerUsingVision;
			sourceTree = "<group>";
		};
		E9432FB92C0D612000362862 = {
			isa = PBXGroup;
			children = (
				E9432FC42C0D612000362862 /* RuntimeViewerUsingUIKit */,
				E9038F992C31A81F0051B6AC /* RuntimeViewerUsingVision */,
				E9401C572D9ADC33007646F6 /* RuntimeViewerMobileServer */,
				E9432FC32C0D612000362862 /* Products */,
				E9432FF62C0D638200362862 /* Frameworks */,
			);
			sourceTree = "<group>";
		};
		E9432FC32C0D612000362862 /* Products */ = {
			isa = PBXGroup;
			children = (
				E9432FC22C0D612000362862 /* RuntimeViewerUsingUIKit.app */,
				E9038F982C31A81F0051B6AC /* RuntimeViewer.app */,
				E9401C562D9ADC33007646F6 /* RuntimeViewerMobileServer.framework */,
			);
			name = Products;
			sourceTree = "<group>";
		};
		E9432FC42C0D612000362862 /* RuntimeViewerUsingUIKit */ = {
			isa = PBXGroup;
			children = (
				E9432FF22C0D617200362862 /* RuntimeViewerUsingUIKit.entitlements */,
				E947C39D2C2AB7E400296B2E /* Then.swift */,
				E9432FC52C0D612000362862 /* AppDelegate.swift */,
				E9432FC72C0D612000362862 /* SceneDelegate.swift */,
				E9432FC92C0D612000362862 /* ViewController.swift */,
				E95441BB2C26E99400DFFD40 /* MainSplitViewController.swift */,
				E942AC762C270C0000A2F3D3 /* MainCoordinator.swift */,
				E942ACA32C28682C00A2F3D3 /* MainViewModel.swift */,
				E942AC8B2C27CF0A00A2F3D3 /* SidebarCoordinator.swift */,
				E942AC8D2C27CF3400A2F3D3 /* SidebarNavigationController.swift */,
				E942AC8F2C27CF4F00A2F3D3 /* SidebarRootViewController.swift */,
				E942AC922C28210100A2F3D3 /* SidebarImageViewController.swift */,
				E942AC952C28654F00A2F3D3 /* ContentCoordinator.swift */,
				E942AC972C28658A00A2F3D3 /* ContentNavigationController.swift */,
				E942AC992C28659C00A2F3D3 /* ContentPlaceholderViewController.swift */,
				E942AC9B2C2865A300A2F3D3 /* ContentTextViewController.swift */,
				E942AC9F2C2866E600A2F3D3 /* InspectorNavigationController.swift */,
				E942ACA12C2866F400A2F3D3 /* InspectorCoordinator.swift */,
				E9432FCE2C0D612100362862 /* Assets.xcassets */,
				E9AA36232C318A7300A9B2E4 /* LaunchScreen.storyboard */,
				E9432FD32C0D612100362862 /* Info.plist */,
			);
			path = RuntimeViewerUsingUIKit;
			sourceTree = "<group>";
		};
		E9432FF62C0D638200362862 /* Frameworks */ = {
			isa = PBXGroup;
			children = (
			);
			name = Frameworks;
			sourceTree = "<group>";
		};
/* End PBXGroup section */

/* Begin PBXHeadersBuildPhase section */
		E9401C512D9ADC33007646F6 /* Headers */ = {
			isa = PBXHeadersBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXHeadersBuildPhase section */

/* Begin PBXNativeTarget section */
		E9038F972C31A81F0051B6AC /* RuntimeViewerUsingVision */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = E9038FA82C31A8200051B6AC /* Build configuration list for PBXNativeTarget "RuntimeViewerUsingVision" */;
			buildPhases = (
				E9038F942C31A81F0051B6AC /* Sources */,
				E9038F952C31A81F0051B6AC /* Frameworks */,
				E9038F962C31A81F0051B6AC /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
			);
			name = RuntimeViewerUsingVision;
			packageProductDependencies = (
				E9038FBC2C31A8810051B6AC /* RuntimeViewerApplication */,
				E9038FBE2C31A8810051B6AC /* RuntimeViewerArchitectures */,
				E9038FC22C31A8810051B6AC /* RuntimeViewerUI */,
				E985A9D52D9AF52E005A573C /* RuntimeViewerCore */,
			);
			productName = RuntimeViewerUsingVision;
			productReference = E9038F982C31A81F0051B6AC /* RuntimeViewer.app */;
			productType = "com.apple.product-type.application";
		};
		E9401C552D9ADC33007646F6 /* RuntimeViewerMobileServer */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = E9401C5D2D9ADC33007646F6 /* Build configuration list for PBXNativeTarget "RuntimeViewerMobileServer" */;
			buildPhases = (
				E9401C512D9ADC33007646F6 /* Headers */,
				E9401C522D9ADC33007646F6 /* Sources */,
				E9401C532D9ADC33007646F6 /* Frameworks */,
				E9401C542D9ADC33007646F6 /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
			);
			fileSystemSynchronizedGroups = (
				E9401C572D9ADC33007646F6 /* RuntimeViewerMobileServer */,
			);
			name = RuntimeViewerMobileServer;
			packageProductDependencies = (
				E985A9D72D9AF536005A573C /* RuntimeViewerCore */,
			);
			productName = RuntimeViewerMobileServer;
			productReference = E9401C562D9ADC33007646F6 /* RuntimeViewerMobileServer.framework */;
			productType = "com.apple.product-type.framework";
		};
		E9432FC12C0D612000362862 /* RuntimeViewerUsingUIKit */ = {
			isa = PBXNativeTarget;
			buildConfigurationList = E9432FD62C0D612100362862 /* Build configuration list for PBXNativeTarget "RuntimeViewerUsingUIKit" */;
			buildPhases = (
				E9432FBE2C0D612000362862 /* Sources */,
				E9432FBF2C0D612000362862 /* Frameworks */,
				E9432FC02C0D612000362862 /* Resources */,
			);
			buildRules = (
			);
			dependencies = (
			);
			name = RuntimeViewerUsingUIKit;
			packageProductDependencies = (
				E9432FF72C0D638200362862 /* RuntimeViewerUI */,
				E95441B72C26E94700DFFD40 /* RuntimeViewerArchitectures */,
				E942AC892C27556800A2F3D3 /* RuntimeViewerApplication */,
				E985A9D32D9AF51E005A573C /* RuntimeViewerCore */,
			);
			productName = RuntimeViewerUsingUIKit;
			productReference = E9432FC22C0D612000362862 /* RuntimeViewerUsingUIKit.app */;
			productType = "com.apple.product-type.application";
		};
/* End PBXNativeTarget section */

/* Begin PBXProject section */
		E9432FBA2C0D612000362862 /* Project object */ = {
			isa = PBXProject;
			attributes = {
				BuildIndependentTargetsInParallel = 1;
				LastSwiftUpdateCheck = 1620;
				LastUpgradeCheck = 1540;
				TargetAttributes = {
					E9038F972C31A81F0051B6AC = {
						CreatedOnToolsVersion = 15.4;
					};
					E9401C552D9ADC33007646F6 = {
						CreatedOnToolsVersion = 16.2;
					};
					E9432FC12C0D612000362862 = {
						CreatedOnToolsVersion = 15.4;
					};
				};
			};
			buildConfigurationList = E9432FBD2C0D612000362862 /* Build configuration list for PBXProject "RuntimeViewerUsingUIKit" */;
			compatibilityVersion = "Xcode 14.0";
			developmentRegion = en;
			hasScannedForEncodings = 0;
			knownRegions = (
				en,
				Base,
			);
			mainGroup = E9432FB92C0D612000362862;
			packageReferences = (
			);
			productRefGroup = E9432FC32C0D612000362862 /* Products */;
			projectDirPath = "";
			projectRoot = "";
			targets = (
				E9432FC12C0D612000362862 /* RuntimeViewerUsingUIKit */,
				E9038F972C31A81F0051B6AC /* RuntimeViewerUsingVision */,
				E9401C552D9ADC33007646F6 /* RuntimeViewerMobileServer */,
			);
		};
/* End PBXProject section */

/* Begin PBXResourcesBuildPhase section */
		E9038F962C31A81F0051B6AC /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9038FA32C31A8200051B6AC /* Assets.xcassets in Resources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9401C542D9ADC33007646F6 /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9432FC02C0D612000362862 /* Resources */ = {
			isa = PBXResourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9432FCF2C0D612100362862 /* Assets.xcassets in Resources */,
				E9AA36242C318A7300A9B2E4 /* LaunchScreen.storyboard in Resources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXResourcesBuildPhase section */

/* Begin PBXSourcesBuildPhase section */
		E9038F942C31A81F0051B6AC /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E9038FAB2C31A8500051B6AC /* SidebarRootViewController.swift in Sources */,
				E9038FAC2C31A8500051B6AC /* MainSplitViewController.swift in Sources */,
				E9038FAD2C31A8500051B6AC /* ContentCoordinator.swift in Sources */,
				E9038FAE2C31A8500051B6AC /* ContentNavigationController.swift in Sources */,
				E9038FAF2C31A8500051B6AC /* SceneDelegate.swift in Sources */,
				E9038FB02C31A8500051B6AC /* SidebarCoordinator.swift in Sources */,
				E9038FB12C31A8500051B6AC /* Then.swift in Sources */,
				E9038FB22C31A8500051B6AC /* MainViewModel.swift in Sources */,
				E9038FB32C31A8500051B6AC /* InspectorNavigationController.swift in Sources */,
				E9038FB42C31A8500051B6AC /* SidebarImageViewController.swift in Sources */,
				E9038FB52C31A8500051B6AC /* AppDelegate.swift in Sources */,
				E9038FB62C31A8500051B6AC /* SidebarNavigationController.swift in Sources */,
				E9038FB72C31A8500051B6AC /* ContentPlaceholderViewController.swift in Sources */,
				E9038FB82C31A8500051B6AC /* ContentTextViewController.swift in Sources */,
				E9038FB92C31A8500051B6AC /* ViewController.swift in Sources */,
				E9038FBA2C31A8500051B6AC /* InspectorCoordinator.swift in Sources */,
				E9038FBB2C31A8500051B6AC /* MainCoordinator.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9401C522D9ADC33007646F6 /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
		E9432FBE2C0D612000362862 /* Sources */ = {
			isa = PBXSourcesBuildPhase;
			buildActionMask = 2147483647;
			files = (
				E942AC982C28658A00A2F3D3 /* ContentNavigationController.swift in Sources */,
				E942AC8E2C27CF3400A2F3D3 /* SidebarNavigationController.swift in Sources */,
				E947C39E2C2AB7E400296B2E /* Then.swift in Sources */,
				E95441BC2C26E99400DFFD40 /* MainSplitViewController.swift in Sources */,
				E942AC9C2C2865A300A2F3D3 /* ContentTextViewController.swift in Sources */,
				E942ACA22C2866F400A2F3D3 /* InspectorCoordinator.swift in Sources */,
				E942AC962C28654F00A2F3D3 /* ContentCoordinator.swift in Sources */,
				E942AC8C2C27CF0A00A2F3D3 /* SidebarCoordinator.swift in Sources */,
				E9432FCA2C0D612000362862 /* ViewController.swift in Sources */,
				E9432FC62C0D612000362862 /* AppDelegate.swift in Sources */,
				E942AC932C28210100A2F3D3 /* SidebarImageViewController.swift in Sources */,
				E942AC772C270C0000A2F3D3 /* MainCoordinator.swift in Sources */,
				E9432FC82C0D612000362862 /* SceneDelegate.swift in Sources */,
				E942AC9A2C28659C00A2F3D3 /* ContentPlaceholderViewController.swift in Sources */,
				E942ACA02C2866E600A2F3D3 /* InspectorNavigationController.swift in Sources */,
				E942AC902C27CF4F00A2F3D3 /* SidebarRootViewController.swift in Sources */,
				E942ACA42C28682C00A2F3D3 /* MainViewModel.swift in Sources */,
			);
			runOnlyForDeploymentPostprocessing = 0;
		};
/* End PBXSourcesBuildPhase section */

/* Begin XCBuildConfiguration section */
		E9038FA92C31A8200051B6AC /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				DEVELOPMENT_ASSET_PATHS = "";
				DEVELOPMENT_TEAM = D5Q73692VW;
				ENABLE_PREVIEWS = YES;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_FILE = "$(TARGET_NAME)/Info.plist";
				INFOPLIST_KEY_CFBundleDisplayName = RuntimeViewer;
				INFOPLIST_KEY_LSApplicationCategoryType = "public.app-category.developer-tools";
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewer;
				PRODUCT_NAME = RuntimeViewer;
				SDKROOT = xros;
				SUPPORTED_PLATFORMS = "xros xrsimulator";
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2,7";
				XROS_DEPLOYMENT_TARGET = 1.0;
			};
			name = Debug;
		};
		E9038FAA2C31A8200051B6AC /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				DEVELOPMENT_ASSET_PATHS = "";
				DEVELOPMENT_TEAM = D5Q73692VW;
				ENABLE_PREVIEWS = YES;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_FILE = "$(TARGET_NAME)/Info.plist";
				INFOPLIST_KEY_CFBundleDisplayName = RuntimeViewer;
				INFOPLIST_KEY_LSApplicationCategoryType = "public.app-category.developer-tools";
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewer;
				PRODUCT_NAME = RuntimeViewer;
				SDKROOT = xros;
				SUPPORTED_PLATFORMS = "xros xrsimulator";
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2,7";
				XROS_DEPLOYMENT_TARGET = 1.0;
			};
			name = Release;
		};
		E9401C5A2D9ADC33007646F6 /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUILD_LIBRARY_FOR_DISTRIBUTION = YES;
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				DEFINES_MODULE = YES;
				DEVELOPMENT_TEAM = D5Q73692VW;
				DYLIB_COMPATIBILITY_VERSION = 1;
				DYLIB_CURRENT_VERSION = 1;
				DYLIB_INSTALL_NAME_BASE = "@rpath";
				ENABLE_MODULE_VERIFIER = YES;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_KEY_NSHumanReadableCopyright = "";
				INSTALL_PATH = "$(LOCAL_LIBRARY_DIR)/Frameworks";
				IPHONEOS_DEPLOYMENT_TARGET = 14.0;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
					"@loader_path/Frameworks",
				);
				MARKETING_VERSION = 1.0;
				MODULE_VERIFIER_SUPPORTED_LANGUAGES = "objective-c objective-c++";
				MODULE_VERIFIER_SUPPORTED_LANGUAGE_STANDARDS = "gnu17 gnu++20";
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerMobileServer;
				PRODUCT_NAME = "$(TARGET_NAME:c99extidentifier)";
				SKIP_INSTALL = YES;
				SUPPORTED_PLATFORMS = "appletvos appletvsimulator iphoneos iphonesimulator watchos watchsimulator xros xrsimulator";
				SUPPORTS_MACCATALYST = YES;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_INSTALL_OBJC_HEADER = NO;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2,3,4,7";
				VERSIONING_SYSTEM = "apple-generic";
				VERSION_INFO_PREFIX = "";
			};
			name = Debug;
		};
		E9401C5B2D9ADC33007646F6 /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				BUILD_LIBRARY_FOR_DISTRIBUTION = YES;
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				DEFINES_MODULE = YES;
				DEVELOPMENT_TEAM = D5Q73692VW;
				DYLIB_COMPATIBILITY_VERSION = 1;
				DYLIB_CURRENT_VERSION = 1;
				DYLIB_INSTALL_NAME_BASE = "@rpath";
				ENABLE_MODULE_VERIFIER = YES;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_KEY_NSHumanReadableCopyright = "";
				INSTALL_PATH = "$(LOCAL_LIBRARY_DIR)/Frameworks";
				IPHONEOS_DEPLOYMENT_TARGET = 14.0;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
					"@loader_path/Frameworks",
				);
				MARKETING_VERSION = 1.0;
				MODULE_VERIFIER_SUPPORTED_LANGUAGES = "objective-c objective-c++";
				MODULE_VERIFIER_SUPPORTED_LANGUAGE_STANDARDS = "gnu17 gnu++20";
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewerMobileServer;
				PRODUCT_NAME = "$(TARGET_NAME:c99extidentifier)";
				SKIP_INSTALL = YES;
				SUPPORTED_PLATFORMS = "appletvos appletvsimulator iphoneos iphonesimulator watchos watchsimulator xros xrsimulator";
				SUPPORTS_MACCATALYST = YES;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_INSTALL_OBJC_HEADER = NO;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2,3,4,7";
				VERSIONING_SYSTEM = "apple-generic";
				VERSION_INFO_PREFIX = "";
			};
			name = Release;
		};
		E9432FD42C0D612100362862 /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++20";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_ENABLE_OBJC_WEAK = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				COPY_PHASE_STRIP = NO;
				DEBUG_INFORMATION_FORMAT = dwarf;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_TESTABILITY = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = YES;
				GCC_C_LANGUAGE_STANDARD = gnu17;
				GCC_DYNAMIC_NO_PIC = NO;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_OPTIMIZATION_LEVEL = 0;
				GCC_PREPROCESSOR_DEFINITIONS = (
					"DEBUG=1",
					"$(inherited)",
				);
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 17.5;
				LOCALIZATION_PREFERS_STRING_CATALOGS = YES;
				MTL_ENABLE_DEBUG_INFO = INCLUDE_SOURCE;
				MTL_FAST_MATH = YES;
				ONLY_ACTIVE_ARCH = YES;
				SDKROOT = iphoneos;
				SUPPORTED_PLATFORMS = "iphonesimulator iphoneos";
				SWIFT_ACTIVE_COMPILATION_CONDITIONS = "DEBUG $(inherited)";
				SWIFT_OPTIMIZATION_LEVEL = "-Onone";
				XROS_DEPLOYMENT_TARGET = 1.0;
			};
			name = Debug;
		};
		E9432FD52C0D612100362862 /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ALWAYS_SEARCH_USER_PATHS = NO;
				ASSETCATALOG_COMPILER_GENERATE_SWIFT_ASSET_SYMBOL_EXTENSIONS = YES;
				CLANG_ANALYZER_NONNULL = YES;
				CLANG_ANALYZER_NUMBER_OBJECT_CONVERSION = YES_AGGRESSIVE;
				CLANG_CXX_LANGUAGE_STANDARD = "gnu++20";
				CLANG_ENABLE_MODULES = YES;
				CLANG_ENABLE_OBJC_ARC = YES;
				CLANG_ENABLE_OBJC_WEAK = YES;
				CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES;
				CLANG_WARN_BOOL_CONVERSION = YES;
				CLANG_WARN_COMMA = YES;
				CLANG_WARN_CONSTANT_CONVERSION = YES;
				CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES;
				CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR;
				CLANG_WARN_DOCUMENTATION_COMMENTS = YES;
				CLANG_WARN_EMPTY_BODY = YES;
				CLANG_WARN_ENUM_CONVERSION = YES;
				CLANG_WARN_INFINITE_RECURSION = YES;
				CLANG_WARN_INT_CONVERSION = YES;
				CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES;
				CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES;
				CLANG_WARN_OBJC_LITERAL_CONVERSION = YES;
				CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR;
				CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES;
				CLANG_WARN_RANGE_LOOP_ANALYSIS = YES;
				CLANG_WARN_STRICT_PROTOTYPES = YES;
				CLANG_WARN_SUSPICIOUS_MOVE = YES;
				CLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE;
				CLANG_WARN_UNREACHABLE_CODE = YES;
				CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
				COPY_PHASE_STRIP = NO;
				DEBUG_INFORMATION_FORMAT = "dwarf-with-dsym";
				ENABLE_NS_ASSERTIONS = NO;
				ENABLE_STRICT_OBJC_MSGSEND = YES;
				ENABLE_USER_SCRIPT_SANDBOXING = YES;
				GCC_C_LANGUAGE_STANDARD = gnu17;
				GCC_NO_COMMON_BLOCKS = YES;
				GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
				GCC_WARN_ABOUT_RETURN_TYPE = YES_ERROR;
				GCC_WARN_UNDECLARED_SELECTOR = YES;
				GCC_WARN_UNINITIALIZED_AUTOS = YES_AGGRESSIVE;
				GCC_WARN_UNUSED_FUNCTION = YES;
				GCC_WARN_UNUSED_VARIABLE = YES;
				IPHONEOS_DEPLOYMENT_TARGET = 17.5;
				LOCALIZATION_PREFERS_STRING_CATALOGS = YES;
				MTL_ENABLE_DEBUG_INFO = NO;
				MTL_FAST_MATH = YES;
				SDKROOT = iphoneos;
				SUPPORTED_PLATFORMS = "iphonesimulator iphoneos";
				SWIFT_COMPILATION_MODE = wholemodule;
				VALIDATE_PRODUCT = YES;
				XROS_DEPLOYMENT_TARGET = 1.0;
			};
			name = Release;
		};
		E9432FD72C0D612100362862 /* Debug */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				CODE_SIGN_ENTITLEMENTS = RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit.entitlements;
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				DEVELOPMENT_TEAM = D5Q73692VW;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_FILE = RuntimeViewerUsingUIKit/Info.plist;
				INFOPLIST_KEY_CFBundleDisplayName = RuntimeViewer;
				INFOPLIST_KEY_LSApplicationCategoryType = "public.app-category.developer-tools";
				INFOPLIST_KEY_NSLocalNetworkUsageDescription = "Runtime Viewer requires local network permissions to use the Bonjour discovery service";
				INFOPLIST_KEY_UIApplicationSupportsIndirectInputEvents = YES;
				INFOPLIST_KEY_UILaunchStoryboardName = LaunchScreen;
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPad = "UIInterfaceOrientationPortrait UIInterfaceOrientationPortraitUpsideDown UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight";
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPhone = "UIInterfaceOrientationPortrait UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight";
				IPHONEOS_DEPLOYMENT_TARGET = 15.0;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewer;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SDKROOT = iphoneos;
				SUPPORTED_PLATFORMS = "appletvos appletvsimulator iphoneos iphonesimulator";
				SUPPORTS_MACCATALYST = NO;
				SUPPORTS_MAC_DESIGNED_FOR_IPHONE_IPAD = NO;
				SUPPORTS_XR_DESIGNED_FOR_IPHONE_IPAD = NO;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2,3";
				TVOS_DEPLOYMENT_TARGET = 15.0;
				XROS_DEPLOYMENT_TARGET = 1.0;
			};
			name = Debug;
		};
		E9432FD82C0D612100362862 /* Release */ = {
			isa = XCBuildConfiguration;
			buildSettings = {
				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
				ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor;
				CODE_SIGN_ENTITLEMENTS = RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit.entitlements;
				CODE_SIGN_STYLE = Automatic;
				CURRENT_PROJECT_VERSION = 1;
				DEVELOPMENT_TEAM = D5Q73692VW;
				GENERATE_INFOPLIST_FILE = YES;
				INFOPLIST_FILE = RuntimeViewerUsingUIKit/Info.plist;
				INFOPLIST_KEY_CFBundleDisplayName = RuntimeViewer;
				INFOPLIST_KEY_LSApplicationCategoryType = "public.app-category.developer-tools";
				INFOPLIST_KEY_NSLocalNetworkUsageDescription = "Runtime Viewer requires local network permissions to use the Bonjour discovery service";
				INFOPLIST_KEY_UIApplicationSupportsIndirectInputEvents = YES;
				INFOPLIST_KEY_UILaunchStoryboardName = LaunchScreen;
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPad = "UIInterfaceOrientationPortrait UIInterfaceOrientationPortraitUpsideDown UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight";
				INFOPLIST_KEY_UISupportedInterfaceOrientations_iPhone = "UIInterfaceOrientationPortrait UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight";
				IPHONEOS_DEPLOYMENT_TARGET = 15.0;
				LD_RUNPATH_SEARCH_PATHS = (
					"$(inherited)",
					"@executable_path/Frameworks",
				);
				MARKETING_VERSION = 1.0;
				PRODUCT_BUNDLE_IDENTIFIER = com.JH.RuntimeViewer;
				PRODUCT_NAME = "$(TARGET_NAME)";
				SDKROOT = iphoneos;
				SUPPORTED_PLATFORMS = "appletvos appletvsimulator iphoneos iphonesimulator";
				SUPPORTS_MACCATALYST = NO;
				SUPPORTS_MAC_DESIGNED_FOR_IPHONE_IPAD = NO;
				SUPPORTS_XR_DESIGNED_FOR_IPHONE_IPAD = NO;
				SWIFT_EMIT_LOC_STRINGS = YES;
				SWIFT_VERSION = 5.0;
				TARGETED_DEVICE_FAMILY = "1,2,3";
				TVOS_DEPLOYMENT_TARGET = 15.0;
				XROS_DEPLOYMENT_TARGET = 1.0;
			};
			name = Release;
		};
/* End XCBuildConfiguration section */

/* Begin XCConfigurationList section */
		E9038FA82C31A8200051B6AC /* Build configuration list for PBXNativeTarget "RuntimeViewerUsingVision" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E9038FA92C31A8200051B6AC /* Debug */,
				E9038FAA2C31A8200051B6AC /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		E9401C5D2D9ADC33007646F6 /* Build configuration list for PBXNativeTarget "RuntimeViewerMobileServer" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E9401C5A2D9ADC33007646F6 /* Debug */,
				E9401C5B2D9ADC33007646F6 /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		E9432FBD2C0D612000362862 /* Build configuration list for PBXProject "RuntimeViewerUsingUIKit" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E9432FD42C0D612100362862 /* Debug */,
				E9432FD52C0D612100362862 /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
		E9432FD62C0D612100362862 /* Build configuration list for PBXNativeTarget "RuntimeViewerUsingUIKit" */ = {
			isa = XCConfigurationList;
			buildConfigurations = (
				E9432FD72C0D612100362862 /* Debug */,
				E9432FD82C0D612100362862 /* Release */,
			);
			defaultConfigurationIsVisible = 0;
			defaultConfigurationName = Release;
		};
/* End XCConfigurationList section */

/* Begin XCSwiftPackageProductDependency section */
		E9038FBC2C31A8810051B6AC /* RuntimeViewerApplication */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerApplication;
		};
		E9038FBE2C31A8810051B6AC /* RuntimeViewerArchitectures */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerArchitectures;
		};
		E9038FC22C31A8810051B6AC /* RuntimeViewerUI */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerUI;
		};
		E942AC892C27556800A2F3D3 /* RuntimeViewerApplication */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerApplication;
		};
		E9432FF72C0D638200362862 /* RuntimeViewerUI */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerUI;
		};
		E95441B72C26E94700DFFD40 /* RuntimeViewerArchitectures */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerArchitectures;
		};
		E985A9D32D9AF51E005A573C /* RuntimeViewerCore */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerCore;
		};
		E985A9D52D9AF52E005A573C /* RuntimeViewerCore */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerCore;
		};
		E985A9D72D9AF536005A573C /* RuntimeViewerCore */ = {
			isa = XCSwiftPackageProductDependency;
			productName = RuntimeViewerCore;
		};
/* End XCSwiftPackageProductDependency section */
	};
	rootObject = E9432FBA2C0D612000362862 /* Project object */;
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/AppDelegate.swift`:

```swift
//
//  AppDelegate.swift
//  RuntimeViewerUsingUIKit
//
//  Created by JH on 2024/6/3.
//

import UIKit
import RuntimeViewerCore
import RuntimeViewerCommunication

@main
class AppDelegate: UIResponder, UIApplicationDelegate {
    
    var remoteRuntimeEngine: RuntimeEngine?
    
    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        DispatchQueue.global().async {
            _ = RuntimeEngine.shared
            
        }
        Task {
            remoteRuntimeEngine = try await RuntimeEngine(source: .bonjourServer(name: UIDevice.current.name, identifier: .init(rawValue: UIDevice.current.name)))
        }
        return true
    }

    // MARK: UISceneSession Lifecycle

    func application(_ application: UIApplication, configurationForConnecting connectingSceneSession: UISceneSession, options: UIScene.ConnectionOptions) -> UISceneConfiguration {
        // Called when a new scene session is being created.
        // Use this method to select a configuration to create the new scene with.
        return UISceneConfiguration(name: "Default Configuration", sessionRole: connectingSceneSession.role)
    }

    func application(_ application: UIApplication, didDiscardSceneSessions sceneSessions: Set<UISceneSession>) {
        // Called when the user discards a scene session.
        // If any sessions were discarded while the application was not running, this will be called shortly after application:didFinishLaunchingWithOptions.
        // Use this method to release any resources that were specific to the discarded scenes, as they will not return.
    }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/Assets.xcassets/AccentColor.colorset/Contents.json`:

```json
{
  "colors" : [
    {
      "idiom" : "universal"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/Assets.xcassets/AppIcon.appiconset/Contents.json`:

```json
{
  "images" : [
    {
      "filename" : "Group 19.png",
      "idiom" : "universal",
      "platform" : "ios",
      "size" : "1024x1024"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/Assets.xcassets/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/ContentCoordinator.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerApplication
import RuntimeViewerArchitectures

typealias ContentTransition = NavigationTransition

class ContentCoordinator: NavigationCoordinator<ContentRoute> {
    let appServices: AppServices
    
    init(appServices: AppServices) {
        self.appServices = appServices
        super.init(rootViewController: .init(nibName: nil, bundle: nil), initialRoute: .placeholder)
    }

    override func prepareTransition(for route: ContentRoute) -> ContentTransition {
        switch route {
        case .placeholder:
            let contentPlaceholderViewController = ContentPlaceholderViewController()
            let contentPlaceholderViewModel = ContentPlaceholderViewModel(appServices: appServices, router: self)
            contentPlaceholderViewController.setupBindings(for: contentPlaceholderViewModel)
            return .set([contentPlaceholderViewController], animation: nil)
        case let .root(runtimeObjectType):
            let contentTextViewController = ContentTextViewController()
            let contentTextViewModel = ContentTextViewModel(runtimeObject: runtimeObjectType, appServices: appServices, router: self)
            contentTextViewController.setupBindings(for: contentTextViewModel)
            return .set([contentTextViewController], animation: .default)
        case let .next(runtimeObjectType):
            let contentTextViewController = ContentTextViewController()
            let contentTextViewModel = ContentTextViewModel(runtimeObject: runtimeObjectType, appServices: appServices, router: self)
            contentTextViewController.setupBindings(for: contentTextViewModel)
            return .push(contentTextViewController, animation: .default)
        case .back:
            return .pop(animation: .default)
        }
    }
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/ContentNavigationController.swift`:

```swift
#if canImport(UIKit)

import UIKit

class ContentNavigationController: UINavigationController {
    
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/ContentPlaceholderViewController.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerUI
import RuntimeViewerApplication
import RuntimeViewerArchitectures

class ContentPlaceholderViewController: ViewController<ContentPlaceholderViewModel> {
    let placeholerLabel = UILabel()

    override func viewDidLoad() {
        super.viewDidLoad()

        if #available(iOS 17.0, tvOS 17.0, *) {
            var contentUnavailableConfiguration = UIContentUnavailableConfiguration.empty()
            contentUnavailableConfiguration.text = "Select a runtime object"
            contentUnavailableConfiguration.textProperties.font = .systemFont(ofSize: 25, weight: .regular)
            contentUnavailableConfiguration.textProperties.color = .secondaryLabel
            contentUnavailableConfiguration.button = .bordered()
            contentUnavailableConfiguration.button.title = "Reload Data"
            contentUnavailableConfiguration.buttonProperties.primaryAction = .init(handler: { _ in

                let appDelegate = UIApplication.shared.delegate as! AppDelegate
                appDelegate.remoteRuntimeEngine?.reloadData()
            })
            
            self.contentUnavailableConfiguration = contentUnavailableConfiguration
        } else {
            hierarchy {
                placeholerLabel
            }

            placeholerLabel.snp.makeConstraints { make in
                make.center.equalToSuperview()
            }

            placeholerLabel.do {
                $0.text = "Select a runtime object"
                $0.font = .systemFont(ofSize: 25, weight: .regular)
                $0.textColor = .secondaryLabel
            }
        }
    }
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/ContentTextViewController.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerApplication
import RuntimeViewerArchitectures

class ContentTextViewController: ViewController<ContentTextViewModel> {
    let textView = UITextView()

    let runtimeObjectClicked = PublishRelay<RuntimeObjectType>()

    override func viewDidLoad() {
        super.viewDidLoad()

        hierarchy {
            textView
        }

        textView.snp.makeConstraints { make in
            make.edges.equalToSuperview()
        }

        textView.do {
            $0.isSelectable = true
            #if !os(tvOS)
            $0.isEditable = false
            #endif
            $0.linkTextAttributes = [:]
            $0.delegate = self
            $0.textContainerInset = .init(top: 0, left: 15, bottom: 0, right: 15)
        }
    }

    override func setupBindings(for viewModel: ContentTextViewModel) {
        super.setupBindings(for: viewModel)
        let input = ContentTextViewModel.Input(runtimeObjectClicked: runtimeObjectClicked.asSignal())
        let output = viewModel.transform(input)

        output.attributedString.drive(textView.rx.attributedText).disposed(by: rx.disposeBag)
        output.runtimeObjectName.drive(navigationItem.rx.title).disposed(by: rx.disposeBag)
    }
}

extension ContentTextViewController: UITextViewDelegate {
    #if !os(tvOS)
    @available(iOS 17.0, *)
    func textView(_ textView: UITextView, primaryActionFor textItem: UITextItem, defaultAction: UIAction) -> UIAction? {
        return UIAction { _ in
            print(textItem.content)
        }
    }

    @available(iOS 17.0, *)
    func textView(_ textView: UITextView, menuConfigurationFor textItem: UITextItem, defaultMenu: UIMenu) -> UITextItem.MenuConfiguration? {
        switch textItem.content {
        case let .link(url):
            let jumpToDefinitionAction = UIAction(title: "Jump to Definition") { [weak self] _ in
                guard let self = self else { return }
                if let scheme = url.scheme, let host = url.host {
                    var runtimeObject: RuntimeObjectType?
                    switch scheme {
                    case "class":
                        runtimeObject = .class(named: host)
                    case "protocol":
                        runtimeObject = .protocol(named: host)
                    default:
                        break
                    }
                    if let runtimeObject {
                        runtimeObjectClicked.accept(runtimeObject)
                    }
                }
            }
            return .init(menu: UIMenu(children: [jumpToDefinitionAction]))
        default:
            return nil
        }
    }
    #endif
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/Info.plist`:

```plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>NSBonjourServices</key>
	<array>
		<string>_runtimeviewer._tcp</string>
	</array>
	<key>UIApplicationSceneManifest</key>
	<dict>
		<key>UIApplicationSupportsMultipleScenes</key>
		<false/>
		<key>UISceneConfigurations</key>
		<dict>
			<key>UIWindowSceneSessionRoleApplication</key>
			<array>
				<dict>
					<key>UISceneConfigurationName</key>
					<string>Default Configuration</string>
					<key>UISceneDelegateClassName</key>
					<string>$(PRODUCT_MODULE_NAME).SceneDelegate</string>
				</dict>
			</array>
		</dict>
	</dict>
</dict>
</plist>

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/InspectorCoordinator.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerCore
import RuntimeViewerArchitectures
import RuntimeViewerApplication

typealias InspectorTransition = Transition<InspectorViewController>

class InspectorCoordinator: BaseCoordinator<InspectorRoute, InspectorTransition> {
    let appServices: AppServices
    init(appServices: AppServices) {
        self.appServices = appServices
        super.init(rootViewController: .init(nibName: nil, bundle: nil), initialRoute: .placeholder)
    }

    override func prepareTransition(for route: InspectorRoute) -> InspectorTransition {
        switch route {
        case .placeholder:
            let viewModel = InspectorPlaceholderViewModel(appServices: appServices, router: self)
            let viewController = InspectorPlaceholderViewController()
            viewController.setupBindings(for: viewModel)
            return .set([viewController])
        default:
            return .none()
        }
    }
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/InspectorNavigationController.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerArchitectures
import RuntimeViewerApplication

class InspectorViewController: UITabBarController {}

class InspectorPlaceholderViewController: ViewController<InspectorPlaceholderViewModel> {}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/LaunchScreen.storyboard`:

```storyboard
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<document type="com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB" version="3.0" toolsVersion="13122.16" targetRuntime="iOS.CocoaTouch" propertyAccessControl="none" useAutolayout="YES" launchScreen="YES" useTraitCollections="YES" useSafeAreas="YES" colorMatched="YES" initialViewController="01J-lp-oVM">
    <dependencies>
        <plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="13104.12"/>
        <capability name="Safe area layout guides" minToolsVersion="9.0"/>
        <capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/>
    </dependencies>
    <scenes>
        <!--View Controller-->
        <scene sceneID="EHf-IW-A2E">
            <objects>
                <viewController id="01J-lp-oVM" sceneMemberID="viewController">
                    <view key="view" contentMode="scaleToFill" id="Ze5-6b-2t3">
                        <rect key="frame" x="0.0" y="0.0" width="375" height="667"/>
                        <autoresizingMask key="autoresizingMask" widthSizable="YES" heightSizable="YES"/>
                        <color key="backgroundColor" xcode11CocoaTouchSystemColor="systemBackgroundColor" cocoaTouchSystemColor="whiteColor"/>
                        <viewLayoutGuide key="safeArea" id="6Tk-OE-BBY"/>
                    </view>
                </viewController>
                <placeholder placeholderIdentifier="IBFirstResponder" id="iYj-Kq-Ea1" userLabel="First Responder" sceneMemberID="firstResponder"/>
            </objects>
            <point key="canvasLocation" x="53" y="375"/>
        </scene>
    </scenes>
</document>

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/MainCoordinator.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

public enum MainRoute: Routable {
    case initial
    case select(RuntimeObjectType)
    case inspect(InspectableObject)
}

typealias MainTransition = Transition<MainSplitViewController>

class MainCoordinator: BaseCoordinator<MainRoute, MainTransition> {
    let appServices: AppServices

    let completeTransition: PublishRelay<SidebarRoute> = .init()

    lazy var sidebarCoordinator = SidebarCoordinator(appServices: appServices, delegate: self)

    lazy var contentCoordinator = ContentCoordinator(appServices: appServices)

    lazy var compactSidebarCoordinator = SidebarCoordinator(appServices: appServices, delegate: self)

    lazy var inspectorCoordinator = InspectorCoordinator(appServices: appServices)

    init(appServices: AppServices) {
        self.appServices = appServices
        super.init(rootViewController: .init(style: .doubleColumn), initialRoute: nil)
        rootViewController.delegate = self
    }

    override func prepareTransition(for route: MainRoute) -> MainTransition {
        switch route {
        case .initial:
            let viewModel = MainViewModel(appServices: appServices, router: self)
            rootViewController.setupBindings(for: viewModel)
            return .multiple(.set(sidebarCoordinator, for: .primary), .set(contentCoordinator, for: .secondary), .set(sidebarCoordinator, for: .compact))
        case let .select(runtimeObject):
            return .multiple(.route(.root(runtimeObject), on: contentCoordinator), .showDetail(contentCoordinator))
        case let .inspect(inspectableType):
            return .route(.root(inspectableType), on: inspectorCoordinator)
        }
    }

    override func completeTransition(for route: MainRoute) {
//        switch route {
//        case .initial:
//            windowController.splitViewController.setupSplitViewItems()
//        default:
//            break
//        }
    }
}

extension MainCoordinator: UISplitViewControllerDelegate {
    func splitViewController(_ svc: UISplitViewController,
                             topColumnForCollapsingToProposedTopColumn proposedTopColumn: UISplitViewController.Column)
        -> UISplitViewController.Column {
        return .primary
    }
    
    func splitViewControllerDidCollapse(_ svc: UISplitViewController) {
    }
}

extension MainCoordinator: SidebarCoordinatorDelegate {
    func sidebarCoordinator(_ sidebarCoordinator: SidebarCoordinator, completeTransition route: SidebarRoute) {
        switch route {
        case let .selectedNode(runtimeNamedNode):
            inspectorCoordinator.trigger(.root(.node(runtimeNamedNode)))
        case let .clickedNode(runtimeNamedNode):
            break
        case let .selectedObject(runtimeObjectType):
            trigger(.select(runtimeObjectType), with: .init(animated: false))
        case .back:
            contentCoordinator.trigger(.placeholder)
        default:
            break
        }
        completeTransition.accept(route)
    }
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/MainSplitViewController.swift`:

```swift
#if canImport(UIKit)

import UIKit

class MainSplitViewController: UISplitViewController {
    var viewModel: MainViewModel?

    func setupBindings(for viewModel: MainViewModel) {
        self.viewModel = viewModel
    }

    override func viewDidLoad() {
        super.viewDidLoad()

        view.backgroundColor = .systemBackground
    }
    
    
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/MainViewModel.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerApplication
import RuntimeViewerArchitectures

class MainViewModel: ViewModel<MainRoute> {
    
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit.entitlements`:

```entitlements
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>com.apple.security.app-sandbox</key>
	<true/>
	<key>com.apple.security.network.client</key>
	<true/>
</dict>
</plist>

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/SceneDelegate.swift`:

```swift
//
//  SceneDelegate.swift
//  RuntimeViewerUsingUIKit
//
//  Created by JH on 2024/6/3.
//

import UIKit
import RuntimeViewerApplication

class SceneDelegate: UIResponder, UIWindowSceneDelegate, UISplitViewControllerDelegate {
    var window: UIWindow?

    let appServices = AppServices()

    lazy var mainCoordinator = MainCoordinator(appServices: appServices)

    func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
        guard let windowScene = (scene as? UIWindowScene) else { return }
        let window = UIWindow(windowScene: windowScene)
        window.rootViewController = mainCoordinator.rootViewController
        self.window = window
        mainCoordinator.trigger(.initial)
        window.makeKeyAndVisible()
    }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/SidebarCoordinator.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

protocol SidebarCoordinatorDelegate: AnyObject {
    func sidebarCoordinator(_ sidebarCoordinator: SidebarCoordinator, completeTransition: SidebarRoute)
}

typealias SidebarTransition = NavigationTransition

class SidebarCoordinator: NavigationCoordinator<SidebarRoute> {
    let appServices: AppServices

    weak var coordinatorDelegate: SidebarCoordinatorDelegate?

    init(appServices: AppServices, delegate: SidebarCoordinatorDelegate? = nil) {
        self.appServices = appServices
        self.coordinatorDelegate = delegate
        super.init(rootViewController: .init(nibName: nil, bundle: nil), initialRoute: .root)
    }

    override func prepareTransition(for route: SidebarRoute) -> SidebarTransition {
        switch route {
        case .root:
            let viewController = SidebarRootViewController()
            let viewModel = SidebarRootViewModel(appServices: appServices, router: self)
            viewController.setupBindings(for: viewModel)
            return .set([viewController], animation: nil)
        case let .clickedNode(clickedNode):
            let imageViewController = SidebarImageViewController()
            let imageViewModel = SidebarImageViewModel(node: clickedNode, appServices: appServices, router: self)
            imageViewController.setupBindings(for: imageViewModel)
            return .push(imageViewController, animation: .default)
        case .back:
            return .pop(animation: .default)
        default:
            return .none()
        }
    }

    override func completeTransition(for route: SidebarRoute) {
        coordinatorDelegate?.sidebarCoordinator(self, completeTransition: route)
    }
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/SidebarImageViewController.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerCore
import RuntimeViewerUI
import RuntimeViewerApplication
import RuntimeViewerArchitectures

class XiblessView: UIView {
    override init(frame: CGRect) {
        super.init(frame: frame)
    }

    @available(*, unavailable)
    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
}

class SidebarImageViewController: ViewController<SidebarImageViewModel> {
    @MagicViewLoading
    var imageTabBarController = UITabBarController()

    let imageNotLoadedView = ImageLoadableView()

    let imageLoadingView = ImageLoadingView()

    let imageLoadedView = ImageLoadedView()

    let imageLoadErrorView = ImageLoadableView()

    override func viewDidLoad() {
        super.viewDidLoad()

        hierarchy {
            imageTabBarController
        }

        imageTabBarController.view.snp.makeConstraints { make in
            make.edges.equalTo(view.safeAreaLayoutGuide)
//            make.left.right.equalToSuperview()
        }

        imageTabBarController.tabBar.isHidden = true

        imageTabBarController.viewControllers = [
            UIViewController(view: imageNotLoadedView),
            UIViewController(view: imageLoadingView),
            UIViewController(view: imageLoadedView),
            UIViewController(view: imageLoadErrorView),
        ]

        if traitCollection.userInterfaceIdiom == .phone {
            view.backgroundColor = .systemBackground
        } else {
            view.backgroundColor = .secondarySystemBackground
        }
    }

    override func setupBindings(for viewModel: SidebarImageViewModel) {
        super.setupBindings(for: viewModel)
        let input = SidebarImageViewModel.Input(
            runtimeObjectClicked: imageLoadedView.listView.rx.modelSelected(SidebarImageCellViewModel.self).asSignal(),
            loadImageClicked: Signal.of(
                imageNotLoadedView.loadImageButton.rx.tap.asSignal(),
                imageLoadErrorView.loadImageButton.rx.tap.asSignal()
            ).merge(),
            searchString: imageLoadedView.searchBar.rx.text.asSignalOnErrorJustComplete().filterNil()
        )

        let output = viewModel.transform(input)
        let listCellRegistration = UICollectionView.CellRegistration<UICollectionViewListCell, SidebarImageCellViewModel> { cell, indexPath, viewModel in
            var content = cell.defaultContentConfiguration()
            content.attributedText = viewModel.name
            content.image = viewModel.icon
            cell.contentConfiguration = content
        }

        output.runtimeObjects.drive(imageLoadedView.listView.rx.items) { collectionView, index, viewModel -> UICollectionViewCell in
            collectionView.dequeueConfiguredReusableCell(using: listCellRegistration, for: IndexPath(item: index, section: 0), item: viewModel)
        }
        .disposed(by: rx.disposeBag)

        output.errorText.drive(imageLoadErrorView.titleLabel.rx.text).disposed(by: rx.disposeBag)

        output.notLoadedText.drive(imageNotLoadedView.titleLabel.rx.text).disposed(by: rx.disposeBag)

        output.emptyText.drive(imageLoadedView.emptyLabel.rx.text).disposed(by: rx.disposeBag)

        output.isEmpty.drive(imageLoadedView.searchBar.rx.isHidden).disposed(by: rx.disposeBag)

        output.isEmpty.not().drive(imageLoadedView.emptyLabel.rx.isHidden).disposed(by: rx.disposeBag)

        output.loadState.map { $0.index }.drive(imageTabBarController.rx.selectedIndex).disposed(by: rx.disposeBag)
    }
}

extension RuntimeImageLoadState {
    var index: Int {
        switch self {
        case .notLoaded:
            0
        case .loading:
            1
        case .loaded:
            2
        case .loadError:
            3
        }
    }
}

extension SidebarImageViewController {
    class ImageLoadingView: XiblessView {
        let loadingIndicator: MaterialLoadingIndicator = .init(radius: 25, color: .tintColor)

        override init(frame frameRect: CGRect) {
            super.init(frame: frameRect)

            hierarchy {
                loadingIndicator
            }

            loadingIndicator.snp.makeConstraints { make in
                make.center.equalToSuperview()
                make.size.equalTo(50)
            }

            loadingIndicator.startAnimating()
        }
    }

    class ImageLoadedView: XiblessView {
        #if os(tvOS)
        let searchBar = UISearchBar.make()
        #else
        let searchBar = UISearchBar()
        #endif

        let listView: UICollectionView = {
            #if os(tvOS)
            var configuration = UICollectionLayoutListConfiguration(appearance: .grouped)
            #else
            var configuration = UICollectionLayoutListConfiguration(appearance: .sidebar)
            #endif
            configuration.backgroundColor = UIDevice.current.userInterfaceIdiom == .phone ? .systemBackground : .secondarySystemBackground
            let collectionView = UICollectionView(frame: .zero, collectionViewLayout: UICollectionViewCompositionalLayout.list(using: configuration))
            return collectionView
        }()

        let emptyLabel = UILabel()

        override init(frame: CGRect) {
            super.init(frame: frame)

            hierarchy {
                searchBar
                listView
                emptyLabel
            }

            searchBar.snp.makeConstraints { make in
                make.top.equalToSuperview()
                make.left.right.equalToSuperview().inset(15)
            }

            listView.snp.makeConstraints { make in
                make.top.equalTo(searchBar.snp.bottom)
                make.bottom.left.right.equalToSuperview().inset(15)
            }

            emptyLabel.snp.makeConstraints { make in
                make.center.equalToSuperview()
                make.left.right.equalToSuperview().inset(15)
            }

            emptyLabel.do {
                $0.textAlignment = .center
                $0.numberOfLines = 0
            }

            searchBar.do {
                $0.backgroundImage = .image(withColor: .clear)
            }
        }
    }

    class ImageLoadableView: XiblessView {
        let titleLabel = UILabel()

        let loadImageButton = UIButton(type: .system)

        lazy var contentView = VStackView(alignment: .vStackCenter, spacing: 10) {
            titleLabel
            loadImageButton
        }

        override init(frame frameRect: CGRect) {
            super.init(frame: frameRect)

            hierarchy {
                contentView
            }

            contentView.snp.makeConstraints { make in
                make.center.equalToSuperview()
                make.width.equalTo(200)
            }

            titleLabel.do {
                $0.textAlignment = .center
                $0.numberOfLines = 0
            }

            loadImageButton.do {
                $0.configuration = .tinted()
                $0.setTitle("Load now", for: .normal)
            }
        }
    }
}

extension UIViewController {
    convenience init(view: UIView) {
        self.init()
        self.view = view
    }
}

extension UIImage {
    static func image(withColor color: UIColor, size: CGSize = CGSize(width: 1, height: 1)) -> UIImage {
        let renderer = UIGraphicsImageRenderer(size: size)
        return renderer.image { context in
            color.setFill()
            context.fill(CGRect(origin: .zero, size: size))
        }
    }
}

#if os(tvOS)
extension Reactive where Base: UIButton {
    /// Reactive wrapper for target action pattern on `self`.
    public var tap: ControlEvent<Void> {
        primaryAction
    }
}
#endif

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/SidebarNavigationController.swift`:

```swift
#if canImport(UIKit)

import UIKit

class SidebarNavigationController: UINavigationController {
    
}

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/SidebarRootViewController.swift`:

```swift
#if canImport(UIKit)

import UIKit
import RuntimeViewerUI
import RuntimeViewerArchitectures
import RuntimeViewerApplication

class SidebarRootViewController: ViewController<SidebarRootViewModel> {
    let collectionView: UICollectionView = {
        #if os(tvOS)
        var configuration = UICollectionLayoutListConfiguration(appearance: .grouped)
        #else
        var configuration = UICollectionLayoutListConfiguration(appearance: .sidebar)
        #endif
        configuration.backgroundColor = UIDevice.current.userInterfaceIdiom == .phone ? .systemBackground : .secondarySystemBackground
        let collectionView = UICollectionView(frame: .zero, collectionViewLayout: UICollectionViewCompositionalLayout.list(using: configuration))
        return collectionView
    }()

    #if os(tvOS)
    let searchBar = UISearchBar.make()
    #else
    let searchBar = UISearchBar()
    #endif

    override func viewDidLoad() {
        super.viewDidLoad()

        hierarchy {
//            searchBar
            collectionView
        }

//        searchBar.snp.makeConstraints { make in
//            make.top.equalTo(view.safeAreaLayoutGuide)
//            make.left.right.equalTo(view.safeAreaLayoutGuide).inset(15)
//        }

        collectionView.snp.makeConstraints { make in
//            make.top.equalTo(searchBar.snp.bottom)
            make.top.equalTo(view.safeAreaLayoutGuide)
            make.bottom.equalTo(view.safeAreaLayoutGuide)
            make.left.right.equalToSuperview()
        }

        searchBar.do {
            $0.backgroundImage = .image(withColor: .clear)
        }

        if traitCollection.userInterfaceIdiom == .phone {
            view.backgroundColor = .systemBackground
            collectionView.backgroundColor = .systemBackground
        } else {
            view.backgroundColor = .secondarySystemBackground
            collectionView.backgroundColor = .secondarySystemBackground
        }
    }

    override func setupBindings(for viewModel: SidebarRootViewModel) {
        super.setupBindings(for: viewModel)

        let input = SidebarRootViewModel.Input(clickedNode: collectionView.rx.modelSelected(SidebarRootCellViewModel.self).asSignal(), selectedNode: .never(), searchString: searchBar.rx.text.asSignalOnErrorJustComplete().filterNil())

        let output = viewModel.transform(input)

        output.nodes.drive(collectionView.rx.nodes(source:)) { (collectionView: UICollectionView, indexPath: IndexPath, viewModel: SidebarRootCellViewModel, cell: UICollectionViewListCell) in
            var content = cell.defaultContentConfiguration()
            content.attributedText = viewModel.name
            content.image = viewModel.icon
            cell.contentConfiguration = content
            cell.indentationWidth = 8
        }
        .disposed(by: rx.disposeBag)

        output.filteredNodes.drive(collectionView.rx.filteredNodes).disposed(by: rx.disposeBag)
    }
}

#if os(tvOS)
extension UIColor {
    static var systemBackground: UIColor {
        .init { traitCollection in
            traitCollection.userInterfaceStyle == .light ? "#FFFFFFFF".uiColor : "#000000FF".uiColor
        }
    }

    static var secondarySystemBackground: UIColor {
        .init { traitCollection in
            traitCollection.userInterfaceStyle == .light ? "#F2F2F7FF".uiColor : "#1C1C1EFF".uiColor
        }
    }
}

extension UISearchBar {
    static func make() -> UISearchBar {
        let UISearchBarClass = NSClassFromString("UISearchBar") as! UIView.Type
        return UISearchBarClass.init(frame: .zero) as! UISearchBar
    }
}

#endif

#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/Then.swift`:

```swift
// The MIT License (MIT)
//
// Copyright (c) 2015 Suyeol Jeon (xoul.kr)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.

import Foundation
#if !os(Linux)
import CoreGraphics
#endif

#if os(macOS) && !targetEnvironment(macCatalyst)
import AppKit
#endif

#if os(iOS) || os(tvOS)
import UIKit.UIGeometry
#endif

protocol Then {}

extension Then where Self: Any {
    /// Makes it available to set properties with closures just after initializing and copying the value types.
    ///
    ///     let frame = CGRect().with {
    ///       $0.origin.x = 10
    ///       $0.size.width = 100
    ///     }
    @inlinable
    func with(_ block: (inout Self) throws -> Void) rethrows -> Self {
        var copy = self
        try block(&copy)
        return copy
    }

    /// Makes it available to execute something with closures.
    ///
    ///     UserDefaults.standard.do {
    ///       $0.set("devxoul", forKey: "username")
    ///       $0.set("devxoul@gmail.com", forKey: "email")
    ///       $0.synchronize()
    ///     }
    @inlinable
    func `do`(_ block: (Self) throws -> Void) rethrows {
        try block(self)
    }
}

extension Then where Self: AnyObject {
    /// Makes it available to set properties with closures just after initializing.
    ///
    ///     let label = UILabel().then {
    ///       $0.textAlignment = .center
    ///       $0.textColor = UIColor.black
    ///       $0.text = "Hello, World!"
    ///     }
    @inlinable
    @discardableResult
    func then(_ block: @Sendable (Self) throws -> Void) rethrows -> Self {
        try block(self)
        return self
    }
}

extension Then {
    @inlinable
    func `as`<T>(_ transform: (Self) throws -> T) rethrows -> T {
        try transform(self)
    }
}


extension NSObject: Then {}

#if !os(Linux)
extension CGPoint: Then {}
extension CGRect: Then {}
extension CGSize: Then {}
extension CGVector: Then {}
#endif

extension Array: Then {}
extension Dictionary: Then {}
extension Set: Then {}
extension JSONDecoder: Then {}
extension JSONEncoder: Then {}


#if os(macOS) && !targetEnvironment(macCatalyst)
extension NSEdgeInsets: Then {}
extension NSRectEdge: Then {}
#endif

#if os(iOS) || os(tvOS)
extension UIEdgeInsets: Then {}
extension UIOffset: Then {}
extension UIRectEdge: Then {}
#endif

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingUIKit/ViewController.swift`:

```swift
//
//  ViewController.swift
//  RuntimeViewerUsingUIKit
//
//  Created by JH on 2024/6/3.
//

import UIKit
import RuntimeViewerUI

class ViewController<ViewModelType>: UIViewController {
    var viewModel: ViewModelType?
    
    func setupBindings(for viewModel: ViewModelType) {
        self.viewModel = viewModel
    }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingVision/Assets.xcassets/AppIcon.solidimagestack/Back.solidimagestacklayer/Content.imageset/Contents.json`:

```json
{
  "images" : [
    {
      "filename" : "Rectangle 108.png",
      "idiom" : "vision",
      "scale" : "2x"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingVision/Assets.xcassets/AppIcon.solidimagestack/Back.solidimagestacklayer/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingVision/Assets.xcassets/AppIcon.solidimagestack/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  },
  "layers" : [
    {
      "filename" : "Front.solidimagestacklayer"
    },
    {
      "filename" : "Middle.solidimagestacklayer"
    },
    {
      "filename" : "Back.solidimagestacklayer"
    }
  ]
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingVision/Assets.xcassets/AppIcon.solidimagestack/Front.solidimagestacklayer/Content.imageset/Contents.json`:

```json
{
  "images" : [
    {
      "filename" : "Frame 122.png",
      "idiom" : "vision",
      "scale" : "2x"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingVision/Assets.xcassets/AppIcon.solidimagestack/Front.solidimagestacklayer/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingVision/Assets.xcassets/AppIcon.solidimagestack/Middle.solidimagestacklayer/Content.imageset/Contents.json`:

```json
{
  "images" : [
    {
      "filename" : "Frame 124.png",
      "idiom" : "vision",
      "scale" : "2x"
    }
  ],
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingVision/Assets.xcassets/AppIcon.solidimagestack/Middle.solidimagestacklayer/Contents.json`:

```json
{
  "info" : {
    "author" : "xcode",
    "version" : 1
  }
}

```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingVision/Assets.xcassets/Contents.json`:

```json
{
  "info" : {
    "version" : 1,
    "author" : "xcode"
  }
}
```

`RuntimeViewerUsingUIKit/RuntimeViewerUsingVision/Info.plist`:

```plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>UIApplicationSceneManifest</key>
	<dict>
		<key>UIApplicationPreferredDefaultSceneSessionRole</key>
		<string>UIWindowSceneSessionRoleApplication</string>
		<key>UIApplicationSupportsMultipleScenes</key>
		<true/>
		<key>UISceneConfigurations</key>
		<dict>
			<key>UIWindowSceneSessionRoleApplication</key>
			<array>
				<dict>
					<key>UISceneConfigurationName</key>
					<string>Default Configuration</string>
					<key>UISceneDelegateClassName</key>
					<string>$(PRODUCT_MODULE_NAME).SceneDelegate</string>
				</dict>
			</array>
		</dict>
	</dict>
</dict>
</plist>

```