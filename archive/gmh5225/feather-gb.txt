Project Path: arc_gmh5225_feather-gb_cx8orssu

Source Tree:

```txt
arc_gmh5225_feather-gb_cx8orssu
├── Cargo.lock
├── Cargo.toml
├── README.md
├── browser
│   ├── assets
│   │   ├── fonts
│   │   │   ├── GillSansBoldItalic.otf
│   │   │   ├── GillSansMediumItalic.otf
│   │   │   ├── NES_Controller.ttf
│   │   │   └── Pretendo.ttf
│   │   ├── images
│   │   │   ├── feather.svg
│   │   │   ├── gameboy.svg
│   │   │   ├── screen-debugger.png
│   │   │   └── screen-gb.png
│   │   └── styles
│   │       └── main.css
│   ├── components
│   │   ├── AppRouter.tsx
│   │   ├── Root.tsx
│   │   ├── common
│   │   │   └── FullscreenLoader.tsx
│   │   ├── gameboy
│   │   │   ├── Display.tsx
│   │   │   ├── GameBoy.styled.ts
│   │   │   ├── GameBoy.tsx
│   │   │   └── Zoom.tsx
│   │   ├── pages
│   │   │   ├── Debugger.tsx
│   │   │   ├── Landing.tsx
│   │   │   ├── Play.tsx
│   │   │   └── TestResults.tsx
│   │   └── play
│   │       ├── BackButton.tsx
│   │       ├── Cartridges.tsx
│   │       ├── FpsCounter.tsx
│   │       └── UploadButton.tsx
│   ├── context
│   │   └── InputContext.tsx
│   ├── hooks
│   │   ├── useInput.ts
│   │   ├── useInputHandler.ts
│   │   ├── useTheme.tsx
│   │   └── useWasmModule.ts
│   ├── main.tsx
│   ├── types.ts
│   ├── typings.d.ts
│   └── utils
│       ├── audio.ts
│       └── std.ts
├── debugger
│   ├── Cargo.toml
│   └── src
│       ├── app.rs
│       ├── canvas.rs
│       ├── components
│       │   ├── cpu.rs
│       │   ├── disassembly.rs
│       │   ├── display.rs
│       │   ├── frame_history.rs
│       │   ├── joypad.rs
│       │   ├── maps.rs
│       │   ├── memory_viewer.rs
│       │   ├── mod.rs
│       │   ├── ppu.rs
│       │   ├── roms.rs
│       │   ├── scale.rs
│       │   └── tiles.rs
│       ├── lib.rs
│       ├── main.rs
│       ├── opcodes.rs
│       ├── ui_extensions.rs
│       └── utils.rs
├── debugger-web
│   ├── Cargo.toml
│   └── src
│       ├── lib.rs
│       └── roms.rs
├── desktop
│   ├── Cargo.toml
│   └── src
│       ├── audio.rs
│       └── main.rs
├── docs
│   └── results
│       ├── 01-registers
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 02-len_ctr
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 03-trigger
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 04-sweep
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 05-sweep_details
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 06-overflow_on_trigger
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 07-len_sweep_period_sync
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 08-len_ctr_during_power
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 09-wave_read_while_on
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 10-wave_trigger_while on
│       │   └── result.png
│       ├── 10-wave_trigger_while_on
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 11-regs_after_power
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── 12-wave_write_while_on
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── MBC3-Tester
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── age-tests
│       │   ├── ei-halt-dmgC-cgbBCE.gb
│       │   │   └── result.png
│       │   ├── halt-m0-interrupt-dmgC-cgbBCE.gb
│       │   │   └── result.png
│       │   ├── halt-prefetch-dmgC-cgbBCE.gb
│       │   │   └── result.png
│       │   ├── ly-dmgC-cgbBC.gb
│       │   │   └── result.png
│       │   ├── oam-read-dmgC-cgbBC.gb
│       │   │   └── result.png
│       │   ├── oam-write-dmgC.gb
│       │   │   └── result.png
│       │   ├── stat-int-dmgC-cgbBCE.gb
│       │   │   └── result.png
│       │   ├── stat-mode-dmgC-cgbBC.gb
│       │   │   └── result.png
│       │   ├── stat-mode-sprites-dmgC-cgbBCE.gb
│       │   │   └── result.png
│       │   ├── stat-mode-window-dmgC.gb
│       │   │   └── result.png
│       │   └── vram-read-dmgC.gb
│       │       └── result.png
│       ├── cgb-acid2
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── dmg-acid2
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── lycscx
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── lycscy
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m2_win_en_toggle
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_bgp_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_bgp_change_sprites
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_bg_en_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_bg_map_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_obj_en_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_obj_en_change_variant
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_obj_size_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_obj_size_change_scx
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_tile_sel_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_tile_sel_win_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_win_en_change_multiple
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_win_en_change_multiple_wx
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_lcdc_win_map_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_obp0_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_scx_high_5_bits
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_scx_low_3_bits
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_scy_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_window_timing
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_window_timing_wx_0
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_wx_4_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_wx_4_change_sprites
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_wx_5_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── m3_wx_6_change
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── palettely
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── results.md
│       ├── scxly
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── statcount
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       ├── window_y_trigger
│       │   ├── diff.png
│       │   ├── expected.png
│       │   └── result.png
│       └── window_y_trigger_wx_offscreen
│           ├── diff.png
│           ├── expected.png
│           └── result.png
├── gb
│   ├── Cargo.toml
│   ├── src
│   │   ├── apu
│   │   │   ├── apu.rs
│   │   │   ├── channel1.rs
│   │   │   ├── channel2.rs
│   │   │   ├── channel3.rs
│   │   │   ├── channel4.rs
│   │   │   ├── frame_sequencer.rs
│   │   │   ├── frequency_timer.rs
│   │   │   ├── length_counter.rs
│   │   │   ├── mod.rs
│   │   │   ├── registers.rs
│   │   │   ├── sweep.rs
│   │   │   ├── volume_envelope.rs
│   │   │   └── wave_duty.rs
│   │   ├── audio.rs
│   │   ├── bios.rs
│   │   ├── cartridges
│   │   │   ├── cartridge.rs
│   │   │   ├── mbc1.rs
│   │   │   ├── mbc2.rs
│   │   │   ├── mbc3.rs
│   │   │   ├── mbc5.rs
│   │   │   ├── mod.rs
│   │   │   └── rom_only.rs
│   │   ├── constants.rs
│   │   ├── cpu
│   │   │   ├── cpu.rs
│   │   │   ├── execute.rs
│   │   │   ├── instructions.rs
│   │   │   └── mod.rs
│   │   ├── dma.rs
│   │   ├── emulator.rs
│   │   ├── events.rs
│   │   ├── hdma.rs
│   │   ├── interrupts.rs
│   │   ├── joypad.rs
│   │   ├── lib.rs
│   │   ├── ppu
│   │   │   ├── fetcher.rs
│   │   │   ├── mod.rs
│   │   │   ├── oam.rs
│   │   │   ├── palettes.rs
│   │   │   ├── ppu.rs
│   │   │   ├── registers.rs
│   │   │   ├── screen_buffer.rs
│   │   │   ├── utils.rs
│   │   │   └── vram.rs
│   │   ├── serial.rs
│   │   ├── timer.rs
│   │   ├── traits.rs
│   │   ├── utils.rs
│   │   └── wram.rs
│   └── tests
│       └── ppu_test.rs
├── gb-web
│   ├── Cargo.toml
│   └── src
│       ├── audio.rs
│       └── lib.rs
├── generateRomsList.js
├── index.html
├── integration-tests
│   ├── Cargo.toml
│   └── src
│       ├── main.rs
│       ├── markdown.rs
│       ├── suites
│       │   ├── acid2_tests.rs
│       │   ├── age_tests.rs
│       │   ├── blarggs_sound_tests.rs
│       │   ├── blarggs_tests.rs
│       │   ├── mbc3_tester.rs
│       │   ├── mealybug_tearoom_tests.rs
│       │   ├── mod.rs
│       │   ├── mooneye_tests.rs
│       │   ├── scribbl_tests.rs
│       │   ├── turtle_tests.rs
│       │   └── wilbertpol_tests.rs
│       ├── tests.rs
│       └── utils.rs
├── package.json
├── pnpm-lock.yaml
├── postcss.config.js
├── roms
│   ├── BullyGB
│   ├── MBC3-Tester-gb
│   ├── TurtleTests
│   ├── age-test-roms
│   ├── cgb-acid2
│   ├── demos
│   │   ├── CI5.gbc
│   │   ├── cgb-acid2.gbc
│   │   ├── dmg-acid2.gb
│   │   ├── firstwhite.gb
│   │   ├── gejmboj.gb
│   │   ├── lyc.gb
│   │   ├── numism.gb
│   │   ├── oh.gb
│   │   ├── opus5.gb
│   │   ├── pocket.gb
│   │   └── pokemon-tv-opening.gbc
│   ├── dmg-acid2
│   ├── gb-test-roms
│   ├── mealybug-tearoom-tests
│   ├── mooneye-test-suite
│   ├── scribbltests
│   ├── strikethrough
│   └── wilbertpol-test-suite
├── sync_submodules.sh
├── tailwind.config.cjs
├── tsconfig.json
└── vite.config.mts

```

`Cargo.lock`:

```lock
# This file is automatically @generated by Cargo.
# It is not intended for manual editing.
version = 3

[[package]]
name = "ab_glyph"
version = "0.2.21"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5110f1c78cf582855d895ecd0746b653db010cec6d9f5575293f27934d980a39"
dependencies = [
 "ab_glyph_rasterizer",
 "owned_ttf_parser",
]

[[package]]
name = "ab_glyph_rasterizer"
version = "0.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a13739d7177fbd22bb0ed28badfff9f372f8bef46c863db4e1c6248f6b223b6e"

[[package]]
name = "accesskit"
version = "0.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4803cf8c252f374ae6bfbb341e49e5a37f7601f2ce74a105927a663eba952c67"

[[package]]
name = "accesskit_consumer"
version = "0.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cee8cf1202a4f94d31837f1902ab0a75c77b65bf59719e093703abe83efd74ec"
dependencies = [
 "accesskit",
 "parking_lot",
]

[[package]]
name = "accesskit_macos"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "10be25f2b27bc33aa1647072e86b948b41596f1af1ae43a2b4b9be5d2011cbda"
dependencies = [
 "accesskit",
 "accesskit_consumer",
 "objc2",
 "once_cell",
 "parking_lot",
]

[[package]]
name = "accesskit_unix"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "630e7ee8f93c6246478bf0df6760db899b28d9ad54353a5f2d3157138ba817fc"
dependencies = [
 "accesskit",
 "accesskit_consumer",
 "async-channel",
 "atspi",
 "futures-lite",
 "parking_lot",
 "serde",
 "zbus",
]

[[package]]
name = "accesskit_windows"
version = "0.12.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a13c462fabdd950ef14308a9390b07fa2e2e3aabccba1f3ea36ea2231bb942ab"
dependencies = [
 "accesskit",
 "accesskit_consumer",
 "arrayvec",
 "once_cell",
 "parking_lot",
 "paste",
 "windows 0.42.0",
]

[[package]]
name = "accesskit_winit"
version = "0.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "17727888757ec027ec221db33070e226ee07df44425b583bc67684204d35eff9"
dependencies = [
 "accesskit",
 "accesskit_macos",
 "accesskit_unix",
 "accesskit_windows",
 "parking_lot",
 "winit",
]

[[package]]
name = "adler"
version = "1.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f26201604c87b1e01bd3d98f8d5d9a8fcbb815e8cedb41ffccbeb4bf593a35fe"

[[package]]
name = "adler32"
version = "1.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "aae1277d39aeec15cb388266ecc24b11c80469deae6067e17a1a7aa9e5c1f234"

[[package]]
name = "ahash"
version = "0.8.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bf6ccdb167abbf410dcb915cabd428929d7f6a04980b54a11f26a39f1c7f7107"
dependencies = [
 "cfg-if",
 "once_cell",
 "version_check",
]

[[package]]
name = "aho-corasick"
version = "0.7.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1e37cfd5e7657ada45f742d6e99ca5788580b5c529dc78faf11ece6dc702656f"
dependencies = [
 "memchr",
]

[[package]]
name = "aho-corasick"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "67fc08ce920c31afb70f013dcce1bfc3a3195de6a228474e45e1f145b36f8d04"
dependencies = [
 "memchr",
]

[[package]]
name = "android-activity"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7c77a0045eda8b888c76ea473c2b0515ba6f471d318f8927c5c72240937035a6"
dependencies = [
 "android-properties",
 "bitflags 1.3.2",
 "cc",
 "jni-sys",
 "libc",
 "log",
 "ndk",
 "ndk-context",
 "ndk-sys",
 "num_enum",
]

[[package]]
name = "android-properties"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fc7eb209b1518d6bb87b283c20095f5228ecda460da70b44f0802523dea6da04"

[[package]]
name = "android_system_properties"
version = "0.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d7ed72e1635e121ca3e79420540282af22da58be50de153d36f81ddc6b83aa9e"
dependencies = [
 "libc",
]

[[package]]
name = "arboard"
version = "3.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d6041616acea41d67c4a984709ddab1587fd0b10efe5cc563fee954d2f011854"
dependencies = [
 "clipboard-win",
 "log",
 "objc",
 "objc-foundation",
 "objc_id",
 "once_cell",
 "parking_lot",
 "thiserror",
 "winapi",
 "x11rb",
]

[[package]]
name = "arrayref"
version = "0.3.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a4c527152e37cf757a3f78aae5a06fbeefdb07ccc535c980a3208ee3060dd544"

[[package]]
name = "arrayvec"
version = "0.7.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8da52d66c7071e2e3fa2a1e5c6d088fec47b593032b254f5e980de8ea54454d6"

[[package]]
name = "async-broadcast"
version = "0.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7c48ccdbf6ca6b121e0f586cbc0e73ae440e56c67c30fa0873b4e110d9c26d2b"
dependencies = [
 "event-listener",
 "futures-core",
]

[[package]]
name = "async-channel"
version = "1.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cf46fee83e5ccffc220104713af3292ff9bc7c64c7de289f66dae8e38d826833"
dependencies = [
 "concurrent-queue",
 "event-listener",
 "futures-core",
]

[[package]]
name = "async-executor"
version = "1.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6fa3dc5f2a8564f07759c008b9109dc0d39de92a88d5588b8a5036d286383afb"
dependencies = [
 "async-lock",
 "async-task",
 "concurrent-queue",
 "fastrand",
 "futures-lite",
 "slab",
]

[[package]]
name = "async-fs"
version = "1.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "279cf904654eeebfa37ac9bb1598880884924aab82e290aa65c9e77a0e142e06"
dependencies = [
 "async-lock",
 "autocfg",
 "blocking",
 "futures-lite",
]

[[package]]
name = "async-io"
version = "1.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0fc5b45d93ef0529756f812ca52e44c221b35341892d3dcc34132ac02f3dd2af"
dependencies = [
 "async-lock",
 "autocfg",
 "cfg-if",
 "concurrent-queue",
 "futures-lite",
 "log",
 "parking",
 "polling",
 "rustix 0.37.3",
 "slab",
 "socket2",
 "waker-fn",
]

[[package]]
name = "async-lock"
version = "2.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fa24f727524730b077666307f2734b4a1a1c57acb79193127dcc8914d5242dd7"
dependencies = [
 "event-listener",
]

[[package]]
name = "async-process"
version = "1.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7a9d28b1d97e08915212e2e45310d47854eafa69600756fc735fb788f75199c9"
dependencies = [
 "async-io",
 "async-lock",
 "autocfg",
 "blocking",
 "cfg-if",
 "event-listener",
 "futures-lite",
 "rustix 0.37.3",
 "signal-hook",
 "windows-sys 0.48.0",
]

[[package]]
name = "async-recursion"
version = "1.0.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0e97ce7de6cf12de5d7226c73f5ba9811622f4db3a5b91b55c53e987e5f91cba"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.16",
]

[[package]]
name = "async-task"
version = "4.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ecc7ab41815b3c653ccd2978ec3255c81349336702dfdf62ee6f7069b12a3aae"

[[package]]
name = "async-trait"
version = "0.1.68"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b9ccdd8f2a161be9bd5c023df56f1b2a0bd1d83872ae53b71a84a12c9bf6e842"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.16",
]

[[package]]
name = "atomic-waker"
version = "1.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1181e1e0d1fce796a03db1ae795d67167da795f9cf4a39c37589e85ef57f26d3"

[[package]]
name = "atomic_refcell"
version = "0.1.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "73b5e5f48b927f04e952dedc932f31995a65a0bf65ec971c74436e51bf6e970d"

[[package]]
name = "atspi"
version = "0.8.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ab84c09a770065868da0d713f1f4b35af85d96530a868f1c1a6c249178379187"
dependencies = [
 "async-recursion",
 "async-trait",
 "atspi-macros",
 "enumflags2",
 "futures-lite",
 "serde",
 "tracing",
 "zbus",
 "zbus_names",
]

[[package]]
name = "atspi-macros"
version = "0.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b3ebc5a6f61f6996eca56a4cece7b3fe7da3b86f0473c7b71ab44e229f3acce4"
dependencies = [
 "proc-macro2",
 "quote",
 "serde",
 "syn 1.0.107",
 "zbus",
 "zbus_names",
 "zvariant",
]

[[package]]
name = "autocfg"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d468802bab17cbc0cc575e9b053f41e72aa36bfa6b7f55e3529ffa43161b97fa"

[[package]]
name = "bit_field"
version = "0.10.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dcb6dd1c2376d2e096796e234a70e17e94cc2d5d54ff8ce42b28cef1d0d359a4"

[[package]]
name = "bitflags"
version = "1.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bef38d45163c2f1dde094a7dfd33ccf595c92905c8f8f4fdc18d06fb1037718a"

[[package]]
name = "bitflags"
version = "2.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6776fc96284a0bb647b615056fc496d1fe1644a7ab01829818a6d91cae888b84"

[[package]]
name = "block"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0d8c1fef690941d3e7788d328517591fecc684c084084702d6ff1641e993699a"

[[package]]
name = "block-buffer"
version = "0.10.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3078c7629b62d3f0439517fa394996acacc5cbc91c5a20d8c658e77abd503a71"
dependencies = [
 "generic-array 0.14.7",
]

[[package]]
name = "block-sys"
version = "0.1.0-beta.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0fa55741ee90902547802152aaf3f8e5248aab7e21468089560d4c8840561146"
dependencies = [
 "objc-sys",
]

[[package]]
name = "block2"
version = "0.2.0-alpha.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8dd9e63c1744f755c2f60332b88de39d341e5e86239014ad839bd71c106dec42"
dependencies = [
 "block-sys",
 "objc2-encode",
]

[[package]]
name = "blocking"
version = "1.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "77231a1c8f801696fc0123ec6150ce92cffb8e164a02afb9c8ddee0e9b65ad65"
dependencies = [
 "async-channel",
 "async-lock",
 "async-task",
 "atomic-waker",
 "fastrand",
 "futures-lite",
 "log",
]

[[package]]
name = "bstr"
version = "0.2.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ba3569f383e8f1598449f1a423e72e99569137b47740b1da11ef19af3d5c3223"
dependencies = [
 "memchr",
]

[[package]]
name = "bumpalo"
version = "3.11.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c1ad822118d20d2c234f427000d5acc36eabe1e29a348c89b63dd60b13f28e5d"

[[package]]
name = "bytemuck"
version = "1.12.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2f5715e491b5a1598fc2bef5a606847b5dc1d48ea625bd3c02c00de8285591da"
dependencies = [
 "bytemuck_derive",
]

[[package]]
name = "bytemuck_derive"
version = "1.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1b9e1f5fa78f69496407a27ae9ed989e3c3b072310286f5ef385525e4cbc24a9"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.107",
]

[[package]]
name = "byteorder"
version = "1.4.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "14c189c53d098945499cdfa7ecc63567cf3886b3332b312a5b4585d8d3a6a610"

[[package]]
name = "bytes"
version = "1.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ec8a7b6a70fde80372154c65702f00a0f56f3e1c36abbc6c440484be248856db"

[[package]]
name = "calloop"
version = "0.10.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a22a6a8f622f797120d452c630b0ab12e1331a1a753e2039ce7868d4ac77b4ee"
dependencies = [
 "log",
 "nix 0.24.2",
 "slotmap",
 "thiserror",
 "vec_map",
]

[[package]]
name = "cc"
version = "1.0.73"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2fff2a6927b3bb87f9595d67196a70493f627687a71d87a0d692242c33f58c11"
dependencies = [
 "jobserver",
]

[[package]]
name = "cesu8"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6d43a04d8753f35258c91f8ec639f792891f748a1edbd759cf1dcea3382ad83c"

[[package]]
name = "cfg-if"
version = "1.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd"

[[package]]
name = "cfg_aliases"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fd16c4719339c4530435d38e511904438d07cce7950afa3718a84ac36c10e89e"

[[package]]
name = "cgl"
version = "0.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0ced0551234e87afee12411d535648dd89d2e7f34c78b753395567aff3d447ff"
dependencies = [
 "libc",
]

[[package]]
name = "chrono"
version = "0.4.24"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4e3c5919066adf22df73762e50cffcde3a758f2a848b113b586d1f86728b673b"
dependencies = [
 "iana-time-zone",
 "js-sys",
 "num-integer",
 "num-traits",
 "time",
 "wasm-bindgen",
 "winapi",
]

[[package]]
name = "clipboard-win"
version = "4.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c4ab1b92798304eedc095b53942963240037c0516452cb11aeba709d420b2219"
dependencies = [
 "error-code",
 "str-buf",
 "winapi",
]

[[package]]
name = "cocoa"
version = "0.24.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6f63902e9223530efb4e26ccd0cf55ec30d592d3b42e21a28defc42a9586e832"
dependencies = [
 "bitflags 1.3.2",
 "block",
 "cocoa-foundation",
 "core-foundation",
 "core-graphics",
 "foreign-types",
 "libc",
 "objc",
]

[[package]]
name = "cocoa-foundation"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7ade49b65d560ca58c403a479bb396592b155c0185eada742ee323d1d68d6318"
dependencies = [
 "bitflags 1.3.2",
 "block",
 "core-foundation",
 "core-graphics-types",
 "foreign-types",
 "libc",
 "objc",
]

[[package]]
name = "color_quant"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3d7b894f5411737b7867f4827955924d7c254fc9f4d91a6aad6b097804b1018b"

[[package]]
name = "combine"
version = "4.6.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "35ed6e9d84f0b51a7f52daf1c7d71dd136fd7a3f41a8462b8cdb8c78d920fad4"
dependencies = [
 "bytes",
 "memchr",
]

[[package]]
name = "concurrent-queue"
version = "2.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "62ec6771ecfa0762d24683ee5a32ad78487a3d3afdc0fb8cae19d2c5deb50b7c"
dependencies = [
 "crossbeam-utils",
]

[[package]]
name = "console_error_panic_hook"
version = "0.1.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a06aeb73f470f66dcdbf7223caeebb85984942f22f1adb2a088cf9668146bbbc"
dependencies = [
 "cfg-if",
 "wasm-bindgen",
]

[[package]]
name = "core-foundation"
version = "0.9.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "194a7a9e6de53fa55116934067c844d9d749312f75c6f6d0980e8c252f8c2146"
dependencies = [
 "core-foundation-sys",
 "libc",
]

[[package]]
name = "core-foundation-sys"
version = "0.8.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5827cebf4670468b8772dd191856768aedcb1b0278a04f989f7766351917b9dc"

[[package]]
name = "core-graphics"
version = "0.22.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2581bbab3b8ffc6fcbd550bf46c355135d16e9ff2a6ea032ad6b9bf1d7efe4fb"
dependencies = [
 "bitflags 1.3.2",
 "core-foundation",
 "core-graphics-types",
 "foreign-types",
 "libc",
]

[[package]]
name = "core-graphics-types"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3a68b68b3446082644c91ac778bf50cd4104bfb002b5a6a7c44cca5a2c70788b"
dependencies = [
 "bitflags 1.3.2",
 "core-foundation",
 "foreign-types",
 "libc",
]

[[package]]
name = "cpufeatures"
version = "0.2.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3e4c1eaa2012c47becbbad2ab175484c2a84d1185b566fb2cc5b8707343dfe58"
dependencies = [
 "libc",
]

[[package]]
name = "crc32fast"
version = "1.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b540bd8bc810d3885c6ea91e2018302f68baba2129ab3e88f32389ee9370880d"
dependencies = [
 "cfg-if",
]

[[package]]
name = "crossbeam-channel"
version = "0.5.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c2dd04ddaf88237dc3b8d8f9a3c1004b506b54b3313403944054d23c0870c521"
dependencies = [
 "cfg-if",
 "crossbeam-utils",
]

[[package]]
name = "crossbeam-deque"
version = "0.8.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "715e8152b692bba2d374b53d4875445368fdf21a94751410af607a5ac677d1fc"
dependencies = [
 "cfg-if",
 "crossbeam-epoch",
 "crossbeam-utils",
]

[[package]]
name = "crossbeam-epoch"
version = "0.9.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "045ebe27666471bb549370b4b0b3e51b07f56325befa4284db65fc89c02511b1"
dependencies = [
 "autocfg",
 "cfg-if",
 "crossbeam-utils",
 "memoffset 0.6.5",
 "once_cell",
 "scopeguard",
]

[[package]]
name = "crossbeam-utils"
version = "0.8.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "51887d4adc7b564537b15adcfb307936f8075dfcd5f00dde9a9f1d29383682bc"
dependencies = [
 "cfg-if",
 "once_cell",
]

[[package]]
name = "crypto-common"
version = "0.1.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1bfb12502f3fc46cca1bb51ac28df9d618d813cdc3d2f25b9fe775a34af26bb3"
dependencies = [
 "generic-array 0.14.7",
 "typenum",
]

[[package]]
name = "cty"
version = "0.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b365fabc795046672053e29c954733ec3b05e4be654ab130fe8f1f94d7051f35"

[[package]]
name = "debugger"
version = "0.1.0"
dependencies = [
 "eframe",
 "env_logger",
 "fuzzy-matcher",
 "gb",
 "globwalk",
 "log",
 "regex",
 "size_format",
]

[[package]]
name = "debugger-web"
version = "0.1.0"
dependencies = [
 "console_error_panic_hook",
 "debugger",
 "eframe",
 "env_logger",
 "js-sys",
 "log",
 "serde",
 "serde-wasm-bindgen",
 "tracing-wasm",
 "wasm-bindgen",
 "wasm-bindgen-futures",
 "wasm-logger",
 "web-sys",
]

[[package]]
name = "deflate"
version = "0.8.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "73770f8e1fe7d64df17ca66ad28994a0a623ea497fa69486e14984e715c5d174"
dependencies = [
 "adler32",
 "byteorder",
]

[[package]]
name = "derivative"
version = "2.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fcc3dd5e9e9c0b295d6e1e4d811fb6f157d5ffd784b8d202fc62eac8035a770b"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.107",
]

[[package]]
name = "digest"
version = "0.10.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9ed9a281f7bc9b7576e61468ba615a66a5c8cfdff42420a70aa82701a3b1e292"
dependencies = [
 "block-buffer",
 "crypto-common",
]

[[package]]
name = "dirs"
version = "4.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ca3aa72a6f96ea37bbc5aa912f6788242832f75369bdfdadcb0e38423f100059"
dependencies = [
 "dirs-sys",
]

[[package]]
name = "dirs-sys"
version = "0.3.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1b1d1d91c932ef41c0f2663aa8b0ca0342d444d842c06914aa0a7e352d0bada6"
dependencies = [
 "libc",
 "redox_users",
 "winapi",
]

[[package]]
name = "dispatch"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bd0c93bb4b0c6d9b77f4435b0ae98c24d17f1c45b2ff844c6151a07256ca923b"

[[package]]
name = "dlib"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ac1b7517328c04c2aa68422fc60a41b92208182142ed04a25879c26c8f878794"
dependencies = [
 "libloading",
]

[[package]]
name = "downcast-rs"
version = "1.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9ea835d29036a4087793836fa931b08837ad5e957da9e23886b29586fb9b6650"

[[package]]
name = "ecolor"
version = "0.21.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1f99fe3cac305af9d6d92971af60d0f7ea4d783201ef1673571567b6699964d9"
dependencies = [
 "bytemuck",
]

[[package]]
name = "eframe"
version = "0.21.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3df3ce60931e5f2d83bab4484d1a283908534d5308cc6b0c5c22c59cd15ee7cc"
dependencies = [
 "bytemuck",
 "egui",
 "egui-winit",
 "egui_glow",
 "glow",
 "glutin",
 "glutin-winit",
 "js-sys",
 "percent-encoding",
 "raw-window-handle",
 "thiserror",
 "tracing",
 "wasm-bindgen",
 "wasm-bindgen-futures",
 "web-sys",
 "winit",
]

[[package]]
name = "egui"
version = "0.21.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6412a21e0bde7c0918f7fb44bbbb86b5e1f88e63c026a4e747cc7af02f76dfbe"
dependencies = [
 "accesskit",
 "ahash",
 "epaint",
 "nohash-hasher",
 "tracing",
]

[[package]]
name = "egui-winit"
version = "0.21.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ab43597ba41f0ce39a364ad83185594578bfd8b3409b99dbcbb01df23afc3dbb"
dependencies = [
 "accesskit_winit",
 "android-activity",
 "arboard",
 "egui",
 "instant",
 "smithay-clipboard",
 "tracing",
 "webbrowser",
 "winit",
]

[[package]]
name = "egui_glow"
version = "0.21.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8257332fb168a965b3dca81d6a344e053153773c889cabdba0b3b76f1629ae81"
dependencies = [
 "bytemuck",
 "egui",
 "glow",
 "memoffset 0.6.5",
 "tracing",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "either"
version = "1.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "90e5c1c8368803113bf0c9584fc495a58b86dc8a29edbf8fe877d21d9507e797"

[[package]]
name = "emath"
version = "0.21.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b8ecd80612937e0267909d5351770fe150004e24dab93954f69ca62eecd3f77e"
dependencies = [
 "bytemuck",
]

[[package]]
name = "enumflags2"
version = "0.7.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c041f5090df68b32bcd905365fd51769c8b9d553fe87fde0b683534f10c01bd2"
dependencies = [
 "enumflags2_derive",
 "serde",
]

[[package]]
name = "enumflags2_derive"
version = "0.7.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5e9a1f9f7d83e59740248a6e14ecf93929ade55027844dfcea78beafccc15745"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.16",
]

[[package]]
name = "env_logger"
version = "0.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "85cdab6a89accf66733ad5a1693a4dcced6aeff64602b634530dd73c1f3ee9f0"
dependencies = [
 "humantime",
 "is-terminal",
 "log",
 "regex",
 "termcolor",
]

[[package]]
name = "epaint"
version = "0.21.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "12e78b5c58a1f7f621f9d546add2adce20636422c9b251e29f749e8a2f713c95"
dependencies = [
 "ab_glyph",
 "ahash",
 "atomic_refcell",
 "bytemuck",
 "ecolor",
 "emath",
 "nohash-hasher",
 "parking_lot",
]

[[package]]
name = "errno"
version = "0.2.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f639046355ee4f37944e44f60642c6f3a7efa3cf6b78c78a0d989a8ce6c396a1"
dependencies = [
 "errno-dragonfly",
 "libc",
 "winapi",
]

[[package]]
name = "errno"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4bcfec3a70f97c962c307b2d2c56e358cf1d00b558d74262b5f929ee8cc7e73a"
dependencies = [
 "errno-dragonfly",
 "libc",
 "windows-sys 0.48.0",
]

[[package]]
name = "errno-dragonfly"
version = "0.1.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "aa68f1b12764fab894d2755d2518754e71b4fd80ecfb822714a1206c2aab39bf"
dependencies = [
 "cc",
 "libc",
]

[[package]]
name = "error-code"
version = "2.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "64f18991e7bf11e7ffee451b5318b5c1a73c52d0d0ada6e5a3017c8c1ced6a21"
dependencies = [
 "libc",
 "str-buf",
]

[[package]]
name = "event-listener"
version = "2.5.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0206175f82b8d6bf6652ff7d71a1e27fd2e4efde587fd368662814d6ec1d9ce0"

[[package]]
name = "exr"
version = "1.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "78c26a90d9dd411a3d119d6f55752fb4c134ca243250c32fb9cab7b2561638d2"
dependencies = [
 "bit_field",
 "flume",
 "half",
 "lebe",
 "miniz_oxide 0.5.3",
 "smallvec",
 "threadpool",
]

[[package]]
name = "fastrand"
version = "1.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e51093e27b0797c359783294ca4f0a911c270184cb10f85783b118614a1501be"
dependencies = [
 "instant",
]

[[package]]
name = "flate2"
version = "1.0.24"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f82b0f4c27ad9f8bfd1f3208d882da2b09c301bc1c828fd3a00d0216d2fbbff6"
dependencies = [
 "crc32fast",
 "miniz_oxide 0.5.3",
]

[[package]]
name = "flume"
version = "0.10.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1657b4441c3403d9f7b3409e47575237dac27b1b5726df654a6ecbf92f0f7577"
dependencies = [
 "futures-core",
 "futures-sink",
 "nanorand",
 "pin-project",
 "spin",
]

[[package]]
name = "fnv"
version = "1.0.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3f9eec918d3f24069decb9af1554cad7c880e2da24a9afd88aca000531ab82c1"

[[package]]
name = "foreign-types"
version = "0.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f6f339eb8adc052cd2ca78910fda869aefa38d22d5cb648e6485e4d3fc06f3b1"
dependencies = [
 "foreign-types-shared",
]

[[package]]
name = "foreign-types-shared"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "00b0228411908ca8685dba7fc2cdd70ec9990a6e753e89b6ac91a84c40fbaf4b"

[[package]]
name = "form_urlencoded"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5fc25a87fa4fd2094bffb06925852034d90a17f0d1e05197d4956d3555752191"
dependencies = [
 "matches",
 "percent-encoding",
]

[[package]]
name = "futures"
version = "0.3.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "23342abe12aba583913b2e62f22225ff9c950774065e4bfb61a19cd9770fec40"
dependencies = [
 "futures-channel",
 "futures-core",
 "futures-executor",
 "futures-io",
 "futures-sink",
 "futures-task",
 "futures-util",
]

[[package]]
name = "futures-channel"
version = "0.3.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "955518d47e09b25bbebc7a18df10b81f0c766eaf4c4f1cccef2fca5f2a4fb5f2"
dependencies = [
 "futures-core",
 "futures-sink",
]

[[package]]
name = "futures-core"
version = "0.3.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4bca583b7e26f571124fe5b7561d49cb2868d79116cfa0eefce955557c6fee8c"

[[package]]
name = "futures-executor"
version = "0.3.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ccecee823288125bd88b4d7f565c9e58e41858e47ab72e8ea2d64e93624386e0"
dependencies = [
 "futures-core",
 "futures-task",
 "futures-util",
]

[[package]]
name = "futures-io"
version = "0.3.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4fff74096e71ed47f8e023204cfd0aa1289cd54ae5430a9523be060cdb849964"

[[package]]
name = "futures-lite"
version = "1.13.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "49a9d51ce47660b1e808d3c990b4709f2f415d928835a17dfd16991515c46bce"
dependencies = [
 "fastrand",
 "futures-core",
 "futures-io",
 "memchr",
 "parking",
 "pin-project-lite",
 "waker-fn",
]

[[package]]
name = "futures-macro"
version = "0.3.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "89ca545a94061b6365f2c7355b4b32bd20df3ff95f02da9329b34ccc3bd6ee72"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.16",
]

[[package]]
name = "futures-sink"
version = "0.3.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f43be4fe21a13b9781a69afa4985b0f6ee0e1afab2c6f454a8cf30e2b2237b6e"

[[package]]
name = "futures-task"
version = "0.3.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "76d3d132be6c0e6aa1534069c705a74a5997a356c0dc2f86a47765e5617c5b65"

[[package]]
name = "futures-util"
version = "0.3.28"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "26b01e40b772d54cf6c6d721c1d1abd0647a0106a12ecaa1c186273392a69533"
dependencies = [
 "futures-channel",
 "futures-core",
 "futures-io",
 "futures-macro",
 "futures-sink",
 "futures-task",
 "memchr",
 "pin-project-lite",
 "pin-utils",
 "slab",
]

[[package]]
name = "fuzzy-matcher"
version = "0.3.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "54614a3312934d066701a80f20f15fa3b56d67ac7722b39eea5b4c9dd1d66c94"
dependencies = [
 "thread_local",
]

[[package]]
name = "gb"
version = "0.1.0"
dependencies = [
 "arrayvec",
 "bitflags 2.3.1",
 "log",
 "parse-display",
]

[[package]]
name = "gb-web"
version = "0.1.0"
dependencies = [
 "console_error_panic_hook",
 "gb",
 "js-sys",
 "log",
 "wasm-bindgen",
 "wasm-logger",
]

[[package]]
name = "generic-array"
version = "0.12.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ffdf9f34f1447443d37393cc6c2b8313aebddcd96906caf34e54c68d8e57d7bd"
dependencies = [
 "typenum",
]

[[package]]
name = "generic-array"
version = "0.14.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "85649ca51fd72272d7821adaf274ad91c288277713d9c18820d8499a7ff69e9a"
dependencies = [
 "typenum",
 "version_check",
]

[[package]]
name = "gethostname"
version = "0.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c1ebd34e35c46e00bb73e81363248d627782724609fe1b6396f553f68fe3862e"
dependencies = [
 "libc",
 "winapi",
]

[[package]]
name = "getrandom"
version = "0.2.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4eb1a864a501629691edf6c15a593b7a51eebaa1e8468e9ddc623de7c9b58ec6"
dependencies = [
 "cfg-if",
 "js-sys",
 "libc",
 "wasi 0.11.0+wasi-snapshot-preview1",
 "wasm-bindgen",
]

[[package]]
name = "gif"
version = "0.11.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3edd93c6756b4dfaf2709eafcc345ba2636565295c198a9cfbf75fa5e3e00b06"
dependencies = [
 "color_quant",
 "weezl",
]

[[package]]
name = "gif"
version = "0.12.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "80792593675e051cf94a4b111980da2ba60d4a83e43e0048c5693baab3977045"
dependencies = [
 "color_quant",
 "weezl",
]

[[package]]
name = "gl_generator"
version = "0.14.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1a95dfc23a2b4a9a2f5ab41d194f8bfda3cabec42af4e39f08c339eb2a0c124d"
dependencies = [
 "khronos_api",
 "log",
 "xml-rs",
]

[[package]]
name = "glob"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d2fabcfbdc87f4758337ca535fb41a6d701b65693ce38287d856d1674551ec9b"

[[package]]
name = "globset"
version = "0.4.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0a1e17342619edbc21a964c2afbeb6c820c6a2560032872f397bb97ea127bd0a"
dependencies = [
 "aho-corasick 0.7.18",
 "bstr",
 "fnv",
 "log",
 "regex",
]

[[package]]
name = "globwalk"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "93e3af942408868f6934a7b85134a3230832b9977cf66125df2f9edcfce4ddcc"
dependencies = [
 "bitflags 1.3.2",
 "ignore",
 "walkdir",
]

[[package]]
name = "glow"
version = "0.12.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4e007a07a24de5ecae94160f141029e9a347282cfe25d1d58d85d845cf3130f1"
dependencies = [
 "js-sys",
 "slotmap",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "glutin"
version = "0.30.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "524d807cd49a0c56a53ef9a6738cd15e7c8c4e9d37a3b7fdb3c250c1cd5bf7a3"
dependencies = [
 "bitflags 1.3.2",
 "cfg_aliases",
 "cgl",
 "cocoa",
 "core-foundation",
 "glutin_egl_sys",
 "glutin_glx_sys",
 "glutin_wgl_sys",
 "libloading",
 "objc",
 "once_cell",
 "raw-window-handle",
 "wayland-sys 0.30.1",
 "windows-sys 0.36.1",
 "x11-dl",
]

[[package]]
name = "glutin-winit"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "629a873fc04062830bfe8f97c03773bcd7b371e23bcc465d0a61448cd1588fa4"
dependencies = [
 "cfg_aliases",
 "glutin",
 "raw-window-handle",
 "winit",
]

[[package]]
name = "glutin_egl_sys"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3adbb8fec0e18e340f990c78f79f5f0e142d0d83f46b10909aaa7d251c00afdf"
dependencies = [
 "gl_generator",
 "windows-sys 0.36.1",
]

[[package]]
name = "glutin_glx_sys"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "947c4850c58211c9627969c2b4e2674764b81ae5b47bab2c9a477d7942f96e0f"
dependencies = [
 "gl_generator",
 "x11-dl",
]

[[package]]
name = "glutin_wgl_sys"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "20c33975a6c9d49d72c8f032a60079bf8df536954fbf9e4cee90396ace815c57"
dependencies = [
 "gl_generator",
]

[[package]]
name = "half"
version = "1.8.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "eabb4a44450da02c90444cf74558da904edde8fb4e9035a9a6a4e15445af0bd7"

[[package]]
name = "hermit-abi"
version = "0.1.19"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "62b467343b94ba476dcb2500d242dadbb39557df889310ac77c5d99100aaac33"
dependencies = [
 "libc",
]

[[package]]
name = "hermit-abi"
version = "0.2.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ee512640fe35acbfb4bb779db6f0d80704c2cacfa2e39b601ef3e3f47d1ae4c7"
dependencies = [
 "libc",
]

[[package]]
name = "hex"
version = "0.4.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7f24254aa9a54b5c858eaee2f5bccdb46aaf0e486a595ed5fd8f86ba55232a70"

[[package]]
name = "humantime"
version = "2.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9a3a5bfb195931eeb336b2a7b4d761daec841b97f947d34394601737a7bba5e4"

[[package]]
name = "iana-time-zone"
version = "0.1.46"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ad2bfd338099682614d3ee3fe0cd72e0b6a41ca6a87f6a74a3bd593c91650501"
dependencies = [
 "android_system_properties",
 "core-foundation-sys",
 "js-sys",
 "wasm-bindgen",
 "winapi",
]

[[package]]
name = "idna"
version = "0.2.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "418a0a6fab821475f634efe3ccc45c013f742efe03d853e8d3355d5cb850ecf8"
dependencies = [
 "matches",
 "unicode-bidi",
 "unicode-normalization",
]

[[package]]
name = "ignore"
version = "0.4.18"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "713f1b139373f96a2e0ce3ac931cd01ee973c3c5dd7c40c0c2efe96ad2b6751d"
dependencies = [
 "crossbeam-utils",
 "globset",
 "lazy_static",
 "log",
 "memchr",
 "regex",
 "same-file",
 "thread_local",
 "walkdir",
 "winapi-util",
]

[[package]]
name = "image"
version = "0.23.14"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "24ffcb7e7244a9bf19d35bf2883b9c080c4ced3c07a9895572178cdb8f13f6a1"
dependencies = [
 "bytemuck",
 "byteorder",
 "color_quant",
 "gif 0.11.4",
 "jpeg-decoder 0.1.22",
 "num-iter",
 "num-rational 0.3.2",
 "num-traits",
 "png 0.16.8",
 "scoped_threadpool",
 "tiff 0.6.1",
]

[[package]]
name = "image"
version = "0.24.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "527909aa81e20ac3a44803521443a765550f09b5130c2c2fa1ea59c2f8f50a3a"
dependencies = [
 "bytemuck",
 "byteorder",
 "color_quant",
 "exr",
 "gif 0.12.0",
 "jpeg-decoder 0.3.0",
 "num-rational 0.4.1",
 "num-traits",
 "png 0.17.7",
 "qoi",
 "tiff 0.8.1",
]

[[package]]
name = "instant"
version = "0.1.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7a5bbe824c507c5da5956355e86a746d82e0e1464f65d862cc5e71da70e94b2c"
dependencies = [
 "cfg-if",
 "js-sys",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "integration-tests"
version = "0.1.0"
dependencies = [
 "chrono",
 "futures",
 "gb",
 "glob",
 "image 0.24.6",
 "pixelmatch",
 "regex",
 "tokio",
]

[[package]]
name = "io-lifetimes"
version = "1.0.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "46112a93252b123d31a119a8d1a1ac19deac4fac6e0e8b0df58f0d4e5870e63c"
dependencies = [
 "libc",
 "windows-sys 0.42.0",
]

[[package]]
name = "is-terminal"
version = "0.4.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "28dfb6c8100ccc63462345b67d1bbc3679177c75ee4bf59bf29c8b1d110b8189"
dependencies = [
 "hermit-abi 0.2.6",
 "io-lifetimes",
 "rustix 0.36.6",
 "windows-sys 0.42.0",
]

[[package]]
name = "itoa"
version = "1.0.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6c8af84674fe1f223a982c933a0ee1086ac4d4052aa0fb8060c12c6ad838e754"

[[package]]
name = "jni"
version = "0.20.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "039022cdf4d7b1cf548d31f60ae783138e5fd42013f6271049d7df7afadef96c"
dependencies = [
 "cesu8",
 "combine",
 "jni-sys",
 "log",
 "thiserror",
 "walkdir",
]

[[package]]
name = "jni-sys"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8eaf4bc02d17cbdd7ff4c7438cafcdf7fb9a4613313ad11b4f8fefe7d3fa0130"

[[package]]
name = "jobserver"
version = "0.1.26"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "936cfd212a0155903bcbc060e316fb6cc7cbf2e1907329391ebadc1fe0ce77c2"
dependencies = [
 "libc",
]

[[package]]
name = "jpeg-decoder"
version = "0.1.22"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "229d53d58899083193af11e15917b5640cd40b29ff475a1fe4ef725deb02d0f2"
dependencies = [
 "rayon",
]

[[package]]
name = "jpeg-decoder"
version = "0.3.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bc0000e42512c92e31c2252315bda326620a4e034105e900c98ec492fa077b3e"
dependencies = [
 "rayon",
]

[[package]]
name = "js-sys"
version = "0.3.61"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "445dde2150c55e483f3d8416706b97ec8e8237c307e5b7b4b8dd15e6af2a0730"
dependencies = [
 "wasm-bindgen",
]

[[package]]
name = "khronos_api"
version = "3.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e2db585e1d738fc771bf08a151420d3ed193d9d895a36df7f6f8a9456b911ddc"

[[package]]
name = "lazy_static"
version = "1.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e2abad23fbc42b3700f2f279844dc832adb2b2eb069b2df918f455c4e18cc646"

[[package]]
name = "lebe"
version = "0.5.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "03087c2bad5e1034e8cace5926dec053fb3790248370865f5117a7d0213354c8"

[[package]]
name = "libc"
version = "0.2.139"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "201de327520df007757c1f0adce6e827fe8562fbc28bfd9c15571c66ca1f5f79"

[[package]]
name = "libloading"
version = "0.7.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "efbc0f03f9a775e9f6aed295c6a1ba2253c5757a9e03d55c6caa46a681abcddd"
dependencies = [
 "cfg-if",
 "winapi",
]

[[package]]
name = "linux-raw-sys"
version = "0.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f051f77a7c8e6957c0696eac88f26b0117e54f52d3fc682ab19397a8812846a4"

[[package]]
name = "linux-raw-sys"
version = "0.3.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ef53942eb7bf7ff43a617b3e2c1c4a5ecf5944a7c1bc12d7ee39bbb15e5c1519"

[[package]]
name = "lock_api"
version = "0.4.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9f80bf5aacaf25cbfc8210d1cfb718f2bf3b11c4c54e5afe36c236853a8ec390"
dependencies = [
 "autocfg",
 "scopeguard",
]

[[package]]
name = "log"
version = "0.4.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "abb12e687cfb44aa40f41fc3978ef76448f9b6038cad6aef4259d3c095a2382e"
dependencies = [
 "cfg-if",
]

[[package]]
name = "malloc_buf"
version = "0.0.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "62bb907fe88d54d8d9ce32a3cceab4218ed2f6b7d35617cafe9adf84e43919cb"
dependencies = [
 "libc",
]

[[package]]
name = "matches"
version = "0.1.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a3e378b66a060d48947b590737b30a1be76706c8dd7b8ba0f2fe3989c68a853f"

[[package]]
name = "memchr"
version = "2.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2dffe52ecf27772e601905b7522cb4ef790d2cc203488bbd0e2fe85fcb74566d"

[[package]]
name = "memmap2"
version = "0.5.10"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "83faa42c0a078c393f6b29d5db232d8be22776a891f8f56e5284faee4a20b327"
dependencies = [
 "libc",
]

[[package]]
name = "memoffset"
version = "0.6.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5aa361d4faea93603064a027415f07bd8e1d5c88c9fbf68bf56a285428fd79ce"
dependencies = [
 "autocfg",
]

[[package]]
name = "memoffset"
version = "0.7.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5de893c32cde5f383baa4c04c5d6dbdd735cfd4a794b0debdb2bb1b421da5ff4"
dependencies = [
 "autocfg",
]

[[package]]
name = "minimal-lexical"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "68354c5c6bd36d73ff3feceb05efa59b6acb7626617f4962be322a825e61f79a"

[[package]]
name = "miniz_oxide"
version = "0.3.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "791daaae1ed6889560f8c4359194f56648355540573244a5448a83ba1ecc7435"
dependencies = [
 "adler32",
]

[[package]]
name = "miniz_oxide"
version = "0.4.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a92518e98c078586bc6c934028adcca4c92a53d6a958196de835170a01d84e4b"
dependencies = [
 "adler",
 "autocfg",
]

[[package]]
name = "miniz_oxide"
version = "0.5.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6f5c75688da582b8ffc1f1799e9db273f32133c49e048f614d22ec3256773ccc"
dependencies = [
 "adler",
]

[[package]]
name = "miniz_oxide"
version = "0.6.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b275950c28b37e794e8c55d88aeb5e139d0ce23fdbbeda68f8d7174abdf9e8fa"
dependencies = [
 "adler",
]

[[package]]
name = "mio"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "57ee1c23c7c63b0c9250c339ffdc69255f110b298b901b9f6c82547b7b87caaf"
dependencies = [
 "libc",
 "log",
 "wasi 0.11.0+wasi-snapshot-preview1",
 "windows-sys 0.36.1",
]

[[package]]
name = "nanorand"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6a51313c5820b0b02bd422f4b44776fbf47961755c74ce64afc73bfad10226c3"
dependencies = [
 "getrandom",
]

[[package]]
name = "ndk"
version = "0.7.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "451422b7e4718271c8b5b3aadf5adedba43dc76312454b387e98fae0fc951aa0"
dependencies = [
 "bitflags 1.3.2",
 "jni-sys",
 "ndk-sys",
 "num_enum",
 "raw-window-handle",
 "thiserror",
]

[[package]]
name = "ndk-context"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "27b02d87554356db9e9a873add8782d4ea6e3e58ea071a9adb9a2e8ddb884a8b"

[[package]]
name = "ndk-sys"
version = "0.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "21d83ec9c63ec5bf950200a8e508bdad6659972187b625469f58ef8c08e29046"
dependencies = [
 "jni-sys",
]

[[package]]
name = "nix"
version = "0.24.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "195cdbc1741b8134346d515b3a56a1c94b0912758009cfd53f99ea0f57b065fc"
dependencies = [
 "bitflags 1.3.2",
 "cfg-if",
 "libc",
 "memoffset 0.6.5",
]

[[package]]
name = "nix"
version = "0.26.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bfdda3d196821d6af13126e40375cdf7da646a96114af134d5f417a9a1dc8e1a"
dependencies = [
 "bitflags 1.3.2",
 "cfg-if",
 "libc",
 "memoffset 0.7.1",
 "static_assertions",
]

[[package]]
name = "nohash-hasher"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2bf50223579dc7cdcfb3bfcacf7069ff68243f8c363f62ffa99cf000a6b9c451"

[[package]]
name = "nom"
version = "7.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a8903e5a29a317527874d0402f867152a3d21c908bb0b933e416c65e301d4c36"
dependencies = [
 "memchr",
 "minimal-lexical",
]

[[package]]
name = "num"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b8536030f9fea7127f841b45bb6243b27255787fb4eb83958aa1ef9d2fdc0c36"
dependencies = [
 "num-complex",
 "num-integer",
 "num-iter",
 "num-rational 0.2.4",
 "num-traits",
]

[[package]]
name = "num-complex"
version = "0.2.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b6b19411a9719e753aff12e5187b74d60d3dc449ec3f4dc21e3989c3f554bc95"
dependencies = [
 "autocfg",
 "num-traits",
]

[[package]]
name = "num-integer"
version = "0.1.45"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "225d3389fb3509a24c93f5c29eb6bde2586b98d9f016636dff58d7c6f7569cd9"
dependencies = [
 "autocfg",
 "num-traits",
]

[[package]]
name = "num-iter"
version = "0.1.43"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7d03e6c028c5dc5cac6e2dec0efda81fc887605bb3d884578bb6d6bf7514e252"
dependencies = [
 "autocfg",
 "num-integer",
 "num-traits",
]

[[package]]
name = "num-rational"
version = "0.2.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5c000134b5dbf44adc5cb772486d335293351644b801551abe8f75c84cfa4aef"
dependencies = [
 "autocfg",
 "num-integer",
 "num-traits",
]

[[package]]
name = "num-rational"
version = "0.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "12ac428b1cb17fce6f731001d307d351ec70a6d202fc2e60f7d4c5e42d8f4f07"
dependencies = [
 "autocfg",
 "num-integer",
 "num-traits",
]

[[package]]
name = "num-rational"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0638a1c9d0a3c0914158145bc76cff373a75a627e6ecbfb71cbe6f453a5a19b0"
dependencies = [
 "autocfg",
 "num-integer",
 "num-traits",
]

[[package]]
name = "num-traits"
version = "0.2.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "578ede34cf02f8924ab9447f50c28075b4d3e5b269972345e7e0372b38c6cdcd"
dependencies = [
 "autocfg",
]

[[package]]
name = "num_cpus"
version = "1.13.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "19e64526ebdee182341572e50e9ad03965aa510cd94427a4549448f285e957a1"
dependencies = [
 "hermit-abi 0.1.19",
 "libc",
]

[[package]]
name = "num_enum"
version = "0.5.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cf5395665662ef45796a4ff5486c5d41d29e0c09640af4c5f17fd94ee2c119c9"
dependencies = [
 "num_enum_derive",
]

[[package]]
name = "num_enum_derive"
version = "0.5.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3b0498641e53dd6ac1a4f22547548caa6864cc4933784319cd1775271c5a46ce"
dependencies = [
 "proc-macro-crate",
 "proc-macro2",
 "quote",
 "syn 1.0.107",
]

[[package]]
name = "objc"
version = "0.2.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "915b1b472bc21c53464d6c8461c9d3af805ba1ef837e1cac254428f4a77177b1"
dependencies = [
 "malloc_buf",
]

[[package]]
name = "objc-foundation"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1add1b659e36c9607c7aab864a76c7a4c2760cd0cd2e120f3fb8b952c7e22bf9"
dependencies = [
 "block",
 "objc",
 "objc_id",
]

[[package]]
name = "objc-sys"
version = "0.2.0-beta.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "df3b9834c1e95694a05a828b59f55fa2afec6288359cda67146126b3f90a55d7"

[[package]]
name = "objc2"
version = "0.3.0-beta.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fe31e5425d3d0b89a15982c024392815da40689aceb34bad364d58732bcfd649"
dependencies = [
 "block2",
 "objc-sys",
 "objc2-encode",
]

[[package]]
name = "objc2-encode"
version = "2.0.0-pre.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "abfcac41015b00a120608fdaa6938c44cb983fee294351cc4bac7638b4e50512"
dependencies = [
 "objc-sys",
]

[[package]]
name = "objc_id"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c92d4ddb4bd7b50d730c215ff871754d0da6b2178849f8a2a2ab69712d0c073b"
dependencies = [
 "objc",
]

[[package]]
name = "once_cell"
version = "1.13.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "074864da206b4973b84eb91683020dbefd6a8c3f0f38e054d93954e891935e4e"

[[package]]
name = "orbclient"
version = "0.3.45"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "221d488cd70617f1bd599ed8ceb659df2147d9393717954d82a0f5e8032a6ab1"
dependencies = [
 "redox_syscall 0.3.5",
]

[[package]]
name = "ordered-stream"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9aa2b01e1d916879f73a53d01d1d6cee68adbb31d6d9177a8cfce093cced1d50"
dependencies = [
 "futures-core",
 "pin-project-lite",
]

[[package]]
name = "owned_ttf_parser"
version = "0.19.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "706de7e2214113d63a8238d1910463cfce781129a6f263d13fdb09ff64355ba4"
dependencies = [
 "ttf-parser",
]

[[package]]
name = "parking"
version = "2.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "14f2252c834a40ed9bb5422029649578e63aa341ac401f74e719dd1afda8394e"

[[package]]
name = "parking_lot"
version = "0.12.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3742b2c103b9f06bc9fff0a37ff4912935851bee6d36f3c02bcc755bcfec228f"
dependencies = [
 "lock_api",
 "parking_lot_core",
]

[[package]]
name = "parking_lot_core"
version = "0.9.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "09a279cbf25cb0757810394fbc1e359949b59e348145c643a939a525692e6929"
dependencies = [
 "cfg-if",
 "libc",
 "redox_syscall 0.2.16",
 "smallvec",
 "windows-sys 0.36.1",
]

[[package]]
name = "parse-display"
version = "0.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6f96cc033d72896bb9a2c239a14e1141c3e2eae6d649e7c10ef4e598d66bc86c"
dependencies = [
 "once_cell",
 "parse-display-derive",
 "regex",
]

[[package]]
name = "parse-display-derive"
version = "0.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e5587062be441f3d868f7c4c9d13c67f286b03aa679d7f8176ef80bf2ee79e5d"
dependencies = [
 "once_cell",
 "proc-macro2",
 "quote",
 "regex",
 "regex-syntax 0.6.27",
 "structmeta",
 "syn 1.0.107",
]

[[package]]
name = "paste"
version = "1.0.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d01a5bd0424d00070b0098dd17ebca6f961a959dead1dbcbbbc1d1cd8d3deeba"

[[package]]
name = "percent-encoding"
version = "2.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d4fd5641d01c8f18a23da7b6fe29298ff4b55afcccdf78973b24cf3175fee32e"

[[package]]
name = "pin-project"
version = "1.0.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ad29a609b6bcd67fee905812e544992d216af9d755757c05ed2d0e15a74c6ecc"
dependencies = [
 "pin-project-internal",
]

[[package]]
name = "pin-project-internal"
version = "1.0.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "069bdb1e05adc7a8990dce9cc75370895fbe4e3d58b9b73bf1aee56359344a55"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.107",
]

[[package]]
name = "pin-project-lite"
version = "0.2.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e0a7ae3ac2f1173085d398531c705756c94a4c56843785df85a60c1a0afac116"

[[package]]
name = "pin-utils"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8b870d8c151b6f2fb93e84a13146138f05d02ed11c7e7c54f8826aaaf7c9f184"

[[package]]
name = "pixelmatch"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4b15774a2acbbefbf12db95ef5582f80a3c9628dc48b6397e563c08640799764"
dependencies = [
 "image 0.23.14",
]

[[package]]
name = "pkg-config"
version = "0.3.25"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1df8c4ec4b0627e53bdf214615ad287367e482558cf84b109250b37464dc03ae"

[[package]]
name = "png"
version = "0.16.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3c3287920cb847dee3de33d301c463fba14dda99db24214ddf93f83d3021f4c6"
dependencies = [
 "bitflags 1.3.2",
 "crc32fast",
 "deflate",
 "miniz_oxide 0.3.7",
]

[[package]]
name = "png"
version = "0.17.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5d708eaf860a19b19ce538740d2b4bdeeb8337fa53f7738455e706623ad5c638"
dependencies = [
 "bitflags 1.3.2",
 "crc32fast",
 "flate2",
 "miniz_oxide 0.6.2",
]

[[package]]
name = "polling"
version = "2.8.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4b2d323e8ca7996b3e23126511a523f7e62924d93ecd5ae73b333815b0eb3dce"
dependencies = [
 "autocfg",
 "bitflags 1.3.2",
 "cfg-if",
 "concurrent-queue",
 "libc",
 "log",
 "pin-project-lite",
 "windows-sys 0.48.0",
]

[[package]]
name = "ppv-lite86"
version = "0.2.17"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5b40af805b3121feab8a3c29f04d8ad262fa8e0561883e7653e024ae4479e6de"

[[package]]
name = "proc-macro-crate"
version = "1.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "eda0fc3b0fb7c975631757e14d9049da17374063edb6ebbcbc54d880d4fe94e9"
dependencies = [
 "once_cell",
 "thiserror",
 "toml",
]

[[package]]
name = "proc-macro2"
version = "1.0.58"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fa1fb82fc0c281dd9671101b66b771ebbe1eaf967b96ac8740dcba4b70005ca8"
dependencies = [
 "unicode-ident",
]

[[package]]
name = "qoi"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7f6d64c71eb498fe9eae14ce4ec935c555749aef511cca85b5568910d6e48001"
dependencies = [
 "bytemuck",
]

[[package]]
name = "quote"
version = "1.0.27"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8f4f29d145265ec1c483c7c654450edde0bfe043d3938d6972630663356d9500"
dependencies = [
 "proc-macro2",
]

[[package]]
name = "rand"
version = "0.8.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "34af8d1a0e25924bc5b7c43c079c942339d8f0a8b57c39049bef581b46327404"
dependencies = [
 "libc",
 "rand_chacha",
 "rand_core",
]

[[package]]
name = "rand_chacha"
version = "0.3.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e6c10a63a0fa32252be49d21e7709d4d4baf8d231c2dbce1eaa8141b9b127d88"
dependencies = [
 "ppv-lite86",
 "rand_core",
]

[[package]]
name = "rand_core"
version = "0.6.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ec0be4795e2f6a28069bec0b5ff3e2ac9bafc99e6a9a7dc3547996c5c816922c"
dependencies = [
 "getrandom",
]

[[package]]
name = "raw-window-handle"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ed7e3d950b66e19e0c372f3fa3fbbcf85b1746b571f74e0c2af6042a5c93420a"
dependencies = [
 "cty",
]

[[package]]
name = "rayon"
version = "1.5.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bd99e5772ead8baa5215278c9b15bf92087709e9c1b2d1f97cdb5a183c933a7d"
dependencies = [
 "autocfg",
 "crossbeam-deque",
 "either",
 "rayon-core",
]

[[package]]
name = "rayon-core"
version = "1.9.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "258bcdb5ac6dad48491bb2992db6b7cf74878b0384908af124823d118c99683f"
dependencies = [
 "crossbeam-channel",
 "crossbeam-deque",
 "crossbeam-utils",
 "num_cpus",
]

[[package]]
name = "redox_syscall"
version = "0.2.16"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "fb5a58c1855b4b6819d59012155603f0b22ad30cad752600aadfcb695265519a"
dependencies = [
 "bitflags 1.3.2",
]

[[package]]
name = "redox_syscall"
version = "0.3.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "567664f262709473930a4bf9e51bf2ebf3348f2e748ccc50dea20646858f8f29"
dependencies = [
 "bitflags 1.3.2",
]

[[package]]
name = "redox_users"
version = "0.4.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b033d837a7cf162d7993aded9304e30a83213c648b6e389db233191f891e5c2b"
dependencies = [
 "getrandom",
 "redox_syscall 0.2.16",
 "thiserror",
]

[[package]]
name = "regex"
version = "1.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "af83e617f331cc6ae2da5443c602dfa5af81e517212d9d611a5b3ba1777b5370"
dependencies = [
 "aho-corasick 1.0.1",
 "memchr",
 "regex-syntax 0.7.1",
]

[[package]]
name = "regex-syntax"
version = "0.6.27"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a3f87b73ce11b1619a3c6332f45341e0047173771e8b8b73f87bfeefb7b56244"

[[package]]
name = "regex-syntax"
version = "0.7.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a5996294f19bd3aae0453a862ad728f60e6600695733dd5df01da90c54363a3c"

[[package]]
name = "rustix"
version = "0.36.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4feacf7db682c6c329c4ede12649cd36ecab0f3be5b7d74e6a20304725db4549"
dependencies = [
 "bitflags 1.3.2",
 "errno 0.2.8",
 "io-lifetimes",
 "libc",
 "linux-raw-sys 0.1.4",
 "windows-sys 0.42.0",
]

[[package]]
name = "rustix"
version = "0.37.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "62b24138615de35e32031d041a09032ef3487a616d901ca4db224e7d557efae2"
dependencies = [
 "bitflags 1.3.2",
 "errno 0.3.1",
 "io-lifetimes",
 "libc",
 "linux-raw-sys 0.3.8",
 "windows-sys 0.45.0",
]

[[package]]
name = "ryu"
version = "1.0.11"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4501abdff3ae82a1c1b477a17252eb69cee9e66eb915c1abaa4f44d873df9f09"

[[package]]
name = "same-file"
version = "1.0.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "93fc1dc3aaa9bfed95e02e6eadabb4baf7e3078b0bd1b4d7b6b0b68378900502"
dependencies = [
 "winapi-util",
]

[[package]]
name = "scoped-tls"
version = "1.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ea6a9290e3c9cf0f18145ef7ffa62d68ee0bf5fcd651017e586dc7fd5da448c2"

[[package]]
name = "scoped_threadpool"
version = "0.1.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1d51f5df5af43ab3f1360b429fa5e0152ac5ce8c0bd6485cae490332e96846a8"

[[package]]
name = "scopeguard"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d29ab0c6d3fc0ee92fe66e2d99f700eab17a8d57d1c1d3b748380fb20baa78cd"

[[package]]
name = "sctk-adwaita"
version = "0.5.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cda4e97be1fd174ccc2aae81c8b694e803fa99b34e8fd0f057a9d70698e3ed09"
dependencies = [
 "ab_glyph",
 "log",
 "memmap2",
 "smithay-client-toolkit",
 "tiny-skia",
]

[[package]]
name = "serde"
version = "1.0.163"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2113ab51b87a539ae008b5c6c02dc020ffa39afd2d83cffcb3f4eb2722cebec2"
dependencies = [
 "serde_derive",
]

[[package]]
name = "serde-wasm-bindgen"
version = "0.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f3b143e2833c57ab9ad3ea280d21fd34e285a42837aeb0ee301f4f41890fa00e"
dependencies = [
 "js-sys",
 "serde",
 "wasm-bindgen",
]

[[package]]
name = "serde-xml-rs"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f0bf1ba0696ccf0872866277143ff1fd14d22eec235d2b23702f95e6660f7dfa"
dependencies = [
 "log",
 "serde",
 "thiserror",
 "xml-rs",
]

[[package]]
name = "serde_derive"
version = "1.0.163"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8c805777e3930c8883389c602315a24224bcc738b63905ef87cd1420353ea93e"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.16",
]

[[package]]
name = "serde_json"
version = "1.0.85"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e55a28e3aaef9d5ce0506d0a14dbba8054ddc7e499ef522dd8b26859ec9d4a44"
dependencies = [
 "itoa",
 "ryu",
 "serde",
]

[[package]]
name = "serde_repr"
version = "0.1.12"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bcec881020c684085e55a25f7fd888954d56609ef363479dc5a1305eb0d40cab"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.16",
]

[[package]]
name = "sha1"
version = "0.10.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f04293dc80c3993519f2d7f6f511707ee7094fe0c6d3406feb330cdb3540eba3"
dependencies = [
 "cfg-if",
 "cpufeatures",
 "digest",
]

[[package]]
name = "sharded-slab"
version = "0.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "900fba806f70c630b0a382d0d825e17a0f19fcd059a2ade1ff237bcddf446b31"
dependencies = [
 "lazy_static",
]

[[package]]
name = "signal-hook"
version = "0.3.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "732768f1176d21d09e076c23a93123d40bba92d50c4058da34d45c8de8e682b9"
dependencies = [
 "libc",
 "signal-hook-registry",
]

[[package]]
name = "signal-hook-registry"
version = "1.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e51e73328dc4ac0c7ccbda3a494dfa03df1de2f46018127f60c693f2648455b0"
dependencies = [
 "libc",
]

[[package]]
name = "size_format"
version = "1.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6ed5f6ab2122c6dec69dca18c72fa4590a27e581ad20d44960fe74c032a0b23b"
dependencies = [
 "generic-array 0.12.4",
 "num",
]

[[package]]
name = "slab"
version = "0.4.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4614a76b2a8be0058caa9dbbaf66d988527d86d003c11a94fbd335d7661edcef"
dependencies = [
 "autocfg",
]

[[package]]
name = "slotmap"
version = "1.0.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e1e08e261d0e8f5c43123b7adf3e4ca1690d655377ac93a03b2c9d3e98de1342"
dependencies = [
 "version_check",
]

[[package]]
name = "smallvec"
version = "1.9.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2fd0db749597d91ff862fd1d55ea87f7855a744a8425a64695b6fca237d1dad1"

[[package]]
name = "smithay-client-toolkit"
version = "0.16.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f307c47d32d2715eb2e0ece5589057820e0e5e70d07c247d1063e844e107f454"
dependencies = [
 "bitflags 1.3.2",
 "calloop",
 "dlib",
 "lazy_static",
 "log",
 "memmap2",
 "nix 0.24.2",
 "pkg-config",
 "wayland-client",
 "wayland-cursor",
 "wayland-protocols",
]

[[package]]
name = "smithay-clipboard"
version = "0.6.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0a345c870a1fae0b1b779085e81b51e614767c239e93503588e54c5b17f4b0e8"
dependencies = [
 "smithay-client-toolkit",
 "wayland-client",
]

[[package]]
name = "socket2"
version = "0.4.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "64a4a911eed85daf18834cfaa86a79b7d266ff93ff5ba14005426219480ed662"
dependencies = [
 "libc",
 "winapi",
]

[[package]]
name = "spin"
version = "0.9.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7f6002a767bff9e83f8eeecf883ecb8011875a21ae8da43bffb817a57e78cc09"
dependencies = [
 "lock_api",
]

[[package]]
name = "static_assertions"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a2eb9349b6444b326872e140eb1cf5e7c522154d69e7a0ffb0fb81c06b37543f"

[[package]]
name = "str-buf"
version = "1.0.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9e08d8363704e6c71fc928674353e6b7c23dcea9d82d7012c8faf2a3a025f8d0"

[[package]]
name = "strict-num"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9df65f20698aeed245efdde3628a6b559ea1239bbb871af1b6e3b58c413b2bd1"

[[package]]
name = "structmeta"
version = "0.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1bd9c2155aa89fb2c2cb87d99a610c689e7c47099b3e9f1c8a8f53faf4e3d2e3"
dependencies = [
 "proc-macro2",
 "quote",
 "structmeta-derive",
 "syn 1.0.107",
]

[[package]]
name = "structmeta-derive"
version = "0.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bafede0d0a2f21910f36d47b1558caae3076ed80f6f3ad0fc85a91e6ba7e5938"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.107",
]

[[package]]
name = "syn"
version = "1.0.107"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1f4064b5b16e03ae50984a5a8ed5d4f8803e6bc1fd170a3cda91a1be4b18e3f5"
dependencies = [
 "proc-macro2",
 "quote",
 "unicode-ident",
]

[[package]]
name = "syn"
version = "2.0.16"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a6f671d4b5ffdb8eadec19c0ae67fe2639df8684bd7bc4b83d986b8db549cf01"
dependencies = [
 "proc-macro2",
 "quote",
 "unicode-ident",
]

[[package]]
name = "tempfile"
version = "3.5.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b9fbec84f381d5795b08656e4912bec604d162bff9291d6189a78f4c8ab87998"
dependencies = [
 "cfg-if",
 "fastrand",
 "redox_syscall 0.3.5",
 "rustix 0.37.3",
 "windows-sys 0.45.0",
]

[[package]]
name = "termcolor"
version = "1.1.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "bab24d30b911b2376f3a13cc2cd443142f0c81dda04c118693e35b3835757755"
dependencies = [
 "winapi-util",
]

[[package]]
name = "thiserror"
version = "1.0.40"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "978c9a314bd8dc99be594bc3c175faaa9794be04a5a5e153caba6915336cebac"
dependencies = [
 "thiserror-impl",
]

[[package]]
name = "thiserror-impl"
version = "1.0.40"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f9456a42c5b0d803c8cd86e73dd7cc9edd429499f37a3550d286d5e86720569f"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.16",
]

[[package]]
name = "thread_local"
version = "1.1.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5516c27b78311c50bf42c071425c560ac799b11c30b31f87e3081965fe5e0180"
dependencies = [
 "once_cell",
]

[[package]]
name = "threadpool"
version = "1.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d050e60b33d41c19108b32cea32164033a9013fe3b46cbd4457559bfbf77afaa"
dependencies = [
 "num_cpus",
]

[[package]]
name = "tiff"
version = "0.6.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9a53f4706d65497df0c4349241deddf35f84cee19c87ed86ea8ca590f4464437"
dependencies = [
 "jpeg-decoder 0.1.22",
 "miniz_oxide 0.4.4",
 "weezl",
]

[[package]]
name = "tiff"
version = "0.8.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7449334f9ff2baf290d55d73983a7d6fa15e01198faef72af07e2a8db851e471"
dependencies = [
 "flate2",
 "jpeg-decoder 0.3.0",
 "weezl",
]

[[package]]
name = "time"
version = "0.1.44"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6db9e6914ab8b1ae1c260a4ae7a49b6c5611b40328a735b21862567685e73255"
dependencies = [
 "libc",
 "wasi 0.10.0+wasi-snapshot-preview1",
 "winapi",
]

[[package]]
name = "tiny-skia"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "df8493a203431061e901613751931f047d1971337153f96d0e5e363d6dbf6a67"
dependencies = [
 "arrayref",
 "arrayvec",
 "bytemuck",
 "cfg-if",
 "png 0.17.7",
 "tiny-skia-path",
]

[[package]]
name = "tiny-skia-path"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "adbfb5d3f3dd57a0e11d12f4f13d4ebbbc1b5c15b7ab0a156d030b21da5f677c"
dependencies = [
 "arrayref",
 "bytemuck",
 "strict-num",
]

[[package]]
name = "tinyvec"
version = "1.6.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "87cc5ceb3875bb20c2890005a4e226a4651264a5c75edb2421b52861a0a0cb50"
dependencies = [
 "tinyvec_macros",
]

[[package]]
name = "tinyvec_macros"
version = "0.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "cda74da7e1a664f795bb1f8a87ec406fb89a02522cf6e50620d016add6dbbf5c"

[[package]]
name = "tokio"
version = "1.28.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0aa32867d44e6f2ce3385e89dceb990188b8bb0fb25b0cf576647a6f98ac5105"
dependencies = [
 "autocfg",
 "bytes",
 "libc",
 "mio",
 "num_cpus",
 "parking_lot",
 "pin-project-lite",
 "signal-hook-registry",
 "socket2",
 "tokio-macros",
 "windows-sys 0.48.0",
]

[[package]]
name = "tokio-macros"
version = "2.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "630bdcf245f78637c13ec01ffae6187cca34625e8c63150d424b59e55af2675e"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.16",
]

[[package]]
name = "toml"
version = "0.5.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8d82e1a7758622a465f8cee077614c73484dac5b836c02ff6a40d5d1010324d7"
dependencies = [
 "serde",
]

[[package]]
name = "tracing"
version = "0.1.37"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8ce8c33a8d48bd45d624a6e523445fd21ec13d3653cd51f681abf67418f54eb8"
dependencies = [
 "cfg-if",
 "pin-project-lite",
 "tracing-attributes",
 "tracing-core",
]

[[package]]
name = "tracing-attributes"
version = "0.1.24"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0f57e3ca2a01450b1a921183a9c9cbfda207fd822cef4ccb00a65402cbba7a74"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 2.0.16",
]

[[package]]
name = "tracing-core"
version = "0.1.31"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0955b8137a1df6f1a2e9a37d8a6656291ff0297c1a97c24e0d8425fe2312f79a"
dependencies = [
 "once_cell",
]

[[package]]
name = "tracing-subscriber"
version = "0.3.15"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "60db860322da191b40952ad9affe65ea23e7dd6a5c442c2c42865810c6ab8e6b"
dependencies = [
 "sharded-slab",
 "thread_local",
 "tracing-core",
]

[[package]]
name = "tracing-wasm"
version = "0.2.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4575c663a174420fa2d78f4108ff68f65bf2fbb7dd89f33749b6e826b3626e07"
dependencies = [
 "tracing",
 "tracing-subscriber",
 "wasm-bindgen",
]

[[package]]
name = "ttf-parser"
version = "0.19.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "44dcf002ae3b32cd25400d6df128c5babec3927cd1eb7ce813cfff20eb6c3746"

[[package]]
name = "typenum"
version = "1.15.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "dcf81ac59edc17cc8697ff311e8f5ef2d99fcbd9817b34cec66f90b6c3dfd987"

[[package]]
name = "uds_windows"
version = "1.0.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ce65604324d3cce9b966701489fbd0cf318cb1f7bd9dd07ac9a4ee6fb791930d"
dependencies = [
 "tempfile",
 "winapi",
]

[[package]]
name = "unicode-bidi"
version = "0.3.8"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "099b7128301d285f79ddd55b9a83d5e6b9e97c92e0ea0daebee7263e932de992"

[[package]]
name = "unicode-ident"
version = "1.0.3"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c4f5b37a154999a8f3f98cc23a628d850e154479cd94decf3414696e12e31aaf"

[[package]]
name = "unicode-normalization"
version = "0.1.21"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "854cbdc4f7bc6ae19c820d44abdc3277ac3e1b2b93db20a636825d9322fb60e6"
dependencies = [
 "tinyvec",
]

[[package]]
name = "url"
version = "2.2.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "a507c383b2d33b5fc35d1861e77e6b383d158b2da5e14fe51b83dfedf6fd578c"
dependencies = [
 "form_urlencoded",
 "idna",
 "matches",
 "percent-encoding",
]

[[package]]
name = "vec_map"
version = "0.8.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f1bddf1187be692e79c5ffeab891132dfb0f236ed36a43c7ed39f1165ee20191"

[[package]]
name = "version_check"
version = "0.9.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "49874b5167b65d7193b8aba1567f5c7d93d001cafc34600cee003eda787e483f"

[[package]]
name = "waker-fn"
version = "1.1.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9d5b2c62b4012a3e1eca5a7e077d13b3bf498c4073e33ccd58626607748ceeca"

[[package]]
name = "walkdir"
version = "2.3.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "808cf2735cd4b6866113f648b791c6adc5714537bc222d9347bb203386ffda56"
dependencies = [
 "same-file",
 "winapi",
 "winapi-util",
]

[[package]]
name = "wasi"
version = "0.10.0+wasi-snapshot-preview1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1a143597ca7c7793eff794def352d41792a93c481eb1042423ff7ff72ba2c31f"

[[package]]
name = "wasi"
version = "0.11.0+wasi-snapshot-preview1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9c8d87e72b64a3b4db28d11ce29237c246188f4f51057d65a7eab63b7987e423"

[[package]]
name = "wasm-bindgen"
version = "0.2.84"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "31f8dcbc21f30d9b8f2ea926ecb58f6b91192c17e9d33594b3df58b2007ca53b"
dependencies = [
 "cfg-if",
 "serde",
 "serde_json",
 "wasm-bindgen-macro",
]

[[package]]
name = "wasm-bindgen-backend"
version = "0.2.84"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "95ce90fd5bcc06af55a641a86428ee4229e44e07033963a2290a8e241607ccb9"
dependencies = [
 "bumpalo",
 "log",
 "once_cell",
 "proc-macro2",
 "quote",
 "syn 1.0.107",
 "wasm-bindgen-shared",
]

[[package]]
name = "wasm-bindgen-futures"
version = "0.4.33"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "23639446165ca5a5de86ae1d8896b737ae80319560fbaa4c2887b7da6e7ebd7d"
dependencies = [
 "cfg-if",
 "js-sys",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "wasm-bindgen-macro"
version = "0.2.84"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4c21f77c0bedc37fd5dc21f897894a5ca01e7bb159884559461862ae90c0b4c5"
dependencies = [
 "quote",
 "wasm-bindgen-macro-support",
]

[[package]]
name = "wasm-bindgen-macro-support"
version = "0.2.84"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2aff81306fcac3c7515ad4e177f521b5c9a15f2b08f4e32d823066102f35a5f6"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.107",
 "wasm-bindgen-backend",
 "wasm-bindgen-shared",
]

[[package]]
name = "wasm-bindgen-shared"
version = "0.2.84"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0046fef7e28c3804e5e38bfa31ea2a0f73905319b677e57ebe37e49358989b5d"

[[package]]
name = "wasm-logger"
version = "0.2.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "074649a66bb306c8f2068c9016395fa65d8e08d2affcbf95acf3c24c3ab19718"
dependencies = [
 "log",
 "wasm-bindgen",
 "web-sys",
]

[[package]]
name = "wayland-client"
version = "0.29.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "3f3b068c05a039c9f755f881dc50f01732214f5685e379829759088967c46715"
dependencies = [
 "bitflags 1.3.2",
 "downcast-rs",
 "libc",
 "nix 0.24.2",
 "scoped-tls",
 "wayland-commons",
 "wayland-scanner",
 "wayland-sys 0.29.5",
]

[[package]]
name = "wayland-commons"
version = "0.29.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8691f134d584a33a6606d9d717b95c4fa20065605f798a3f350d78dced02a902"
dependencies = [
 "nix 0.24.2",
 "once_cell",
 "smallvec",
 "wayland-sys 0.29.5",
]

[[package]]
name = "wayland-cursor"
version = "0.29.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6865c6b66f13d6257bef1cd40cbfe8ef2f150fb8ebbdb1e8e873455931377661"
dependencies = [
 "nix 0.24.2",
 "wayland-client",
 "xcursor",
]

[[package]]
name = "wayland-protocols"
version = "0.29.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b950621f9354b322ee817a23474e479b34be96c2e909c14f7bc0100e9a970bc6"
dependencies = [
 "bitflags 1.3.2",
 "wayland-client",
 "wayland-commons",
 "wayland-scanner",
]

[[package]]
name = "wayland-scanner"
version = "0.29.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8f4303d8fa22ab852f789e75a967f0a2cdc430a607751c0499bada3e451cbd53"
dependencies = [
 "proc-macro2",
 "quote",
 "xml-rs",
]

[[package]]
name = "wayland-sys"
version = "0.29.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "be12ce1a3c39ec7dba25594b97b42cb3195d54953ddb9d3d95a7c3902bc6e9d4"
dependencies = [
 "dlib",
 "lazy_static",
 "pkg-config",
]

[[package]]
name = "wayland-sys"
version = "0.30.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "96b2a02ac608e07132978689a6f9bf4214949c85998c247abadd4f4129b1aa06"
dependencies = [
 "dlib",
 "lazy_static",
 "log",
 "pkg-config",
]

[[package]]
name = "web-sys"
version = "0.3.61"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e33b99f4b23ba3eec1a53ac264e35a755f00e966e0065077d6027c0f575b0b97"
dependencies = [
 "js-sys",
 "wasm-bindgen",
]

[[package]]
name = "webbrowser"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e74f5ff7786c4c21f61ba8e30ea29c9745f06fca0a4a02d083b3c662583399e8"
dependencies = [
 "core-foundation",
 "dirs",
 "jni",
 "log",
 "ndk-context",
 "objc",
 "raw-window-handle",
 "url",
 "web-sys",
 "windows 0.43.0",
]

[[package]]
name = "weezl"
version = "0.1.7"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9193164d4de03a926d909d3bc7c30543cecb35400c02114792c2cae20d5e2dbb"

[[package]]
name = "winapi"
version = "0.3.9"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5c839a674fcd7a98952e593242ea400abe93992746761e38641405d28b00f419"
dependencies = [
 "winapi-i686-pc-windows-gnu",
 "winapi-x86_64-pc-windows-gnu",
]

[[package]]
name = "winapi-i686-pc-windows-gnu"
version = "0.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ac3b87c63620426dd9b991e5ce0329eff545bccbbb34f3be09ff6fb6ab51b7b6"

[[package]]
name = "winapi-util"
version = "0.1.5"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "70ec6ce85bb158151cae5e5c87f95a8e97d2c0c4b001223f33a334e3ce5de178"
dependencies = [
 "winapi",
]

[[package]]
name = "winapi-wsapoll"
version = "0.1.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "44c17110f57155602a80dca10be03852116403c9ff3cd25b079d666f2aa3df6e"
dependencies = [
 "winapi",
]

[[package]]
name = "winapi-x86_64-pc-windows-gnu"
version = "0.4.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "712e227841d057c1ee1cd2fb22fa7e5a5461ae8e48fa2ca79ec42cfc1931183f"

[[package]]
name = "windows"
version = "0.42.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0286ba339aa753e70765d521bb0242cc48e1194562bfa2a2ad7ac8a6de28f5d5"
dependencies = [
 "windows-implement",
 "windows_aarch64_gnullvm 0.42.2",
 "windows_aarch64_msvc 0.42.2",
 "windows_i686_gnu 0.42.2",
 "windows_i686_msvc 0.42.2",
 "windows_x86_64_gnu 0.42.2",
 "windows_x86_64_gnullvm 0.42.2",
 "windows_x86_64_msvc 0.42.2",
]

[[package]]
name = "windows"
version = "0.43.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "04662ed0e3e5630dfa9b26e4cb823b817f1a9addda855d973a9458c236556244"
dependencies = [
 "windows_aarch64_gnullvm 0.42.2",
 "windows_aarch64_msvc 0.42.2",
 "windows_i686_gnu 0.42.2",
 "windows_i686_msvc 0.42.2",
 "windows_x86_64_gnu 0.42.2",
 "windows_x86_64_gnullvm 0.42.2",
 "windows_x86_64_msvc 0.42.2",
]

[[package]]
name = "windows-implement"
version = "0.42.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9539b6bd3eadbd9de66c9666b22d802b833da7e996bc06896142e09854a61767"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.107",
]

[[package]]
name = "windows-sys"
version = "0.36.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ea04155a16a59f9eab786fe12a4a450e75cdb175f9e0d80da1e17db09f55b8d2"
dependencies = [
 "windows_aarch64_msvc 0.36.1",
 "windows_i686_gnu 0.36.1",
 "windows_i686_msvc 0.36.1",
 "windows_x86_64_gnu 0.36.1",
 "windows_x86_64_msvc 0.36.1",
]

[[package]]
name = "windows-sys"
version = "0.42.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5a3e1820f08b8513f676f7ab6c1f99ff312fb97b553d30ff4dd86f9f15728aa7"
dependencies = [
 "windows_aarch64_gnullvm 0.42.2",
 "windows_aarch64_msvc 0.42.2",
 "windows_i686_gnu 0.42.2",
 "windows_i686_msvc 0.42.2",
 "windows_x86_64_gnu 0.42.2",
 "windows_x86_64_gnullvm 0.42.2",
 "windows_x86_64_msvc 0.42.2",
]

[[package]]
name = "windows-sys"
version = "0.45.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "75283be5efb2831d37ea142365f009c02ec203cd29a3ebecbc093d52315b66d0"
dependencies = [
 "windows-targets 0.42.2",
]

[[package]]
name = "windows-sys"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "677d2418bec65e3338edb076e806bc1ec15693c5d0104683f2efe857f61056a9"
dependencies = [
 "windows-targets 0.48.0",
]

[[package]]
name = "windows-targets"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8e5180c00cd44c9b1c88adb3693291f1cd93605ded80c250a75d472756b4d071"
dependencies = [
 "windows_aarch64_gnullvm 0.42.2",
 "windows_aarch64_msvc 0.42.2",
 "windows_i686_gnu 0.42.2",
 "windows_i686_msvc 0.42.2",
 "windows_x86_64_gnu 0.42.2",
 "windows_x86_64_gnullvm 0.42.2",
 "windows_x86_64_msvc 0.42.2",
]

[[package]]
name = "windows-targets"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7b1eb6f0cd7c80c79759c929114ef071b87354ce476d9d94271031c0497adfd5"
dependencies = [
 "windows_aarch64_gnullvm 0.48.0",
 "windows_aarch64_msvc 0.48.0",
 "windows_i686_gnu 0.48.0",
 "windows_i686_msvc 0.48.0",
 "windows_x86_64_gnu 0.48.0",
 "windows_x86_64_gnullvm 0.48.0",
 "windows_x86_64_msvc 0.48.0",
]

[[package]]
name = "windows_aarch64_gnullvm"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "597a5118570b68bc08d8d59125332c54f1ba9d9adeedeef5b99b02ba2b0698f8"

[[package]]
name = "windows_aarch64_gnullvm"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "91ae572e1b79dba883e0d315474df7305d12f569b400fcf90581b06062f7e1bc"

[[package]]
name = "windows_aarch64_msvc"
version = "0.36.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9bb8c3fd39ade2d67e9874ac4f3db21f0d710bee00fe7cab16949ec184eeaa47"

[[package]]
name = "windows_aarch64_msvc"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e08e8864a60f06ef0d0ff4ba04124db8b0fb3be5776a5cd47641e942e58c4d43"

[[package]]
name = "windows_aarch64_msvc"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "b2ef27e0d7bdfcfc7b868b317c1d32c641a6fe4629c171b8928c7b08d98d7cf3"

[[package]]
name = "windows_i686_gnu"
version = "0.36.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "180e6ccf01daf4c426b846dfc66db1fc518f074baa793aa7d9b9aaeffad6a3b6"

[[package]]
name = "windows_i686_gnu"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c61d927d8da41da96a81f029489353e68739737d3beca43145c8afec9a31a84f"

[[package]]
name = "windows_i686_gnu"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "622a1962a7db830d6fd0a69683c80a18fda201879f0f447f065a3b7467daa241"

[[package]]
name = "windows_i686_msvc"
version = "0.36.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "e2e7917148b2812d1eeafaeb22a97e4813dfa60a3f8f78ebe204bcc88f12f024"

[[package]]
name = "windows_i686_msvc"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "44d840b6ec649f480a41c8d80f9c65108b92d89345dd94027bfe06ac444d1060"

[[package]]
name = "windows_i686_msvc"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4542c6e364ce21bf45d69fdd2a8e455fa38d316158cfd43b3ac1c5b1b19f8e00"

[[package]]
name = "windows_x86_64_gnu"
version = "0.36.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "4dcd171b8776c41b97521e5da127a2d86ad280114807d0b2ab1e462bc764d9e1"

[[package]]
name = "windows_x86_64_gnu"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "8de912b8b8feb55c064867cf047dda097f92d51efad5b491dfb98f6bbb70cb36"

[[package]]
name = "windows_x86_64_gnu"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ca2b8a661f7628cbd23440e50b05d705db3686f894fc9580820623656af974b1"

[[package]]
name = "windows_x86_64_gnullvm"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "26d41b46a36d453748aedef1486d5c7a85db22e56aff34643984ea85514e94a3"

[[package]]
name = "windows_x86_64_gnullvm"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7896dbc1f41e08872e9d5e8f8baa8fdd2677f29468c4e156210174edc7f7b953"

[[package]]
name = "windows_x86_64_msvc"
version = "0.36.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "c811ca4a8c853ef420abd8592ba53ddbbac90410fab6903b3e79972a631f7680"

[[package]]
name = "windows_x86_64_msvc"
version = "0.42.2"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "9aec5da331524158c6d1a4ac0ab1541149c0b9505fde06423b02f5ef0106b9f0"

[[package]]
name = "windows_x86_64_msvc"
version = "0.48.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "1a515f5799fe4961cb532f983ce2b23082366b898e52ffbce459c86f67c8378a"

[[package]]
name = "winit"
version = "0.28.6"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "866db3f712fffba75d31bf0cdecf357c8aeafd158c5b7ab51dba2a2b2d47f196"
dependencies = [
 "android-activity",
 "bitflags 1.3.2",
 "cfg_aliases",
 "core-foundation",
 "core-graphics",
 "dispatch",
 "instant",
 "libc",
 "log",
 "mio",
 "ndk",
 "objc2",
 "once_cell",
 "orbclient",
 "percent-encoding",
 "raw-window-handle",
 "redox_syscall 0.3.5",
 "sctk-adwaita",
 "smithay-client-toolkit",
 "wasm-bindgen",
 "wayland-client",
 "wayland-commons",
 "wayland-protocols",
 "wayland-scanner",
 "web-sys",
 "windows-sys 0.45.0",
 "x11-dl",
]

[[package]]
name = "winnow"
version = "0.4.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "ae8970b36c66498d8ff1d66685dc86b91b29db0c7739899012f63a63814b4b28"
dependencies = [
 "memchr",
]

[[package]]
name = "x11-dl"
version = "2.20.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "0c83627bc137605acc00bb399c7b908ef460b621fc37c953db2b09f88c449ea6"
dependencies = [
 "lazy_static",
 "libc",
 "pkg-config",
]

[[package]]
name = "x11rb"
version = "0.10.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "592b4883219f345e712b3209c62654ebda0bb50887f330cbd018d0f654bfd507"
dependencies = [
 "gethostname",
 "nix 0.24.2",
 "winapi",
 "winapi-wsapoll",
 "x11rb-protocol",
]

[[package]]
name = "x11rb-protocol"
version = "0.10.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "56b245751c0ac9db0e006dc812031482784e434630205a93c73cfefcaabeac67"
dependencies = [
 "nix 0.24.2",
]

[[package]]
name = "xcursor"
version = "0.3.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "463705a63313cd4301184381c5e8042f0a7e9b4bb63653f216311d4ae74690b7"
dependencies = [
 "nom",
]

[[package]]
name = "xdg-home"
version = "1.0.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "2769203cd13a0c6015d515be729c526d041e9cf2c0cc478d57faee85f40c6dcd"
dependencies = [
 "nix 0.26.2",
 "winapi",
]

[[package]]
name = "xml-rs"
version = "0.8.4"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "d2d7d3948613f75c98fd9328cfdcc45acc4d360655289d0a7d4ec931392200a3"

[[package]]
name = "zbus"
version = "3.13.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "6c3d77c9966c28321f1907f0b6c5a5561189d1f7311eea6d94180c6be9daab29"
dependencies = [
 "async-broadcast",
 "async-executor",
 "async-fs",
 "async-io",
 "async-lock",
 "async-process",
 "async-recursion",
 "async-task",
 "async-trait",
 "byteorder",
 "derivative",
 "enumflags2",
 "event-listener",
 "futures-core",
 "futures-sink",
 "futures-util",
 "hex",
 "nix 0.26.2",
 "once_cell",
 "ordered-stream",
 "rand",
 "serde",
 "serde-xml-rs",
 "serde_repr",
 "sha1",
 "static_assertions",
 "tracing",
 "uds_windows",
 "winapi",
 "xdg-home",
 "zbus_macros",
 "zbus_names",
 "zvariant",
]

[[package]]
name = "zbus_macros"
version = "3.13.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "f6e341d12edaff644e539ccbbf7f161601294c9a84ed3d7e015da33155b435af"
dependencies = [
 "proc-macro-crate",
 "proc-macro2",
 "quote",
 "regex",
 "syn 1.0.107",
 "winnow",
 "zvariant_utils",
]

[[package]]
name = "zbus_names"
version = "2.5.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "82441e6033be0a741157a72951a3e4957d519698f3a824439cc131c5ba77ac2a"
dependencies = [
 "serde",
 "static_assertions",
 "zvariant",
]

[[package]]
name = "zvariant"
version = "3.14.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "622cc473f10cef1b0d73b7b34a266be30ebdcfaea40ec297dd8cbda088f9f93c"
dependencies = [
 "byteorder",
 "enumflags2",
 "libc",
 "serde",
 "static_assertions",
 "zvariant_derive",
]

[[package]]
name = "zvariant_derive"
version = "3.14.0"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "5d9c1b57352c25b778257c661f3c4744b7cefb7fc09dd46909a153cce7773da2"
dependencies = [
 "proc-macro-crate",
 "proc-macro2",
 "quote",
 "syn 1.0.107",
 "zvariant_utils",
]

[[package]]
name = "zvariant_utils"
version = "1.0.1"
source = "registry+https://github.com/rust-lang/crates.io-index"
checksum = "7234f0d811589db492d16893e3f21e8e2fd282e6d01b0cddee310322062cc200"
dependencies = [
 "proc-macro2",
 "quote",
 "syn 1.0.107",
]

```

`Cargo.toml`:

```toml
[workspace]
members = ["debugger", "debugger-web" , "gb", "integration-tests", "gb-web"]
resolver = "2"

[profile.release]
lto = true
opt-level = 3

```

`README.md`:

```md
<div align="center">
  <h1><img src="./browser/assets/images/feather.svg" height="20" /> FeatherGB</h1>
  Just another GameBoy emulator written in Rust 🦀

  <p align="center">
    <img alt="GameBoy" src="./browser/assets/images/screen-gb.png" />
  </p>

  <p align="center">
    <img alt="Debugger" src="./browser/assets/images/screen-debugger.png" />
  </p>
</div>

## Info

This is my first project in Rust, so many patterns might not be ideal. I also wanted to try WebAssembly a little bit.

## Status

The emulator is somehow accurate - the CPU is cycle-accurate and the emulator passes many tests, although the PPU's accuracy needs to be improved a lot. For more info see tests results below.

## Test results

The emulator is tested against popular test suites such as [blargg's test](https://github.com/retrio/gb-test-roms), [mooneye test suite](https://github.com/Gekkio/mooneye-test-suite) etc.
These test suites are linked as git submodules (see `.gitmodules` file for details).

Generated test report is [here](./docs/results/results.md)

## Modes

The emulator can be run in 2 modes - the normal mode (shows just GameBoy's display) and the debugger mode (using [egui](https://github.com/emilk/egui)). Both are available for the desktop and the browser.

### Desktop

- Standard - rendered by SDL2 (should be cross platform, but I've tested only MacOS)
- Debugger - rendered by egui (using glium as backend)

### Browser

Based on React & TypeScript in general

- Standard - WebAssembly with some stylesheets
- Debugger - WebAssembly with egui (using webgl as backend)

## TODOs

No specific priority here

- standard (play) mode
  - support for custom controls + gamepad
- APU
  - audio + video synchronization
  - channel 4 implementation
- FIFO & Fetcher for sprites
- save & load
- make PPU more accurate
  - pass all [wilbertpol's tests](https://github.com/Amjad50/mooneye-gb)
  - pass some [mealybug-tearoom-tests](https://github.com/mattcurrie/mealybug-tearoom-tests)
- memory bus conflicts
- GameBoy Color support
  - implement HDMA & GDMA

## Project structure

- `/gb` - GB emulator core (Rust)
- `/debugger` - debugger core with egui (Rust)
- `/desktop` - desktop version of debugger using glium (Rust)
- `/debugger-web` - browser version of debugger using wasm (Rust)
- `/browser` - frontend SPA
- `/integration-tests` - ROM tests

## Development requirements

- wasm-pack - `cargo install wasm-pack`

## Resources

### Links

- General GB documentation https://gbdev.io/pandocs/
- PPU details https://hacktixme.ga/GBEDG/
- opcode table https://izik1.github.io/gbops/
- Memory banks https://github.com/Gekkio/gb-ctr
- PPU interrupts timing https://github.com/AntonioND/giibiiadvance/blob/master/docs/TCAGBD.pdf
- Audio + video sync tips https://near.sh/articles/audio/dynamic-rate-control
- Audio basics https://nightshade256.github.io/2021/03/27/gb-sound-emulation.html
- Audio overview https://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware
- PPU fetcher timing http://blog.kevtris.org/blogfiles/Nitty%20Gritty%20Gameboy%20VRAM%20Timing.txt

### Test Roms

- The famous Mooneye test suite https://github.com/Gekkio/mooneye-test-suite
- Wilbertpol's tests https://github.com/Amjad50/mooneye-gb
- Mealybug Tearoom Tests (aka PPU torture tests) https://github.com/mattcurrie/mealybug-tearoom-tests
- DMG ACID2 test https://github.com/mattcurrie/dmg-acid2
- various tests from Optix https://github.com/Hacktix/scribbltests
- various window tests from Expo https://github.com/Powerlated/TurtleTests/

### Fonts

- Nintendo - Pretendo - https://fontmeme.com/fonts/pretendo-font/
- GameBoy - Gill Sans - https://www.myfonts.com/fonts/mti/gill-sans/
- DMG Buttons - NES Controller - https://www.deviantart.com/mrshrike/art/NES-Console-Controller-Font-141383845

### Images

- Feather icon - https://iconape.com/cape-feather-super-mario-world-logo-logo-icon-svg-png.html
- Gameboy icon - https://graphicburger.com/80s-gadgets-40-free-icons/

```

`browser/assets/images/feather.svg`:

```svg
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1281.73pt" height="1288.64pt" viewBox="0 0 1281.73 1288.64" version="1.1">
<defs>
<clipPath id="clip1">
  <path d="M 878 0 L 1281.730469 0 L 1281.730469 403 L 878 403 Z M 878 0 "/>
</clipPath>
<clipPath id="clip2">
  <path d="M 0 1125 L 160 1125 L 160 1288.640625 L 0 1288.640625 Z M 0 1125 "/>
</clipPath>
</defs>
<g id="surface1">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 199.09375 1098.460938 L 238.714844 725.027344 L 317.957031 725.027344 L 317.957031 563.582031 L 397.195313 563.582031 L 397.195313 484.34375 L 476.4375 484.34375 L 476.4375 402.132813 L 555.679688 402.132813 L 557.164063 322.894531 L 634.921875 322.894531 L 636.878906 240.691406 L 718.125 234.738281 L 718.125 161.449219 L 754.773438 161.449219 L 920.191406 121.828125 L 920.191406 362.515625 L 1080.410156 362.515625 L 1081.640625 566.539063 L 598.273438 1012.414063 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 317.460938 964.734375 L 399.675781 964.734375 L 399.675781 885.496094 L 317.460938 885.496094 Z M 317.460938 964.734375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 399.671875 885.496094 L 478.914063 885.496094 L 478.914063 806.257813 L 399.671875 806.257813 Z M 399.671875 885.496094 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 478.914063 806.742188 L 558.15625 806.742188 L 558.15625 724.046875 L 478.914063 724.046875 Z M 478.914063 806.742188 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 558.15625 724.050781 L 637.398438 724.050781 L 637.398438 644.8125 L 558.15625 644.8125 Z M 558.15625 724.050781 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 637.398438 644.796875 L 720.601563 644.796875 L 720.601563 562.601563 L 637.398438 562.601563 Z M 637.398438 644.796875 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 238.714844 1044.222656 L 317.957031 1044.222656 L 317.957031 964.734375 L 238.714844 964.734375 Z M 238.714844 1044.222656 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 156.503906 1126.179688 L 238.714844 1126.179688 L 238.714844 1043.972656 L 156.503906 1043.972656 Z M 156.503906 1126.179688 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 77.261719 1207.410156 L 159.472656 1207.410156 L 159.472656 1126.179688 L 77.261719 1126.179688 Z M 77.261719 1207.410156 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 718.867188 563.578125 L 801.328125 563.578125 L 801.328125 483.347656 L 718.867188 483.347656 Z M 718.867188 563.578125 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.699646%,79.199219%,41.19873%);fill-opacity:1;" d="M 798.355469 484.34375 L 880.570313 484.34375 L 880.570313 402.132813 L 798.355469 402.132813 Z M 798.355469 484.34375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.299866%,55.699158%,27.099609%);fill-opacity:1;" d="M 718.125 484.34375 L 798.355469 484.34375 L 798.355469 161.449219 L 718.125 161.449219 Z M 718.125 484.34375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.299866%,55.699158%,27.099609%);fill-opacity:1;" d="M 878.589844 79.238281 L 1042.371094 79.238281 L 1042.371094 159.96875 L 1121.261719 159.96875 L 1121.261719 242.679688 L 1120.761719 322.40625 L 1042.371094 322.40625 L 1042.371094 402.132813 L 878.589844 402.132813 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(93.299866%,55.699158%,27.099609%);fill-opacity:1;" d="M 798.355469 563.582031 L 959.808594 563.582031 L 959.808594 484.34375 L 798.355469 484.34375 Z M 798.355469 563.582031 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(77.999878%,46.699524%,23.899841%);fill-opacity:1;" d="M 959.808594 563.582031 L 1122.253906 563.582031 L 1122.253906 484.34375 L 959.808594 484.34375 Z M 959.808594 563.582031 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(77.999878%,46.699524%,23.899841%);fill-opacity:1;" d="M 1041.53125 322.40625 L 1120.769531 322.40625 L 1121.261719 242.679688 L 1201.5 242.679688 L 1201.5 402.132813 L 1041.53125 402.132813 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(80.39856%,80.39856%,80.39856%);fill-opacity:1;" d="M 1040.539063 484.34375 L 1122.257813 484.34375 L 1122.257813 402.132813 L 1040.539063 402.132813 Z M 1040.539063 484.34375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(80.39856%,80.39856%,80.39856%);fill-opacity:1;" d="M 959.5625 644.796875 L 1039.300781 644.796875 L 1039.300781 563.582031 L 959.5625 563.582031 Z M 959.5625 644.796875 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(80.39856%,80.39856%,80.39856%);fill-opacity:1;" d="M 880.320313 725.035156 L 960.058594 725.035156 L 960.058594 643.824219 L 880.320313 643.824219 Z M 880.320313 725.035156 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(80.39856%,80.39856%,80.39856%);fill-opacity:1;" d="M 801.078125 806.742188 L 880.816406 806.742188 L 880.816406 725.53125 L 801.078125 725.53125 Z M 801.078125 806.742188 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(80.39856%,80.39856%,80.39856%);fill-opacity:1;" d="M 718.867188 886.984375 L 801.078125 886.984375 L 801.078125 805.773438 L 718.867188 805.773438 Z M 718.867188 886.984375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(80.39856%,80.39856%,80.39856%);fill-opacity:1;" d="M 559.640625 964.734375 L 719.585938 964.734375 L 719.585938 885.496094 L 559.640625 885.496094 Z M 559.640625 964.734375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(80.39856%,80.39856%,80.39856%);fill-opacity:1;" d="M 399.671875 1044.222656 L 559.640625 1044.222656 L 559.640625 964.734375 L 399.671875 964.734375 Z M 399.671875 1044.222656 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 317.957031 563.582031 L 397.195313 563.582031 L 397.195313 484.34375 L 317.957031 484.34375 Z M 317.957031 563.582031 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 397.195313 484.34375 L 476.4375 484.34375 L 476.4375 405.105469 L 397.195313 405.105469 Z M 397.195313 484.34375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 476.4375 405.105469 L 558.652344 405.105469 L 558.652344 322.894531 L 476.4375 322.894531 Z M 476.4375 405.105469 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 558.652344 322.894531 L 637.890625 322.894531 L 637.890625 243.65625 L 558.652344 243.65625 Z M 558.652344 322.894531 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 636.878906 243.660156 L 718.125 243.660156 L 718.125 161.449219 L 636.878906 161.449219 Z M 636.878906 243.660156 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 238.714844 725.53125 L 317.957031 725.53125 L 317.957031 566.535156 L 238.714844 566.535156 Z M 238.714844 725.53125 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 718.125 161.449219 L 878.589844 161.449219 L 878.589844 79.242188 L 718.125 79.242188 Z M 718.125 161.449219 "/>
<g clip-path="url(#clip1)" clip-rule="nonzero">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 878.589844 0 L 1201.5 0 L 1201.5 82.210938 L 1281.730469 82.210938 L 1281.730469 402.132813 L 1201.5 402.132813 L 1201.5 243.660156 L 1121.261719 243.660156 L 1121.261719 161.449219 L 1041.53125 161.449219 L 1041.03125 79.238281 L 878.589844 79.238281 "/>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 1120.269531 563.582031 L 1201.492188 563.582031 L 1201.492188 402.132813 L 1120.269531 402.132813 Z M 1120.269531 563.582031 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 801.328125 885.496094 L 880.570313 885.496094 L 880.570313 806.257813 L 801.328125 806.257813 Z M 801.328125 885.496094 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 880.570313 806.742188 L 959.808594 806.742188 L 959.808594 724.046875 L 880.570313 724.046875 Z M 880.570313 806.742188 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 959.808594 724.050781 L 1039.050781 724.050781 L 1039.050781 644.8125 L 959.808594 644.8125 Z M 959.808594 724.050781 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 1039.050781 645.777344 L 1122.253906 645.777344 L 1122.253906 562.601563 L 1039.050781 562.601563 Z M 1039.050781 645.777344 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 557.660156 1043.972656 L 718.125 1043.972656 L 718.125 964.734375 L 557.660156 964.734375 Z M 557.660156 1043.972656 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 159.472656 1043.972656 L 238.714844 1043.972656 L 238.714844 725.027344 L 159.472656 725.027344 Z M 159.472656 1043.972656 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 159.472656 1205.417969 L 238.714844 1205.417969 L 238.714844 1126.179688 L 159.472656 1126.179688 Z M 159.472656 1205.417969 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 77.261719 1126.179688 L 159.472656 1126.179688 L 159.472656 1044.222656 L 77.261719 1044.222656 Z M 77.261719 1126.179688 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 238.714844 1126.179688 L 559.640625 1126.179688 L 559.640625 1044.222656 L 238.714844 1044.222656 Z M 238.714844 1126.179688 "/>
<g clip-path="url(#clip2)" clip-rule="nonzero">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 0 1125.949219 L 77.792969 1125.949219 L 77.792969 1205.339844 L 159.472656 1205.339844 L 159.472656 1288.640625 L 0 1288.640625 L 0 1202.253906 "/>
</g>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(1.199341%,1.599121%,1.998901%);fill-opacity:1;" d="M 719.113281 964.734375 L 801.328125 964.734375 L 801.328125 885.496094 L 719.113281 885.496094 Z M 719.113281 964.734375 "/>
</g>
</svg>

```

`browser/assets/images/gameboy.svg`:

```svg
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">
<g>
	<g>
		<path fill="#FAF1D8" d="M17,7c0,0,0-2,2-2h31c0,0,2,0,2,2s0,48,0,48s0,8-8,8H19c0,0-2,0-2-2S17,7,17,7z"/>
	</g>
	<g>
		<path fill="#AEAEAE" d="M19,11c0,0,0-2,2-2h25c0,0,2,0,2,2s0,16,0,16s0,6-6,6H21c0,0-2,0-2-2S19,11,19,11z"/>
	</g>
	<g>
		<rect x="23" y="13" fill="#5FDB76" width="20" height="17"/>
	</g>
	<g>
		<circle fill="#FF6A8C" cx="39.5" cy="44.5" r="2.5"/>
	</g>
	<g>
		<circle fill="#FF6A8C" cx="45.5" cy="41.5" r="2.5"/>
	</g>
	<line fill="none" stroke="#3D3C3E" stroke-miterlimit="10" x1="16" y1="6.5" x2="49" y2="6.5"/>
	<rect x="20" y="4" fill="#3D3C3E" width="1" height="2"/>
	<rect x="44" y="4" fill="#3D3C3E" width="1" height="2"/>

		<line fill="none" stroke="#3D3C3E" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="36.5" y1="54.5" x2="38.5" y2="58.5"/>

		<line fill="none" stroke="#3D3C3E" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="38.5" y1="53.5" x2="40.5" y2="57.5"/>

		<line fill="none" stroke="#3D3C3E" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="40.5" y1="52.5" x2="42.5" y2="56.5"/>

		<line fill="none" stroke="#3D3C3E" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="42.5" y1="51.5" x2="44.5" y2="55.5"/>

		<line fill="none" stroke="#3D3C3E" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="44.5" y1="50.5" x2="46.5" y2="54.5"/>
	<line fill="none" stroke="#3D3C3E" stroke-linecap="round" stroke-miterlimit="10" x1="25.5" y1="52.5" x2="29.5" y2="50.5"/>
	<line fill="none" stroke="#3D3C3E" stroke-linecap="round" stroke-miterlimit="10" x1="30.5" y1="52.5" x2="34.5" y2="50.5"/>
	<g>
		<path fill="#3D3C3E" d="M47.992,4C48.453,4.013,49,4.197,49,5v47.997C48.998,53.283,48.883,60,42,60H17.012
			C16.55,59.988,16,59.806,16,59V5.012C16.012,4.55,16.195,4,17,4H47.992 M48,3H17c-2,0-2,2-2,2s0,52,0,54s2,2,2,2h25c8,0,8-8,8-8
			s0-46,0-48S48,3,48,3L48,3z"/>
	</g>
	<g>
		<path fill="#3D3C3E" d="M44.992,9C45.453,9.013,46,9.197,46,10v16c0,0.204-0.057,5-5,5H20.012C19.55,30.988,19,30.805,19,30
			V10.012C19.012,9.55,19.195,9,20,9H44.992 M45,8H20c-2,0-2,2-2,2s0,18,0,20s2,2,2,2h21c6,0,6-6,6-6s0-14,0-16S45,8,45,8L45,8z"/>
	</g>
	<g>
		<path fill="#3D3C3E" d="M41,13v15H23V13H41 M42,12H22v17h20V12L42,12z"/>
	</g>
	<g>
		<polygon fill="#AEAEAE" points="21,49 21,46 18,46 18,41 21,41 21,38 26,38 26,41 29,41 29,46 26,46 26,49 		"/>
	</g>
	<g>
		<path fill="#3D3C3E" d="M24,38v3h3v3h-3v3h-3v-3h-3v-3h3v-3H24 M24,37h-3c-0.552,0-1,0.447-1,1v2h-2c-0.552,0-1,0.447-1,1v3
			c0,0.553,0.448,1,1,1h2v2c0,0.553,0.448,1,1,1h3c0.552,0,1-0.447,1-1v-2h2c0.552,0,1-0.447,1-1v-3c0-0.553-0.448-1-1-1h-2v-2
			C25,37.447,24.552,37,24,37L24,37z"/>
	</g>
	<circle fill="#3D3C3E" cx="20.5" cy="15.5" r="0.5"/>
	<g>
		<path fill="#3D3C3E" d="M38.5,42c0.827,0,1.5,0.673,1.5,1.5S39.327,45,38.5,45S37,44.327,37,43.5S37.673,42,38.5,42 M38.5,41
			c-1.381,0-2.5,1.119-2.5,2.5s1.119,2.5,2.5,2.5s2.5-1.119,2.5-2.5S39.881,41,38.5,41L38.5,41z"/>
	</g>
	<g>
		<path fill="#3D3C3E" d="M44.5,39c0.827,0,1.5,0.673,1.5,1.5S45.327,42,44.5,42S43,41.327,43,40.5S43.673,39,44.5,39 M44.5,38
			c-1.381,0-2.5,1.119-2.5,2.5s1.119,2.5,2.5,2.5s2.5-1.119,2.5-2.5S45.881,38,44.5,38L44.5,38z"/>
	</g>
</g>
</svg>

```

`browser/assets/styles/main.css`:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: 'GillSans';
  src: url('../fonts/GillSansMediumItalic.otf');
  font-style: italic;
  font-weight: 500;
  font-display: swap;
}

@font-face {
  font-family: 'GillSans';
  src: url('../fonts/GillSansBoldItalic.otf');
  font-style: italic;
  font-weight: 700;
  font-display: swap;
}

@font-face {
  font-family: 'Pretendo';
  src: url('../fonts/Pretendo.ttf');
  font-style: normal;
  font-weight: 400;
  font-display: swap;
}

@font-face {
  font-family: 'NESController';
  src: url('../fonts/NES_Controller.ttf');
  font-style: normal;
  font-weight: 400;
  font-display: swap;
}

.font-nes {
  font-family: 'NESController';
}

.font-pretendo {
  font-family: 'Pretendo';
}

.font-gills-sans {
  font-family: 'GillSans';
}

html,
body,
#root {
  height: 100%;
  width: 100%;
}

```

`browser/components/AppRouter.tsx`:

```tsx
import { lazy, Suspense } from 'react'
import { Route, Routes } from 'react-router-dom'

import { FullscreenLoader } from './common/FullscreenLoader'
import { Landing } from './pages/Landing'

const Play = lazy(() => import('./pages/Play'))
const Debugger = lazy(() => import('./pages/Debugger'))
const TestResults = lazy(() => import('./pages/TestResults'))

export function AppRouter() {
  return (
    <Suspense fallback={<FullscreenLoader />}>
      <Routes>
        <Route path="/debug" element={<Debugger />} />
        <Route path="/test-results" element={<TestResults />} />
        <Route path="/play" element={<Play />} />
        <Route path="/" element={<Landing />} />
      </Routes>
    </Suspense>
  )
}

```

`browser/components/Root.tsx`:

```tsx
import React from 'react'

import { AppRouter } from './AppRouter'

export function Root() {
  return <AppRouter />
}

```

`browser/components/common/FullscreenLoader.tsx`:

```tsx
import styled from 'styled-components'

const Overlay = styled.div`
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
`

const Content = styled.div`
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
`

const Loader = styled.div`
  margin: 60px auto;
  font-size: 10px;
  position: relative;
  text-indent: -9999em;
  border-top: 1.1em solid rgba(255, 255, 255, 0.2);
  border-right: 1.1em solid rgba(255, 255, 255, 0.2);
  border-bottom: 1.1em solid rgba(255, 255, 255, 0.2);
  border-left: 1.1em solid #ddd;
  -webkit-transform: translateZ(0);
  -ms-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-animation: load8 1.1s infinite linear;
  animation: load8 1.1s infinite linear;

  border-radius: 50%;
  width: 10em;
  height: 10em;
  &:after {
    border-radius: 50%;
    width: 10em;
    height: 10em;
  }

  @-webkit-keyframes load8 {
    0% {
      -webkit-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }
  @keyframes load8 {
    0% {
      -webkit-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }
`

export function FullscreenLoader() {
  return (
    <Overlay>
      <Content>
        <Loader />
      </Content>
    </Overlay>
  )
}

```

`browser/components/gameboy/Display.tsx`:

```tsx
import { ReactNode } from 'react'

import { Styled } from './GameBoy.styled'

type Props = {
  children: ReactNode
  enabled?: boolean
}

export function Display(props: Props) {
  return (
    <Styled.Display>
      <Styled.DisplayTop>
        <Styled.DisplayLine width="25%" />
        <Styled.DisplayHeaderText>DOT MATRIX WITH STEREO SOUND</Styled.DisplayHeaderText>
        <Styled.DisplayLine width="12%" />
      </Styled.DisplayTop>

      <Styled.DisplayContent>
        <Styled.Battery>
          <Styled.BatteryIndicator enabled={props.enabled} />
          BATTERY
        </Styled.Battery>

        <Styled.Screen>
          {props.children}
          <Styled.ScreenOverlay />
        </Styled.Screen>
      </Styled.DisplayContent>
    </Styled.Display>
  )
}

```

`browser/components/gameboy/GameBoy.styled.ts`:

```ts
import styled, { css, ThemedStyledProps } from 'styled-components'

import { Theme } from '../../types'

const SCREEN_PADDING_LEFT = 45
const SCREEN_PADDING_TOP = 23

const BATTERY_FONT_SIZE = 6
const INDICATOR_SIZE = 9
const GAMEBOY_TEXT_SIZE = 20
const NINTENDO_TEXT_SIZE = 13
const AB_SIZE = 36
const BUTTONS_ROTATE_ANGLE = 25
const ARROW_SIZE = 26

const TEXT_COLOR = '#393C81'
const AB_COLOR = '#8A205E'

function zoom<P, T extends Theme>(value: number) {
  return (props: ThemedStyledProps<P, T>) => `${props.theme.zoom * value}px`
}

function activeButtonEffect() {
  return css`
    filter: brightness(80%);
  `
}

const Wrapper = styled.div`
  display: flex;
  justify-content: center;
`

const Device = styled.div`
  display: inline-block;
  margin: 10px;
  background: #eee;
  border-radius: 10px 10px 60px 10px;
  box-shadow: 5px 5px rgba(0, 0, 0, 0.1);
  padding: ${zoom(20)};
  color: ${TEXT_COLOR};
  position: relative;
`

const Display = styled.div`
  background-color: #777;
  border-radius: ${zoom(7)} ${zoom(7)} ${zoom(40)} ${zoom(7)};
  box-shadow: inset 0px 0px 20px 0px rgba(0, 0, 0, 0.66);
`

const DisplayTop = styled.div`
  display: flex;
  justify-content: center;
  align-items: center;
  height: ${zoom(SCREEN_PADDING_TOP)};
  font-size: ${zoom(BATTERY_FONT_SIZE)};
  font-family: Arial;
  color: #b3b3b3;
  padding: 0 ${zoom(8)} 0;
`

const DisplayHeaderText = styled.div`
  flex: 0 0 auto;
  margin: 0 ${zoom(5)};
`

const DisplayContent = styled.div`
  display: flex;
  margin-right: ${zoom(SCREEN_PADDING_LEFT)};
  padding-bottom: ${zoom(SCREEN_PADDING_TOP)};
`

const DisplayLine = styled.div<{ width: string }>`
  flex: 1 1 ${(props) => props.width};
  height: ${zoom(3)};
  background-color: #8b1d90;
  box-shadow: 0 ${zoom(2 * 3)} 0 #283593;
  margin-top: -${zoom(2 * 3)};
`

const Screen = styled.div`
  margin-left: auto;
  margin-right: auto;
  position: relative;
`

const ScreenOverlay = styled.div`
  position: absolute;
  box-shadow: inset 5px 5px 5px 0px rgba(0, 0, 0, 0.6);
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
`

const BatteryIndicator = styled.div<{ enabled?: boolean }>`
  background-color: ${(props) => (props.enabled ? `#f00` : '#000')};
  box-shadow: 0 0 3px 1px #ef5350;
  height: ${zoom(INDICATOR_SIZE)};
  width: ${zoom(INDICATOR_SIZE)};
  border-radius: ${(props) => (props.theme.zoom * INDICATOR_SIZE) / 2}px;
  margin: 10px 20px 10px 10px;
  box-shadow: inset 0px 0px 5px 0px rgba(0, 0, 0, 0.66);
`

const Battery = styled.div`
  font-family: Arial;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #b3b3b3;
  width: ${zoom(SCREEN_PADDING_LEFT)};
  font-size: ${zoom(BATTERY_FONT_SIZE)};
  margin-bottom: 80px;
`

const NintendoText = styled.div`
  letter-spacing: 1px;
  font-size: ${zoom(NINTENDO_TEXT_SIZE)};
`

const GameBoyText = styled.div`
  margin-left: ${zoom(2)};
  font-size: ${zoom(GAMEBOY_TEXT_SIZE)};
`

const TradeMarkText = styled.div`
  font-size: ${zoom(6)};
`

const CircleButton = styled.div<{ $pressed: boolean }>`
  background-color: ${AB_COLOR};
  height: ${zoom(AB_SIZE)};
  width: ${zoom(AB_SIZE)};
  border-radius: ${zoom(AB_SIZE / 2)};

  ${(props) => props.$pressed && activeButtonEffect()}
`

const CircleButtonWrapper = styled.div`
  position: relative;
`

const BaseButton = styled.div`
  font-size: ${zoom(12)};
  letter-spacing: ${zoom(1)};
`

const ButtonText = styled(BaseButton)<{ $spacing: number }>`
  margin-top: ${(props) => zoom(props.$spacing)};
`

const ButtonsAB = styled.div`
  display: inline-flex;
  margin-top: ${zoom(10)};
  margin-right: -${zoom(12)};
  transform: rotate(-${BUTTONS_ROTATE_ANGLE}deg);
  padding: ${zoom(5)};

  background-color: #dfdfdf;
  box-shadow: 0 0 0 5px #dfdfdf;
  border-radius: ${zoom(AB_SIZE)};

  > * + * {
    margin-left: ${zoom(18)};
  }

  ${ButtonText} {
    bottom: -${zoom(25)};
    position: absolute;
    left: 0;
    right: 0;
    text-align: center;
  }
`

const WideButtonContainer = styled.div`
  transform: rotate(-${BUTTONS_ROTATE_ANGLE}deg);
  display: flex;
  justify-content: center;
  flex-direction: column;
  align-items: center;
`

const WideButtonWrapper = styled.div`
  border-radius: ${zoom((9 + 2 * 5) / 2)};
  background-color: #dfdfdf;
  padding: ${zoom(5)};
`

const WideButton = styled.div<{ $pressed: boolean }>`
  background-color: #868a8d;
  width: ${zoom(38)};
  height: ${zoom(9)};
  border-radius: ${zoom(9 / 2)};
  ${(props) => props.$pressed && activeButtonEffect()}
`

const ButtonsStartSelect = styled.div`
  display: flex;
  margin-left: ${zoom(80)};
  margin-top: ${zoom(30)};
  margin-bottom: ${zoom(40)};
  ${WideButtonContainer} + ${WideButtonContainer} {
    margin-left: ${zoom(7)};
  }
`

const Arrows = styled.div``

export enum ArrowOrientation {
  HORIZONTAL,
  VERTICAL
}

const ArrowsLine = styled.div`
  display: flex;
  justify-content: center;
`

const ArrowStripe = styled.div`
  width: ${zoom(2)};
  height: 80%;
  background-color: #353535;
  margin: ${zoom(2)};
  border-radius: ${zoom(5)};
`

const BaseArrow = styled.div`
  position: relative;
  height: ${zoom(ARROW_SIZE)};
  width: ${zoom(ARROW_SIZE)};
  background-color: #1b1d1d;
`

const BaseFunctionArrow = styled(BaseArrow)<{
  $orientation: ArrowOrientation
  $pressed: boolean
}>`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: ${(props) =>
    props.$orientation === ArrowOrientation.VERTICAL ? 'row' : 'column'};

  ${ArrowStripe} {
    ${(props) => props.$pressed && activeButtonEffect()}

    ${(props) =>
      props.$orientation === ArrowOrientation.VERTICAL
        ? css`
            width: ${zoom(3)};
            height: 60%;
          `
        : css`
            height: ${zoom(3)};
            width: 60%;
          `};
  }
`

const ArrowLeft = styled(BaseFunctionArrow)`
  border-radius: ${zoom(5)} 0 0 ${zoom(5)};
`
const ArrowUp = styled(BaseFunctionArrow)`
  border-radius: ${zoom(5)} ${zoom(5)} 0 0;
`
const ArrowRight = styled(BaseFunctionArrow)`
  border-radius: 0 ${zoom(5)} ${zoom(5)} 0;
`
const ArrowDown = styled(BaseFunctionArrow)`
  border-radius: 0 0 ${zoom(5)} ${zoom(5)};
`
const ArrowCenter = styled(BaseArrow)`
  &:before {
    content: '';
    position: absolute;
    z-index: 1;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    height: ${zoom(ARROW_SIZE - 7)};
    width: ${zoom(ARROW_SIZE - 7)};
    background-color: #353535;
    border-radius: 100%;
  }
`

const Controls = styled.div`
  display: flex;
  margin-top: ${zoom(35)};
`

const Speaker = styled.div`
  height: ${zoom(48)};
  width: ${zoom(5)};
  background-color: #a7a49f;
  border-radius: ${zoom(5)};
  box-shadow: inset 0px 0px 5px 0px rgb(95 95 95 / 66%);
`

const Speakers = styled.div`
  display: inline-flex;
  transform: rotate(-28deg);
  position: absolute;
  bottom: ${zoom(19)};
  right: ${zoom(15)};

  ${Speaker} + ${Speaker} {
    margin-left: ${zoom(8)};
  }
`

export const Styled = {
  Wrapper,
  Device,
  Display,
  DisplayTop,
  DisplayHeaderText,
  DisplayContent,
  DisplayLine,
  Screen,
  ScreenOverlay,
  Battery,
  BatteryIndicator,
  NintendoText,
  GameBoyText,
  TradeMarkText,
  Controls,
  ButtonsAB,
  CircleButtonWrapper,
  CircleButton,
  ButtonText,
  ButtonsStartSelect,
  WideButton,
  WideButtonWrapper,
  WideButtonContainer,
  Arrows,
  ArrowsLine,
  ArrowUp,
  ArrowDown,
  ArrowLeft,
  ArrowRight,
  ArrowCenter,
  ArrowStripe,
  Speakers,
  Speaker
}

```

`browser/components/gameboy/GameBoy.tsx`:

```tsx
import { ForwardedRef, forwardRef } from 'react'

import { JsKeys } from '../../../gb-web/pkg'
import { useInput } from '../../hooks/useInput'
import { useTheme } from '../../hooks/useTheme'
import { Display } from './Display'
import { ArrowOrientation, Styled } from './GameBoy.styled'

export const DISPLAY_WIDTH = 160
export const DISPLAY_HEIGHT = 144

function GameBoyComponent(
  { running }: { running: boolean },
  ref: ForwardedRef<HTMLCanvasElement | null>
) {
  const { zoom } = useTheme()
  const { input, onKeyDown, onKeyUp } = useInput()

  const pressedA = input.includes(JsKeys.A)
  const pressedB = input.includes(JsKeys.B)
  const pressedStart = input.includes(JsKeys.Start)
  const pressedSelect = input.includes(JsKeys.Select)
  const pressedLeft = input.includes(JsKeys.ArrowLeft)
  const pressedRight = input.includes(JsKeys.ArrowRight)
  const pressedUp = input.includes(JsKeys.ArrowUp)
  const pressedDown = input.includes(JsKeys.ArrowDown)

  // The whole styling is kinda ugly and pixel-perfect but I don't care, I love it https://www.youtube.com/watch?v=UxxajLWwzqY
  return (
    <Styled.Wrapper>
      <Styled.Device>
        <Display enabled={running}>
          <canvas
            ref={ref}
            style={{
              display: 'block', // prevents wierd margin
              imageRendering: 'pixelated',
              zoom
            }}
            height={DISPLAY_HEIGHT}
            width={DISPLAY_WIDTH}
          />
        </Display>

        <div className="flex items-baseline">
          <Styled.NintendoText className="font-pretendo">Nintendo</Styled.NintendoText>
          <Styled.GameBoyText className="font-gills-sans font-medium italic">
            GAME&nbsp;BOY
          </Styled.GameBoyText>
          <Styled.TradeMarkText className="font-bold">TM</Styled.TradeMarkText>
        </div>

        <Styled.Controls>
          <Styled.Arrows>
            <Styled.ArrowsLine>
              <Styled.ArrowUp
                // TODO memoize?
                onPointerDown={() => onKeyDown(JsKeys.ArrowUp)}
                onPointerUp={() => onKeyUp(JsKeys.ArrowUp)}
                $orientation={ArrowOrientation.HORIZONTAL}
                $pressed={pressedUp}>
                <Styled.ArrowStripe />
                <Styled.ArrowStripe />
                <Styled.ArrowStripe />
              </Styled.ArrowUp>
            </Styled.ArrowsLine>
            <Styled.ArrowsLine>
              <Styled.ArrowLeft
                onPointerDown={() => onKeyDown(JsKeys.ArrowLeft)}
                onPointerUp={() => onKeyUp(JsKeys.ArrowLeft)}
                $orientation={ArrowOrientation.VERTICAL}
                $pressed={pressedLeft}>
                <Styled.ArrowStripe />
                <Styled.ArrowStripe />
                <Styled.ArrowStripe />
              </Styled.ArrowLeft>
              <Styled.ArrowCenter />
              <Styled.ArrowRight
                onPointerDown={() => onKeyDown(JsKeys.ArrowRight)}
                onPointerUp={() => onKeyUp(JsKeys.ArrowRight)}
                $orientation={ArrowOrientation.VERTICAL}
                $pressed={pressedRight}>
                <Styled.ArrowStripe />
                <Styled.ArrowStripe />
                <Styled.ArrowStripe />
              </Styled.ArrowRight>
            </Styled.ArrowsLine>
            <Styled.ArrowsLine>
              <Styled.ArrowDown
                onPointerDown={() => onKeyDown(JsKeys.ArrowDown)}
                onPointerUp={() => onKeyUp(JsKeys.ArrowDown)}
                $orientation={ArrowOrientation.HORIZONTAL}
                $pressed={pressedDown}>
                <Styled.ArrowStripe />
                <Styled.ArrowStripe />
                <Styled.ArrowStripe />
              </Styled.ArrowDown>
            </Styled.ArrowsLine>
          </Styled.Arrows>

          <div className="ml-auto">
            <Styled.ButtonsAB className=" font-nes">
              <Styled.CircleButtonWrapper>
                <Styled.CircleButton
                  onPointerDown={() => onKeyDown(JsKeys.B)}
                  onPointerUp={() => onKeyUp(JsKeys.B)}
                  $pressed={pressedB}
                />
                <Styled.ButtonText $spacing={10}>B</Styled.ButtonText>
              </Styled.CircleButtonWrapper>

              <Styled.CircleButtonWrapper>
                <Styled.CircleButton
                  onPointerDown={() => onKeyDown(JsKeys.A)}
                  onPointerUp={() => onKeyUp(JsKeys.A)}
                  $pressed={pressedA}
                />
                <Styled.ButtonText $spacing={10}>A</Styled.ButtonText>
              </Styled.CircleButtonWrapper>
            </Styled.ButtonsAB>
          </div>
        </Styled.Controls>

        <Styled.ButtonsStartSelect className="font-nes">
          <Styled.WideButtonContainer>
            <Styled.WideButtonWrapper>
              <Styled.WideButton
                onPointerDown={() => onKeyDown(JsKeys.Select)}
                onPointerUp={() => onKeyUp(JsKeys.Select)}
                $pressed={pressedSelect}
              />
            </Styled.WideButtonWrapper>
            <Styled.ButtonText $spacing={1}>SELECT</Styled.ButtonText>
          </Styled.WideButtonContainer>
          <Styled.WideButtonContainer>
            <Styled.WideButtonWrapper>
              <Styled.WideButton
                onPointerDown={() => onKeyDown(JsKeys.Start)}
                onPointerUp={() => onKeyUp(JsKeys.Start)}
                $pressed={pressedStart}
              />
            </Styled.WideButtonWrapper>
            <Styled.ButtonText $spacing={1}>START</Styled.ButtonText>
          </Styled.WideButtonContainer>
        </Styled.ButtonsStartSelect>

        <Styled.Speakers>
          <Styled.Speaker />
          <Styled.Speaker />
          <Styled.Speaker />
          <Styled.Speaker />
          <Styled.Speaker />
          <Styled.Speaker />
        </Styled.Speakers>
      </Styled.Device>
    </Styled.Wrapper>
  )
}

export const GameBoy = forwardRef(GameBoyComponent)

```

`browser/components/gameboy/Zoom.tsx`:

```tsx
import styled from 'styled-components'

type Props = {
  zoom: number
  onChange: (zoom: number) => void
}

const FONT_SIZE = '12px'

const Styled = {
  Icon: styled.div`
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  `,
  Wrapper: styled.div`
    font-size: ${FONT_SIZE};
    display: flex;
    align-items: center;
    justify-content: center;
  `,
  Value: styled.div`
    margin: 0 5px;
  `
}

export function Zoom(props: Props) {
  const { zoom, onChange } = props

  return (
    <Styled.Wrapper>
      <Styled.Icon>
        <button type="button" onClick={() => onChange(Math.max(1, zoom - 0.5))}>
          -
        </button>
      </Styled.Icon>
      <Styled.Value>Zoom: {zoom.toFixed(1)}</Styled.Value>
      <Styled.Icon>
        <button type="button" onClick={() => onChange(Math.min(zoom + 0.5, 5))}>
          +
        </button>
      </Styled.Icon>
    </Styled.Wrapper>
  )
}

```

`browser/components/pages/Debugger.tsx`:

```tsx
import { useEffect } from 'react'
import styled, { createGlobalStyle } from 'styled-components'

import { WebHandle } from '../../../debugger-web/pkg'
import { roms } from '../../romsList'

const CANVAS_ID = 'debugger'

const Canvas = styled.canvas`
  margin-right: auto;
  margin-left: auto;
  display: block;
  position: absolute;
  top: 0%;
  left: 50%;
  transform: translate(-50%, 0%);
`

/* Egui specific */
const GlobalStyle = createGlobalStyle`
  body {
    /* Background color for what is not covered by the egui canvas,
    or where the egui canvas is translucent. */
    background: #404040;
  }
  html {
    /* Remove touch delay: */
    touch-action: manipulation;
  }
  /* Allow canvas to fill entire web page: */
  html,
  body {
      overflow: hidden;
      margin: 0 !important;
      padding: 0 !important;
  }
`

export function Debugger() {
  useEffect(() => {
    let appHandler: WebHandle | null = null
    const loadDebugger = async () => {
      try {
        const app = await import('../../../debugger-web/pkg')
        appHandler = await app.start(CANVAS_ID, roms)
      } catch (error) {
        // eslint-disable-next-line no-console
        console.error(error)
      }
    }

    loadDebugger()

    return () => {
      appHandler?.stop_web()
      appHandler?.free()
    }
  }, [])

  return (
    <>
      <GlobalStyle />
      <Canvas id={CANVAS_ID} />
    </>
  )
}

export default Debugger

```

`browser/components/pages/Landing.tsx`:

```tsx
import { Link } from 'react-router-dom'
import styled from 'styled-components'

import { ReactComponent as Feather } from '../../assets/images/feather.svg'
import { ReactComponent as GameboyLogo } from '../../assets/images/gameboy.svg'

const Nintendo = styled.span`
  font-size: 30px;
`

const GameBoy = styled.span`
  font-size: 56px;
`

const Section = styled(Link)`
  font-size: 2em;

  &:hover {
    text-decoration: underline;
  }
`

export function Landing() {
  return (
    <div className="flex flex-col justify-center items-center h-screen">
      <Feather className="mb-20" height={50} width={50} />
      <div className="flex items-baseline justify-center flex-wrap">
        <span className="text-xl mr-3">Just another</span>
        <div className="flex items-baseline justify-center flex-wrap">
          <Nintendo className="font-pretendo mr-2">Nintendo</Nintendo>
          <GameBoy className="font-gills-sans font-bold italic">GAME&nbsp;BOY</GameBoy>
        </div>
        <span className="text-xl ml-3">emulator</span>
      </div>
      <div className="mt-6 grid grid-cols-3 gap-4 items-center">
        <Section className="text-right" to="/play">
          Play
        </Section>
        <GameboyLogo height={100} />
        <Section className="text-left" to="/debug">
          Debug
        </Section>
      </div>
    </div>
  )
}

```

`browser/components/pages/Play.tsx`:

```tsx
import { useLocalStorage } from '@rehooks/local-storage'
import { useCallback, useEffect, useRef, useState } from 'react'
import { Link } from 'react-router-dom'
import { ThemeProvider } from 'styled-components'

import { WebEmulator } from '../../../gb-web/pkg'
import { memory } from '../../../gb-web/pkg/gb_web_bg.wasm'
import { InputContextProvider } from '../../context/InputContext'
import { useInputHandler } from '../../hooks/useInputHandler'
import { useWasmModule, WasmModule } from '../../hooks/useWasmModule'
import { Rom, Theme } from '../../types'
import { warmupAudio } from '../../utils/audio'
import { range } from '../../utils/std'
import { FullscreenLoader } from '../common/FullscreenLoader'
import { DISPLAY_HEIGHT, DISPLAY_WIDTH, GameBoy } from '../gameboy/GameBoy'
import { Zoom } from '../gameboy/Zoom'
import { Backbutton } from '../play/BackButton'
import { Cartridges } from '../play/Cartridges'
import { FpsCounter } from '../play/FpsCounter'
import { OpenButton } from '../play/UploadButton'

const DEFAULT_ZOOM = 1.5

const INITIAL_DISPLAY_COLOR = '#6D7C00'

type Props = {
  wasmModule: WasmModule
  ctx: CanvasRenderingContext2D
  bytes?: Uint8Array
  running: boolean
  soundEnabled: boolean
}

const audioContext = new AudioContext({
  sampleRate: 44100
})

function renderFrame(emulator: WebEmulator, ctx: CanvasRenderingContext2D) {
  const canvasDataPointer = emulator.get_canvas_data_pointer()
  const imageData = ctx.createImageData(DISPLAY_WIDTH, DISPLAY_HEIGHT)

  const canvasData = new Uint8Array(
    memory.buffer,
    canvasDataPointer,
    DISPLAY_WIDTH * DISPLAY_HEIGHT * 3
  )

  range(0, DISPLAY_HEIGHT).forEach((y) => {
    range(0, DISPLAY_WIDTH).forEach((x) => {
      const sourceOffset = (y * DISPLAY_WIDTH + x) * 3
      const targetOffset = (y * DISPLAY_WIDTH + x) * 4

      imageData.data[targetOffset] = canvasData[sourceOffset]
      imageData.data[targetOffset + 1] = canvasData[sourceOffset + 1]
      imageData.data[targetOffset + 2] = canvasData[sourceOffset + 2]
      imageData.data[targetOffset + 3] = 255 // alpha
    })
  })
  ctx.putImageData(imageData, 0, 0)
}

function initScreen(ctx: CanvasRenderingContext2D) {
  ctx.fillStyle = INITIAL_DISPLAY_COLOR
  ctx.fillRect(0, 0, DISPLAY_WIDTH, DISPLAY_HEIGHT)
}

const CHANNELS_COUNT = 2

// Helper component so we don't have to deal with nullable values in parent components
function DeviceHandler(props: Props) {
  const { bytes, wasmModule, running, ctx, soundEnabled } = props
  const emulator = useRef<WebEmulator>()
  const currentAudioSeconds = useRef(0)
  const loopId = useRef(0)
  const registerInputs = useInputHandler()

  // Init screen color
  useEffect(() => {
    initScreen(ctx)
  }, [ctx])

  const onAudioBufferCallback = useCallback((bufferPtr: number) => {
    const BUFFER_SIZE = wasmModule.get_audio_buffer_size()

    const audioData = new Float32Array(memory.buffer, bufferPtr, BUFFER_SIZE)

    const frameCount = audioData.length / CHANNELS_COUNT
    const audioBuffer = audioContext.createBuffer(
      CHANNELS_COUNT,
      frameCount,
      audioContext.sampleRate
    )
    for (let channel = 0; channel < CHANNELS_COUNT; channel += 1) {
      const nowBuffering = audioBuffer.getChannelData(channel)
      for (let i = 0; i < frameCount; i += 1) {
        // audio data frames are interleaved
        nowBuffering[i] = audioData[i * CHANNELS_COUNT + channel]
      }
    }
    const audioSource = audioContext.createBufferSource()
    audioSource.buffer = audioBuffer
    audioSource.connect(audioContext.destination)

    // taken from here https://github.com/Powerlated/OptimeGB/blob/master/src/core/audioplayer.ts#L91-L94
    // TODO after some time, the game gets audio delay
    // Reset time if close to buffer underrun
    if (currentAudioSeconds.current <= audioContext.currentTime + 0.02) {
      currentAudioSeconds.current = audioContext.currentTime + 0.06
    }
    audioSource.start(currentAudioSeconds.current)
    currentAudioSeconds.current += BUFFER_SIZE / CHANNELS_COUNT / audioContext.sampleRate
  }, [])

  // Create emulator on cartridge load
  useEffect(() => {
    if (!bytes) {
      return
    }

    const cartridge = new wasmModule.WebCartridge(bytes)
    currentAudioSeconds.current = 0
    emulator.current = new wasmModule.WebEmulator(cartridge, () => {})
    initScreen(ctx)

    registerInputs(emulator.current)
  }, [bytes, wasmModule, registerInputs])

  useEffect(() => {
    const e = emulator.current
    if (!e) {
      return
    }

    e.set_audio_buffer_callback(soundEnabled ? onAudioBufferCallback : () => {})
  }, [emulator.current, soundEnabled, onAudioBufferCallback])

  // Handle stop/start
  useEffect(() => {
    const e = emulator.current
    if (!e) {
      return
    }

    if (running) {
      const loop = () => {
        e.run_frame()
        renderFrame(e, ctx)
        loopId.current = window.requestAnimationFrame(loop)
      }
      loop()
    } else {
      window.cancelAnimationFrame(loopId.current)
    }
  }, [running])

  return null
}

export function Play() {
  const [zoom, setZoom] = useLocalStorage('zoom', DEFAULT_ZOOM)
  const [soundEnabled, setSoundEnabled] = useLocalStorage('sound_enabled', false)
  const [running, setRunning] = useState(false)
  const [ctx, setCtx] = useState<CanvasRenderingContext2D>()
  const [rom, setRom] = useState<Rom | null>(null)

  const theme: Theme = { zoom }
  const wasmModule = useWasmModule()

  const onRunningToggle = () => {
    warmupAudio(audioContext)
    setRunning((wasRunning) => {
      // on -> off
      if (wasRunning) {
        return false
      }

      // off -> on
      if (!wasRunning && rom) {
        return true
      }

      // off -> on without data => off
      return false
    })
  }

  // Just another null check
  const setRef = useCallback((ref: HTMLCanvasElement | null) => {
    if (!ref) {
      return
    }
    setCtx((prevCtx) => {
      if (prevCtx) {
        return prevCtx
      }
      const newCtx = ref.getContext('2d')
      if (!newCtx) {
        return prevCtx
      }
      return newCtx
    })
  }, [])

  const onCartridgeLoad = (loadedRom: Rom) => {
    setRunning(false)
    setRom(loadedRom)
  }

  if (!wasmModule) {
    return <FullscreenLoader />
  }

  return (
    <div className="select-none">
      <InputContextProvider>
        <ThemeProvider theme={theme}>
          <div className="grid grid-cols-3 justify-between items-center mx-2 pt-2">
            <Backbutton />
            <Zoom zoom={zoom} onChange={setZoom} />
            <div className="justify-end">
              <FpsCounter />
            </div>
          </div>
          <GameBoy running={running} ref={setRef} />
          {ctx && (
            <DeviceHandler
              bytes={rom?.bytes}
              wasmModule={wasmModule}
              running={running}
              soundEnabled={soundEnabled}
              ctx={ctx}
            />
          )}

          <div className="mt-2 flex justify-center items-center text-xs">
            <button
              className="mx-2 border rounded px-1 py-1"
              type="button"
              onClick={onRunningToggle}>
              {running ? 'Stop' : 'Run'}
            </button>

            <OpenButton className="mx-2 border rounded px-1 py-1" onLoad={onCartridgeLoad}>
              Upload ROM
            </OpenButton>

            <label className="flex justify-center items-center" htmlFor="soundEnableCheckbox">
              <input
                id="soundEnableCheckbox"
                className="mr-1"
                type="checkbox"
                checked={soundEnabled}
                onChange={(e) => setSoundEnabled(e.currentTarget.checked)}
              />
              Enable sound
            </label>
          </div>

          {rom?.custom && <div className="mt-2 flex justify-center text-xs">{rom.name}</div>}

          <div className="mt-2 flex justify-center text-xs">
            <Cartridges selectedName={rom?.name} onCartridgeLoad={onCartridgeLoad} />
          </div>

          <div className="mt-2 flex text-center justify-center text-xs">
            <div>
              <p>Select one of the available demos or upload your custom *.gb file and press Run</p>
              <p>
                The test ROMs are available in{' '}
                <Link className="underline" to="/debug">
                  debug mode
                </Link>
                . You can see the test results{' '}
                <Link className="underline" to="/test-results">
                  here
                </Link>
                .
              </p>
            </div>
          </div>
        </ThemeProvider>
      </InputContextProvider>
    </div>
  )
}

export default Play

```

`browser/components/pages/TestResults.tsx`:

```tsx
import { createGlobalStyle } from 'styled-components'

import html from '../../../docs/results/results.md'

const GlobalStyles = createGlobalStyle`
  body {
    margin: 20px;
  }
  h1 {
    font-size: 20px;
    font-weight: 500;
    margin-bottom: 10px;
  }
  h2 {
    font-size: 18px;
    font-weight: 500;
    margin-top: 20px;
    margin-bottom: 8px;
  }
  a {
    color: blue;
    &:hover {
      text-decoration: underline;
    }
  }

  table {
    th {
      background-color: #f0f0f0;
    }
    th, td {
      border: 1px solid #dbdbdb;
      padding: 5px 10px;
    }
  }
`

function TestResults() {
  return (
    <>
      <GlobalStyles />
      <h1>Test results</h1>
      {/* eslint-disable-next-line react/no-danger */}
      <div dangerouslySetInnerHTML={{ __html: html }} />
    </>
  )
}

export default TestResults

```

`browser/components/play/BackButton.tsx`:

```tsx
import { useNavigate } from 'react-router-dom'
import styled from 'styled-components'

const Back = styled.div`
  cursor: pointer;
`

export function Backbutton() {
  const navigate = useNavigate()
  return <Back onClick={() => navigate(-1)}>←</Back>
}

```

`browser/components/play/Cartridges.tsx`:

```tsx
import { useCallback, useEffect } from 'react'

import { roms } from '../../romsList'
import { Rom } from '../../types'
import { fetchBytes } from '../../utils/std'

type Props = {
  selectedName?: string
  onCartridgeLoad: (rom: Rom) => void
}

type Option = {
  url: string
  name: string
}

const options: readonly Option[] = roms.filter((rom) =>
  [
    'demos/cgb-acid2.gbc',
    'demos/dmg-acid2.gb',
    'demos/gejmboj.gb',
    'demos/oh.gb',
    'demos/opus5.gb',
    'demos/pocket.gb'
  ].includes(rom.name)
)

const initial = options.find((rom) => rom.name === 'demos/oh.gb') || null

export function Cartridges(props: Props) {
  const onChange = useCallback((newSelected: Option | null) => {
    if (!newSelected) {
      return
    }
    fetchBytes(newSelected.url).then((bytes) =>
      props.onCartridgeLoad({ name: newSelected.name, bytes })
    )
  }, [])

  // Init load
  useEffect(() => {
    onChange(initial)
  }, [onChange])

  return (
    <table>
      <tbody>
        {options.map((option) => (
          <tr
            className={props.selectedName === option.name ? 'font-medium underline' : ''}
            key={option.url}>
            <td className="px-1">{option.name}</td>
            <td className="px-1">
              <button type="button" onClick={() => onChange(option)}>
                Load
              </button>
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  )
}

```

`browser/components/play/FpsCounter.tsx`:

```tsx
import { useEffect, useRef } from 'react'
import styled from 'styled-components'

const FONT_SIZE = 12

const CANVAS_HEIGHT = 20
const CANVAS_WIDTH = 30

const SAMPLES_COUNT = 64

const Container = styled.span`
  font-size: ${FONT_SIZE}px;
`

const Canvas = styled.canvas`
  display: inline-block;
`

const times: number[] = []

export function FpsCounter() {
  const lastTime = useRef(window.performance.now())
  const canvasRef = useRef<HTMLCanvasElement>(null)
  const loopId = useRef(0)

  useEffect(() => {
    function loop() {
      loopId.current = window.requestAnimationFrame(() => {
        const now = window.performance.now()
        const diff = now - lastTime.current
        lastTime.current = now
        const currentFps = Math.round(1000 / diff)

        times.push(currentFps)
        if (times.length > SAMPLES_COUNT) {
          times.shift()
        }

        const fps = Math.round(times.reduce((a, b) => a + b) / times.length)
        const context = canvasRef.current?.getContext('2d')
        if (context) {
          context.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT)
          context.textBaseline = 'middle'
          context.font = `12px Arial`
          context.fillText(fps.toString(), 1, CANVAS_HEIGHT / 2 + 1)
        }

        loop()
      })
    }

    loop()

    return () => window.cancelAnimationFrame(loopId.current)
  }, [])

  return (
    <Container className="flex items-center justify-end">
      Average FPS: <Canvas width={CANVAS_WIDTH} height={CANVAS_HEIGHT} ref={canvasRef} />
    </Container>
  )
}

```

`browser/components/play/UploadButton.tsx`:

```tsx
import { ChangeEvent, ReactNode } from 'react'

import { Rom } from '../../types'

type Props = {
  className?: string
  onLoad: (rom: Rom) => void
  children: ReactNode
}

export function OpenButton(props: Props) {
  const { onLoad, className, children } = props
  const onChange = (e: ChangeEvent<HTMLInputElement>) => {
    const { files } = e.currentTarget
    if (!files) {
      return
    }
    const file = files[0]
    file
      .arrayBuffer()
      .then((data) => new Uint8Array(data))
      .then((bytes) => onLoad({ name: `Custom: ${file.name}`, bytes, custom: true }))
  }

  return (
    <>
      <input
        onChange={onChange}
        accept=".gb,.gbc"
        style={{ display: 'none' }}
        id="file"
        multiple
        type="file"
      />
      <label className={className} htmlFor="file">
        {children}
      </label>
    </>
  )
}

```

`browser/context/InputContext.tsx`:

```tsx
import { createContext, ReactNode, useCallback, useState } from 'react'

import { JsKeys } from '../../gb-web/pkg'

export const InputContext = createContext<{
  input: JsKeys[]
  onKeyDown: (key: JsKeys) => void
  onKeyUp: (key: JsKeys) => void
}>({
  input: [],
  onKeyDown: () => {},
  onKeyUp: () => {}
})

export function InputContextProvider({ children }: { children: ReactNode }) {
  const [input, setInput] = useState<JsKeys[]>([])

  const onKeyUp = useCallback((key: JsKeys) => {
    setInput((prevInput) => prevInput.filter((k) => key !== k))
  }, [])

  const onKeyDown = useCallback((key: JsKeys) => {
    setInput((prevInput) => {
      if (prevInput.includes(key)) {
        return prevInput
      }
      return [...prevInput, key]
    })
  }, [])

  return (
    // eslint-disable-next-line react/jsx-no-constructed-context-values
    <InputContext.Provider value={{ input, onKeyUp, onKeyDown }}>{children}</InputContext.Provider>
  )
}

```

`browser/hooks/useInput.ts`:

```ts
import { useContext } from 'react'

import { InputContext } from '../context/InputContext'

export function useInput() {
  return useContext(InputContext)
}

```

`browser/hooks/useInputHandler.ts`:

```ts
import { useCallback, useContext, useEffect, useRef } from 'react'

import { JsKeys, WebEmulator } from '../../gb-web/pkg'
import { InputContext } from '../context/InputContext'

const keysMap: { [key in string]: JsKeys } = {
  ArrowDown: JsKeys.ArrowDown,
  ArrowUp: JsKeys.ArrowUp,
  ArrowLeft: JsKeys.ArrowLeft,
  ArrowRight: JsKeys.ArrowRight,
  // AWSD
  KeyD: JsKeys.ArrowRight,
  KeyA: JsKeys.ArrowLeft,
  KeyW: JsKeys.ArrowUp,
  KeyS: JsKeys.ArrowDown,

  KeyJ: JsKeys.A,
  KeyX: JsKeys.A,
  KeyK: JsKeys.B,
  KeyC: JsKeys.B,
  KeyB: JsKeys.Start,
  KeyN: JsKeys.Select
}

/**
 * Hook for binding keys to current instance of emulator
 */
export function useInputHandler() {
  const { onKeyDown, onKeyUp, input } = useContext(InputContext)
  const emulatorRef = useRef<WebEmulator | null>()

  // Propagate collected inputs to emulator
  useEffect(() => {
    Object.values(keysMap).forEach((key) => {
      if (input.includes(key)) {
        emulatorRef.current?.on_key_down(key)
      } else {
        emulatorRef.current?.on_key_up(key)
      }
    })
  }, [input])

  // Store pressed keyboard keys to context
  useEffect(() => {
    const onWindowKeyDown = (event: KeyboardEvent) => {
      const key = keysMap[event.code]
      if (key !== undefined) {
        onKeyDown(key)
      }
    }

    const onWindowKeyUp = (event: KeyboardEvent) => {
      const key = keysMap[event.code]
      if (key !== undefined) {
        onKeyUp(key)
      }
    }

    window.addEventListener('keydown', onWindowKeyDown)
    window.addEventListener('keyup', onWindowKeyUp)

    return () => {
      window.removeEventListener('keydown', onWindowKeyDown)
      window.removeEventListener('keyup', onWindowKeyUp)
    }
  }, [])

  const register = useCallback((emulator: WebEmulator) => {
    emulatorRef.current = emulator
  }, [])

  return register
}

```

`browser/hooks/useTheme.tsx`:

```tsx
import { useTheme as useStyledTheme } from 'styled-components'

import { Theme } from '../types'

export function useTheme() {
  const theme = useStyledTheme()

  return theme as Theme
}

```

`browser/hooks/useWasmModule.ts`:

```ts
import { useEffect, useState } from 'react'

import * as Module from '../../gb-web/pkg'

export type WasmModule = typeof Module

export function useWasmModule() {
  const [wasmModule, setWasmModule] = useState<WasmModule | null>(null)

  useEffect(() => {
    import('../../gb-web/pkg')
      .then((wasm) => {
        wasm.init()
        setWasmModule(wasm)
      })
      // eslint-disable-next-line no-console
      .catch(console.error)
  }, [])

  return wasmModule
}

```

`browser/main.tsx`:

```tsx
import './assets/styles/main.css'

import React from 'react'
import ReactDOM from 'react-dom'
import { BrowserRouter, HashRouter } from 'react-router-dom'

import { Root } from './components/Root'

// @ts-ignore
window.global ||= window

const root = document.getElementById('root')

// HashRouter is needed for gitlab pages, there is no way to use custom paths :/
const RouterComponent = USE_HASH_ROUTER ? HashRouter : BrowserRouter

ReactDOM.render(
  <RouterComponent>
    <Root />
  </RouterComponent>,
  root
)

```

`browser/types.ts`:

```ts
export type Theme = {
  zoom: number
}

export type Rom = {
  bytes: Uint8Array
  name: string
  custom?: boolean
}

```

`browser/typings.d.ts`:

```ts
/// <reference types="vite-plugin-svgr/client" />

// returns URL with file-loader
declare module '*.gb' {
  const _: string
  export = _
}

declare module '*.gbc' {
  const _: string
  export = _
}

declare module '*.md' {
  const _: string
  export = _
}

declare let USE_HASH_ROUTER: boolean

```

`browser/utils/audio.ts`:

```ts
let initialized = false

export function warmupAudio(audioContext: AudioContext) {
  if (initialized) {
    return
  }
  initialized = true
  // https://gist.github.com/kus/3f01d60569eeadefe3a1

  // Safari cannot start async audio
  // Warmup audio on RUN button click

  // Create empty buffer
  const buffer = audioContext.createBuffer(1, 1, audioContext.sampleRate)
  const source = audioContext.createBufferSource()
  source.buffer = buffer
  // Connect to output (speakers)
  source.connect(audioContext.destination)
  // Play sound
  source.start(0)
  audioContext.resume()
}

```

`browser/utils/std.ts`:

```ts
export function range(start: number, stop: number, step = 1) {
  if ((step > 0 && start >= stop) || (step < 0 && start <= stop)) {
    return []
  }

  const result = []
  for (let i = start; step > 0 ? i < stop : i > stop; i += step) {
    result.push(i)
  }

  return result
}

export function fetchBytes(url: string) {
  return fetch(url)
    .then((res) => res.arrayBuffer())
    .then((data) => new Uint8Array(data))
}

```

`debugger-web/Cargo.toml`:

```toml
[package]
name = "debugger-web"
version = "0.1.0"
authors = ["Tomáš Vojtášek <vojtasek.tomas@seznam.cz>"]
repository = "https://github.com/vojty/feather-gb"
description = "Just another GameBoy emulator written in Rust 🦀"
license = "UNLICENSED"
edition = "2021"

[lib]
crate-type =["cdylib"]


[dependencies]
console_error_panic_hook = "0.1.7"
debugger = { path = "../debugger" }
eframe = "0.21.3"
env_logger = "0.10.0"
js-sys = "0.3.61"
log = "0.4.17"
serde = { version = "1.0.160", features = ["derive"] }
serde-wasm-bindgen = "0.5.0"
wasm-bindgen = { version = "0.2.84", features = ["serde-serialize"] }
wasm-bindgen-futures = "0.4.33"
wasm-logger = "0.2.0"
tracing-wasm = "0.2.1"

[dependencies.web-sys]
version = "0.3.61"
features = [
  'Headers',
  'Request',
  'RequestInit',
  'RequestMode',
  'Response',
  'Window',
]

```

`debugger-web/src/lib.rs`:

```rs
#![forbid(unsafe_code)]
#![warn(clippy::all, rust_2018_idioms)]
#![allow(clippy::unused_unit)]

use debugger::app::Debugger;
use eframe::wasm_bindgen::{self, prelude::*};
use eframe::web::AppRunnerRef;
use roms::collect_files;

mod roms;

#[wasm_bindgen]
pub struct WebHandle {
    handle: AppRunnerRef,
}

#[wasm_bindgen]
impl WebHandle {
    #[wasm_bindgen]
    #[cfg(target_arch = "wasm32")]
    pub fn stop_web(&self) -> Result<(), wasm_bindgen::JsValue> {
        let mut app = self.handle.lock();
        app.destroy()
    }
}

/// This is the entry-point for all the web-assembly.
/// This is called once from the HTML.
/// It loads the app, installs some callbacks, then returns.
#[wasm_bindgen]
pub async fn start(canvas_id: &str, data: JsValue) -> Result<WebHandle, wasm_bindgen::JsValue> {
    // Make sure panics are logged using `console.error`
    console_error_panic_hook::set_once();

    // Redirect tracing to console.log and friends:
    tracing_wasm::try_set_as_global_default().ok(); // ignore errors, might be already set

    let roms = collect_files(data);
    let web_options = eframe::WebOptions::default();

    eframe::start_web(
        canvas_id,
        web_options,
        Box::new(|cc| Box::new(Debugger::new(cc, roms))),
    )
    .await
    .map(|handle| WebHandle { handle })
}

```

`debugger-web/src/roms.rs`:

```rs
use debugger::utils::{sanitize_name, BinarySource};
use serde::Deserialize;
use wasm_bindgen::{prelude::*, JsCast};
use wasm_bindgen_futures::JsFuture;
use web_sys::{Request, RequestInit};

#[derive(Deserialize, Clone, Debug)]
pub struct WebRom {
    name: String,
    url: String,
}

impl WebRom {
    fn sanitize_name(&mut self) {
        self.name = sanitize_name(&self.name);
    }
}

// https://github.com/emilk/egui/blob/0.17.0/egui_web/src/lib.rs#L238-L243
pub fn spawn_future<F>(future: F)
where
    F: std::future::Future<Output = ()> + 'static,
{
    wasm_bindgen_futures::spawn_local(future);
}

// Creates window.fetch request and returns binary data as Vec<u8>
async fn load_data(url: &str) -> Result<Vec<u8>, JsValue> {
    let mut opts = RequestInit::new();
    opts.method("GET");

    let request = Request::new_with_str_and_init(url, &opts)?;

    let window = web_sys::window().unwrap();
    let response = JsFuture::from(window.fetch_with_request(&request)).await?;
    assert!(response.is_instance_of::<web_sys::Response>());
    let response: web_sys::Response = response.dyn_into().unwrap();

    let array_buffer = JsFuture::from(response.array_buffer()?).await?;
    let uint8_array = js_sys::Uint8Array::new(&array_buffer);
    let bytes = uint8_array.to_vec();

    Ok(bytes)
}

impl BinarySource for WebRom {
    fn get_binary(&self, open_callback: Box<dyn FnOnce(Vec<u8>)>) {
        let data = self.clone();
        spawn_future(async move {
            let result = load_data(&data.url).await;
            match result {
                Ok(binary) => open_callback(binary),
                Err(_) => panic!("Can't load {} from {}", data.name, data.url),
            }
        });
    }

    fn get_name(&self) -> &String {
        &self.name
    }
}

pub fn collect_files(data: JsValue) -> Vec<Box<dyn BinarySource>> {
    let files: Vec<WebRom> = serde_wasm_bindgen::from_value(data).unwrap();

    let roms: Vec<Box<dyn BinarySource>> = files
        .into_iter()
        .map(|mut r| {
            r.sanitize_name();
            Box::new(r) as Box<dyn BinarySource>
        })
        .collect::<Vec<Box<dyn BinarySource>>>();

    roms
}

```

`debugger/Cargo.toml`:

```toml
[package]
name = "debugger"
version = "0.1.0"
authors = ["Tomáš Vojtášek <vojtasek.tomas@seznam.cz>"]
repository = "https://github.com/vojty/feather-gb"
description = "Just another GameBoy emulator written in Rust 🦀"
license = "UNLICENSED"
edition = "2021"


[dependencies]
log = "0.4.17"
gb = { path = "../gb" }
env_logger = "0.10.0"
globwalk = "0.8.1"
fuzzy-matcher = "0.3.7"
eframe = "0.21.3"
regex = "1.8.1"
size_format = "1.0.2"
```

`debugger/src/app.rs`:

```rs
use eframe::{
    egui::{self, TextStyle},
    epaint::{FontFamily, Vec2},
    App, Frame, Storage,
};
use gb::{
    audio::AudioDevice,
    cartridges::cartridge::Cartridge,
    emulator::{Device, Emulator},
    traits::DisplayHex,
};
use size_format::SizeFormatterBinary;
use std::sync::mpsc::Receiver;

use crate::{
    components::{
        cpu::Cpu, disassembly::Disassembly, display::Display, frame_history::FrameHistory,
        joypad::handle_inputs, maps::Maps, memory_viewer::MemoryViewer, ppu::Ppu, roms::Roms,
        tiles::Tiles,
    },
    utils::BinarySource,
};

struct Components {
    roms: Roms,
    tiles: Tiles,
    memory_viewer: MemoryViewer,
    frame_history: FrameHistory,
    display: Display,
    maps: Maps,
    cpu: Cpu,
    ppu: Ppu,
    disassembly: Disassembly,
}

type RomData = Vec<u8>;

pub struct Debugger {
    emulator: Emulator,
    device: Device,
    running: bool,
    speed: u8,
    run_until: String,

    rom_data: Option<RomData>,
    file_receiver: Option<Receiver<RomData>>,

    components: Components,
}

struct DummyAudio;

impl AudioDevice for DummyAudio {
    fn queue(&mut self, _buffer: &[f32]) {
        // TODO
    }
}

impl Debugger {
    pub fn new(_cc: &eframe::CreationContext<'_>, roms: Vec<Box<dyn BinarySource>>) -> Self {
        let cartridge = Cartridge::empty();
        let device = Device::AutoDetect;
        Self {
            file_receiver: None,
            rom_data: None,
            speed: 1,
            run_until: String::new(),
            device,
            emulator: Emulator::new(true, cartridge, Box::new(DummyAudio {}), device),
            running: false,
            components: Components {
                disassembly: Disassembly::new(),
                display: Display::new(),
                frame_history: FrameHistory::new(),
                tiles: Tiles::default(),
                roms: Roms::new(roms),
                memory_viewer: MemoryViewer::default(),
                maps: Maps::new(),
                cpu: Cpu::new(),
                ppu: Ppu::new(),
            },
        }
    }
}

impl App for Debugger {
    fn update(&mut self, ctx: &egui::Context, frame: &mut Frame) {
        let Debugger {
            running,
            emulator,
            components,
            speed,
            file_receiver,
            rom_data,
            run_until,
            device,
        } = self;
        let cpu_usage = frame.info().cpu_usage;

        // ------------------ INPUTS ----------------------
        handle_inputs(emulator, ctx);

        // ------------------ ROM load ----------------------
        if let Some(receiver) = file_receiver {
            if let Ok(result) = receiver.try_recv() {
                *file_receiver = None;
                *emulator = Emulator::new(
                    false,
                    Cartridge::from_bytes(&result),
                    Box::new(DummyAudio {}),
                    *device,
                );
                *rom_data = Some(result);
            }
        }

        egui::SidePanel::left("side_panel").show(ctx, |ui| {
            ui.heading("GameBoy Emulator");
            ui.label(format!("FPS: {:.1}", components.frame_history.fps()));
            if ui.button("Organize windows").clicked() {
                ui.ctx().memory_mut(|m| m.reset_areas());
            }

            ui.separator();

            // ------------------ CONTROLS ----------------------
            ui.heading("Controls");
            let label = if *running { "Stop" } else { "Start" };
            if ui.button(label).clicked() {
                *running = !*running;
            }

            ui.horizontal(|ui| {
                ui.label("Device");
                ui.selectable_value(device, Device::AutoDetect, "Auto detect");
                ui.selectable_value(device, Device::DMG, "DMG");
                ui.selectable_value(device, Device::CGB, "CGB");
            });
            ui.end_row();

            ui.horizontal(|ui| {
                ui.label("Emulation speed");
                for i in 1..5 {
                    ui.selectable_value(speed, i, format!("{}x", i));
                }
            });
            ui.end_row();

            ui.horizontal(|ui| {
                if ui.button("Next instruction").clicked() {
                    emulator.run_instruction();
                }

                if ui.button("Next frame").clicked() {
                    emulator.run_frame();
                }
            });

            ui.separator();

            ui.horizontal(|ui| {
                ui.add(
                    egui::TextEdit::singleline(run_until)
                        .desired_width(80.0)
                        .hint_text("Run until"),
                );
                if ui.button("Run until").clicked() {
                    let until: u32 = run_until.parse().unwrap();

                    // Restart & fast-forward if requested cycles are in the past
                    if emulator.cpu.total_cycles > until {
                        let cart = if let Some(binary) = rom_data {
                            Cartridge::from_bytes(binary)
                        } else {
                            Cartridge::empty()
                        };
                        *emulator = Emulator::new(false, cart, Box::new(DummyAudio {}), *device);
                    }

                    while emulator.cpu.total_cycles <= until {
                        emulator.run_instruction();
                    }
                }
            });

            ui.separator();

            // ------------------ CARTRIDGE INFO ----------------------
            ui.heading("Cartridge");
            let meta = &emulator.hw.cartridge.meta;
            ui.label(format!("Name: {}", meta.get_name(),));
            ui.label(format!(
                "Type: {} (0x{})",
                meta.cartridge_type,
                meta.cartridge_type_byte.to_hex(),
            ));
            ui.label(format!(
                "ROM={:.0}B, RAM={:.0}B",
                SizeFormatterBinary::new(meta.rom_size as u64),
                SizeFormatterBinary::new(meta.ram_size as u64)
            ));
            ui.label(format!("CGB Flag: {}", meta.cgb_flag));
            ui.separator();

            // ------------------ SERIAL ----------------------
            ui.with_layout(egui::Layout::bottom_up(egui::Align::Center), |ui| {
                ui.style_mut()
                    .text_styles
                    .get_mut(&TextStyle::Body)
                    .unwrap()
                    .family = FontFamily::Monospace;
            });
        });

        if *running {
            // Run frame
            for _ in 0..*speed {
                emulator.run_frame();
            }
        }

        // ------------------ GB DISPLAY ----------------------
        components.display.show(ctx, emulator);

        egui::CentralPanel::default().show(ctx, |ui| {
            egui::warn_if_debug_build(ui);
        });

        // ------------------ TILES ----------------------
        components.tiles.show(ctx, &mut true, emulator);

        // ------------------ MEMORY ----------------------
        components.memory_viewer.show(ctx, emulator, &mut true);

        // ------------------ MAPS ----------------------
        components.maps.show(ctx, &mut true, emulator);

        // ------------------ FPS ----------------------
        components
            .frame_history
            .on_new_frame(ctx.input(|i| i.time), cpu_usage);

        // ------------------ ROMS ----------------------
        components.roms.show(ctx, &mut true, |rom| {
            let (sender, receiver) = std::sync::mpsc::channel();
            *file_receiver = Some(receiver);
            rom.get_binary(Box::new(move |loaded: Vec<u8>| {
                sender.send(loaded).unwrap();
            }));
        });

        // ------------------ CPU ----------------------
        components.cpu.show(ctx, &mut true, emulator);

        // ------------------ PPU ----------------------
        components.ppu.show(ctx, &mut true, emulator);

        // ------------------ DISASSEMBLY ----------------------
        components.disassembly.show(ctx, &mut true, emulator);

        // Continuous mode
        ctx.request_repaint();
    }

    fn warm_up_enabled(&self) -> bool {
        false
    }

    fn save(&mut self, _storage: &mut dyn Storage) {}

    fn auto_save_interval(&self) -> std::time::Duration {
        std::time::Duration::from_secs(30)
    }

    fn max_size_points(&self) -> egui::Vec2 {
        Vec2::new(2000.0, 2000.0)
    }
}

```

`debugger/src/canvas.rs`:

```rs
use eframe::{
    egui::Color32,
    epaint::{ColorImage, Vec2},
};

pub struct Canvas {
    width: usize,
    height: usize,
    scale: usize,
    pixels: Vec<Color32>,
}

fn create_pixels(size: usize) -> Vec<Color32> {
    vec![Color32::default(); size]
}

fn get_size(width: usize, height: usize, scale: usize) -> usize {
    width * scale * height * scale
}

impl Canvas {
    pub fn new(width: usize, height: usize, scale: usize) -> Self {
        let size = get_size(width, height, scale);
        let pixels = create_pixels(size);
        Self {
            width,
            height,
            scale,
            pixels,
        }
    }

    fn get_line_width(&self) -> usize {
        self.scale * self.width
    }

    fn reset_pixels(&mut self) {
        let size = get_size(self.width, self.height, self.scale);
        self.pixels = create_pixels(size);
    }

    pub fn resize_scale(&mut self, scale: usize) {
        self.scale = scale;
        self.reset_pixels();
    }

    pub fn resize_height(&mut self, height: usize) {
        self.height = height;
        self.reset_pixels();
    }

    pub fn set_pixel(&mut self, x: usize, y: usize, pixel: Color32) {
        let line_width = self.get_line_width();
        let index = x * self.scale + y * line_width * self.scale;

        // Scale
        for scaled_y in 0..self.scale {
            for scaled_x in 0..self.scale {
                let scaled_index = index + (scaled_y * line_width) + scaled_x;
                self.pixels[scaled_index] = pixel;
            }
        }
    }

    pub fn get_scale(&self) -> usize {
        self.scale
    }

    pub fn get_height(&self) -> usize {
        self.height
    }

    pub fn get_width(&self) -> usize {
        self.width
    }

    pub fn get_scaled_size(&self) -> [usize; 2] {
        [self.width * self.scale, self.height * self.scale]
    }
    pub fn get_scaled_size_vec2(&self) -> Vec2 {
        Vec2 {
            x: (self.width * self.scale) as f32,
            y: (self.height * self.scale) as f32,
        }
    }

    pub fn create_image(&self) -> ColorImage {
        ColorImage {
            size: self.get_scaled_size(),
            pixels: self.pixels.clone(),
        }
    }
}

```

`debugger/src/components/cpu.rs`:

```rs
use eframe::egui::{self};
use gb::{cpu::cpu::Reg8, emulator::Emulator, traits::DisplayHex};

use crate::ui_extensions::ExtendedUi;

pub struct Cpu;

const REGISTERS: [Reg8; 7] = [
    Reg8::A,
    Reg8::B,
    Reg8::C,
    Reg8::D,
    Reg8::E,
    Reg8::H,
    Reg8::L,
];

impl Cpu {
    pub fn new() -> Self {
        Self {}
    }

    pub fn show(&mut self, ctx: &egui::Context, open: &mut bool, e: &Emulator) {
        egui::Window::new("CPU").open(open).show(ctx, |ui| {
            ui.label("Registers");
            ui.horizontal(|ui| {
                REGISTERS.iter().enumerate().for_each(|(i, reg)| {
                    ui.label(reg.to_string());
                    let value = e.cpu.read_reg8(*reg);
                    ui.mono_label(format!("0x{}", value.to_hex()))
                        .on_hover_text(value.to_string());
                    if i < REGISTERS.len() - 1 {
                        ui.separator();
                    }
                });
            });

            ui.horizontal(|ui| {
                ui.label("PC");
                ui.mono_label(format!("0x{}", e.cpu.pc.to_hex()));

                ui.separator();

                ui.label("SP");
                ui.mono_label(format!("0x{}", e.cpu.sp.to_hex()));
            });

            ui.horizontal(|ui| {
                ui.label("Flags");
                ui.mono_label(e.cpu.f);
            });

            ui.horizontal(|ui| {
                ui.label("Frames");
                ui.mono_label(e.frames);

                ui.separator();

                ui.label("Frame cycles");
                ui.mono_label(e.cpu.frame_cycles);

                ui.separator();

                ui.label("Cycles");
                ui.mono_label(e.cpu.total_cycles);
            });
        });
    }
}

```

`debugger/src/components/disassembly.rs`:

```rs
use std::collections::VecDeque;

use eframe::{
    egui,
    egui::{RichText, Window},
};
use gb::{
    emulator::Emulator,
    traits::{DisplayHex, MemoryAccess},
};

use crate::opcodes::{OPCODES, OPCODES_CB};

pub struct Disassembly;

type Definition = (&'static str, usize); // (name, length)

const VISIBLE_LENGTH: usize = 14;

fn parse_bytes(start_address: u16, size: usize, e: &Emulator) -> Vec<u8> {
    let args: Vec<u8> = (0..size)
        .map(|i| e.hw.read_byte(start_address + (i as u16)))
        .collect();
    args
}

fn get_definition(address: u16, e: &Emulator) -> (Definition, Vec<u8>) {
    let opcode = e.hw.read_byte(address);
    let definition = OPCODES[opcode as usize];
    if opcode != 0xcb {
        return (definition, parse_bytes(address, definition.1, e));
    }
    let opcode = e.hw.read_byte(address + 1);
    let definition = OPCODES_CB[opcode as usize];
    (definition, parse_bytes(address, definition.1, e))
}

fn find_start(pc: u16, e: &Emulator) -> u16 {
    if pc == 0 {
        return 0;
    }

    let mut offset = 0;

    let collect_count = VISIBLE_LENGTH / 2;
    let mut previous = VecDeque::with_capacity(collect_count);

    loop {
        previous.push_back(offset);

        let (definition, _) = get_definition(offset, e);
        let (_, bytes_count) = definition;

        offset += bytes_count as u16;

        if previous.len() >= collect_count {
            let first = previous.pop_front();
            if offset >= pc {
                return first.unwrap_or(0);
            }
        }
    }
}

impl Disassembly {
    pub fn new() -> Self {
        Self {}
    }

    pub fn show(&mut self, ctx: &egui::Context, open: &mut bool, e: &Emulator) {
        Window::new("Disassembly")
            .resizable(true)
            .default_width(268.0)
            .open(open)
            .show(ctx, |ui| {
                let pc = e.cpu.pc;

                let mut offset = find_start(pc, e);
                for _ in 0..VISIBLE_LENGTH {
                    let (definition, args) = get_definition(offset, e);
                    let (name, length) = definition;

                    let formatted_args = args
                        .into_iter()
                        .map(|arg| arg.to_hex())
                        .collect::<Vec<String>>()
                        .join(" ");

                    let prefix = if pc == offset { ">" } else { " " };

                    let mut text = RichText::new(format!(
                        "{} 0x{} | {:<8} | {:<15}",
                        prefix,
                        offset.to_hex(),
                        formatted_args,
                        name
                    ))
                    .monospace();
                    if pc == offset {
                        text = text.strong();
                    }
                    ui.label(text);

                    offset += length as u16;
                }
            });
    }
}

```

`debugger/src/components/display.rs`:

```rs
use eframe::egui::{self, Color32, TextureOptions};
use gb::{
    constants::{DISPLAY_HEIGHT, DISPLAY_WIDTH},
    emulator::Emulator,
};

use crate::canvas::Canvas;

use super::scale::render_scale;
pub struct Display {
    scale: usize,
    canvas: Canvas,
}

impl Display {
    pub fn new() -> Self {
        let scale = 2;
        Self {
            scale,
            canvas: Canvas::new(DISPLAY_WIDTH, DISPLAY_HEIGHT, scale),
        }
    }

    pub fn show(&mut self, ctx: &egui::Context, e: &Emulator) {
        egui::Window::new("GameBoy")
            .open(&mut true)
            .resizable(false)
            .collapsible(false)
            .show(ctx, |ui| {
                let buffer = e.get_screen_buffer();
                for y in 0..DISPLAY_HEIGHT {
                    for x in 0..DISPLAY_WIDTH {
                        let pixel = buffer.get_pixel(x, y);
                        let color = Color32::from_rgb(pixel.r, pixel.g, pixel.b);

                        self.canvas.set_pixel(x, y, color);
                    }
                }

                let image = self.canvas.create_image();
                let texture = ctx.load_texture("display", image, TextureOptions::LINEAR);
                ui.image(&texture, self.canvas.get_scaled_size_vec2());

                render_scale(ui, &mut self.scale);
                if self.canvas.get_scale() != self.scale {
                    // Create new resized canvas
                    self.canvas.resize_scale(self.scale);
                }
            });
    }
}

```

`debugger/src/components/frame_history.rs`:

```rs
use eframe::egui::util::History;

// taken from https://github.com/emilk/egui/blob/master/egui_demo_lib/src/frame_history.rs

pub struct FrameHistory {
    frame_times: History<f32>,
}

impl FrameHistory {
    pub fn new() -> Self {
        let max_age: f32 = 1.0;
        let max_len = (max_age * 300.0).round() as usize;
        Self {
            frame_times: History::new(0..max_len, max_age),
        }
    }

    pub fn on_new_frame(&mut self, now: f64, previous_frame_time: Option<f32>) {
        let previous_frame_time = previous_frame_time.unwrap_or_default();
        if let Some(latest) = self.frame_times.latest_mut() {
            *latest = previous_frame_time; // rewrite history now that we know
        }
        self.frame_times.add(now, previous_frame_time); // projected
    }

    pub fn fps(&self) -> u32 {
        let fps = 1.0 / self.frame_times.mean_time_interval().unwrap_or_default();
        fps as u32
    }
}

```

`debugger/src/components/joypad.rs`:

```rs
use eframe::egui::{self, Key};
use gb::{emulator::Emulator, joypad::JoypadKey};

fn get_joypad_key(key: &Key) -> Option<JoypadKey> {
    match key {
        Key::ArrowDown | Key::S => Some(JoypadKey::ArrowDown),
        Key::ArrowLeft | Key::A => Some(JoypadKey::ArrowLeft),
        Key::ArrowUp | Key::W => Some(JoypadKey::ArrowUp),
        Key::ArrowRight | Key::D => Some(JoypadKey::ArrowRight),
        Key::J | Key::X => Some(JoypadKey::A),
        Key::K | Key::C => Some(JoypadKey::B),
        Key::B => Some(JoypadKey::Start),
        Key::N => Some(JoypadKey::Select),
        _ => None,
    }
}

pub fn handle_inputs(e: &mut Emulator, ctx: &egui::Context) {
    KEYS.iter()
        .filter_map(|key| match ctx.input(|i| i.key_down(*key)) {
            true => get_joypad_key(key),
            false => None,
        })
        .for_each(|joypad_key| e.on_key_down(joypad_key));
    KEYS.iter()
        .filter_map(|key| match ctx.input(|i| i.key_released(*key)) {
            true => get_joypad_key(key),
            false => None,
        })
        .for_each(|joypad_key| e.on_key_up(joypad_key));
}

pub const KEYS: [Key; 14] = [
    Key::ArrowDown,
    Key::ArrowLeft,
    Key::ArrowRight,
    Key::ArrowUp,
    Key::A,
    Key::W,
    Key::S,
    Key::D,
    // A
    Key::J,
    Key::X,
    // B
    Key::K,
    Key::C,
    // Start
    Key::B,
    // Select
    Key::N,
];

```

`debugger/src/components/maps.rs`:

```rs
use eframe::egui::{self, Color32, TextureOptions, Window};
use gb::{
    constants::{DISPLAY_HEIGHT, DISPLAY_WIDTH, TILE_SIZE},
    emulator::Emulator,
    ppu::ppu::MapLayer,
};

use crate::canvas::Canvas;

use super::scale::render_scale;

pub struct Maps {
    scale: usize,
    canvas: Canvas,
    layer: MapLayer,
    show_visible_area: bool,
}

const MAP_WIDTH: usize = 256;
const MAP_HEIGHT: usize = 256;
const TILES_PER_COL: usize = 32; // 256 / 8
const TILES_PER_ROW: usize = 32;

const BORDER: Color32 = Color32::from_rgb(255, 0, 0);

impl Maps {
    pub fn new() -> Self {
        let scale = 1;
        Self {
            scale,
            canvas: Canvas::new(MAP_WIDTH, MAP_HEIGHT, scale),
            layer: MapLayer::Background,
            show_visible_area: true,
        }
    }

    pub fn show(&mut self, ctx: &egui::Context, open: &mut bool, e: &Emulator) {
        Window::new("Maps").open(open).show(ctx, |ui| {
            let palette = e.hw.ppu.get_backround_palette();

            for y in 0..TILES_PER_ROW {
                for x in 0..TILES_PER_COL {
                    let map_index = x + y * TILES_PER_ROW;

                    let tile = e.hw.ppu.get_tile(map_index, self.layer);
                    for ty in 0..TILE_SIZE {
                        for tx in 0..TILE_SIZE {
                            let canvas_x = tx + (x * TILE_SIZE);
                            let canvas_y = ty + (y * TILE_SIZE);

                            let tile_pixel = tile.get_at(tx, ty);
                            let pixel = &palette.colors[tile_pixel as usize];
                            let color = Color32::from_rgb(pixel.r, pixel.g, pixel.b);

                            self.canvas.set_pixel(canvas_x, canvas_y, color)
                        }
                    }
                }
            }

            // Visible area
            if self.show_visible_area {
                self.draw_visible_area(e);
            }

            let image = self.canvas.create_image();
            let texture = ctx.load_texture("maps", image, TextureOptions::LINEAR);
            ui.image(&texture, self.canvas.get_scaled_size_vec2());

            ui.horizontal(|ui| {
                ui.label("Layer");
                ui.selectable_value(&mut self.layer, MapLayer::Background, "Background");
                ui.selectable_value(&mut self.layer, MapLayer::Window, "Window");
            });

            ui.horizontal(|ui| ui.checkbox(&mut self.show_visible_area, "Show visible area"));

            render_scale(ui, &mut self.scale);

            if self.canvas.get_scale() != self.scale {
                // create new resized canvas
                self.canvas.resize_scale(self.scale);
            }
        });
    }

    fn draw_visible_area_bg(&mut self, e: &Emulator) {
        let (scx, scy, enabled) = e.hw.ppu.get_background_pos();

        if !enabled {
            return;
        }

        // Background can overflow and start rendering from start
        let x_lines = match scx.overflowing_add(DISPLAY_WIDTH as u8) {
            (value, false) => vec![(scx..value)],
            (value, true) => vec![(0..value), (scx..255)],
        };
        let y_lines = match scy.overflowing_add(DISPLAY_HEIGHT as u8) {
            (value, false) => vec![(scy..value)],
            (value, true) => vec![(0..value), (scy..255)],
        };

        for x_line in &x_lines {
            for y_line in &y_lines {
                for x in x_line.clone() {
                    self.canvas
                        .set_pixel(x as usize, y_line.start as usize, BORDER);
                    self.canvas
                        .set_pixel(x as usize, y_line.end as usize, BORDER);
                }

                for y in y_line.clone() {
                    self.canvas
                        .set_pixel(x_line.start as usize, y as usize, BORDER);
                    self.canvas
                        .set_pixel(x_line.end as usize, y as usize, BORDER);
                }
            }
        }
    }

    fn draw_visible_area_win(&mut self, e: &Emulator) {
        let (wx, wy, enabled) = e.hw.ppu.get_window_pos();

        let win_x = wx - 7;

        if !enabled
            || !(0..DISPLAY_WIDTH as u8).contains(&win_x)
            || !(0..DISPLAY_HEIGHT as u8).contains(&wy)
        {
            return;
        }

        let x_line = 0..(DISPLAY_WIDTH - win_x as usize);
        let y_line = 0..(DISPLAY_HEIGHT - wy as usize);
        for x in x_line.clone() {
            self.canvas.set_pixel(x, y_line.start, BORDER);
            self.canvas.set_pixel(x, y_line.end, BORDER);
        }
        for y in y_line {
            self.canvas.set_pixel(x_line.start, y, BORDER);
            self.canvas.set_pixel(x_line.end, y, BORDER);
        }
    }

    fn draw_visible_area(&mut self, e: &Emulator) {
        match self.layer {
            MapLayer::Background => self.draw_visible_area_bg(e),
            MapLayer::Window => self.draw_visible_area_win(e),
        }
    }
}

```

`debugger/src/components/memory_viewer.rs`:

```rs
use eframe::{
    egui::{self, Align, ScrollArea, TextStyle},
    epaint::FontFamily,
};
use egui::Ui;
use gb::{
    emulator::Emulator,
    traits::{DisplayHex, MemoryAccess},
};
use std::fmt::Write;

#[derive(PartialEq, Copy, Clone)]
enum MemoryArea {
    CartridgeRom,
    CartridgeRam,
    Vram,
    Wram,
    WramShadow,
    Oam,
    Hram,
    IO,
}

impl MemoryArea {
    fn get_range(&self) -> std::ops::RangeInclusive<usize> {
        match self {
            MemoryArea::CartridgeRom => 0x0000..=0x7fff,
            MemoryArea::CartridgeRam => 0xa000..=0xbfff,
            MemoryArea::Vram => 0x8000..=0x9fff,
            MemoryArea::Wram => 0xc000..=0xdfff,
            MemoryArea::WramShadow => 0xe000..=0xfdff,
            MemoryArea::Oam => 0xfe00..=0xfe9f,
            MemoryArea::Hram => 0xff80..=0xfffe,
            MemoryArea::IO => 0xff00..=0xffff,
        }
    }
    fn get_name(&self) -> String {
        match self {
            MemoryArea::CartridgeRom => "ROM".to_string(),
            MemoryArea::CartridgeRam => "RAM".to_string(),
            MemoryArea::Vram => "VRAM".to_string(),
            MemoryArea::Wram => "WRAM".to_string(),
            MemoryArea::WramShadow => "WRAM Shadow".to_string(),
            MemoryArea::Oam => "OAM".to_string(),
            MemoryArea::Hram => "HRAM".to_string(),
            MemoryArea::IO => "IO".to_string(),
        }
    }
}

#[cfg_attr(feature = "persistence", derive(serde::Deserialize, serde::Serialize))]
#[cfg_attr(feature = "persistence", serde(default))]
#[derive(PartialEq)]
pub struct MemoryViewer {
    tack_item_align: Align,
    offset: f32,
    open: bool,
    memory_area: MemoryArea,
}

impl Default for MemoryViewer {
    fn default() -> Self {
        Self {
            tack_item_align: Align::Center,
            offset: 0.0,
            open: false,
            memory_area: MemoryArea::Oam,
        }
    }
}

impl MemoryViewer {
    pub fn show(&mut self, ctx: &egui::Context, e: &Emulator, open: &mut bool) {
        egui::Window::new("Memory")
            .default_width(420.0)
            .open(open)
            .show(ctx, |ui| {
                self.ui(ui, e);
            });
    }

    pub fn ui(&mut self, ui: &mut Ui, e: &Emulator) {
        let mut scroll_top = false;
        let mut scroll_bottom = false;

        ui.horizontal(|ui| {
            scroll_top |= ui.button("Scroll to top").clicked();
            scroll_bottom |= ui.button("Scroll to bottom").clicked();
        });
        ui.end_row();

        ui.horizontal(|ui| {
            ui.label("Cartridge");
            [MemoryArea::CartridgeRom, MemoryArea::CartridgeRam]
                .iter()
                .for_each(|area| {
                    ui.selectable_value(&mut self.memory_area, *area, area.get_name());
                });
        });
        ui.end_row();
        ui.horizontal(|ui| {
            ui.label("System");
            [
                MemoryArea::Vram,
                MemoryArea::Wram,
                MemoryArea::WramShadow,
                MemoryArea::Oam,
                MemoryArea::Hram,
                MemoryArea::IO,
            ]
            .iter()
            .for_each(|area| {
                ui.selectable_value(&mut self.memory_area, *area, area.get_name());
            });
        });
        ui.end_row();

        let visible_height = 200.0;
        let scroll_area = ScrollArea::vertical().max_height(visible_height);

        ui.separator();
        scroll_area.show(ui, |ui| {
            if scroll_top {
                ui.scroll_to_cursor(Some(Align::TOP));
            }

            if scroll_bottom {
                ui.scroll_to_cursor(Some(Align::BOTTOM));
            }

            let step = 16;
            let range = self.memory_area.get_range();

            ui.vertical(|ui| {
                ui.style_mut()
                    .text_styles
                    .get_mut(&TextStyle::Body)
                    .unwrap()
                    .family = FontFamily::Monospace;
                for base_addr in range.step_by(step) {
                    let mut line = String::new();

                    write!(line, "0x{} |", (base_addr as u16).to_hex()).unwrap();
                    for i in 0..step {
                        let addr = base_addr + i;
                        let byte = e.hw.read_byte(addr as u16);

                        write!(line, " {}", byte.to_hex()).unwrap();
                    }

                    ui.label(line);
                }
            });

            let margin = ui.visuals().clip_rect_margin;
            let current_scroll = ui.clip_rect().top() - ui.min_rect().top() + margin;
            let max_scroll = ui.min_rect().height() - ui.clip_rect().height() + 2.0 * margin;
            (current_scroll, max_scroll)
        });
        ui.separator();

        ui.vertical_centered(|ui| {
            egui::reset_button(ui, self);
        });
    }
}

```

`debugger/src/components/mod.rs`:

```rs
pub mod cpu;
pub mod disassembly;
pub mod display;
pub mod frame_history;
pub mod joypad;
pub mod maps;
pub mod memory_viewer;
pub mod ppu;
pub mod roms;
mod scale;
pub mod tiles;

```

`debugger/src/components/ppu.rs`:

```rs
use eframe::egui::{
    self, show_tooltip_at_pointer, Color32, Grid, Id, Pos2, Sense, Stroke, Ui, Vec2, Window,
};
use gb::{
    constants::DISPLAY_HEIGHT,
    emulator::Emulator,
    ppu::{
        registers::{R_BGP, R_LCDC, R_LY, R_LYC, R_OBP0, R_OBP1, R_SCX, R_SCY, R_STAT, R_WX, R_WY},
        screen_buffer::{LineStats, LineStatsData},
    },
    traits::{DisplayHex, MemoryAccess},
};

use crate::ui_extensions::ExtendedUi;

pub struct Ppu {}

fn format_interval(from: u32, to: u32) -> String {
    format!("{:>3} -> {:>3}", from, to)
}

const COLOR_OAM_SEARCH: Color32 = Color32::from_rgb(243, 201, 74);
const COLOR_PIXEL_TRANSFER: Color32 = Color32::from_rgb(243, 114, 74);
const COLOR_H_BLANK: Color32 = Color32::from_rgb(74, 243, 102);
const COLOR_V_BLANK: Color32 = Color32::from_rgb(74, 227, 243);

impl Ppu {
    pub fn new() -> Self {
        Self {}
    }

    pub fn show(&mut self, ctx: &egui::Context, open: &mut bool, e: &Emulator) {
        Window::new("PPU").open(open).show(ctx, |ui| {
            ui.heading("Internals");

            Grid::new("Internals").show(ui, |ui| {
                ui.label("Mode");
                ui.mono_label(e.hw.ppu.mode);
                ui.end_row();

                ui.label("Line");
                ui.mono_label(e.hw.ppu.line);
                ui.end_row();

                ui.label("LY to compare");
                ui.mono_label(match e.hw.ppu.ly_to_compare {
                    Some(ly) => ly.to_string(),
                    None => String::from("None"),
                });
                ui.end_row();

                ui.label("STAT interrupt line");
                ui.mono_label(e.hw.ppu.prev_stat_flag as u32);
                ui.end_row();

                ui.label("Line clocks");
                ui.mono_label(e.hw.ppu.line_clocks);
                ui.end_row();
            });

            ui.separator();
            ui.label("Frame timing diagram");
            let stats = e.hw.ppu.get_screen_buffer().get_stats();

            let (rect, response) = ui.allocate_exact_size(Vec2::new(456.0, 153.0), Sense::hover());
            let base = rect.left_top();

            if e.frames > 0 {
                if response.hovered() {
                    if let Some(screen_position) = ui.input(|i| i.pointer.hover_pos()) {
                        let canvas_pos = screen_position - base;
                        let line = canvas_pos.y.round() as usize;
                        if line < DISPLAY_HEIGHT {
                            let line_stats = &stats[line];
                            self.render_line_tooltip(ui, line, line_stats);
                        }
                    }
                }
                self.render_lines(ui, stats, base);
            }

            ui.separator();

            ui.heading("Registers");
            Grid::new("PPU Registers").show(ui, |ui| {
                let registers = [
                    ("IF", 0xff0f, e.hw.read_byte(0xff0f)),
                    ("LCDC", R_LCDC, e.hw.read_byte(R_LCDC)),
                    ("STAT", R_STAT, e.hw.read_byte(R_STAT)),
                    ("SCY", R_SCY, e.hw.read_byte(R_SCY)),
                    ("SCX", R_SCX, e.hw.read_byte(R_SCX)),
                    ("LY", R_LY, e.hw.read_byte(R_LY)),
                    ("LYC", R_LYC, e.hw.read_byte(R_LYC)),
                    ("BGP", R_BGP, e.hw.read_byte(R_BGP)),
                    ("OBP0", R_OBP0, e.hw.read_byte(R_OBP0)),
                    ("OBP1", R_OBP1, e.hw.read_byte(R_OBP1)),
                    ("WY", R_WY, e.hw.read_byte(R_WY)),
                    ("WX", R_WX, e.hw.read_byte(R_WX)),
                ];

                registers.iter().for_each(|(name, address, value)| {
                    ui.mono_label(format!("0x{}", address.to_hex()));
                    ui.label(*name);
                    ui.mono_label(value.to_hex());
                    ui.end_row();
                });
            });
        });
    }

    fn render_lines(&self, ui: &Ui, stats: &LineStatsData, base: Pos2) {
        let stroke_width = 1.0;
        let stroke_oam_search = Stroke::new(stroke_width, COLOR_OAM_SEARCH);
        let stroke_pixel_transfer = Stroke::new(stroke_width, COLOR_PIXEL_TRANSFER);
        let stroke_h_blank = Stroke::new(stroke_width, COLOR_H_BLANK);
        let stroke_v_blank = Stroke::new(stroke_width, COLOR_V_BLANK);
        for (line, line_stats) in stats.iter().enumerate() {
            let line = line as f32;
            ui.painter().line_segment(
                [
                    Pos2::new(base.x + 0.0, base.y + line),
                    Pos2::new(base.x + line_stats.pixel_transfer as f32, base.y + line),
                ],
                stroke_oam_search,
            );
            ui.painter().line_segment(
                [
                    Pos2::new(base.x + line_stats.pixel_transfer as f32, base.y + line),
                    Pos2::new(base.x + line_stats.h_blank as f32, base.y + line),
                ],
                stroke_pixel_transfer,
            );
            ui.painter().line_segment(
                [
                    Pos2::new(base.x + line_stats.h_blank as f32, base.y + line),
                    Pos2::new(base.x + 456.0, base.y + line),
                ],
                stroke_h_blank,
            );
        }
        for line in 144..153 {
            let line = line as f32;
            ui.painter().line_segment(
                [
                    Pos2::new(base.x + 0.0, base.y + line),
                    Pos2::new(base.x + 456.0, base.y + line),
                ],
                stroke_v_blank,
            );
        }
    }

    fn render_line_tooltip(&self, ui: &Ui, line: usize, line_stats: &LineStats) {
        show_tooltip_at_pointer(ui.ctx(), Id::new("PPU line timing tooltip"), |ui| {
            ui.horizontal(|ui| {
                ui.label("Line");
                ui.mono_label(line);
            });

            Grid::new("Line stats").show(ui, |ui| {
                ui.label("OAM Search");
                ui.mono_label(format_interval(0, line_stats.pixel_transfer - 1));
                ui.end_row();

                ui.label("Pixel Transfer");
                ui.mono_label(format_interval(
                    line_stats.pixel_transfer,
                    line_stats.h_blank - 1,
                ));
                ui.end_row();

                ui.label("H-Blank");
                ui.mono_label(format_interval(line_stats.h_blank, 456));
                ui.end_row();
            });
        });
    }
}

```

`debugger/src/components/roms.rs`:

```rs
use eframe::egui::{self, ScrollArea};
use fuzzy_matcher::skim::SkimMatcherV2;
use fuzzy_matcher::FuzzyMatcher;

use crate::utils::BinarySource;

pub struct Roms {
    roms: Vec<Box<dyn BinarySource>>,
    search: String,
    matcher: SkimMatcherV2,
}

impl Roms {
    pub fn new(roms: Vec<Box<dyn BinarySource>>) -> Self {
        Self {
            roms,
            search: String::new(),
            matcher: SkimMatcherV2::default(),
        }
    }

    pub fn show<F>(&mut self, ctx: &egui::Context, open: &mut bool, mut open_callback: F)
    where
        F: FnMut(&Box<dyn BinarySource>),
    {
        egui::Window::new(format!("ROMs ({})", self.roms.len()))
            .resizable(false)
            .open(open)
            .show(ctx, |ui| {
                ui.horizontal(|ui| {
                    ui.add(egui::TextEdit::singleline(&mut self.search).hint_text("Search"));
                    if ui.button("×").clicked() {
                        self.search = String::new();
                    }
                });

                ScrollArea::vertical().max_height(200.0).show(ui, |ui| {
                    ui.vertical(|ui| {
                        self.get_roms().iter().for_each(|&rom| {
                            ui.horizontal(|ui| {
                                if ui.button("Open").clicked() {
                                    open_callback(rom);
                                }

                                ui.label(rom.get_name());
                            });
                        });
                    });
                });
                ui.separator();
            });
    }

    // Keep Box for dynamic
    #[allow(clippy::borrowed_box)]
    fn get_roms(&self) -> Vec<&Box<dyn BinarySource>> {
        let mut results = self
            .roms
            .iter()
            // collect results with score
            .filter_map(
                |rom| match self.matcher.fuzzy_indices(rom.get_name(), &self.search) {
                    Some((score, _)) => Some((score, rom)),
                    _ => None,
                },
            )
            .collect::<Vec<(i64, &Box<dyn BinarySource>)>>();

        // Sort by score
        results.sort_by(|a, b| b.0.cmp(&a.0));

        let sorted = results
            .into_iter()
            .map(|(_, rom)| rom)
            .collect::<Vec<&Box<dyn BinarySource>>>();
        sorted
    }
}

```

`debugger/src/components/scale.rs`:

```rs
use std::cmp::{max, min};

use eframe::egui;

const MIN_SCALE: usize = 1;
const MAX_SCALE: usize = 4;
const STEP: usize = 1;

pub fn render_scale(ui: &mut egui::Ui, scale: &mut usize) {
    ui.horizontal(|ui| {
        ui.label("Scale:");
        if ui.button("-").clicked() {
            *scale = max(*scale - STEP, MIN_SCALE);
        }
        ui.label(scale.to_string());
        if ui.button("+").clicked() {
            *scale = min(*scale + STEP, MAX_SCALE);
        }
    });
}

```

`debugger/src/components/tiles.rs`:

```rs
use eframe::egui::{self, Color32, TextureOptions, Ui};
use gb::{constants::TILE_SIZE, emulator::Emulator};

use crate::canvas::Canvas;

use super::scale::render_scale;

pub struct Tiles {
    scale: usize,
    canvas: Canvas,
    is_cgb: bool,
}

const TILES_PER_LINE: usize = 16;

const C1: Color32 = Color32::from_rgb(255, 255, 255);
const C2: Color32 = Color32::from_rgb(192, 192, 192);
const C3: Color32 = Color32::from_rgb(96, 96, 96);
const C4: Color32 = Color32::from_rgb(0, 0, 0);

const BASE_HEIGHT: usize = 24 * TILE_SIZE;

fn get_canvas_height(is_cgb: bool) -> usize {
    if is_cgb {
        return BASE_HEIGHT * 2;
    }
    BASE_HEIGHT
}

impl Default for Tiles {
    fn default() -> Self {
        let scale = 2;
        let is_cgb = false;
        let tiles_width = TILES_PER_LINE * TILE_SIZE;
        let tiles_height = get_canvas_height(is_cgb);
        let canvas = Canvas::new(tiles_width, tiles_height, scale);

        Tiles {
            scale,
            is_cgb,
            canvas,
        }
    }
}

impl Tiles {
    pub fn show(&mut self, ctx: &egui::Context, open: &mut bool, e: &Emulator) {
        egui::Window::new("Tiles").open(open).show(ctx, |ui| {
            self.ui(ui, ctx, e);
        });
    }

    pub fn ui(&mut self, ui: &mut Ui, ctx: &egui::Context, e: &Emulator) {
        let tiles = e.hw.ppu.vram.get_tiles();

        for ty in 0..self.canvas.get_height() {
            for tx in 0..self.canvas.get_width() {
                let tile_x = tx % TILE_SIZE;
                let tile_y = ty % TILE_SIZE;

                let tile_number = tx / TILE_SIZE + (ty / TILE_SIZE) * TILES_PER_LINE;

                let value = tiles[tile_number].get_at(tile_x, tile_y);

                let color = match value {
                    0 => C1,
                    1 => C2,
                    2 => C3,
                    3 => C4,
                    _ => panic!("Undefined tile value {}", value),
                };

                self.canvas.set_pixel(tx, ty, color);
            }
        }

        let image = self.canvas.create_image();
        let texture = ctx.load_texture("tiles", image, TextureOptions::LINEAR);
        ui.image(&texture, self.canvas.get_scaled_size_vec2());

        render_scale(ui, &mut self.scale);

        if self.is_cgb != e.is_cgb() {
            // CGB has doubled height (2x more tiles)
            self.is_cgb = e.is_cgb();
            self.canvas.resize_height(get_canvas_height(e.is_cgb()));
        }

        if self.canvas.get_scale() != self.scale {
            // Invalidate texture cache & create new resized canvas
            self.canvas.resize_scale(self.scale);
        }
    }
}

```

`debugger/src/lib.rs`:

```rs
#![forbid(unsafe_code)]
// #![cfg_attr(not(debug_assertions), deny(warnings))] // Forbid warnings in release builds
#![warn(clippy::all, rust_2018_idioms)]
#![allow(
    clippy::let_and_return,
    clippy::new_without_default,
    clippy::trivial_regex
)]

pub mod app;
mod canvas;
mod components;
mod opcodes;
pub mod ui_extensions;
pub mod utils;

```

`debugger/src/main.rs`:

```rs
#![forbid(unsafe_code)]
// #![cfg_attr(not(debug_assertions), deny(warnings))] // Forbid warnings in release builds
#![warn(clippy::all, rust_2018_idioms)]
#![allow(
    clippy::let_and_return,
    clippy::new_without_default,
    clippy::trivial_regex
)]

use eframe::{egui::Vec2, NativeOptions};
use env_logger::Env;

use debugger::app::Debugger;
use debugger::utils::{load_roms, BinarySource};

fn main() -> Result<(), eframe::Error> {
    let roms: Vec<Box<dyn BinarySource>> = load_roms();

    env_logger::Builder::from_env(Env::default().default_filter_or("debug"))
        .format_timestamp(None)
        .format_level(false)
        .format_module_path(false)
        .target(env_logger::Target::Stdout)
        .init();

    let options = NativeOptions {
        resizable: true,
        initial_window_size: Some(Vec2::new(1700.0, 1000.0)),
        ..NativeOptions::default()
    };

    eframe::run_native(
        "GameBoy emulator Debugger",
        options,
        Box::new(|cc| Box::new(Debugger::new(cc, roms))),
    )
}

```

`debugger/src/opcodes.rs`:

```rs
// from https://github.com/izik1/gbops

pub const OPCODES: [(&str, usize); 256] = [
    ("NOP", 1),
    ("LD BC,u16", 3),
    ("LD (BC),A", 1),
    ("INC BC", 1),
    ("INC B", 1),
    ("DEC B", 1),
    ("LD B,u8", 2),
    ("RLCA", 1),
    ("LD (u16),SP", 3),
    ("ADD HL,BC", 1),
    ("LD A,(BC)", 1),
    ("DEC BC", 1),
    ("INC C", 1),
    ("DEC C", 1),
    ("LD C,u8", 2),
    ("RRCA", 1),
    ("STOP", 2),
    ("LD DE,u16", 3),
    ("LD (DE),A", 1),
    ("INC DE", 1),
    ("INC D", 1),
    ("DEC D", 1),
    ("LD D,u8", 2),
    ("RLA", 1),
    ("JR i8", 2),
    ("ADD HL,DE", 1),
    ("LD A,(DE)", 1),
    ("DEC DE", 1),
    ("INC E", 1),
    ("DEC E", 1),
    ("LD E,u8", 2),
    ("RRA", 1),
    ("JR NZ,i8", 2),
    ("LD HL,u16", 3),
    ("LD (HL+),A", 1),
    ("INC HL", 1),
    ("INC H", 1),
    ("DEC H", 1),
    ("LD H,u8", 2),
    ("DAA", 1),
    ("JR Z,i8", 2),
    ("ADD HL,HL", 1),
    ("LD A,(HL+)", 1),
    ("DEC HL", 1),
    ("INC L", 1),
    ("DEC L", 1),
    ("LD L,u8", 2),
    ("CPL", 1),
    ("JR NC,i8", 2),
    ("LD SP,u16", 3),
    ("LD (HL-),A", 1),
    ("INC SP", 1),
    ("INC (HL)", 1),
    ("DEC (HL)", 1),
    ("LD (HL),u8", 2),
    ("SCF", 1),
    ("JR C,i8", 2),
    ("ADD HL,SP", 1),
    ("LD A,(HL-)", 1),
    ("DEC SP", 1),
    ("INC A", 1),
    ("DEC A", 1),
    ("LD A,u8", 2),
    ("CCF", 1),
    ("LD B,B", 1),
    ("LD B,C", 1),
    ("LD B,D", 1),
    ("LD B,E", 1),
    ("LD B,H", 1),
    ("LD B,L", 1),
    ("LD B,(HL)", 1),
    ("LD B,A", 1),
    ("LD C,B", 1),
    ("LD C,C", 1),
    ("LD C,D", 1),
    ("LD C,E", 1),
    ("LD C,H", 1),
    ("LD C,L", 1),
    ("LD C,(HL)", 1),
    ("LD C,A", 1),
    ("LD D,B", 1),
    ("LD D,C", 1),
    ("LD D,D", 1),
    ("LD D,E", 1),
    ("LD D,H", 1),
    ("LD D,L", 1),
    ("LD D,(HL)", 1),
    ("LD D,A", 1),
    ("LD E,B", 1),
    ("LD E,C", 1),
    ("LD E,D", 1),
    ("LD E,E", 1),
    ("LD E,H", 1),
    ("LD E,L", 1),
    ("LD E,(HL)", 1),
    ("LD E,A", 1),
    ("LD H,B", 1),
    ("LD H,C", 1),
    ("LD H,D", 1),
    ("LD H,E", 1),
    ("LD H,H", 1),
    ("LD H,L", 1),
    ("LD H,(HL)", 1),
    ("LD H,A", 1),
    ("LD L,B", 1),
    ("LD L,C", 1),
    ("LD L,D", 1),
    ("LD L,E", 1),
    ("LD L,H", 1),
    ("LD L,L", 1),
    ("LD L,(HL)", 1),
    ("LD L,A", 1),
    ("LD (HL),B", 1),
    ("LD (HL),C", 1),
    ("LD (HL),D", 1),
    ("LD (HL),E", 1),
    ("LD (HL),H", 1),
    ("LD (HL),L", 1),
    ("HALT", 1),
    ("LD (HL),A", 1),
    ("LD A,B", 1),
    ("LD A,C", 1),
    ("LD A,D", 1),
    ("LD A,E", 1),
    ("LD A,H", 1),
    ("LD A,L", 1),
    ("LD A,(HL)", 1),
    ("LD A,A", 1),
    ("ADD A,B", 1),
    ("ADD A,C", 1),
    ("ADD A,D", 1),
    ("ADD A,E", 1),
    ("ADD A,H", 1),
    ("ADD A,L", 1),
    ("ADD A,(HL)", 1),
    ("ADD A,A", 1),
    ("ADC A,B", 1),
    ("ADC A,C", 1),
    ("ADC A,D", 1),
    ("ADC A,E", 1),
    ("ADC A,H", 1),
    ("ADC A,L", 1),
    ("ADC A,(HL)", 1),
    ("ADC A,A", 1),
    ("SUB A,B", 1),
    ("SUB A,C", 1),
    ("SUB A,D", 1),
    ("SUB A,E", 1),
    ("SUB A,H", 1),
    ("SUB A,L", 1),
    ("SUB A,(HL)", 1),
    ("SUB A,A", 1),
    ("SBC A,B", 1),
    ("SBC A,C", 1),
    ("SBC A,D", 1),
    ("SBC A,E", 1),
    ("SBC A,H", 1),
    ("SBC A,L", 1),
    ("SBC A,(HL)", 1),
    ("SBC A,A", 1),
    ("AND A,B", 1),
    ("AND A,C", 1),
    ("AND A,D", 1),
    ("AND A,E", 1),
    ("AND A,H", 1),
    ("AND A,L", 1),
    ("AND A,(HL)", 1),
    ("AND A,A", 1),
    ("XOR A,B", 1),
    ("XOR A,C", 1),
    ("XOR A,D", 1),
    ("XOR A,E", 1),
    ("XOR A,H", 1),
    ("XOR A,L", 1),
    ("XOR A,(HL)", 1),
    ("XOR A,A", 1),
    ("OR A,B", 1),
    ("OR A,C", 1),
    ("OR A,D", 1),
    ("OR A,E", 1),
    ("OR A,H", 1),
    ("OR A,L", 1),
    ("OR A,(HL)", 1),
    ("OR A,A", 1),
    ("CP A,B", 1),
    ("CP A,C", 1),
    ("CP A,D", 1),
    ("CP A,E", 1),
    ("CP A,H", 1),
    ("CP A,L", 1),
    ("CP A,(HL)", 1),
    ("CP A,A", 1),
    ("RET NZ", 1),
    ("POP BC", 1),
    ("JP NZ,u16", 3),
    ("JP u16", 3),
    ("CALL NZ,u16", 3),
    ("PUSH BC", 1),
    ("ADD A,u8", 2),
    ("RST 00h", 1),
    ("RET Z", 1),
    ("RET", 1),
    ("JP Z,u16", 3),
    ("PREFIX CB", 1),
    ("CALL Z,u16", 3),
    ("CALL u16", 3),
    ("ADC A,u8", 2),
    ("RST 08h", 1),
    ("RET NC", 1),
    ("POP DE", 1),
    ("JP NC,u16", 3),
    ("UNUSED", 1),
    ("CALL NC,u16", 3),
    ("PUSH DE", 1),
    ("SUB A,u8", 2),
    ("RST 10h", 1),
    ("RET C", 1),
    ("RETI", 1),
    ("JP C,u16", 3),
    ("UNUSED", 1),
    ("CALL C,u16", 3),
    ("UNUSED", 1),
    ("SBC A,u8", 2),
    ("RST 18h", 1),
    ("LD (FF00+u8),A", 2),
    ("POP HL", 1),
    ("LD (FF00+C),A", 1),
    ("UNUSED", 1),
    ("UNUSED", 1),
    ("PUSH HL", 1),
    ("AND A,u8", 2),
    ("RST 20h", 1),
    ("ADD SP,i8", 2),
    ("JP HL", 1),
    ("LD (u16),A", 3),
    ("UNUSED", 1),
    ("UNUSED", 1),
    ("UNUSED", 1),
    ("XOR A,u8", 2),
    ("RST 28h", 1),
    ("LD A,(FF00+u8)", 2),
    ("POP AF", 1),
    ("LD A,(FF00+C)", 1),
    ("DI", 1),
    ("UNUSED", 1),
    ("PUSH AF", 1),
    ("OR A,u8", 2),
    ("RST 30h", 1),
    ("LD HL,SP+i8", 2),
    ("LD SP,HL", 1),
    ("LD A,(u16)", 3),
    ("EI", 1),
    ("UNUSED", 1),
    ("UNUSED", 1),
    ("CP A,u8", 2),
    ("RST 38h", 1),
];

pub const OPCODES_CB: [(&str, usize); 256] = [
    ("RLC B", 2),
    ("RLC C", 2),
    ("RLC D", 2),
    ("RLC E", 2),
    ("RLC H", 2),
    ("RLC L", 2),
    ("RLC (HL)", 2),
    ("RLC A", 2),
    ("RRC B", 2),
    ("RRC C", 2),
    ("RRC D", 2),
    ("RRC E", 2),
    ("RRC H", 2),
    ("RRC L", 2),
    ("RRC (HL)", 2),
    ("RRC A", 2),
    ("RL B", 2),
    ("RL C", 2),
    ("RL D", 2),
    ("RL E", 2),
    ("RL H", 2),
    ("RL L", 2),
    ("RL (HL)", 2),
    ("RL A", 2),
    ("RR B", 2),
    ("RR C", 2),
    ("RR D", 2),
    ("RR E", 2),
    ("RR H", 2),
    ("RR L", 2),
    ("RR (HL)", 2),
    ("RR A", 2),
    ("SLA B", 2),
    ("SLA C", 2),
    ("SLA D", 2),
    ("SLA E", 2),
    ("SLA H", 2),
    ("SLA L", 2),
    ("SLA (HL)", 2),
    ("SLA A", 2),
    ("SRA B", 2),
    ("SRA C", 2),
    ("SRA D", 2),
    ("SRA E", 2),
    ("SRA H", 2),
    ("SRA L", 2),
    ("SRA (HL)", 2),
    ("SRA A", 2),
    ("SWAP B", 2),
    ("SWAP C", 2),
    ("SWAP D", 2),
    ("SWAP E", 2),
    ("SWAP H", 2),
    ("SWAP L", 2),
    ("SWAP (HL)", 2),
    ("SWAP A", 2),
    ("SRL B", 2),
    ("SRL C", 2),
    ("SRL D", 2),
    ("SRL E", 2),
    ("SRL H", 2),
    ("SRL L", 2),
    ("SRL (HL)", 2),
    ("SRL A", 2),
    ("BIT 0,B", 2),
    ("BIT 0,C", 2),
    ("BIT 0,D", 2),
    ("BIT 0,E", 2),
    ("BIT 0,H", 2),
    ("BIT 0,L", 2),
    ("BIT 0,(HL)", 2),
    ("BIT 0,A", 2),
    ("BIT 1,B", 2),
    ("BIT 1,C", 2),
    ("BIT 1,D", 2),
    ("BIT 1,E", 2),
    ("BIT 1,H", 2),
    ("BIT 1,L", 2),
    ("BIT 1,(HL)", 2),
    ("BIT 1,A", 2),
    ("BIT 2,B", 2),
    ("BIT 2,C", 2),
    ("BIT 2,D", 2),
    ("BIT 2,E", 2),
    ("BIT 2,H", 2),
    ("BIT 2,L", 2),
    ("BIT 2,(HL)", 2),
    ("BIT 2,A", 2),
    ("BIT 3,B", 2),
    ("BIT 3,C", 2),
    ("BIT 3,D", 2),
    ("BIT 3,E", 2),
    ("BIT 3,H", 2),
    ("BIT 3,L", 2),
    ("BIT 3,(HL)", 2),
    ("BIT 3,A", 2),
    ("BIT 4,B", 2),
    ("BIT 4,C", 2),
    ("BIT 4,D", 2),
    ("BIT 4,E", 2),
    ("BIT 4,H", 2),
    ("BIT 4,L", 2),
    ("BIT 4,(HL)", 2),
    ("BIT 4,A", 2),
    ("BIT 5,B", 2),
    ("BIT 5,C", 2),
    ("BIT 5,D", 2),
    ("BIT 5,E", 2),
    ("BIT 5,H", 2),
    ("BIT 5,L", 2),
    ("BIT 5,(HL)", 2),
    ("BIT 5,A", 2),
    ("BIT 6,B", 2),
    ("BIT 6,C", 2),
    ("BIT 6,D", 2),
    ("BIT 6,E", 2),
    ("BIT 6,H", 2),
    ("BIT 6,L", 2),
    ("BIT 6,(HL)", 2),
    ("BIT 6,A", 2),
    ("BIT 7,B", 2),
    ("BIT 7,C", 2),
    ("BIT 7,D", 2),
    ("BIT 7,E", 2),
    ("BIT 7,H", 2),
    ("BIT 7,L", 2),
    ("BIT 7,(HL)", 2),
    ("BIT 7,A", 2),
    ("RES 0,B", 2),
    ("RES 0,C", 2),
    ("RES 0,D", 2),
    ("RES 0,E", 2),
    ("RES 0,H", 2),
    ("RES 0,L", 2),
    ("RES 0,(HL)", 2),
    ("RES 0,A", 2),
    ("RES 1,B", 2),
    ("RES 1,C", 2),
    ("RES 1,D", 2),
    ("RES 1,E", 2),
    ("RES 1,H", 2),
    ("RES 1,L", 2),
    ("RES 1,(HL)", 2),
    ("RES 1,A", 2),
    ("RES 2,B", 2),
    ("RES 2,C", 2),
    ("RES 2,D", 2),
    ("RES 2,E", 2),
    ("RES 2,H", 2),
    ("RES 2,L", 2),
    ("RES 2,(HL)", 2),
    ("RES 2,A", 2),
    ("RES 3,B", 2),
    ("RES 3,C", 2),
    ("RES 3,D", 2),
    ("RES 3,E", 2),
    ("RES 3,H", 2),
    ("RES 3,L", 2),
    ("RES 3,(HL)", 2),
    ("RES 3,A", 2),
    ("RES 4,B", 2),
    ("RES 4,C", 2),
    ("RES 4,D", 2),
    ("RES 4,E", 2),
    ("RES 4,H", 2),
    ("RES 4,L", 2),
    ("RES 4,(HL)", 2),
    ("RES 4,A", 2),
    ("RES 5,B", 2),
    ("RES 5,C", 2),
    ("RES 5,D", 2),
    ("RES 5,E", 2),
    ("RES 5,H", 2),
    ("RES 5,L", 2),
    ("RES 5,(HL)", 2),
    ("RES 5,A", 2),
    ("RES 6,B", 2),
    ("RES 6,C", 2),
    ("RES 6,D", 2),
    ("RES 6,E", 2),
    ("RES 6,H", 2),
    ("RES 6,L", 2),
    ("RES 6,(HL)", 2),
    ("RES 6,A", 2),
    ("RES 7,B", 2),
    ("RES 7,C", 2),
    ("RES 7,D", 2),
    ("RES 7,E", 2),
    ("RES 7,H", 2),
    ("RES 7,L", 2),
    ("RES 7,(HL)", 2),
    ("RES 7,A", 2),
    ("SET 0,B", 2),
    ("SET 0,C", 2),
    ("SET 0,D", 2),
    ("SET 0,E", 2),
    ("SET 0,H", 2),
    ("SET 0,L", 2),
    ("SET 0,(HL)", 2),
    ("SET 0,A", 2),
    ("SET 1,B", 2),
    ("SET 1,C", 2),
    ("SET 1,D", 2),
    ("SET 1,E", 2),
    ("SET 1,H", 2),
    ("SET 1,L", 2),
    ("SET 1,(HL)", 2),
    ("SET 1,A", 2),
    ("SET 2,B", 2),
    ("SET 2,C", 2),
    ("SET 2,D", 2),
    ("SET 2,E", 2),
    ("SET 2,H", 2),
    ("SET 2,L", 2),
    ("SET 2,(HL)", 2),
    ("SET 2,A", 2),
    ("SET 3,B", 2),
    ("SET 3,C", 2),
    ("SET 3,D", 2),
    ("SET 3,E", 2),
    ("SET 3,H", 2),
    ("SET 3,L", 2),
    ("SET 3,(HL)", 2),
    ("SET 3,A", 2),
    ("SET 4,B", 2),
    ("SET 4,C", 2),
    ("SET 4,D", 2),
    ("SET 4,E", 2),
    ("SET 4,H", 2),
    ("SET 4,L", 2),
    ("SET 4,(HL)", 2),
    ("SET 4,A", 2),
    ("SET 5,B", 2),
    ("SET 5,C", 2),
    ("SET 5,D", 2),
    ("SET 5,E", 2),
    ("SET 5,H", 2),
    ("SET 5,L", 2),
    ("SET 5,(HL)", 2),
    ("SET 5,A", 2),
    ("SET 6,B", 2),
    ("SET 6,C", 2),
    ("SET 6,D", 2),
    ("SET 6,E", 2),
    ("SET 6,H", 2),
    ("SET 6,L", 2),
    ("SET 6,(HL)", 2),
    ("SET 6,A", 2),
    ("SET 7,B", 2),
    ("SET 7,C", 2),
    ("SET 7,D", 2),
    ("SET 7,E", 2),
    ("SET 7,H", 2),
    ("SET 7,L", 2),
    ("SET 7,(HL)", 2),
    ("SET 7,A", 2),
];

```

`debugger/src/ui_extensions.rs`:

```rs
use eframe::egui::{Label, Response, RichText, Ui};

pub trait ExtendedUi {
    fn mono_label(&mut self, text: impl ToString) -> Response;
}

pub fn mono_label(text: impl ToString) -> Label {
    let text = RichText::new(text.to_string()).monospace();
    Label::new(text)
}

impl ExtendedUi for Ui {
    fn mono_label(&mut self, text: impl ToString) -> Response {
        let label = mono_label(text);
        self.add(label)
    }
}

```

`debugger/src/utils.rs`:

```rs
use std::{fs::File, io::Read};

use globwalk::GlobWalkerBuilder;
use regex::Regex;

fn get_file_as_byte_vec(filename: &str) -> Vec<u8> {
    let mut f = File::open(filename).expect("no file found");

    let mut data = vec![];
    f.read_to_end(&mut data).unwrap();

    data
}

pub fn sanitize_name(filename: &str) -> String {
    // Mooneye's tests
    filename.replace("/tests/build", "")
}

pub trait BinarySource {
    fn get_binary(&self, callback: Box<dyn FnOnce(Vec<u8>)>);
    fn get_name(&self) -> &String;
}

#[derive(Clone)]
pub struct FileSystemRom {
    name: String,
    path: String,
}

impl BinarySource for FileSystemRom {
    fn get_binary(&self, callback: Box<dyn FnOnce(Vec<u8>)>) {
        let bytes = get_file_as_byte_vec(&self.path);
        (callback)(bytes);
    }

    fn get_name(&self) -> &String {
        &self.name
    }
}

const FILE_PATTERN: &str = "**/*.{gb}";
// const FILE_PATTERN: &str = "*/dmg_sound/**/*.{gb}";

pub fn load_roms() -> Vec<Box<dyn BinarySource>> {
    let mut files = vec![];

    let iterator = GlobWalkerBuilder::from_patterns("roms", &[FILE_PATTERN])
        .build()
        .unwrap()
        .filter_map(Result::ok);

    for entry in iterator {
        files.push(entry.path().to_str().unwrap().to_string());
    }

    files.sort();
    let regex = Regex::new("^roms/").unwrap();

    let paths = files
        .into_iter()
        .map(|path| {
            let name = regex.replace(&path, "").to_string();
            let name = sanitize_name(&name);
            let item: Box<dyn BinarySource> = Box::new(FileSystemRom { name, path });
            item
        })
        .collect::<Vec<Box<dyn BinarySource>>>();
    paths
}

```

`desktop/Cargo.toml`:

```toml
[package]
name = "desktop"
version = "0.1.0"
edition = "2021"

[dependencies]
gb = { path = "../gb" }

log = "0.4.17"
sdl2 = { version = "0.35.2", features = [ "bundled", "static-link" ] }
env_logger = "0.10.0"

```

`desktop/src/audio.rs`:

```rs
use gb::{
    audio::AudioDevice,
    constants::{AUDIO_BUFFER_SIZE, AUDIO_SAMPLE_RATE},
};
use sdl2::{
    audio::{AudioQueue, AudioSpecDesired},
    Sdl,
};

pub struct Audio {
    queue: AudioQueue<f32>,
}

impl Audio {
    pub fn new(sdl_context: &Sdl) -> Self {
        let audio_subsystem = sdl_context.audio().unwrap();
        let audio_spec = AudioSpecDesired {
            freq: Some(AUDIO_SAMPLE_RATE as i32),
            channels: Some(2),
            samples: Some(AUDIO_BUFFER_SIZE as u16),
        };

        let queue = audio_subsystem.open_queue(None, &audio_spec).unwrap();
        queue.resume();

        Self { queue }
    }
}

impl AudioDevice for Audio {
    fn queue(&mut self, buffer: &[f32]) {
        // println!("buffering, prev size={}", self.queue.size());
        // TODO handle buffer overflow & underflow

        // if queue.size() > 20 * 1024 {
        //     println!("buffering, prev size={}, skip", queue.size());
        //     return;
        // } else {
        // }

        self.queue.queue_audio(buffer).unwrap();
    }
}

```

`desktop/src/main.rs`:

```rs
use std::{
    fs::File,
    io::Read,
    time::{Duration, Instant},
};

use crate::audio::Audio;
use env_logger::Env;
use gb::{
    cartridges::cartridge::Cartridge,
    constants::{DISPLAY_HEIGHT, DISPLAY_WIDTH},
    emulator::Emulator,
    joypad::JoypadKey,
};
use sdl2::{event::Event, keyboard::Keycode, pixels::Color, Sdl};

mod audio;

fn get_file_as_byte_vec(filename: &str) -> Vec<u8> {
    let mut f = File::open(filename).expect("no file found");

    let mut data = vec![];
    f.read_to_end(&mut data).unwrap();

    data
}

fn map_joypad_key(key: Keycode) -> Option<JoypadKey> {
    match key {
        Keycode::Down | Keycode::S => Some(JoypadKey::ArrowDown),
        Keycode::Left | Keycode::A => Some(JoypadKey::ArrowLeft),
        Keycode::Up | Keycode::W => Some(JoypadKey::ArrowUp),
        Keycode::Right | Keycode::D => Some(JoypadKey::ArrowRight),
        Keycode::J | Keycode::X => Some(JoypadKey::A),
        Keycode::K | Keycode::C => Some(JoypadKey::B),
        Keycode::B => Some(JoypadKey::Start),
        Keycode::N => Some(JoypadKey::Select),
        _ => None,
    }
}

fn create_emulator(sdl_context: &Sdl, bytes: &[u8]) -> Emulator {
    let audio_device = Box::new(Audio::new(sdl_context));
    let cartridge = Cartridge::from_bytes(bytes);
    let device = match cartridge.supports_cgb() {
        true => gb::emulator::Device::CGB,
        false => gb::emulator::Device::DMG,
    };
    Emulator::new(false, cartridge, audio_device, device)
}

fn main() {
    env_logger::Builder::from_env(Env::default().default_filter_or("debug"))
        .format_timestamp(None)
        .format_level(false)
        .format_module_path(false)
        .target(env_logger::Target::Stdout)
        .init();

    let sdl_context = sdl2::init().unwrap();
    let video_subsystem = sdl_context.video().unwrap();

    let window = video_subsystem
        .window(
            "GameBoy Emulator",
            DISPLAY_WIDTH as u32,
            DISPLAY_HEIGHT as u32,
        )
        .position_centered()
        .build()
        .unwrap();

    let mut canvas = window.into_canvas().software().build().unwrap();
    let mut event_pump = sdl_context.event_pump().unwrap();

    // let bytes = get_file_as_byte_vec("roms/demos/gejmboj.gb");
    let bytes = get_file_as_byte_vec("roms/demos/oh.gb");
    // let bytes = get_file_as_byte_vec("roms/games/mario.gb");
    // let bytes = get_file_as_byte_vec("roms/games/pokemon-silver.gbc");

    let mut emulator = create_emulator(&sdl_context, &bytes);

    let mut carry = Duration::new(0, 0);

    let mut running = false;
    let mut run_one_frame = false;
    let mut restart = false;

    'running: loop {
        let time = Instant::now();

        // Handle events
        for event in event_pump.poll_iter() {
            match event {
                Event::Quit { .. } => {
                    break 'running;
                }
                Event::KeyUp { keycode, .. } => {
                    if let Some(key) = keycode.and_then(map_joypad_key) {
                        emulator.on_key_up(key)
                    }
                }
                Event::KeyDown { keycode, .. } => {
                    if let Some(Keycode::P) = keycode {
                        running = !running;
                    }
                    if let Some(Keycode::O) = keycode {
                        run_one_frame = true;
                    }
                    if let Some(Keycode::R) = keycode {
                        restart = true;
                    }

                    if let Some(key) = keycode.and_then(map_joypad_key) {
                        emulator.on_key_down(key)
                    }
                }
                _ => {}
            }
        }

        if running || run_one_frame {
            emulator.run_frame();
            let buffer = emulator.get_screen_buffer();

            canvas.clear();
            canvas.set_draw_color(Color::WHITE);
            for y in 0..DISPLAY_HEIGHT {
                for x in 0..DISPLAY_WIDTH {
                    let pixel = buffer.get_pixel(x, y);

                    let color = Color::RGB(pixel.r, pixel.g, pixel.b);
                    canvas.set_draw_color(color);

                    canvas.draw_point((x as i32, y as i32)).unwrap();
                }
            }

            canvas.present();
        }

        if restart {
            emulator = create_emulator(&sdl_context, &bytes);
            canvas.clear();
            canvas.set_draw_color(Color::WHITE);
            canvas.present();
        }

        restart = false;
        run_one_frame = false;

        let elapsed = time.elapsed() + carry;
        let sleep = Duration::new(0, 1_000_000_000 / 60);
        if elapsed < sleep {
            carry = Duration::new(0, 0);
            std::thread::sleep(sleep - elapsed);
        } else {
            carry = elapsed - sleep;
        }
    }
}

```

`docs/results/results.md`:

```md
## Blargg's tests

https://github.com/retrio/gb-test-roms

Some of those tests are skipped, see `blarggs_tests.rs` why.

| Test                                                             | Result |
| ---------------------------------------------------------------- | ------ |
| roms/gb-test-roms/cpu_instrs/cpu_instrs.gb                       | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/01-special.gb            | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/02-interrupts.gb         | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/03-op sp,hl.gb           | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/04-op r,imm.gb           | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/05-op rp.gb              | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/06-ld r,r.gb             | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/07-jr,jp,call,ret,rst.gb | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/08-misc instrs.gb        | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/09-op r,r.gb             | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/10-bit ops.gb            | ✅     |
| roms/gb-test-roms/cpu_instrs/individual/11-op a,(hl).gb          | ✅     |
| roms/gb-test-roms/instr_timing/instr_timing.gb                   | ✅     |
| roms/gb-test-roms/mem_timing/individual/01-read_timing.gb        | ✅     |
| roms/gb-test-roms/mem_timing/individual/02-write_timing.gb       | ✅     |
| roms/gb-test-roms/mem_timing/individual/03-modify_timing.gb      | ✅     |
| roms/gb-test-roms/mem_timing/mem_timing.gb                       | ✅     |

## Blargg's tests - dmg_sound

https://github.com/retrio/gb-test-roms

| Name                     | Expected                                   | Result                                   | Diff                                   | Status        |
| ------------------------ | ------------------------------------------ | ---------------------------------------- | -------------------------------------- | ------------- |
| 01-registers             | ![](01-registers/expected.png)             | ![](01-registers/result.png)             | ![](01-registers/diff.png)             | ✅ Diff: 0    |
| 02-len_ctr               | ![](02-len_ctr/expected.png)               | ![](02-len_ctr/result.png)               | ![](02-len_ctr/diff.png)               | ✅ Diff: 0    |
| 03-trigger               | ![](03-trigger/expected.png)               | ![](03-trigger/result.png)               | ![](03-trigger/diff.png)               | ✅ Diff: 0    |
| 04-sweep                 | ![](04-sweep/expected.png)                 | ![](04-sweep/result.png)                 | ![](04-sweep/diff.png)                 | ✅ Diff: 0    |
| 05-sweep_details         | ![](05-sweep_details/expected.png)         | ![](05-sweep_details/result.png)         | ![](05-sweep_details/diff.png)         | ✅ Diff: 0    |
| 06-overflow_on_trigger   | ![](06-overflow_on_trigger/expected.png)   | ![](06-overflow_on_trigger/result.png)   | ![](06-overflow_on_trigger/diff.png)   | ✅ Diff: 0    |
| 07-len_sweep_period_sync | ![](07-len_sweep_period_sync/expected.png) | ![](07-len_sweep_period_sync/result.png) | ![](07-len_sweep_period_sync/diff.png) | ✅ Diff: 0    |
| 08-len_ctr_during_power  | ![](08-len_ctr_during_power/expected.png)  | ![](08-len_ctr_during_power/result.png)  | ![](08-len_ctr_during_power/diff.png)  | ✅ Diff: 0    |
| 09-wave_read_while_on    | ![](09-wave_read_while_on/expected.png)    | ![](09-wave_read_while_on/result.png)    | ![](09-wave_read_while_on/diff.png)    | ❌ Diff: 3433 |
| 10-wave_trigger_while_on | ![](10-wave_trigger_while_on/expected.png) | ![](10-wave_trigger_while_on/result.png) | ![](10-wave_trigger_while_on/diff.png) | ❌ Diff: 290  |
| 11-regs_after_power      | ![](11-regs_after_power/expected.png)      | ![](11-regs_after_power/result.png)      | ![](11-regs_after_power/diff.png)      | ✅ Diff: 0    |
| 12-wave_write_while_on   | ![](12-wave_write_while_on/expected.png)   | ![](12-wave_write_while_on/result.png)   | ![](12-wave_write_while_on/diff.png)   | ❌ Diff: 549  |

## Mooneye Test Suite

https://github.com/Gekkio/mooneye-test-suite

Only DMG compatible tests used.

| Test                                                                         | Result |
| ---------------------------------------------------------------------------- | ------ |
| roms/mooneye-test-suite/build/acceptance/add_sp_e_timing.gb                  | ✅     |
| roms/mooneye-test-suite/build/acceptance/bits/mem_oam.gb                     | ✅     |
| roms/mooneye-test-suite/build/acceptance/bits/reg_f.gb                       | ✅     |
| roms/mooneye-test-suite/build/acceptance/bits/unused_hwio-GS.gb              | ✅     |
| roms/mooneye-test-suite/build/acceptance/boot_div-dmgABCmgb.gb               | ✅     |
| roms/mooneye-test-suite/build/acceptance/boot_hwio-dmgABCmgb.gb              | ✅     |
| roms/mooneye-test-suite/build/acceptance/boot_regs-dmgABC.gb                 | ✅     |
| roms/mooneye-test-suite/build/acceptance/call_cc_timing.gb                   | ✅     |
| roms/mooneye-test-suite/build/acceptance/call_cc_timing2.gb                  | ✅     |
| roms/mooneye-test-suite/build/acceptance/call_timing.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/call_timing2.gb                     | ✅     |
| roms/mooneye-test-suite/build/acceptance/di_timing-GS.gb                     | ✅     |
| roms/mooneye-test-suite/build/acceptance/div_timing.gb                       | ✅     |
| roms/mooneye-test-suite/build/acceptance/ei_sequence.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/ei_timing.gb                        | ✅     |
| roms/mooneye-test-suite/build/acceptance/halt_ime0_ei.gb                     | ✅     |
| roms/mooneye-test-suite/build/acceptance/halt_ime0_nointr_timing.gb          | ✅     |
| roms/mooneye-test-suite/build/acceptance/halt_ime1_timing.gb                 | ✅     |
| roms/mooneye-test-suite/build/acceptance/halt_ime1_timing2-GS.gb             | ✅     |
| roms/mooneye-test-suite/build/acceptance/if_ie_registers.gb                  | ✅     |
| roms/mooneye-test-suite/build/acceptance/instr/daa.gb                        | ✅     |
| roms/mooneye-test-suite/build/acceptance/interrupts/ie_push.gb               | ✅     |
| roms/mooneye-test-suite/build/acceptance/intr_timing.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/jp_cc_timing.gb                     | ✅     |
| roms/mooneye-test-suite/build/acceptance/jp_timing.gb                        | ✅     |
| roms/mooneye-test-suite/build/acceptance/ld_hl_sp_e_timing.gb                | ✅     |
| roms/mooneye-test-suite/build/acceptance/oam_dma/basic.gb                    | ✅     |
| roms/mooneye-test-suite/build/acceptance/oam_dma/reg_read.gb                 | ✅     |
| roms/mooneye-test-suite/build/acceptance/oam_dma/sources-GS.gb               | ✅     |
| roms/mooneye-test-suite/build/acceptance/oam_dma_restart.gb                  | ✅     |
| roms/mooneye-test-suite/build/acceptance/oam_dma_start.gb                    | ✅     |
| roms/mooneye-test-suite/build/acceptance/oam_dma_timing.gb                   | ✅     |
| roms/mooneye-test-suite/build/acceptance/pop_timing.gb                       | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/hblank_ly_scx_timing-GS.gb      | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/intr_1_2_timing-GS.gb           | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/intr_2_0_timing.gb              | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/intr_2_mode0_timing.gb          | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/intr_2_mode0_timing_sprites.gb  | ❌     |
| roms/mooneye-test-suite/build/acceptance/ppu/intr_2_mode3_timing.gb          | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/intr_2_oam_ok_timing.gb         | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/lcdon_timing-GS.gb              | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/lcdon_write_timing-GS.gb        | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/stat_irq_blocking.gb            | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/stat_lyc_onoff.gb               | ✅     |
| roms/mooneye-test-suite/build/acceptance/ppu/vblank_stat_intr-GS.gb          | ✅     |
| roms/mooneye-test-suite/build/acceptance/push_timing.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/rapid_di_ei.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/ret_cc_timing.gb                    | ✅     |
| roms/mooneye-test-suite/build/acceptance/ret_timing.gb                       | ✅     |
| roms/mooneye-test-suite/build/acceptance/reti_intr_timing.gb                 | ✅     |
| roms/mooneye-test-suite/build/acceptance/reti_timing.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/rst_timing.gb                       | ✅     |
| roms/mooneye-test-suite/build/acceptance/serial/boot_sclk_align-dmgABCmgb.gb | ❌     |
| roms/mooneye-test-suite/build/acceptance/timer/div_write.gb                  | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/rapid_toggle.gb               | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tim00.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tim00_div_trigger.gb          | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tim01.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tim01_div_trigger.gb          | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tim10.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tim10_div_trigger.gb          | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tim11.gb                      | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tim11_div_trigger.gb          | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tima_reload.gb                | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tima_write_reloading.gb       | ✅     |
| roms/mooneye-test-suite/build/acceptance/timer/tma_write_reloading.gb        | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/bits_bank1.gb               | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/bits_bank2.gb               | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/bits_mode.gb                | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/bits_ramg.gb                | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/multicart_rom_8Mb.gb        | ❌     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/ram_256kb.gb                | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/ram_64kb.gb                 | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/rom_16Mb.gb                 | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/rom_1Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/rom_2Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/rom_4Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/rom_512kb.gb                | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc1/rom_8Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc2/bits_ramg.gb                | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc2/bits_romb.gb                | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc2/bits_unused.gb              | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc2/ram.gb                      | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc2/rom_1Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc2/rom_2Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc2/rom_512kb.gb                | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc5/rom_16Mb.gb                 | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc5/rom_1Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc5/rom_2Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc5/rom_32Mb.gb                 | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc5/rom_4Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc5/rom_512kb.gb                | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc5/rom_64Mb.gb                 | ✅     |
| roms/mooneye-test-suite/build/emulator-only/mbc5/rom_8Mb.gb                  | ✅     |
| roms/mooneye-test-suite/build/madness/mgb_oam_dma_halt_sprites.gb            | ❌     |
| roms/mooneye-test-suite/build/manual-only/sprite_priority.gb                 | ❌     |
| roms/mooneye-test-suite/build/utils/bootrom_dumper.gb                        | ❌     |
| roms/mooneye-test-suite/build/utils/dump_boot_hwio.gb                        | ✅     |

## Wilbertpol's tests

From https://github.com/vojty/wilbertpol-test-suite

| Test                                                                                     | Result |
| ---------------------------------------------------------------------------------------- | ------ |
| roms/wilbertpol-test-suite/build/acceptance/gpu/hblank_ly_scx_timing_nops.gb             | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/hblank_ly_scx_timing_variant_nops.gb     | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_0_timing.gb                         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_1_timing.gb                         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_scx1_timing_nops.gb         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_scx2_timing_nops.gb         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_scx3_timing_nops.gb         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_scx4_timing_nops.gb         | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_scx5_timing_nops.gb         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_scx6_timing_nops.gb         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_scx7_timing_nops.gb         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_scx8_timing_nops.gb         | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_timing_sprites_nops.gb      | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_timing_sprites_scx1_nops.gb | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_timing_sprites_scx2_nops.gb | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_timing_sprites_scx3_nops.gb | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_mode0_timing_sprites_scx4_nops.gb | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/intr_2_timing.gb                         | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/lcdon_mode_timing.gb                     | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly00_01_mode0_2.gb                       | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly00_mode0_2-GS.gb                       | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly00_mode1_0-GS.gb                       | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly00_mode2_3.gb                          | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly00_mode3_0.gb                          | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly143_144_145.gb                         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly143_144_152_153.gb                     | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly143_144_mode0_1.gb                     | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly143_144_mode3_0.gb                     | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly_lyc-GS.gb                             | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly_lyc_0-GS.gb                           | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly_lyc_0_write-GS.gb                     | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly_lyc_144-GS.gb                         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly_lyc_153-GS.gb                         | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly_lyc_153_write-GS.gb                   | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly_lyc_write-GS.gb                       | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/ly_new_frame-GS.gb                       | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/stat_write_if-GS.gb                      | ❌     |
| roms/wilbertpol-test-suite/build/acceptance/gpu/vblank_if_timing.gb                      | ✅     |
| roms/wilbertpol-test-suite/build/acceptance/timer/timer_if.gb                            | ❌     |

## acid2 tests

- https://github.com/mattcurrie/dmg-acid2
- https://github.com/mattcurrie/cgb-acid2

| Name      | Expected                    | Result                    | Diff                    | Status     |
| --------- | --------------------------- | ------------------------- | ----------------------- | ---------- |
| dmg-acid2 | ![](dmg-acid2/expected.png) | ![](dmg-acid2/result.png) | ![](dmg-acid2/diff.png) | ✅ Diff: 0 |
| cgb-acid2 | ![](cgb-acid2/expected.png) | ![](cgb-acid2/result.png) | ![](cgb-acid2/diff.png) | ✅ Diff: 0 |

## Scribbltests

https://github.com/Hacktix/scribbltests

| Name      | Expected                    | Result                    | Diff                    | Status     |
| --------- | --------------------------- | ------------------------- | ----------------------- | ---------- |
| scxly     | ![](scxly/expected.png)     | ![](scxly/result.png)     | ![](scxly/diff.png)     | ✅ Diff: 0 |
| lycscx    | ![](lycscx/expected.png)    | ![](lycscx/result.png)    | ![](lycscx/diff.png)    | ✅ Diff: 0 |
| lycscy    | ![](lycscy/expected.png)    | ![](lycscy/result.png)    | ![](lycscy/diff.png)    | ✅ Diff: 0 |
| palettely | ![](palettely/expected.png) | ![](palettely/result.png) | ![](palettely/diff.png) | ✅ Diff: 0 |
| statcount | ![](statcount/expected.png) | ![](statcount/result.png) | ![](statcount/diff.png) | ✅ Diff: 0 |

## TurtleTests

https://github.com/Powerlated/TurtleTests

| Name                          | Expected                                        | Result                                        | Diff                                        | Status     |
| ----------------------------- | ----------------------------------------------- | --------------------------------------------- | ------------------------------------------- | ---------- |
| window_y_trigger              | ![](window_y_trigger/expected.png)              | ![](window_y_trigger/result.png)              | ![](window_y_trigger/diff.png)              | ✅ Diff: 0 |
| window_y_trigger_wx_offscreen | ![](window_y_trigger_wx_offscreen/expected.png) | ![](window_y_trigger_wx_offscreen/result.png) | ![](window_y_trigger_wx_offscreen/diff.png) | ✅ Diff: 0 |

## MBC3-Tester

https://github.com/EricKirschenmann/MBC3-Tester-gb

| Name        | Expected                      | Result                      | Diff                      | Status     |
| ----------- | ----------------------------- | --------------------------- | ------------------------- | ---------- |
| MBC3-Tester | ![](MBC3-Tester/expected.png) | ![](MBC3-Tester/result.png) | ![](MBC3-Tester/diff.png) | ✅ Diff: 0 |

## Mealybug Tearoom Tests

https://github.com/mattcurrie/mealybug-tearoom-tests

| Name                              | Expected                                            | Result                                            | Diff                                            | Status         |
| --------------------------------- | --------------------------------------------------- | ------------------------------------------------- | ----------------------------------------------- | -------------- |
| m2_win_en_toggle                  | ![](m2_win_en_toggle/expected.png)                  | ![](m2_win_en_toggle/result.png)                  | ![](m2_win_en_toggle/diff.png)                  | ✅ Diff: 0     |
| m3_bgp_change                     | ![](m3_bgp_change/expected.png)                     | ![](m3_bgp_change/result.png)                     | ![](m3_bgp_change/diff.png)                     | ❌ Diff: 2927  |
| m3_bgp_change_sprites             | ![](m3_bgp_change_sprites/expected.png)             | ![](m3_bgp_change_sprites/result.png)             | ![](m3_bgp_change_sprites/diff.png)             | ❌ Diff: 9346  |
| m3_lcdc_bg_en_change              | ![](m3_lcdc_bg_en_change/expected.png)              | ![](m3_lcdc_bg_en_change/result.png)              | ![](m3_lcdc_bg_en_change/diff.png)              | ❌ Diff: 3457  |
| m3_lcdc_bg_map_change             | ![](m3_lcdc_bg_map_change/expected.png)             | ![](m3_lcdc_bg_map_change/result.png)             | ![](m3_lcdc_bg_map_change/diff.png)             | ❌ Diff: 2386  |
| m3_lcdc_obj_en_change             | ![](m3_lcdc_obj_en_change/expected.png)             | ![](m3_lcdc_obj_en_change/result.png)             | ![](m3_lcdc_obj_en_change/diff.png)             | ❌ Diff: 146   |
| m3_lcdc_obj_en_change_variant     | ![](m3_lcdc_obj_en_change_variant/expected.png)     | ![](m3_lcdc_obj_en_change_variant/result.png)     | ![](m3_lcdc_obj_en_change_variant/diff.png)     | ❌ Diff: 1334  |
| m3_lcdc_obj_size_change           | ![](m3_lcdc_obj_size_change/expected.png)           | ![](m3_lcdc_obj_size_change/result.png)           | ![](m3_lcdc_obj_size_change/diff.png)           | ❌ Diff: 309   |
| m3_lcdc_obj_size_change_scx       | ![](m3_lcdc_obj_size_change_scx/expected.png)       | ![](m3_lcdc_obj_size_change_scx/result.png)       | ![](m3_lcdc_obj_size_change_scx/diff.png)       | ❌ Diff: 190   |
| m3_lcdc_tile_sel_change           | ![](m3_lcdc_tile_sel_change/expected.png)           | ![](m3_lcdc_tile_sel_change/result.png)           | ![](m3_lcdc_tile_sel_change/diff.png)           | ❌ Diff: 2574  |
| m3_lcdc_tile_sel_win_change       | ![](m3_lcdc_tile_sel_win_change/expected.png)       | ![](m3_lcdc_tile_sel_win_change/result.png)       | ![](m3_lcdc_tile_sel_win_change/diff.png)       | ❌ Diff: 2741  |
| m3_lcdc_win_en_change_multiple    | ![](m3_lcdc_win_en_change_multiple/expected.png)    | ![](m3_lcdc_win_en_change_multiple/result.png)    | ![](m3_lcdc_win_en_change_multiple/diff.png)    | ❌ Diff: 8169  |
| m3_lcdc_win_en_change_multiple_wx | ![](m3_lcdc_win_en_change_multiple_wx/expected.png) | ![](m3_lcdc_win_en_change_multiple_wx/result.png) | ![](m3_lcdc_win_en_change_multiple_wx/diff.png) | ❌ Diff: 4966  |
| m3_lcdc_win_map_change            | ![](m3_lcdc_win_map_change/expected.png)            | ![](m3_lcdc_win_map_change/result.png)            | ![](m3_lcdc_win_map_change/diff.png)            | ❌ Diff: 2052  |
| m3_obp0_change                    | ![](m3_obp0_change/expected.png)                    | ![](m3_obp0_change/result.png)                    | ![](m3_obp0_change/diff.png)                    | ❌ Diff: 414   |
| m3_scx_high_5_bits                | ![](m3_scx_high_5_bits/expected.png)                | ![](m3_scx_high_5_bits/result.png)                | ![](m3_scx_high_5_bits/diff.png)                | ❌ Diff: 6426  |
| m3_scx_low_3_bits                 | ![](m3_scx_low_3_bits/expected.png)                 | ![](m3_scx_low_3_bits/result.png)                 | ![](m3_scx_low_3_bits/diff.png)                 | ❌ Diff: 540   |
| m3_scy_change                     | ![](m3_scy_change/expected.png)                     | ![](m3_scy_change/result.png)                     | ![](m3_scy_change/diff.png)                     | ❌ Diff: 8750  |
| m3_window_timing                  | ![](m3_window_timing/expected.png)                  | ![](m3_window_timing/result.png)                  | ![](m3_window_timing/diff.png)                  | ❌ Diff: 665   |
| m3_window_timing_wx_0             | ![](m3_window_timing_wx_0/expected.png)             | ![](m3_window_timing_wx_0/result.png)             | ![](m3_window_timing_wx_0/diff.png)             | ❌ Diff: 954   |
| m3_wx_4_change                    | ![](m3_wx_4_change/expected.png)                    | ![](m3_wx_4_change/result.png)                    | ![](m3_wx_4_change/diff.png)                    | ❌ Diff: 229   |
| m3_wx_4_change_sprites            | ![](m3_wx_4_change_sprites/expected.png)            | ![](m3_wx_4_change_sprites/result.png)            | ![](m3_wx_4_change_sprites/diff.png)            | ❌ Diff: 10    |
| m3_wx_5_change                    | ![](m3_wx_5_change/expected.png)                    | ![](m3_wx_5_change/result.png)                    | ![](m3_wx_5_change/diff.png)                    | ❌ Diff: 638   |
| m3_wx_6_change                    | ![](m3_wx_6_change/expected.png)                    | ![](m3_wx_6_change/result.png)                    | ![](m3_wx_6_change/diff.png)                    | ❌ Diff: 13799 |

## AGE test suite

Only DMG-related tests for now. From https://github.com/c-sp/age-test-roms

| Test                                                                        | Result | Screenshot                                                 |
| --------------------------------------------------------------------------- | ------ | ---------------------------------------------------------- |
| roms/age-test-roms/build/halt/ei-halt-dmgC-cgbBCE.gb                        | ❌     | ![](age-tests/ei-halt-dmgC-cgbBCE.gb/result.png)           |
| roms/age-test-roms/build/halt/halt-m0-interrupt-dmgC-cgbBCE.gb              | ❌     | ![](age-tests/halt-m0-interrupt-dmgC-cgbBCE.gb/result.png) |
| roms/age-test-roms/build/halt/halt-prefetch-dmgC-cgbBCE.gb                  | ✅     | ![](age-tests/halt-prefetch-dmgC-cgbBCE.gb/result.png)     |
| roms/age-test-roms/build/ly/ly-dmgC-cgbBC.gb                                | ✅     | ![](age-tests/ly-dmgC-cgbBC.gb/result.png)                 |
| roms/age-test-roms/build/oam/oam-read-dmgC-cgbBC.gb                         | ❌     | ![](age-tests/oam-read-dmgC-cgbBC.gb/result.png)           |
| roms/age-test-roms/build/oam/oam-write-dmgC.gb                              | ❌     | ![](age-tests/oam-write-dmgC.gb/result.png)                |
| roms/age-test-roms/build/stat-interrupt/stat-int-dmgC-cgbBCE.gb             | ❌     | ![](age-tests/stat-int-dmgC-cgbBCE.gb/result.png)          |
| roms/age-test-roms/build/stat-mode/stat-mode-dmgC-cgbBC.gb                  | ❌     | ![](age-tests/stat-mode-dmgC-cgbBC.gb/result.png)          |
| roms/age-test-roms/build/stat-mode-sprites/stat-mode-sprites-dmgC-cgbBCE.gb | ❌     | ![](age-tests/stat-mode-sprites-dmgC-cgbBCE.gb/result.png) |
| roms/age-test-roms/build/stat-mode-window/stat-mode-window-dmgC.gb          | ❌     | ![](age-tests/stat-mode-window-dmgC.gb/result.png)         |
| roms/age-test-roms/build/vram/vram-read-dmgC.gb                             | ❌     | ![](age-tests/vram-read-dmgC.gb/result.png)                |

Generated at: 2023-05-20 18:53:42.497328 UTC, took 2s

```

`gb-web/Cargo.toml`:

```toml
[package]
name = "gb-web"
version = "0.1.0"
authors = ["Tomáš Vojtášek <vojtasek.tomas@seznam.cz>"]
repository = "https://github.com/vojty/feather-gb"
description = "Just another GameBoy emulator written in Rust 🦀"
license = "UNLICENSED"
edition = "2021"

[lib]
crate-type = ["cdylib"]

[dependencies]
gb = { path = "../gb" }

console_error_panic_hook = "0.1.7"
log = "0.4.17"
js-sys = "0.3.60"
wasm-bindgen = "0.2.83"
wasm-logger = "0.2.0"


```

`gb-web/src/audio.rs`:

```rs
use gb::audio::AudioDevice;
use js_sys::Function;
use wasm_bindgen::JsValue;

pub struct WebAudio {
    pub audio_buffer_callback: Function,
}

impl WebAudio {
    pub fn new(audio_buffer_callback: &js_sys::Function) -> Self {
        Self {
            audio_buffer_callback: audio_buffer_callback.clone(),
        }
    }
}

impl AudioDevice for WebAudio {
    fn queue(&mut self, buffer: &[f32]) {
        // Dummy audio device which just passes pointer to audio buffer to JS world
        let this = JsValue::null();
        let audio_buffer_ptr = JsValue::from(buffer.as_ptr() as u32);
        self.audio_buffer_callback
            .call1(&this, &audio_buffer_ptr)
            .unwrap();
    }
}

```

`gb-web/src/lib.rs`:

```rs
#![allow(clippy::unused_unit)]

use audio::WebAudio;
use wasm_bindgen::prelude::*;

use std::panic;

use gb::{
    audio::AudioDevice,
    cartridges::cartridge::Cartridge,
    constants::AUDIO_BUFFER_SIZE,
    emulator::{Device, Emulator},
    joypad::JoypadKey,
    ppu::palettes::DmgPalettes,
};

mod audio;

#[wasm_bindgen]
pub struct WebCartridge {
    cartridge: Cartridge,
}

#[wasm_bindgen]
impl WebCartridge {
    #[wasm_bindgen(constructor)]
    pub fn new(bytes: Vec<u8>) -> WebCartridge {
        WebCartridge {
            cartridge: Cartridge::from_bytes(&bytes),
        }
    }
}

#[wasm_bindgen()]
pub fn get_audio_buffer_size() -> usize {
    AUDIO_BUFFER_SIZE
}

#[wasm_bindgen]
pub struct WebEmulator {
    e: Emulator,
}

#[wasm_bindgen]
pub enum JsKeys {
    ArrowDown,
    ArrowLeft,
    ArrowRight,
    ArrowUp,
    A,
    B,
    Start,
    Select,
}

// TODO find out, how to re-export existing enum to wasm in this web project
fn translate_key(input: JsKeys) -> JoypadKey {
    match input {
        JsKeys::ArrowDown => JoypadKey::ArrowDown,
        JsKeys::ArrowUp => JoypadKey::ArrowUp,
        JsKeys::ArrowLeft => JoypadKey::ArrowLeft,
        JsKeys::ArrowRight => JoypadKey::ArrowRight,
        JsKeys::A => JoypadKey::A,
        JsKeys::B => JoypadKey::B,
        JsKeys::Start => JoypadKey::Start,
        JsKeys::Select => JoypadKey::Select,
    }
}

fn create_audio_device(audio_buffer_callback: &js_sys::Function) -> Box<dyn AudioDevice> {
    Box::new(WebAudio::new(audio_buffer_callback))
}

#[wasm_bindgen]
impl WebEmulator {
    #[wasm_bindgen(constructor)]
    pub fn new(
        web_cartridge: WebCartridge,
        audio_buffer_callback: &js_sys::Function,
    ) -> WebEmulator {
        let mut e = Emulator::new(
            false,
            web_cartridge.cartridge,
            create_audio_device(audio_buffer_callback),
            Device::AutoDetect,
        );
        e.set_system_palette(&DmgPalettes::GreenDmg);
        WebEmulator { e }
    }

    pub fn run_frame(&mut self) {
        self.e.run_frame()
    }

    pub fn get_canvas_data_pointer(&self) -> *const u8 {
        self.e.get_screen_buffer().get_raw_data()
    }

    pub fn on_key_down(&mut self, input_key: JsKeys) {
        self.e.on_key_down(translate_key(input_key));
    }

    pub fn on_key_up(&mut self, input_key: JsKeys) {
        self.e.on_key_up(translate_key(input_key));
    }

    pub fn set_audio_buffer_callback(&mut self, audio_buffer_callback: &js_sys::Function) {
        self.e
            .set_audio_device(create_audio_device(audio_buffer_callback));
    }
}

#[wasm_bindgen]
pub fn init() {
    panic::set_hook(Box::new(console_error_panic_hook::hook));
}

```

`gb/Cargo.toml`:

```toml
[package]
name = "gb"
version = "0.1.0"
authors = ["Tomáš Vojtášek <vojtasek.tomas@seznam.cz>"]
repository = "https://github.com/vojty/feather-gb"
description = "Just another GameBoy emulator written in Rust 🦀"
license = "UNLICENSED"
edition = "2021"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[lib]
name = "gb"
path = "src/lib.rs"

[dependencies]
arrayvec = "0.7.2"
bitflags = "2.2.1"
log = "0.4.17"
parse-display = "0.8.0"
```

`gb/src/apu/apu.rs`:

```rs
use bitflags::bitflags;

use super::{
    channel1::Channel1,
    channel2::Channel2,
    channel3::{Channel3, WAVE_PATTERN_RAM_END, WAVE_PATTERN_RAM_START},
    channel4::Channel4,
    frame_sequencer::FrameSequencer,
    registers::*,
};
use crate::{
    audio::AudioDevice,
    constants::{AUDIO_BUFFER_SIZE, AUDIO_CYCLES_PER_SAMPLE},
    traits::MemoryAccess,
    utils::invalid_address,
};

bitflags!(
  #[derive(Default, Debug)]
  struct EnabledChannels: u8 {
    const CHANNEL_1 = 0b0001;
    const CHANNEL_2 = 0b0010;
    const CHANNEL_3 = 0b0100;
    const CHANNEL_4 = 0b1000;
  }
);

#[derive(Default, Debug)]
struct Terminal {
    pub vin: bool,
    pub volume: u8,
    pub enabled_channels: EnabledChannels,
}

impl Terminal {
    fn mix_outputs(&self, channel1: f32, channel2: f32, channel3: f32, channel4: f32) -> f32 {
        // 0-7 => 0-1
        let volume = self.volume as f32 / 7.0;

        let mut amplitude = 0.0;
        if self.enabled_channels.contains(EnabledChannels::CHANNEL_1) {
            amplitude += channel1;
        }
        if self.enabled_channels.contains(EnabledChannels::CHANNEL_2) {
            amplitude += channel2;
        }
        if self.enabled_channels.contains(EnabledChannels::CHANNEL_3) {
            amplitude += channel3;
        }
        if self.enabled_channels.contains(EnabledChannels::CHANNEL_4) {
            amplitude += channel4;
        }
        volume * amplitude / 4.0
    }
}

/*
    Channel steps / components

    FrequencyTimer
        - advanced on every T-cycle
        - used in all channels
        - when expires, the sound output is adjusted (wave or square generation) and internal timer is reloaded

    WaveDuty
        - advanced by FrameSequencer
        - used by channels 1 & 2
        - has 8 steps, every step adjusts the output square

    LengthCounter
        - advanced by FrameSequencer
        - use in all channels
        - the channel is disabled when expires

    VolumeEnvelope
        - advanced by FrameSequencer
        - used in channels 1 & 2
        - periodically adjusts the volume

    Sweep
        - used in channel 1 only
        - periodically adjusts the frequency of FrequencyTimer
*/

pub struct Apu {
    frame_sequencer: FrameSequencer,
    enabled: bool,
    sample_cycles: usize, // audio frame cycles

    channel1: Channel1,
    channel2: Channel2,
    channel3: Channel3,
    channel4: Channel4,
    right: Terminal, // SO1
    left: Terminal,  // SO2

    pub buffer: Box<[f32; AUDIO_BUFFER_SIZE]>,
    buffer_position: usize,

    audio_device: Box<dyn AudioDevice>,
}

impl Apu {
    pub fn new(audio_device: Box<dyn AudioDevice>) -> Self {
        Self {
            frame_sequencer: FrameSequencer::new(),
            enabled: false,
            sample_cycles: 0,
            channel1: Channel1::new(),
            channel2: Channel2::new(),
            channel3: Channel3::new(),
            channel4: Channel4::new(),
            right: Terminal::default(),
            left: Terminal::default(),

            audio_device,
            buffer: Box::new([0.0; AUDIO_BUFFER_SIZE]),
            buffer_position: 0,
        }
    }

    pub fn init_without_bios(&mut self) {
        self.write_byte(0xff26, 0xf1); // NR52 enable first
        self.write_byte(0xff10, 0x80); // NR10
        self.write_byte(0xff11, 0xbf); // NR11
        self.write_byte(0xff12, 0xf3); // NR12
        self.write_byte(0xff14, 0xbf); // NR14
        self.write_byte(0xff16, 0x3f); // NR21
        self.write_byte(0xff17, 0x00); // NR22
        self.write_byte(0xff19, 0xbf); // NR24
        self.write_byte(0xff1a, 0x7f); // NR30
        self.write_byte(0xff1b, 0xff); // NR31
        self.write_byte(0xff1c, 0x9f); // NR32
        self.write_byte(0xff1e, 0xbf); // NR33
        self.write_byte(0xff20, 0xff); // NR41
        self.write_byte(0xff21, 0x00); // NR42
        self.write_byte(0xff22, 0x00); // NR43
        self.write_byte(0xff23, 0xbf); // NR30
        self.write_byte(0xff24, 0x77); // NR50
        self.write_byte(0xff25, 0xf3); // NR51
    }

    pub fn set_audio_device(&mut self, audio_device: Box<dyn AudioDevice>) {
        self.audio_device = audio_device;
    }

    pub fn tick(&mut self) {
        if !self.enabled {
            return;
        }

        self.sample_cycles = self.sample_cycles.wrapping_add(1);

        self.channel1.tick();
        self.channel2.tick();
        self.channel3.tick();
        self.channel4.tick();

        // Advance components with frame sequencer
        if let Some(step) = self.frame_sequencer.tick() {
            match step {
                0 => {
                    self.channel1.tick_length_timer();
                    self.channel2.tick_length_timer();
                    self.channel3.tick_length_timer();
                    self.channel4.tick_length_timer();
                }
                2 => {
                    self.channel1.tick_length_timer();
                    self.channel2.tick_length_timer();
                    self.channel3.tick_length_timer();
                    self.channel4.tick_length_timer();
                    self.channel1.tick_sweep();
                }
                4 => {
                    self.channel1.tick_length_timer();
                    self.channel2.tick_length_timer();
                    self.channel3.tick_length_timer();
                    self.channel4.tick_length_timer();
                }
                6 => {
                    self.channel1.tick_length_timer();
                    self.channel2.tick_length_timer();
                    self.channel3.tick_length_timer();
                    self.channel4.tick_length_timer();
                    self.channel1.tick_sweep();
                }
                7 => {
                    self.channel1.volume_envelope.tick();
                    self.channel2.volume_envelope.tick();
                    self.channel4.volume_envelope.tick();
                }
                _ => (),
            }
        }

        // Create sample
        if self.sample_cycles == AUDIO_CYCLES_PER_SAMPLE {
            self.sample_cycles = 0;

            // Mix channels
            let amp_channel1 = self.channel1.get_amplitude();
            let amp_channel2 = self.channel2.get_amplitude();
            let amp_channel3 = self.channel3.get_amplitude();
            let amp_channel4 = self.channel4.get_amplitude();
            let left_sample =
                self.left
                    .mix_outputs(amp_channel1, amp_channel2, amp_channel3, amp_channel4);
            let right_sample =
                self.right
                    .mix_outputs(amp_channel1, amp_channel2, amp_channel3, amp_channel4);

            self.buffer[self.buffer_position] = left_sample; // Left
            self.buffer[self.buffer_position + 1] = right_sample; // Right

            self.buffer_position += 2;
        }

        // Full buffer
        if self.buffer_position >= AUDIO_BUFFER_SIZE {
            self.audio_device.queue(self.buffer.as_ref());
            self.buffer_position = 0;
        }
    }

    fn is_writable(&self, address: u16) -> bool {
        // If APU is disabled, only writes to NRx1 length registers, NR52 (to enable APU again) and Wave RAM are enabled
        if self.enabled {
            return true;
        }

        if [R_NR52, R_NR11, R_NR21, R_NR31, R_NR41].contains(&address) {
            return true;
        }

        if (WAVE_PATTERN_RAM_START..=WAVE_PATTERN_RAM_END).contains(&address) {
            return true;
        }

        false
    }
}

impl MemoryAccess for Apu {
    fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_NR50 => {
                (self.left.vin as u8) << 7
                    | self.left.volume << 4
                    | (self.right.vin as u8) << 3
                    | self.right.volume
            }
            R_NR51 => (self.left.enabled_channels.bits() << 4) | self.right.enabled_channels.bits(),
            R_NR52 => {
                ((self.enabled as u8) << 7)
                    | 0b0111_0000
                    | ((self.channel4.channel_enabled as u8) << 3)
                    | ((self.channel3.channel_enabled as u8) << 2)
                    | ((self.channel2.channel_enabled as u8) << 1)
                    | (self.channel1.channel_enabled as u8)
            }
            R_NR10 | R_NR11 | R_NR12 | R_NR13 | R_NR14 => self.channel1.read_byte(address),
            R_NR21..=R_NR24 => self.channel2.read_byte(address),
            R_NR30..=R_NR34 | WAVE_PATTERN_RAM_START..=WAVE_PATTERN_RAM_END => {
                self.channel3.read_byte(address)
            }
            R_NR41..=R_NR44 => self.channel4.read_byte(address),
            _ => invalid_address("APU (read)", address),
        }
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        if !self.is_writable(address) {
            return;
        }

        let next_step_is_length = (self.frame_sequencer.get_step() + 1) & 1 == 1;

        match address {
            R_NR50 => {
                self.left.vin = value & 0b1000_0000 > 0;
                self.left.volume = (value & 0b0111_0000) >> 4;
                self.right.vin = value & 0b0000_1000 > 0;
                self.right.volume = value & 0b0000_0111;
            }
            R_NR51 => {
                self.left.enabled_channels =
                    EnabledChannels::from_bits_truncate((value & 0xf0) >> 4);
                self.right.enabled_channels = EnabledChannels::from_bits_truncate(value & 0x0f);
            }
            R_NR52 => {
                let was_enabled = self.enabled;
                let enabled = (value & 0b1000_0000) > 0;

                // on -> off
                if was_enabled && !enabled {
                    [
                        (R_NR10..=R_NR14),
                        (R_NR21..=R_NR24),
                        (R_NR30..=R_NR34),
                        (R_NR41..=R_NR44),
                        // Wave RAM is untouched
                    ]
                    .iter()
                    .for_each(|range| {
                        range.clone().for_each(|addr| self.write_byte(addr, 0x00));
                    });
                    self.write_byte(R_NR50, 0x00);
                    self.write_byte(R_NR51, 0x00);

                    self.frame_sequencer.reset();
                    // self.cycles = 0; // TODO check this
                }
                // At the end so it won't disable writes to registers
                self.enabled = enabled;
            }
            R_NR10 | R_NR11 | R_NR12 | R_NR13 | R_NR14 => {
                self.channel1
                    .write_byte(address, value, next_step_is_length, self.enabled)
            }
            R_NR21 | R_NR22 | R_NR23 | R_NR24 => {
                self.channel2
                    .write_byte(address, value, next_step_is_length, self.enabled)
            }
            R_NR30
            | R_NR31
            | R_NR32
            | R_NR33
            | R_NR34
            | WAVE_PATTERN_RAM_START..=WAVE_PATTERN_RAM_END => {
                self.channel3
                    .write_byte(address, value, next_step_is_length)
            }
            R_NR41 | R_NR42 | R_NR43 | R_NR44 => {
                self.channel4
                    .write_byte(address, value, next_step_is_length)
            }
            _ => invalid_address("APU (write)", address),
        }
    }
}

```

`gb/src/apu/channel1.rs`:

```rs
use crate::utils::invalid_address;

use super::{
    frequency_timer::{FrequencyTimer, FrequencyTimerType, MAX_FREQUENCY},
    length_counter::LengthCounter,
    registers::*,
    sweep::Sweep,
    volume_envelope::VolumeEnvelope,
    wave_duty::WaveDuty,
};

const MAX_LENGTH_TIMER: u16 = 64;

pub struct Channel1 {
    pub sweep: Sweep,
    pub volume_envelope: VolumeEnvelope,
    pub length_counter: LengthCounter,
    frequency_timer: FrequencyTimer,
    wave: WaveDuty,
    dac_enabled: bool,
    pub channel_enabled: bool,
}

impl Channel1 {
    pub fn new() -> Self {
        Self {
            channel_enabled: false,
            dac_enabled: false,
            sweep: Sweep::new(),
            volume_envelope: VolumeEnvelope::new(),
            length_counter: LengthCounter::new(MAX_LENGTH_TIMER),
            frequency_timer: FrequencyTimer::new(FrequencyTimerType::Wave),
            wave: WaveDuty::new(),
        }
    }

    pub fn tick(&mut self) {
        let reset = self.frequency_timer.tick();
        if reset {
            self.wave.tick();
        }
    }

    pub fn tick_length_timer(&mut self) {
        let expired = self.length_counter.tick();
        if expired {
            self.channel_enabled = false;
        }
    }

    pub fn tick_sweep(&mut self) {
        if !self.channel_enabled {
            return;
        }
        let reset = self.sweep.tick();
        if reset {
            if self.sweep.time > 0 {
                let frequency = self.sweep.calculate_frequency();
                // overflow disables channel
                if frequency > MAX_FREQUENCY {
                    self.channel_enabled = false;
                } else {
                    if self.sweep.get_shift() > 0 {
                        self.sweep.set_frequency(frequency);
                        self.frequency_timer.set_frequency(frequency);
                    }

                    // Another overflow check
                    if self.sweep.calculate_frequency() > MAX_FREQUENCY {
                        self.channel_enabled = false;
                    }
                }
            } else {
                self.sweep.timer = 8;
            }
        }
    }

    pub fn get_amplitude(&self) -> f32 {
        if self.dac_enabled && self.channel_enabled {
            let data =
                self.wave.get_data() as f32 * self.volume_envelope.get_current_volume() as f32;
            return (data / 7.5) - 1.0;
        }
        0.0
    }

    pub fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_NR10 => self.sweep.read_byte(),
            R_NR11 => self.wave.read_byte(),
            R_NR12 => self.volume_envelope.read_byte(),
            R_NR13 => 0xff,
            R_NR14 => 0b1011_1111 | (self.length_counter.get_enabled() as u8) << 6,
            _ => invalid_address("APU Channel 1 (read)", address),
        }
    }

    pub fn write_byte(
        &mut self,
        address: u16,
        value: u8,
        next_step_is_length: bool,
        apu_enabled: bool,
    ) {
        match address {
            R_NR10 => {
                let should_disable_channel = self.sweep.write_byte(value);
                if should_disable_channel {
                    self.channel_enabled = false;
                }
            }
            R_NR11 => {
                if apu_enabled {
                    self.wave.write_byte(value);
                }
                self.length_counter.set_counter(value & 0b0011_1111);
            }
            R_NR12 => {
                self.volume_envelope.write_byte(value);

                // Top 5 bits enables/disabled DAC
                self.dac_enabled = value & 0b1111_1000 > 0;

                // Disabled DAC also disables channel
                if !self.dac_enabled {
                    self.channel_enabled = false;
                }
            }
            R_NR13 => self.frequency_timer.set_frequency_low(value),
            R_NR14 => {
                self.frequency_timer.set_frequency_high(value);

                let (should_disable_channel, restart_triggered) = self
                    .length_counter
                    .write_control(value, next_step_is_length);

                if should_disable_channel {
                    self.channel_enabled = false;
                }

                if restart_triggered {
                    self.volume_envelope.reset();

                    if self.dac_enabled {
                        self.channel_enabled = true;
                    }

                    self.sweep.trigger(self.frequency_timer.get_frequency());

                    // https://gist.github.com/drhelius/3652407#file-game-boy-sound-operation-L240-L241
                    if self.sweep.get_shift() > 0
                        && self.sweep.calculate_frequency() > MAX_FREQUENCY
                    {
                        self.channel_enabled = false;
                    }
                }
            }
            _ => invalid_address("APU Channel 1 (write)", address),
        }
    }
}

```

`gb/src/apu/channel2.rs`:

```rs
use crate::utils::invalid_address;

use super::{
    frequency_timer::{FrequencyTimer, FrequencyTimerType},
    length_counter::LengthCounter,
    registers::*,
    volume_envelope::VolumeEnvelope,
    wave_duty::WaveDuty,
};

const MAX_LENGTH_TIMER: u16 = 64;

pub struct Channel2 {
    pub volume_envelope: VolumeEnvelope,
    length_counter: LengthCounter,
    frequency_timer: FrequencyTimer,
    wave: WaveDuty,
    dac_enabled: bool,
    pub channel_enabled: bool,
}

impl Channel2 {
    pub fn new() -> Self {
        Self {
            channel_enabled: false,
            dac_enabled: false,
            volume_envelope: VolumeEnvelope::new(),
            length_counter: LengthCounter::new(MAX_LENGTH_TIMER),
            frequency_timer: FrequencyTimer::new(FrequencyTimerType::Wave),
            wave: WaveDuty::new(),
        }
    }

    pub fn tick(&mut self) {
        let reset = self.frequency_timer.tick();
        if reset {
            self.wave.tick();
        }
    }

    pub fn tick_length_timer(&mut self) {
        let expired = self.length_counter.tick();
        if expired {
            self.channel_enabled = false;
        }
    }

    pub fn get_amplitude(&self) -> f32 {
        if self.dac_enabled && self.channel_enabled {
            let data =
                self.wave.get_data() as f32 * self.volume_envelope.get_current_volume() as f32;
            return (data / 7.5) - 1.0;
        }
        0.0
    }

    pub fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_NR21 => self.wave.read_byte(),
            R_NR22 => self.volume_envelope.read_byte(),
            R_NR23 => 0xff,
            R_NR24 => 0b1011_1111 | (self.length_counter.get_enabled() as u8) << 6,
            _ => invalid_address("APU Channel 2 (read)", address)
        }
    }

    pub fn write_byte(
        &mut self,
        address: u16,
        value: u8,
        next_step_is_length: bool,
        apu_enabled: bool,
    ) {
        match address {
            R_NR21 => {
                if apu_enabled {
                    self.wave.write_byte(value);
                }
                self.length_counter.set_counter(value & 0b0011_1111);
            }
            R_NR22 => {
                self.volume_envelope.write_byte(value);

                // Top 5 bits enables/disabled DAC
                self.dac_enabled = value & 0b1111_1000 > 0;

                // Disabled DAC also disables channel
                if !self.dac_enabled {
                    self.channel_enabled = false;
                }
            }
            R_NR23 => self.frequency_timer.set_frequency_low(value),
            R_NR24 => {
                self.frequency_timer.set_frequency_high(value);

                let (should_disable_channel, restart_triggered) = self
                    .length_counter
                    .write_control(value, next_step_is_length);

                if should_disable_channel {
                    self.channel_enabled = false;
                }

                if restart_triggered {
                    self.volume_envelope.reset();

                    if self.dac_enabled {
                        self.channel_enabled = true;
                    }
                }
            }
            _ => invalid_address("APU Channel 2 (write)", address),
        }
    }
}

```

`gb/src/apu/channel3.rs`:

```rs
use crate::utils::invalid_address;

use super::{
    frequency_timer::{FrequencyTimer, FrequencyTimerType},
    length_counter::LengthCounter,
    registers::*,
};

pub const WAVE_PATTERN_RAM_START: u16 = 0xff30;
pub const WAVE_PATTERN_RAM_END: u16 = 0xff3f;
const WAVE_PATTERN_RAM_SIZE: usize = (WAVE_PATTERN_RAM_END - WAVE_PATTERN_RAM_START + 1) as usize;
const SAMPLE_COUNT: usize = WAVE_PATTERN_RAM_SIZE * 2;

const MAX_LENGTH_TIMER: u16 = 256;

// Channel3 holds 32 4-bit samples (16 bytes in total)
// FF30 - Sample A + Sample B
// FF31 - Sample C + Sample D
// ...
pub struct Channel3 {
    pub channel_enabled: bool,
    dac_enabled: bool,
    length_counter: LengthCounter,
    frequency_timer: FrequencyTimer,
    wave_ram: Box<[u8; WAVE_PATTERN_RAM_SIZE]>,
    wave_position: usize,
    current_volume: u8,
}

fn get_ram_offset(address: u16) -> usize {
    (address - WAVE_PATTERN_RAM_START) as usize
}

impl Channel3 {
    pub fn new() -> Self {
        Self {
            channel_enabled: false,
            dac_enabled: false,
            length_counter: LengthCounter::new(MAX_LENGTH_TIMER),
            frequency_timer: FrequencyTimer::new(FrequencyTimerType::Channel3),
            wave_ram: Box::new([0x00; WAVE_PATTERN_RAM_SIZE]),
            wave_position: 0,
            current_volume: 0,
        }
    }

    pub fn tick(&mut self) {
        let reset = self.frequency_timer.tick();
        if reset {
            self.wave_position = (self.wave_position + 1) % SAMPLE_COUNT;
        }
    }

    pub fn tick_length_timer(&mut self) {
        let expired = self.length_counter.tick();
        if expired {
            self.channel_enabled = false;
        }
    }

    fn get_wave_index(&self) -> usize {
        self.wave_position >> 1 // one byte holds 2 4bit samples
    }

    pub fn get_amplitude(&self) -> f32 {
        if !self.dac_enabled {
            return 0.0;
        }

        let byte = self.wave_ram[self.get_wave_index()];

        // upper vs lower nibble
        let sample = if self.wave_position & 1 == 0 {
            byte >> 4
        } else {
            byte & 0x0f
        };

        let volume_shift = match self.current_volume {
            0b00 => 4, // mute
            0b01 => 0, // 100%
            0b10 => 1, // 50%
            0b11 => 2, // 25%
            _ => panic!("Unknown Channel 3 volume {}", self.current_volume),
        };

        let data = (sample >> volume_shift) as f32;
        (data / 7.5) - 1.0
    }

    fn get_rw_wave_ram_index(&self, address: u16) -> usize {
        if self.channel_enabled {
            return self.get_wave_index();
        }
        get_ram_offset(address)
    }

    pub fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_NR30 => 0b0111_1111 | (self.dac_enabled as u8) << 7,
            R_NR31 => 0xff,
            R_NR32 => 0b1001_1111 | self.current_volume << 5,
            R_NR33 => 0xff,
            R_NR34 => 0b1011_1111 | (self.length_counter.get_enabled() as u8) << 6,
            WAVE_PATTERN_RAM_START..=WAVE_PATTERN_RAM_END => {
                self.wave_ram[self.get_rw_wave_ram_index(address)]
            }
            _ => invalid_address("APU Channel 3 (read)", address),
        }
    }

    pub fn write_byte(&mut self, address: u16, value: u8, next_step_is_length: bool) {
        match address {
            R_NR30 => {
                self.dac_enabled = value & 0b1000_0000 > 0;
                if !self.dac_enabled {
                    self.channel_enabled = false;
                }
            }
            R_NR31 => self.length_counter.set_counter(value),
            R_NR32 => self.current_volume = (value & 0b0110_0000) >> 5,
            R_NR33 => self.frequency_timer.set_frequency_low(value),
            R_NR34 => {
                self.frequency_timer.set_frequency_high(value);

                let (should_disable_channel, restart_triggered) = self
                    .length_counter
                    .write_control(value, next_step_is_length);

                if should_disable_channel {
                    self.channel_enabled = false;
                }

                if restart_triggered {
                    self.wave_position = 0;

                    if self.dac_enabled {
                        self.channel_enabled = true;
                    }
                }
            }
            WAVE_PATTERN_RAM_START..=WAVE_PATTERN_RAM_END => {
                self.wave_ram[self.get_rw_wave_ram_index(address)] = value;
            }
            _ => invalid_address("APU Channel 3 (write)", address),
        }
    }
}

```

`gb/src/apu/channel4.rs`:

```rs
use crate::utils::invalid_address;

use super::{length_counter::LengthCounter, registers::*, volume_envelope::VolumeEnvelope};

const MAX_LENGTH_TIMER: u16 = 64;
pub struct Channel4 {
    length_counter: LengthCounter,
    pub volume_envelope: VolumeEnvelope,
    dac_enabled: bool,
    pub channel_enabled: bool,
    clock_shift: u8,
    polynomial_counter_width: u8,
    dividing_ratio: u8,
}

impl Channel4 {
    pub fn new() -> Self {
        Self {
            clock_shift: 0,
            polynomial_counter_width: 0,
            dividing_ratio: 0,
            channel_enabled: false,
            dac_enabled: false,
            length_counter: LengthCounter::new(MAX_LENGTH_TIMER),
            volume_envelope: VolumeEnvelope::new(),
        }
    }

    pub fn tick(&mut self) {}

    pub fn tick_length_timer(&mut self) {
        let expired = self.length_counter.tick();
        if expired {
            self.channel_enabled = false;
        }
    }

    pub fn get_amplitude(&self) -> f32 {
        0.0
    }

    pub fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_NR41 => 0xff,
            R_NR42 => self.volume_envelope.read_byte(),
            R_NR43 => {
                self.clock_shift << 4 | self.polynomial_counter_width << 3 | self.dividing_ratio
            }
            R_NR44 => 0b1011_1111 | (self.length_counter.get_enabled() as u8) << 6,
            _ => invalid_address("APU Channel 4 (read)", address),
        }
    }

    pub fn write_byte(&mut self, address: u16, value: u8, next_step_is_length: bool) {
        match address {
            R_NR41 => {
                self.length_counter.set_counter(value & 0b0011_1111);
            }
            R_NR42 => {
                self.volume_envelope.write_byte(value);

                // Top 5 bits enables/disabled DAC
                self.dac_enabled = value & 0b1111_1000 > 0;

                // Disabled DAC also disables channel
                if !self.dac_enabled {
                    self.channel_enabled = false;
                }
            }
            R_NR43 => {
                self.clock_shift = (value & 0b1111_0000) >> 4;
                self.polynomial_counter_width = (value & 0b0000_1000) >> 3;
                self.dividing_ratio = value & 0b0000_0111;
            }
            R_NR44 => {
                let (should_disable_channel, restart_triggered) = self
                    .length_counter
                    .write_control(value, next_step_is_length);

                if should_disable_channel {
                    self.channel_enabled = false;
                }

                if restart_triggered {
                    self.volume_envelope.reset();

                    if self.dac_enabled {
                        self.channel_enabled = true;
                    }
                }
            }
            _ => invalid_address("APU Channel 4 (write)", address),
        }
    }
}

```

`gb/src/apu/frame_sequencer.rs`:

```rs
// CPU @ 4 MHz
// Frame sequencer @ 512Hz
// 4194304 / 512 = 8192 cycles
// steps 0-7, one step per 8192 cycles
const FRAME_SEQUENCER_MAX_CYCLES: u16 = 8192;
const MAX_STEPS: u8 = 8;

pub struct FrameSequencer {
    cycles: u16,
    step: u8,
}

impl FrameSequencer {
    pub fn new() -> Self {
        Self { cycles: 0, step: 0 }
    }

    pub fn reset(&mut self) {
        self.step = 0;
        self.cycles = 0;
    }

    pub fn get_step(&self) -> u8 {
        self.step
    }

    pub fn tick(&mut self) -> Option<u8> {
        self.cycles += 1;
        // Reset sequencer counter
        if self.cycles == FRAME_SEQUENCER_MAX_CYCLES {
            self.cycles = 0;

            let step_to_process = self.step;

            // Reset step counter
            self.step = if self.step + 1 == MAX_STEPS {
                0
            } else {
                self.step + 1
            };

            return Some(step_to_process);
        }
        None
    }
}

```

`gb/src/apu/frequency_timer.rs`:

```rs
pub enum FrequencyTimerType {
    Wave,
    Channel3,
    #[allow(dead_code)]
    Channel4,
}

pub const MAX_FREQUENCY: u16 = 2047;

impl FrequencyTimerType {
    fn calculate_initial_timer(&self, frequency: u16) -> u16 {
        match self {
            FrequencyTimerType::Wave => ((MAX_FREQUENCY + 1) - frequency) * 4,
            FrequencyTimerType::Channel3 => ((MAX_FREQUENCY + 1) - frequency) * 2,
            FrequencyTimerType::Channel4 => todo!(),
        }
    }
}

// Ticks on every T-cycle
// Every channel has to adjust its output when the timer expires
pub struct FrequencyTimer {
    timer_type: FrequencyTimerType,
    timer: u16,
    frequency: u16, // for initial "timer" calculation, this is not frequency of the sound
}

impl FrequencyTimer {
    pub fn new(timer_type: FrequencyTimerType) -> Self {
        Self {
            timer: 0,
            frequency: 0,
            timer_type,
        }
    }

    fn reload_timer(&mut self) {
        self.timer = self.timer_type.calculate_initial_timer(self.frequency);
    }

    pub fn set_frequency_high(&mut self, bits: u8) {
        let high = (bits as u16) & 0b111;
        self.frequency = (self.frequency & 0xff) | high << 8;
    }

    pub fn set_frequency_low(&mut self, bits: u8) {
        self.frequency = (self.frequency & 0b0111_0000_0000) | bits as u16
    }

    pub fn set_frequency(&mut self, frequency: u16) {
        self.frequency = frequency;
    }

    pub fn get_frequency(&self) -> u16 {
        self.frequency
    }

    pub fn tick(&mut self) -> bool {
        if self.timer > 0 {
            self.timer -= 1;
        }

        let reset = self.timer == 0;

        if reset {
            self.reload_timer();
        }

        reset
    }
}

```

`gb/src/apu/length_counter.rs`:

```rs
use bitflags::bitflags;

pub struct LengthCounter {
    enabled: bool,
    counter: u16,
    max_length: u16,
}

bitflags! {
    pub struct ControlBits: u8 {
        const RESTART = 0b1000_0000;
        const ENABLED = 0b0100_0000;
        const FREQUENCY_HIGH = 0b0000_0111;
    }
}

// A length counter disables a channel when it decrements to zero.
// https://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware#Length_Counter
impl LengthCounter {
    pub fn new(max_length: u16) -> Self {
        Self {
            counter: 0,
            enabled: false,
            max_length,
        }
    }

    pub fn tick(&mut self) -> bool {
        if self.counter > 0 && self.enabled {
            self.counter -= 1;

            if self.counter == 0 {
                return true;
            }
        }
        false
    }

    pub fn get_enabled(&self) -> bool {
        self.enabled
    }

    pub fn is_expired(&self) -> bool {
        self.counter == 0
    }

    pub fn reload(&mut self) {
        self.counter = self.max_length;
    }

    pub fn set_counter(&mut self, counter: u8) {
        self.counter = self.max_length - counter as u16;
    }

    // https://gbdev.io/pandocs/Sound_Controller.html#ff14---nr14---channel-1-frequency-hi-rw
    pub fn write_control(&mut self, bits: u8, next_step_is_length: bool) -> (bool, bool) {
        let control_bits = ControlBits::from_bits_truncate(bits);
        let was_enabled = self.enabled;
        self.enabled = control_bits.contains(ControlBits::ENABLED);
        let restart_triggered = control_bits.contains(ControlBits::RESTART);
        let mut should_disable_channel = false;

        // https://gbdev.gg8.se/wiki/articles/Gameboy_sound_hardware behavior #5

        if !was_enabled && self.enabled && !next_step_is_length && !self.is_expired() {
            let expired = self.tick();
            if !restart_triggered && expired {
                should_disable_channel = true;
            }
        }

        if restart_triggered && self.is_expired() {
            self.reload();

            if self.enabled && !next_step_is_length {
                self.tick();
            }
        }
        (should_disable_channel, restart_triggered)
    }
}

```

`gb/src/apu/mod.rs`:

```rs
pub mod apu;

mod channel1;
mod channel2;
mod channel3;
mod channel4;
mod frame_sequencer;
mod frequency_timer;
mod length_counter;
mod registers;
mod sweep;
mod volume_envelope;
mod wave_duty;

```

`gb/src/apu/registers.rs`:

```rs
// Channel 1
/**
 * FF10 - NR10 - Channel 1 Sweep register (R/W)
 */
pub const R_NR10: u16 = 0xff10;

/**
 * FF11 - NR11 - Channel 1 Sound length/Wave pattern duty (R/W)
 */
pub const R_NR11: u16 = 0xff11;

/**
 * FF12 - NR12 - Channel 1 Volume Envelope (R/W)
 */
pub const R_NR12: u16 = 0xff12;

/**
 * FF13 - NR13 - Channel 1 Frequency lo (Write Only)
 */
pub const R_NR13: u16 = 0xff13;

/**
 * FF14 - NR14 - Channel 1 Frequency hi (R/W)
 */
pub const R_NR14: u16 = 0xff14;

// Channel 2
/**
 * FF16 - NR21 - Channel 2 Sound Length/Wave Pattern Duty (R/W)
 */
pub const R_NR21: u16 = 0xff16;

/**
 * FF17 - NR22 - Channel 2 Volume Envelope (R/W)
 */
pub const R_NR22: u16 = 0xff17;

/**
 * FF18 - NR23 - Channel 2 Frequency lo data (W)
 */
pub const R_NR23: u16 = 0xff18;

/**
 * FF19 - NR24 - Channel 2 Frequency hi data (R/W)
 */
pub const R_NR24: u16 = 0xff19;

// Channel 3
/**
 * FF1A - NR30 - Channel 3 Sound on/off (R/W)
 */
pub const R_NR30: u16 = 0xff1a;

/**
 * FF1B - NR31 - Channel 3 Sound Length
 */
pub const R_NR31: u16 = 0xff1b;

/**
 * FF1C - NR32 - Channel 3 Select output level (R/W)
 */
pub const R_NR32: u16 = 0xff1c;

/**
 * FF1D - NR33 - Channel 3 Frequency's lower data (W)
 */
pub const R_NR33: u16 = 0xff1d;

/**
 * FF1E - NR34 - Channel 3 Frequency's higher data (R/W)
 */
pub const R_NR34: u16 = 0xff1e;

// Channel 4
/**
 * FF20 - NR41 - Channel 4 Sound Length (R/W)
 */
pub const R_NR41: u16 = 0xff20;
/**
 * FF21 - NR42 - Channel 4 Volume Envelope (R/W)
 */
pub const R_NR42: u16 = 0xff21;
/**
 * FF22 - NR43 - Channel 4 Polynomial Counter (R/W)
 */
pub const R_NR43: u16 = 0xff22;
/**
 * FF23 - NR44 - Channel 4 Counter/consecutive; Inital (R/W)
 */
pub const R_NR44: u16 = 0xff23;
/**
 * FF24 - NR50 - Channel control / ON-OFF / Volume (R/W)
 *
 * Bit 7   - Output Vin to SO2 terminal (1=Enable)
 * Bit 6-4 - SO2 output level (volume)  (0-7)
 * Bit 3   - Output Vin to SO1 terminal (1=Enable)
 * Bit 2-0 - SO1 output level (volume)  (0-7)
 */
pub const R_NR50: u16 = 0xff24;

/**
 * FF25 - NR51 - Selection of Sound output terminal (R/W)
 *
 * Bit 7 - Output sound 4 to SO2 terminal
 * Bit 6 - Output sound 3 to SO2 terminal
 * Bit 5 - Output sound 2 to SO2 terminal
 * Bit 4 - Output sound 1 to SO2 terminal
 * Bit 3 - Output sound 4 to SO1 terminal
 * Bit 2 - Output sound 3 to SO1 terminal
 * Bit 1 - Output sound 2 to SO1 terminal
 * Bit 0 - Output sound 1 to SO1 terminal
 */
pub const R_NR51: u16 = 0xff25;

/**
 * FF26 - NR52 - Sound on/off
 *
 * Bit 7 - All sound on/off  (0: stop all sound circuits) (Read/Write)
 * Bit 3 - Sound 4 ON flag (Read Only)
 * Bit 2 - Sound 3 ON flag (Read Only)
 * Bit 1 - Sound 2 ON flag (Read Only)
 * Bit 0 - Sound 1 ON flag (Read Only)
 */
pub const R_NR52: u16 = 0xff26;

```

`gb/src/apu/sweep.rs`:

```rs
#[derive(PartialEq, Clone, Copy)]
enum SweepDirection {
    Increase,
    Decrease,
}

impl SweepDirection {
    fn bit(&self) -> u8 {
        match &self {
            SweepDirection::Increase => 0,
            SweepDirection::Decrease => 1,
        }
    }

    fn from_bits(bits: u8) -> Self {
        if bits & 0b0000_1000 == 0 {
            SweepDirection::Increase
        } else {
            SweepDirection::Decrease
        }
    }
}

pub struct Sweep {
    pub time: u8, // The period in which one sweep step should take place
    direction: SweepDirection,
    shift: u8, // The amount by which the shadow frequency should be shifted

    enabled: bool,
    frequency: u16,
    pub timer: u8,
    last_calculation_was_decrease: bool,
}

const SWEEP_MAX_PERIOD: u8 = 8;

/**
* Sweep periodically adjusts the frequency of a channel
*/
impl Sweep {
    pub fn new() -> Self {
        Self {
            direction: SweepDirection::Increase,
            shift: 0,
            time: 0,

            enabled: false,
            timer: 0,
            frequency: 0,
            last_calculation_was_decrease: false,
        }
    }

    fn reload_timer(&mut self) {
        self.timer = if self.time > 0 {
            self.time
        } else {
            SWEEP_MAX_PERIOD
        };
    }

    pub fn tick(&mut self) -> bool {
        if !self.enabled {
            return false;
        }

        if self.timer > 0 {
            self.timer -= 1;
        }

        let reset = self.timer == 0;

        if reset {
            // Restart sweep timer
            self.reload_timer();
        }

        reset
    }

    pub fn get_shift(&self) -> u8 {
        self.shift
    }

    pub fn set_frequency(&mut self, frequency: u16) {
        self.frequency = frequency;
    }

    pub fn calculate_frequency(&mut self) -> u16 {
        let diff = self.frequency >> self.shift;
        if self.direction == SweepDirection::Increase {
            return self.frequency + diff;
        }
        self.last_calculation_was_decrease = true;
        self.frequency - diff
    }

    pub fn read_byte(&self) -> u8 {
        0b1000_0000 | self.time << 4 | self.direction.bit() << 3 | self.shift
    }

    pub fn trigger(&mut self, frequency: u16) {
        self.frequency = frequency;
        self.enabled = self.time > 0 || self.shift > 0;
        self.last_calculation_was_decrease = false;
        self.reload_timer();
    }

    pub fn write_byte(&mut self, bits: u8) -> bool {
        let prev_direction = self.direction;
        self.time = (bits & 0b0111_0000) >> 4;
        self.direction = SweepDirection::from_bits(bits);
        self.shift = bits & 0b0000_0111;

        // https://gist.github.com/drhelius/3652407#file-game-boy-sound-operation-L467-L471
        let disable_channel = prev_direction == SweepDirection::Decrease
            && self.direction == SweepDirection::Increase
            && self.last_calculation_was_decrease;

        disable_channel
    }
}

```

`gb/src/apu/volume_envelope.rs`:

```rs
use std::u8;

#[derive(PartialEq)]
enum EnvelopeDirection {
    Decrease,
    Increase,
}

impl EnvelopeDirection {
    fn bit(&self) -> u8 {
        match &self {
            EnvelopeDirection::Decrease => 0,
            EnvelopeDirection::Increase => 1,
        }
    }
    fn from_bits(bits: u8) -> Self {
        if bits & 0b0000_1000 == 0 {
            EnvelopeDirection::Decrease
        } else {
            EnvelopeDirection::Increase
        }
    }
}

/**
 * Periodically adjusts the volume
 * Unsed in Channels 1,2 & 4
 */
pub struct VolumeEnvelope {
    initial_volume: u8, // Bit 7-4 - Initial Volume of envelope (0-0Fh) (0=No Sound)
    direction: EnvelopeDirection, // Bit 3   - Envelope Direction (0=Decrease, 1=Increase)
    periods: u8,        // Bit 2-0 - Number of envelope sweep (n: 0-7) (0=Stop)

    timer: u8,
    current_volume: u8, // from 0-15
}

impl VolumeEnvelope {
    pub fn new() -> Self {
        Self {
            initial_volume: 0,
            direction: EnvelopeDirection::Decrease,
            periods: 0,
            timer: 0,
            current_volume: 0,
        }
    }

    pub fn reset(&mut self) {
        self.current_volume = self.initial_volume;
        self.timer = self.periods;
    }

    fn adjust_volume(&mut self) {
        match self.direction {
            EnvelopeDirection::Increase => {
                if self.current_volume < 0xf {
                    self.current_volume += 1;
                }
            }
            EnvelopeDirection::Decrease => {
                if self.current_volume > 0 {
                    self.current_volume -= 1;
                }
            }
        }
    }

    pub fn tick(&mut self) {
        // no periods = disabled
        if self.periods == 0 {
            return;
        }

        // Decrement counter
        if self.timer > 0 {
            self.timer -= 1;
        }

        // Reset counter
        if self.timer == 0 {
            self.timer = self.periods;
            self.adjust_volume();
        }
    }

    pub fn get_current_volume(&self) -> u8 {
        self.current_volume
    }

    pub fn read_byte(&self) -> u8 {
        (self.initial_volume << 4) | (self.direction.bit() << 3) | self.periods
    }

    pub fn write_byte(&mut self, bits: u8) {
        self.initial_volume = bits >> 4;
        self.direction = EnvelopeDirection::from_bits(bits);
        self.periods = bits & 0b111;
    }
}

```

`gb/src/apu/wave_duty.rs`:

```rs
// 0b00 - 12.5%
//  ┌───────┐ ┌───────┐ ┌───────
// ─┘       └─┘       └─┘

// 0b01 - 25%
//   ┌──────┐  ┌──────┐  ┌──────
// ──┘      └──┘      └──┘

// 0b10 - 50%
//     ┌────┐    ┌────┐    ┌────
// ────┘    └────┘    └────┘

// 0b11 - 75%
//       ┌──┐      ┌──┐      ┌──
// ──────┘  └──────┘  └──────┘

type Pattern = [u8; 8];

const WAVE_DUTY_PATTERNS: [Pattern; 4] = [
    [0, 0, 0, 0, 0, 0, 0, 1], // 12.5%
    [1, 0, 0, 0, 0, 0, 0, 1], // 25%
    [1, 0, 0, 0, 0, 1, 1, 1], // 50%
    [0, 1, 1, 1, 1, 1, 1, 0], // 75%
];

enum WavePatternDuty {
    Duty12_5,
    Duty25,
    Duty50,
    Duty75,
}

impl WavePatternDuty {
    fn get_pattern(&self) -> Pattern {
        let index = self.bits() as usize;
        WAVE_DUTY_PATTERNS[index]
    }

    fn bits(&self) -> u8 {
        match self {
            WavePatternDuty::Duty12_5 => 0b00,
            WavePatternDuty::Duty25 => 0b01,
            WavePatternDuty::Duty50 => 0b10,
            WavePatternDuty::Duty75 => 0b11,
        }
    }

    fn from_bits(bits: u8) -> Self {
        match bits {
            0b00 => Self::Duty12_5,
            0b01 => Self::Duty25,
            0b10 => Self::Duty50,
            0b11 => Self::Duty75,
            _ => panic!("Cannot create WaveDutyPattern from bits={}", bits),
        }
    }
}

pub struct WaveDuty {
    duty: WavePatternDuty,
    wave_position: usize,
}

impl WaveDuty {
    pub fn new() -> Self {
        Self {
            duty: WavePatternDuty::from_bits(0),
            wave_position: 0,
        }
    }

    pub fn tick(&mut self) {
        self.wave_position += 1;
        if self.wave_position >= 8 {
            self.wave_position = 0;
        }
    }

    pub fn get_data(&self) -> u8 {
        let pattern = self.duty.get_pattern();
        pattern[self.wave_position]
    }

    pub fn read_byte(&self) -> u8 {
        self.duty.bits() << 6 | 0b0011_1111
    }

    pub fn write_byte(&mut self, bits: u8) {
        self.duty = WavePatternDuty::from_bits((bits & 0b1100_0000) >> 6);
    }
}

```

`gb/src/audio.rs`:

```rs
pub trait AudioDevice {
    fn queue(&mut self, buffer: &[f32]);
}
```

`gb/src/bios.rs`:

```rs
pub const BIOS: [u8; 256] = [
    0x31, 0xfe, 0xff, 0xaf, 0x21, 0xff, 0x9f, 0x32, 0xcb, 0x7c, 0x20, 0xfb, 0x21, 0x26, 0xff, 0x0e,
    0x11, 0x3e, 0x80, 0x32, 0xe2, 0x0c, 0x3e, 0xf3, 0xe2, 0x32, 0x3e, 0x77, 0x77, 0x3e, 0xfc, 0xe0,
    0x47, 0x11, 0x04, 0x01, 0x21, 0x10, 0x80, 0x1a, 0xcd, 0x95, 0x00, 0xcd, 0x96, 0x00, 0x13, 0x7b,
    0xfe, 0x34, 0x20, 0xf3, 0x11, 0xd8, 0x00, 0x06, 0x08, 0x1a, 0x13, 0x22, 0x23, 0x05, 0x20, 0xf9,
    0x3e, 0x19, 0xea, 0x10, 0x99, 0x21, 0x2f, 0x99, 0x0e, 0x0c, 0x3d, 0x28, 0x08, 0x32, 0x0d, 0x20,
    0xf9, 0x2e, 0x0f, 0x18, 0xf3, 0x67, 0x3e, 0x64, 0x57, 0xe0, 0x42, 0x3e, 0x91, 0xe0, 0x40, 0x04,
    0x1e, 0x02, 0x0e, 0x0c, 0xf0, 0x44, 0xfe, 0x90, 0x20, 0xfa, 0x0d, 0x20, 0xf7, 0x1d, 0x20, 0xf2,
    0x0e, 0x13, 0x24, 0x7c, 0x1e, 0x83, 0xfe, 0x62, 0x28, 0x06, 0x1e, 0xc1, 0xfe, 0x64, 0x20, 0x06,
    0x7b, 0xe2, 0x0c, 0x3e, 0x87, 0xe2, 0xf0, 0x42, 0x90, 0xe0, 0x42, 0x15, 0x20, 0xd2, 0x05, 0x20,
    0x4f, 0x16, 0x20, 0x18, 0xcb, 0x4f, 0x06, 0x04, 0xc5, 0xcb, 0x11, 0x17, 0xc1, 0xcb, 0x11, 0x17,
    0x05, 0x20, 0xf5, 0x22, 0x23, 0x22, 0x23, 0xc9, 0xce, 0xed, 0x66, 0x66, 0xcc, 0x0d, 0x00, 0x0b,
    0x03, 0x73, 0x00, 0x83, 0x00, 0x0c, 0x00, 0x0d, 0x00, 0x08, 0x11, 0x1f, 0x88, 0x89, 0x00, 0x0e,
    0xdc, 0xcc, 0x6e, 0xe6, 0xdd, 0xdd, 0xd9, 0x99, 0xbb, 0xbb, 0x67, 0x63, 0x6e, 0x0e, 0xec, 0xcc,
    0xdd, 0xdc, 0x99, 0x9f, 0xbb, 0xb9, 0x33, 0x3e, 0x3c, 0x42, 0xb9, 0xa5, 0xb9, 0xa5, 0x42, 0x3c,
    0x21, 0x04, 0x01, 0x11, 0xa8, 0x00, 0x1a, 0x13, 0xbe, 0x20, 0xfe, 0x23, 0x7d, 0xfe, 0x34, 0x20,
    0xf5, 0x06, 0x19, 0x78, 0x86, 0x23, 0x05, 0x20, 0xfb, 0x86, 0x20, 0xfe, 0x3e, 0x01, 0xe0, 0x50,
];

```

`gb/src/cartridges/cartridge.rs`:

```rs
use std::convert::TryInto;

use crate::traits::DisplayHex;
use parse_display::Display;

use super::{
    mbc1::Mbc1, mbc2::Mbc2, mbc3::Mbc3, mbc5::Mbc5, rom_only::RomOnly, RAM_BANK_SIZE, ROM_BANK_SIZE,
};
use crate::cartridges::Controller;

#[derive(Display)]
pub enum CartridgeType {
    RomOnly,
    Mbc1,
    Mbc1Ram,
    Mbc1RamBattery,
    Mbc2,
    Mbc2Battery,
    Mbc3,
    Mbc3Ram,
    Mbc3RamBattery,
    Mbc3TimerBattery,
    Mbc3TimerRamBattery,
    Mbc5,
    Mbc5Ram,
    Mbc5RamBattery,
}

#[allow(clippy::upper_case_acronyms)]
#[derive(Display)]
pub enum CGBFlag {
    None,
    Supported,
    Required,
}

pub struct Meta {
    pub cartridge_type: CartridgeType,
    pub cartridge_type_byte: u8,
    pub name: String,
    pub rom_size: usize,
    pub ram_size: usize,
    pub cgb_flag: CGBFlag,
}

impl Meta {
    pub fn get_name(&self) -> &str {
        let name = self.name.trim();
        if !name.is_empty() {
            return name;
        }
        "<empty-name>"
    }
}

pub struct Cartridge {
    pub meta: Meta,
    controller: Box<dyn Controller>,
}

fn get_cartridge_type(type_byte: u8) -> CartridgeType {
    match type_byte {
        0x00 => CartridgeType::RomOnly,
        0x01 => CartridgeType::Mbc1,
        0x02 => CartridgeType::Mbc1Ram,
        0x03 => CartridgeType::Mbc1RamBattery,
        0x05 => CartridgeType::Mbc2,
        0x06 => CartridgeType::Mbc2Battery,
        0x0f => CartridgeType::Mbc3TimerBattery,
        0x10 => CartridgeType::Mbc3TimerRamBattery,
        0x11 => CartridgeType::Mbc3,
        0x12 => CartridgeType::Mbc3Ram,
        0x13 => CartridgeType::Mbc3RamBattery,
        0x19 => CartridgeType::Mbc5,
        0x1a => CartridgeType::Mbc5Ram,
        0x1b => CartridgeType::Mbc5RamBattery,
        unknown => panic!("Unknown cartridge type {}", unknown.to_hex()),
    }
}

///
/// Data - holds ROM & RAM
/// Controller - specific registers for MBC
///
/// Read/Write
///  Catridge -> Controller -> Data
///
impl Cartridge {
    pub fn empty() -> Cartridge {
        let rom = Box::new([0xff; ROM_BANK_SIZE]);
        let rom_size = rom.len();
        let data = Data::new(rom, Box::new([]), rom_size, 0);
        Cartridge {
            controller: Box::new(RomOnly::new(data)),
            meta: Meta {
                cartridge_type: CartridgeType::RomOnly,
                cartridge_type_byte: 0,
                name: String::from("empty"),
                ram_size: 0,
                rom_size,
                cgb_flag: CGBFlag::None,
            },
        }
    }

    pub fn from_bytes(binary: &[u8]) -> Cartridge {
        let rom: Box<[u8]> = binary.try_into().unwrap();

        let cartridge_type_byte = rom[0x0147];
        let cartridge_type = get_cartridge_type(cartridge_type_byte);

        let rom_size = match rom[0x0148] {
            0x00 => 2 * ROM_BANK_SIZE,   //  32KB (no ROM banking)
            0x01 => 4 * ROM_BANK_SIZE,   //  64KB (4 banks)
            0x02 => 8 * ROM_BANK_SIZE,   // 128KB (8 banks)
            0x03 => 16 * ROM_BANK_SIZE,  // 256KB (16 banks)
            0x04 => 32 * ROM_BANK_SIZE,  // 512KB (32 banks)
            0x05 => 64 * ROM_BANK_SIZE,  //   1MB (64 banks)  - only 63 banks used by MBC1
            0x06 => 128 * ROM_BANK_SIZE, //   2MB (128 banks) - only 125 banks used by MBC1
            0x07 => 256 * ROM_BANK_SIZE, //   4MB (256 banks)
            0x08 => 512 * ROM_BANK_SIZE, //   8MB (512 banks)
            unknown => panic!("Unknown ROM size, value = {}", unknown.to_hex()),
        };

        let ram_size = match cartridge_type {
            // MBC2 has fixed internal RAM 512 x 4bits
            CartridgeType::Mbc2 | CartridgeType::Mbc2Battery => 512,
            _ => match rom[0x0149] {
                0x00 => 0,
                0x01 => 2048,
                0x02 => RAM_BANK_SIZE,      //   8_192
                0x03 => 4 * RAM_BANK_SIZE,  //  32_768
                0x04 => 16 * RAM_BANK_SIZE, // 131_072
                0x05 => 8 * RAM_BANK_SIZE,  //  65_536
                unknown => panic!("Unknown RAM size, value = {}", unknown.to_hex()),
            },
        };

        let ram = vec![0xff; ram_size].into_boxed_slice();

        let cgb_flag = match &rom[0x143] {
            0x80 => CGBFlag::Supported,
            0xC0 => CGBFlag::Required,
            _ => CGBFlag::None,
        };

        let s = &rom[0x0134..0x0143];
        let name = s.iter().map(|byte| *byte as char).collect::<String>();
        let data = Data::new(rom, ram, rom_size, ram_size);
        let controller: Box<dyn Controller> = match cartridge_type {
            CartridgeType::RomOnly => Box::new(RomOnly::new(data)),
            CartridgeType::Mbc1 | CartridgeType::Mbc1Ram | CartridgeType::Mbc1RamBattery => {
                Box::new(Mbc1::new(data))
            }
            CartridgeType::Mbc2 | CartridgeType::Mbc2Battery => Box::new(Mbc2::new(data)),
            CartridgeType::Mbc3TimerBattery
            | CartridgeType::Mbc3TimerRamBattery
            | CartridgeType::Mbc3
            | CartridgeType::Mbc3Ram
            | CartridgeType::Mbc3RamBattery => Box::new(Mbc3::new(data)),
            CartridgeType::Mbc5 | CartridgeType::Mbc5Ram | CartridgeType::Mbc5RamBattery => {
                Box::new(Mbc5::new(data))
            }
        };

        let meta = Meta {
            cartridge_type,
            cartridge_type_byte,
            name,
            rom_size,
            ram_size,
            cgb_flag,
        };

        Cartridge { meta, controller }
    }

    pub fn read_byte(&self, address: u16) -> u8 {
        self.controller.read_byte(address)
    }

    pub fn write_byte(&mut self, address: u16, value: u8) {
        self.controller.write_byte(address, value)
    }

    pub fn supports_cgb(&self) -> bool {
        match self.meta.cgb_flag {
            CGBFlag::None => false,
            CGBFlag::Required | CGBFlag::Supported => true,
        }
    }
}

pub struct Data {
    rom: Box<[u8]>,
    ram: Box<[u8]>,

    rom_size: usize,
    ram_size: usize,
}

impl Data {
    pub fn new(rom: Box<[u8]>, ram: Box<[u8]>, rom_size: usize, ram_size: usize) -> Self {
        Self {
            rom,
            ram,
            rom_size,
            ram_size,
        }
    }

    pub fn get_rom_address(&self, addr: u16, bank: usize) -> usize {
        let offset = bank * ROM_BANK_SIZE;
        let real_address = (addr & 0x3fff) as usize + offset;
        real_address & (self.rom_size - 1)
    }

    pub fn get_ram_address(&self, addr: u16, bank: usize) -> usize {
        let offset = bank * RAM_BANK_SIZE;
        let real_address = (addr & 0x1fff) as usize + offset;
        real_address & (self.ram_size - 1)
    }

    pub fn get_ram_size(&self) -> usize {
        self.ram_size
    }

    pub fn read_rom(&self, address: usize) -> u8 {
        if address >= self.rom_size {
            return 0xff;
        }
        self.rom[address]
    }

    pub fn read_ram(&self, address: usize) -> u8 {
        if address >= self.ram_size {
            return 0xff;
        }
        self.ram[address]
    }

    pub fn write_ram(&mut self, address: usize, value: u8) {
        self.ram[address] = value;
    }
}

```

`gb/src/cartridges/mbc1.rs`:

```rs
use super::{cartridge::Data, Controller};
use crate::utils::invalid_address;
enum Mode {
    RomBanking,
    RamBanking,
}
pub struct Mbc1 {
    data: Data,

    bank1: u8,
    bank2: u8,
    mode: Mode,
    ramg: bool,
}

impl Mbc1 {
    pub fn new(data: Data) -> Mbc1 {
        Mbc1 {
            data,
            ramg: false,
            bank1: 0b0_0001,
            bank2: 0b00,
            mode: Mode::RomBanking,
        }
    }

    fn get_lower_rom_bank(&self) -> usize {
        match self.mode {
            Mode::RomBanking => 0,
            Mode::RamBanking => (self.bank2 << 5) as usize,
        }
    }

    fn get_upper_rom_bank(&self) -> usize {
        (self.bank1 | self.bank2 << 5) as usize
    }

    fn get_ram_bank(&self) -> usize {
        match self.mode {
            Mode::RomBanking => 0,
            Mode::RamBanking => self.bank2 as usize,
        }
    }
}

impl Controller for Mbc1 {
    fn read_byte(&self, address: u16) -> u8 {
        match address {
            // ROM Bank 00
            0x0000..=0x3fff => {
                let bank = self.get_lower_rom_bank();
                let addr = self.data.get_rom_address(address, bank);
                self.data.read_rom(addr)
            }
            // ROM Bank 01-07
            0x4000..=0x7fff => {
                let bank = self.get_upper_rom_bank();
                let addr = self.data.get_rom_address(address, bank);
                self.data.read_rom(addr)
            }
            // RAM Bank 00-03
            0xa000..=0xbfff => {
                if self.data.get_ram_size() == 0 || !self.ramg {
                    return 0xff;
                }
                let bank = self.get_ram_bank();
                let addr = self.data.get_ram_address(address, bank);
                self.data.read_ram(addr)
            }
            _ => invalid_address("MBC1 (read)", address),
        }
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        match address {
            // RAM Enable
            0x0000..=0x1fff => self.ramg = (value & 0xf) == 0xa,
            // ROM Bank Number
            0x2000..=0x3fff => {
                // Zero bank is skipped
                let sanitized = value & 0x1f;
                self.bank1 = if sanitized == 0 { 1 } else { sanitized };
            }
            // RAM Bank Number - or - Upper Bits of ROM Bank Number
            0x4000..=0x5fff => {
                let sanitized = value & 0b11;
                self.bank2 = sanitized;
            }
            // ROM/RAM Mode Select
            0x6000..=0x7fff => {
                self.mode = if (value & 1) > 0 {
                    Mode::RamBanking
                } else {
                    Mode::RomBanking
                };
            }
            // RAM Bank 00-03, if any
            0xa000..=0xbfff => {
                if self.data.get_ram_size() == 0 || !self.ramg {
                    return;
                }
                let bank = self.get_ram_bank();
                let addr = self.data.get_ram_address(address, bank);
                self.data.write_ram(addr, value);
            }
            _ => invalid_address("MBC1 (write)", address),
        }
    }
}

```

`gb/src/cartridges/mbc2.rs`:

```rs
use super::{Controller, Data};
use crate::utils::invalid_address;
pub struct Mbc2 {
    data: Data,
    romb: u8,
    ramg: bool,
}

impl Mbc2 {
    pub fn new(data: Data) -> Mbc2 {
        Mbc2 {
            data,
            romb: 0x01,
            ramg: false,
        }
    }
}

impl Controller for Mbc2 {
    fn read_byte(&self, address: u16) -> u8 {
        match address {
            // ROM Bank 00
            0x0000..=0x3fff => self.data.read_rom(address as usize),
            // ROM Bank 01-0F
            0x4000..=0x7fff => {
                let addr = self.data.get_rom_address(address, self.romb as usize);
                self.data.read_rom(addr)
            }
            // 512x4bits RAM, built-in into the MBC2 chip
            0xa000..=0xbfff => {
                if self.ramg {
                    let addr = self.data.get_ram_address(address, 0);
                    return self.data.read_ram(addr) | 0xf0; // top bits are always 1
                }
                0xff
            }
            _ => invalid_address("MBC2 (read)", address),
        }
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        match address {
            // ROM Bank 00
            0x0000..=0x3fff => {
                // 8. bit of address decides what to do
                if address & 0b1_0000_0000 > 0 {
                    // romb handler
                    let possible_bank = value & 0xf;
                    self.romb = if possible_bank == 0 {
                        0x01
                    } else {
                        possible_bank
                    };
                } else {
                    // ramg handler
                    self.ramg = (value & 0xf) == 0xa;
                }
            }
            // ROM Bank 01-0F
            0x4000..=0x7fff => {
                // no-op
            }
            // 512x4bits RAM, built-in into the MBC2 chip
            0xa000..=0xbfff => {
                if self.ramg {
                    let addr = self.data.get_ram_address(address, 0);
                    let value = value & 0xf;
                    self.data.write_ram(addr, value);
                }
            }
            _ => invalid_address("MBC2 (write)", address),
        }
    }
}

```

`gb/src/cartridges/mbc3.rs`:

```rs
use super::{Controller, Data};
use crate::utils::invalid_address;
pub struct Mbc3 {
    data: Data,
    romb: u8,
    ramb: u8,
    ramg: bool,
}

impl Mbc3 {
    pub fn new(data: Data) -> Self {
        Self {
            data,
            ramg: false,
            ramb: 0x00,
            romb: 0x01,
        }
    }
}

impl Controller for Mbc3 {
    fn read_byte(&self, address: u16) -> u8 {
        match address {
            // ROM Bank 00
            0x0000..=0x3fff => self.data.read_rom(address as usize),
            // ROM Bank 01-1FF
            0x4000..=0x7fff => {
                let addr = self.data.get_rom_address(address, self.romb as usize);
                self.data.read_rom(addr)
            }
            // A000-BFFF - RAM Bank 00-03, if any (Read/Write)
            // A000-BFFF - RTC Register 08-0C (Read/Write)
            0xa000..=0xbfff => {
                if !self.ramg {
                    return 0xff;
                }
                match address {
                    0x00..=0x03 => {
                        let addr = self.data.get_ram_address(address, self.ramb as usize);
                        self.data.read_ram(addr)
                    }
                    _ => 0xff,
                }
            }
            _ => invalid_address("MBC3 (read)", address),
        }
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        match address {
            // 0000-1FFF - RAM and Timer Enable (Write Only)
            0x0000..=0x1fff => {
                self.ramg = value & 0xa == 0xa;
            }
            // 2000-3FFF - ROM Bank Number (Write Only)
            0x2000..=0x3fff => {
                self.romb = if value == 0 { 1 } else { value };
            }
            // 4000-5FFF - RAM Bank Number - or - RTC Register Select (Write Only)
            0x4000..=0x5fff => {
                self.ramb = value & 0xf;
            }
            // 6000-7FFF - Latch Clock Data (Write Only)
            0x6000..=0x7fff => {
                // TODO
            }
            // A000-BFFF - RAM Bank 00-03, if any (Read/Write)
            // A000-BFFF - RTC Register 08-0C (Read/Write)
            0xa000..=0xbfff => {
                // TODO check this
                if !self.ramg {
                    return;
                }
                match self.ramb {
                    0x00..=0x03 => {
                        let addr = self.data.get_ram_address(address, self.ramb as usize);
                        self.data.write_ram(addr, value);
                    }
                    _ => (),
                }
            }
            _ => invalid_address("MBC3 (write)", address),
        }
    }
}

```

`gb/src/cartridges/mbc5.rs`:

```rs
use super::{Controller, Data};
use crate::utils::invalid_address;
pub struct Mbc5 {
    data: Data,
    romb0: u8,
    romb1: u8,
    ramb: u8,
    ramg: bool,
}

impl Mbc5 {
    pub fn new(data: Data) -> Self {
        Self {
            data,
            ramg: false,
            romb0: 0x01,
            romb1: 0x00,
            ramb: 0x00,
        }
    }
}

impl Controller for Mbc5 {
    fn read_byte(&self, address: u16) -> u8 {
        match address {
            // 0000-3FFF - ROM Bank 00 (Read Only)
            0x0000..=0x3fff => self.data.read_rom(address as usize), // always bank 0 - no offset here
            // 4000-7FFF - ROM Bank 01-1FF (Read Only)
            0x4000..=0x7fff => {
                let bank = self.romb0 as usize | ((self.romb1 as usize) << 8);
                let addr = self.data.get_rom_address(address, bank);
                self.data.read_rom(addr)
            }
            // A000-BFFF - RAM Bank 00-03, if any (Read/Write)
            0xa000..=0xbfff => {
                if !self.ramg || self.data.get_ram_size() == 0 {
                    return 0xff;
                }
                let addr = self.data.get_ram_address(address, self.ramb as usize);
                self.data.read_ram(addr)
            }
            _ => invalid_address("MBC5 (read)", address),
        }
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        match address {
            // 0000-1FFF - RAM Enable (Write Only)
            0x0000..=0x1fff => {
                self.ramg = value == 0x0a;
            }
            // 2000-2FFF - Low 8 bits of ROM Bank Number (Write Only)
            0x2000..=0x2fff => {
                self.romb0 = value;
            }
            // 3000-3FFF - High bit of ROM Bank Number (Write Only)
            0x3000..=0x3fff => {
                self.romb1 = value & 0b1;
            }
            // 4000-5FFF - RAM Bank Number (Write Only)
            0x4000..=0x5fff => self.ramb = value & 0b1111,
            0x6000..=0x7fff => (), // no-op
            0xa000..=0xbfff => {
                if !self.ramg || self.data.get_ram_size() == 0 {
                    return;
                }
                let addr = self.data.get_ram_address(address, self.ramb as usize);
                self.data.write_ram(addr, value);
            }
            _ => invalid_address("MBC5 (write)", address),
        }
    }
}

```

`gb/src/cartridges/mod.rs`:

```rs
use self::cartridge::Data;

pub mod cartridge;
mod mbc1;
mod mbc2;
mod mbc3;
mod mbc5;
mod rom_only;

const ROM_BANK_SIZE: usize = 0x4000; // 16 kb
const RAM_BANK_SIZE: usize = 0x2000; // 8 kb

trait Controller {
    fn read_byte(&self, address: u16) -> u8;
    fn write_byte(&mut self, address: u16, value: u8);
}

```

`gb/src/cartridges/rom_only.rs`:

```rs
use super::{cartridge::Data, Controller};

pub struct RomOnly {
    data: Data,
}

impl RomOnly {
    pub fn new(data: Data) -> RomOnly {
        RomOnly { data }
    }
}

impl Controller for RomOnly {
    fn read_byte(&self, address: u16) -> u8 {
        self.data.read_rom(address as usize)
    }

    fn write_byte(&mut self, _address: u16, _value: u8) {
        // no-op
    }
}

```

`gb/src/constants.rs`:

```rs
pub const DISPLAY_HEIGHT: usize = 144;
pub const DISPLAY_WIDTH: usize = 160;
pub const PIXELS: usize = DISPLAY_HEIGHT * DISPLAY_WIDTH;

// FPS = 59.7275
// CPU_CLOCK_SPEED = 4194304
// CPU_CLOCK_SPEED / FPS
// pub const CYCLES_PER_FRAME: u32 = 70224;
pub const CPU_CLOCK_SPEED: usize = 4194304;

pub const TILE_SIZE: usize = 8;
pub const TILE_WIDTH: usize = 8;
pub const SPRITES_COUNT: usize = 40;
pub const SPRITES_PER_LINE: usize = 10;

pub const AUDIO_BUFFER_SIZE: usize = 2048;

// GB APU outputs every M cycle, so basically the sample rate of GB is 4 MHz
// FOr better audio it's recommended to collect samples at higher rate and downsample them to 44.1 kHz with a resampler (cubic for example)
// pub const AUDIO_SAMPLE_RATE: usize = 262144;
// pub const AUDIO_SAMPLE_RATE: usize = 65536;
pub const AUDIO_SAMPLE_RATE: usize = 44100;
// pub const AUDIO_SAMPLE_RATE: usize = 10000;

pub const AUDIO_CYCLES_PER_SAMPLE: usize = CPU_CLOCK_SPEED / AUDIO_SAMPLE_RATE; // take sample per every 16 cycles

```

`gb/src/cpu/cpu.rs`:

```rs
use std::fmt::Formatter;

use bitflags::bitflags;
use parse_display::{Display, FromStr};

use crate::{
    emulator::{Hardware, SplitU16},
    traits::MemoryAccess,
};

bitflags!(
    #[derive(Copy, Clone)]
    pub struct Flags: u8 {
      const Z = 0b_1000_0000;
      const N = 0b_0100_0000;
      const H = 0b_0010_0000;
      const C = 0b_0001_0000;
    }
);

impl std::fmt::Display for Flags {
    fn fmt(&self, f: &mut Formatter<'_>) -> std::fmt::Result {
        let flag_z = if self.contains(Flags::Z) { "Z" } else { "_" };
        let flag_n = if self.contains(Flags::N) { "N" } else { "_" };
        let flag_h = if self.contains(Flags::H) { "H" } else { "_" };
        let flag_c = if self.contains(Flags::C) { "C" } else { "_" };
        write!(f, "{}{}{}{}", flag_z, flag_n, flag_h, flag_c)
    }
}

impl Flags {
    pub fn clear(&mut self) {
        *self.0.bits_mut() = 0;
    }
}

#[derive(Clone, Copy, Display, FromStr)]
pub enum Reg8 {
    A,

    B,
    C,

    D,
    E,

    H,
    L,
}

#[derive(Clone, Copy, Display, FromStr)]
#[allow(clippy::upper_case_acronyms)]
pub enum Reg16 {
    AF,
    BC,
    DE,
    HL,

    SP,
}

pub struct Cpu {
    pub frame_cycles: u32,
    pub total_cycles: u32,

    pub halted: bool,
    pub halt_bug: bool,
    pub just_halted: bool,

    pub ime: bool,
    pub ime_requested: bool,

    pub pc: u16,
    pub sp: u16,

    pub a: u8,
    pub f: Flags,

    pub b: u8,
    pub c: u8,

    pub d: u8,
    pub e: u8,

    pub h: u8,
    pub l: u8,
}

impl Cpu {
    pub fn new() -> Cpu {
        Cpu {
            pc: 0x0000,
            sp: 0x0000,

            a: 0x00,
            f: Flags::empty(),

            b: 0x00,
            c: 0x00,

            d: 0x00,
            e: 0x00,

            h: 0x00,
            l: 0x00,

            ime: false,
            halted: false,
            halt_bug: false,
            just_halted: false,
            ime_requested: false,

            frame_cycles: 0,
            total_cycles: 0,
        }
    }

    pub fn read_reg8(&self, register: Reg8) -> u8 {
        match register {
            Reg8::A => self.a,
            Reg8::B => self.b,
            Reg8::C => self.c,
            Reg8::D => self.d,
            Reg8::E => self.e,
            Reg8::H => self.h,
            Reg8::L => self.l,
        }
    }

    pub fn write_reg8(&mut self, register: Reg8, value: u8) -> &mut Cpu {
        match register {
            Reg8::A => self.a = value,
            Reg8::B => self.b = value,
            Reg8::C => self.c = value,
            Reg8::D => self.d = value,
            Reg8::E => self.e = value,
            Reg8::H => self.h = value,
            Reg8::L => self.l = value,
        }
        self
    }

    pub fn read_reg16(&mut self, register: Reg16) -> u16 {
        match register {
            Reg16::AF => (self.a as u16) << 8 | self.f.bits() as u16,
            Reg16::BC => (self.b as u16) << 8 | self.c as u16,
            Reg16::DE => (self.d as u16) << 8 | self.e as u16,
            Reg16::HL => (self.h as u16) << 8 | self.l as u16,
            Reg16::SP => self.sp,
        }
    }

    pub fn write_reg16(&mut self, register: Reg16, value: u16) {
        let low = (value & 0xff) as u8;
        let high = (value >> 8) as u8;

        match register {
            Reg16::AF => {
                self.a = high;
                self.f = Flags::from_bits_truncate(low);
            }
            Reg16::BC => {
                self.b = high;
                self.c = low;
            }
            Reg16::DE => {
                self.d = high;
                self.e = low;
            }
            Reg16::HL => {
                self.h = high;
                self.l = low;
            }

            Reg16::SP => self.sp = value,
        }
    }

    pub fn clear_flags(&mut self) {
        self.f.clear();
    }

    pub fn clear_flag(&mut self, flag: Flags) {
        self.f.remove(flag);
    }

    pub fn set_flag(&mut self, flag: Flags) {
        self.f.insert(flag);
    }

    pub fn update_flag(&mut self, flag: Flags, value: bool) -> &mut Cpu {
        if value {
            self.set_flag(flag);
        } else {
            self.clear_flag(flag);
        }
        self
    }

    pub fn get_carry_bit(&mut self) -> u8 {
        if self.f.contains(Flags::C) {
            return 0x01;
        }
        0x00
    }

    pub fn increment_pc(&mut self) {
        self.pc = self.pc.wrapping_add(1)
    }
}

impl Cpu {
    pub fn read_u8_tick(&mut self, hw: &mut Hardware, address: u16) -> u8 {
        let value = hw.read_byte(address);
        self.tick(hw);
        value
    }

    pub fn write_u8_tick(&mut self, hw: &mut Hardware, address: u16, value: u8) {
        hw.write_byte(address, value);
        self.tick(hw)
    }

    pub fn read_imm_u8_tick(&mut self, hw: &mut Hardware) -> u8 {
        let value = self.read_u8_tick(hw, self.pc);
        self.increment_pc();
        value
    }

    pub fn read_imm_u16_tick(&mut self, hw: &mut Hardware) -> u16 {
        let value = self.read_u16_tick(hw, self.pc);
        self.increment_pc();
        self.increment_pc();
        value
    }

    pub fn read_u16_tick(&mut self, hw: &mut Hardware, address: u16) -> u16 {
        let lower = self.read_u8_tick(hw, address) as u16;
        let upper = (self.read_u8_tick(hw, address + 1) as u16) << 8;
        lower | upper
    }

    pub fn write_u16_tick(&mut self, hw: &mut Hardware, address: u16, value: u16) {
        let (high, low) = value.split_to_u8();
        self.write_u8_tick(hw, address + 1, high);
        self.write_u8_tick(hw, address, low)
    }

    pub fn tick(&mut self, hw: &mut Hardware) {
        // Step
        let cycles = 4;

        // TODO refactor
        // DMA takes 460 cycles / 40 sprites -> 16 cycles/sprite
        // sprite = 4 bytes = 16 cycles -> 4 cycles per byte
        let oam_step = hw.oam_dma.tick();
        if let Some((source, target)) = oam_step {
            let byte = hw.read_byte(source);
            hw.ppu.oam.write_byte(target, byte)
        }

        // When drawing only background it generates 8 pixels every 8 cycles into the upper part of the FIFO
        // and then shifts them down over the next 8 cycles ready for the next 8 pixels to be written
        for _ in 0..cycles {
            hw.ppu.tick(&mut hw.interrupts, &mut hw.events);
            hw.timer.tick(&mut hw.interrupts);
            hw.apu.tick();
        }

        self.frame_cycles += cycles;
        self.total_cycles = self.total_cycles.wrapping_add(cycles);
    }
}

```

`gb/src/cpu/execute.rs`:

```rs
use emulator::Hardware;

use crate::{emulator, events::Events};

use super::{
    cpu::{
        Cpu,
        Reg16::{AF, BC, DE, HL, SP},
        Reg8::{A, B, C, D, E, H, L},
    },
    instructions::{Addr, ImmediateU16, ImmediateU8, JumpConditions},
};

impl Cpu {
    pub fn execute(&mut self, op_code: u8, hw: &mut Hardware) {
        match op_code {
            0x00 => (/* NOP */),
            0x01 => self.load16(hw, BC, ImmediateU16),
            0x02 => self.load8(hw, Addr::BC, A),
            0x03 => self.inc16(hw, BC),
            0x04 => self.inc(hw, B),
            0x05 => self.dec(hw, B),
            0x06 => self.load8(hw, B, ImmediateU8),
            0x07 => self.rlca(),
            0x08 => self.load16(hw, ImmediateU16, SP),
            0x09 => self.add16(hw, BC),
            0x0A => self.load8(hw, A, Addr::BC),
            0x0B => self.dec16(hw, BC),
            0x0C => self.inc(hw, C),
            0x0D => self.dec(hw, C),
            0x0E => self.load8(hw, C, ImmediateU8),
            0x0F => self.rrca(),

            0x10 => (/* STOP */),
            0x11 => self.load16(hw, DE, ImmediateU16),
            0x12 => self.load8(hw, Addr::DE, A),
            0x13 => self.inc16(hw, DE),
            0x14 => self.inc(hw, D),
            0x15 => self.dec(hw, D),
            0x16 => self.load8(hw, D, ImmediateU8),
            0x17 => self.rla(),
            0x18 => self.jr_cc(hw, JumpConditions::NONE),
            0x19 => self.add16(hw, DE),
            0x1A => self.load8(hw, A, Addr::DE),
            0x1B => self.dec16(hw, DE),
            0x1C => self.inc(hw, E),
            0x1D => self.dec(hw, E),
            0x1E => self.load8(hw, E, ImmediateU8),
            0x1F => self.rra(),

            0x20 => self.jr_cc(hw, JumpConditions::NZ),
            0x21 => self.load16(hw, HL, ImmediateU16),
            0x22 => self.load8(hw, Addr::HLI, A),
            0x23 => self.inc16(hw, HL),
            0x24 => self.inc(hw, H),
            0x25 => self.dec(hw, H),
            0x26 => self.load8(hw, H, ImmediateU8),
            0x27 => self.daa(),
            0x28 => self.jr_cc(hw, JumpConditions::Z),
            0x29 => self.add16(hw, HL),
            0x2A => self.load8(hw, A, Addr::HLI),
            0x2B => self.dec16(hw, HL),
            0x2C => self.inc(hw, L),
            0x2D => self.dec(hw, L),
            0x2E => self.load8(hw, L, ImmediateU8),
            0x2F => self.cpl(),

            0x30 => self.jr_cc(hw, JumpConditions::NC),
            0x31 => self.load16(hw, SP, ImmediateU16),
            0x32 => self.load8(hw, Addr::HLD, A),
            0x33 => self.inc16(hw, SP),
            0x34 => self.inc(hw, Addr::HL),
            0x35 => self.dec(hw, Addr::HL),
            0x36 => self.load8(hw, Addr::HL, ImmediateU8),
            0x37 => self.scf(),
            0x38 => self.jr_cc(hw, JumpConditions::C),
            0x39 => self.add16(hw, SP),
            0x3A => self.load8(hw, A, Addr::HLD),
            0x3B => self.dec16(hw, SP),
            0x3C => self.inc(hw, A),
            0x3D => self.dec(hw, A),
            0x3E => self.load8(hw, A, ImmediateU8),
            0x3F => self.ccf(),

            0x40 => {
                // Magic breakpoint
                hw.events.insert(Events::MAGIC_BREAKPOINT);
                self.load8(hw, B, B)
            }
            0x41 => self.load8(hw, B, C),
            0x42 => self.load8(hw, B, D),
            0x43 => self.load8(hw, B, E),
            0x44 => self.load8(hw, B, H),
            0x45 => self.load8(hw, B, L),
            0x46 => self.load8(hw, B, Addr::HL),
            0x47 => self.load8(hw, B, A),
            0x48 => self.load8(hw, C, B),
            0x49 => self.load8(hw, C, C),
            0x4A => self.load8(hw, C, D),
            0x4B => self.load8(hw, C, E),
            0x4C => self.load8(hw, C, H),
            0x4D => self.load8(hw, C, L),
            0x4E => self.load8(hw, C, Addr::HL),
            0x4F => self.load8(hw, C, A),

            0x50 => self.load8(hw, D, B),
            0x51 => self.load8(hw, D, C),
            0x52 => self.load8(hw, D, D),
            0x53 => self.load8(hw, D, E),
            0x54 => self.load8(hw, D, H),
            0x55 => self.load8(hw, D, L),
            0x56 => self.load8(hw, D, Addr::HL),
            0x57 => self.load8(hw, D, A),
            0x58 => self.load8(hw, E, B),
            0x59 => self.load8(hw, E, C),
            0x5A => self.load8(hw, E, D),
            0x5B => self.load8(hw, E, E),
            0x5C => self.load8(hw, E, H),
            0x5D => self.load8(hw, E, L),
            0x5E => self.load8(hw, E, Addr::HL),
            0x5F => self.load8(hw, E, A),

            0x60 => self.load8(hw, H, B),
            0x61 => self.load8(hw, H, C),
            0x62 => self.load8(hw, H, D),
            0x63 => self.load8(hw, H, E),
            0x64 => self.load8(hw, H, H),
            0x65 => self.load8(hw, H, L),
            0x66 => self.load8(hw, H, Addr::HL),
            0x67 => self.load8(hw, H, A),
            0x68 => self.load8(hw, L, B),
            0x69 => self.load8(hw, L, C),
            0x6A => self.load8(hw, L, D),
            0x6B => self.load8(hw, L, E),
            0x6C => self.load8(hw, L, H),
            0x6D => self.load8(hw, L, L),
            0x6E => self.load8(hw, L, Addr::HL),
            0x6F => self.load8(hw, L, A),

            0x70 => self.load8(hw, Addr::HL, B),
            0x71 => self.load8(hw, Addr::HL, C),
            0x72 => self.load8(hw, Addr::HL, D),
            0x73 => self.load8(hw, Addr::HL, E),
            0x74 => self.load8(hw, Addr::HL, H),
            0x75 => self.load8(hw, Addr::HL, L),
            0x76 => self.halt(hw),
            0x77 => self.load8(hw, Addr::HL, A),
            0x78 => self.load8(hw, A, B),
            0x79 => self.load8(hw, A, C),
            0x7A => self.load8(hw, A, D),
            0x7B => self.load8(hw, A, E),
            0x7C => self.load8(hw, A, H),
            0x7D => self.load8(hw, A, L),
            0x7E => self.load8(hw, A, Addr::HL),
            0x7F => self.load8(hw, A, A),

            0x80 => self.add(hw, B),
            0x81 => self.add(hw, C),
            0x82 => self.add(hw, D),
            0x83 => self.add(hw, E),
            0x84 => self.add(hw, H),
            0x85 => self.add(hw, L),
            0x86 => self.add(hw, Addr::HL),
            0x87 => self.add(hw, A),
            0x88 => self.adc(hw, B),
            0x89 => self.adc(hw, C),
            0x8A => self.adc(hw, D),
            0x8B => self.adc(hw, E),
            0x8C => self.adc(hw, H),
            0x8D => self.adc(hw, L),
            0x8E => self.adc(hw, Addr::HL),
            0x8F => self.adc(hw, A),

            0x90 => self.sub(hw, B),
            0x91 => self.sub(hw, C),
            0x92 => self.sub(hw, D),
            0x93 => self.sub(hw, E),
            0x94 => self.sub(hw, H),
            0x95 => self.sub(hw, L),
            0x96 => self.sub(hw, Addr::HL),
            0x97 => self.sub(hw, A),
            0x98 => self.sbc(hw, B),
            0x99 => self.sbc(hw, C),
            0x9A => self.sbc(hw, D),
            0x9B => self.sbc(hw, E),
            0x9C => self.sbc(hw, H),
            0x9D => self.sbc(hw, L),
            0x9E => self.sbc(hw, Addr::HL),
            0x9F => self.sbc(hw, A),

            0xA0 => self.and(hw, B),
            0xA1 => self.and(hw, C),
            0xA2 => self.and(hw, D),
            0xA3 => self.and(hw, E),
            0xA4 => self.and(hw, H),
            0xA5 => self.and(hw, L),
            0xA6 => self.and(hw, Addr::HL),
            0xA7 => self.and(hw, A),
            0xA8 => self.xor(hw, B),
            0xA9 => self.xor(hw, C),
            0xAA => self.xor(hw, D),
            0xAB => self.xor(hw, E),
            0xAC => self.xor(hw, H),
            0xAD => self.xor(hw, L),
            0xAE => self.xor(hw, Addr::HL),
            0xAF => self.xor(hw, A),

            0xB0 => self.or(hw, B),
            0xB1 => self.or(hw, C),
            0xB2 => self.or(hw, D),
            0xB3 => self.or(hw, E),
            0xB4 => self.or(hw, H),
            0xB5 => self.or(hw, L),
            0xB6 => self.or(hw, Addr::HL),
            0xB7 => self.or(hw, A),
            0xB8 => self.cp(hw, B),
            0xB9 => self.cp(hw, C),
            0xBA => self.cp(hw, D),
            0xBB => self.cp(hw, E),
            0xBC => self.cp(hw, H),
            0xBD => self.cp(hw, L),
            0xBE => self.cp(hw, Addr::HL),
            0xBF => self.cp(hw, A),

            0xC0 => self.ret_cc(hw, JumpConditions::NZ),
            0xC1 => self.pop(hw, BC),
            0xC2 => self.jp_cc_imm_u16(hw, JumpConditions::NZ),
            0xC3 => self.jp_cc_imm_u16(hw, JumpConditions::NONE),
            0xC4 => self.call_cc(hw, JumpConditions::NZ),
            0xC5 => self.push(hw, BC),
            0xC6 => self.add(hw, ImmediateU8),
            0xC7 => self.rst(hw, 0x00),
            0xC8 => self.ret_cc(hw, JumpConditions::Z),
            0xC9 => self.ret(hw),
            0xCA => self.jp_cc_imm_u16(hw, JumpConditions::Z),
            0xCB => {
                let op_code = self.read_imm_u8_tick(hw);
                self.execute_cb(op_code, hw);
            }
            0xCC => self.call_cc(hw, JumpConditions::Z),
            0xCD => self.call_cc(hw, JumpConditions::NONE),
            0xCE => self.adc(hw, ImmediateU8),
            0xCF => self.rst(hw, 0x08),

            0xD0 => self.ret_cc(hw, JumpConditions::NC),
            0xD1 => self.pop(hw, DE),
            0xD2 => self.jp_cc_imm_u16(hw, JumpConditions::NC),
            0xD3 => self.invalid_opcode(op_code),
            0xD4 => self.call_cc(hw, JumpConditions::NC),
            0xD5 => self.push(hw, DE),
            0xD6 => self.sub(hw, ImmediateU8),
            0xD7 => self.rst(hw, 0x10),
            0xD8 => self.ret_cc(hw, JumpConditions::C),
            0xD9 => self.reti(hw),
            0xDA => self.jp_cc_imm_u16(hw, JumpConditions::C),
            0xDB => self.invalid_opcode(op_code),
            0xDC => self.call_cc(hw, JumpConditions::C),
            0xDD => self.invalid_opcode(op_code),
            0xDE => self.sbc(hw, ImmediateU8),
            0xDF => self.rst(hw, 0x18),

            0xE0 => self.load8(hw, Addr::HighU8, A),
            0xE1 => self.pop(hw, HL),
            0xE2 => self.load8(hw, Addr::HighC, A),
            0xE3 => self.invalid_opcode(op_code),
            0xE4 => self.invalid_opcode(op_code),
            0xE5 => self.push(hw, HL),
            0xE6 => self.and(hw, ImmediateU8),
            0xE7 => self.rst(hw, 0x20),
            0xE8 => self.add_sp_i8(hw),
            0xE9 => self.jp_hl_address(),
            0xEA => self.load8(hw, Addr::U16, A),
            0xEB => self.invalid_opcode(op_code),
            0xEC => self.invalid_opcode(op_code),
            0xED => self.invalid_opcode(op_code),
            0xEE => self.xor(hw, ImmediateU8),
            0xEF => self.rst(hw, 0x28),

            0xF0 => self.load8(hw, A, Addr::HighU8),
            0xF1 => self.pop(hw, AF),
            0xF2 => self.load8(hw, A, Addr::HighC),
            0xF3 => self.di(),
            0xF4 => self.invalid_opcode(op_code),
            0xF5 => self.push(hw, AF),
            0xF6 => self.or(hw, ImmediateU8),
            0xF7 => self.rst(hw, 0x30),
            0xF8 => self.ld_hl_sp_i8(hw),
            0xF9 => {
                self.load16(hw, SP, HL);
                self.tick(hw); // internal
                               // LD SP,HL
            }
            0xFA => self.load8(hw, A, Addr::U16),
            0xFB => self.ei(),
            0xFC => self.invalid_opcode(op_code),
            0xFD => self.invalid_opcode(op_code),
            0xFE => self.cp(hw, ImmediateU8),
            0xFF => self.rst(hw, 0x38),
        }
    }

    pub fn execute_cb(&mut self, op_code: u8, hw: &mut Hardware) {
        match op_code {
            0x00 => self.rlc(hw, B),
            0x01 => self.rlc(hw, C),
            0x02 => self.rlc(hw, D),
            0x03 => self.rlc(hw, E),
            0x04 => self.rlc(hw, H),
            0x05 => self.rlc(hw, L),
            0x06 => self.rlc(hw, Addr::HL),
            0x07 => self.rlc(hw, A),
            0x08 => self.rrc(hw, B),
            0x09 => self.rrc(hw, C),
            0x0a => self.rrc(hw, D),
            0x0b => self.rrc(hw, E),
            0x0c => self.rrc(hw, H),
            0x0d => self.rrc(hw, L),
            0x0e => self.rrc(hw, Addr::HL),
            0x0f => self.rrc(hw, A),

            0x10 => self.rl(hw, B),
            0x11 => self.rl(hw, C),
            0x12 => self.rl(hw, D),
            0x13 => self.rl(hw, E),
            0x14 => self.rl(hw, H),
            0x15 => self.rl(hw, L),
            0x16 => self.rl(hw, Addr::HL),
            0x17 => self.rl(hw, A),
            0x18 => self.rr(hw, B),
            0x19 => self.rr(hw, C),
            0x1a => self.rr(hw, D),
            0x1b => self.rr(hw, E),
            0x1c => self.rr(hw, H),
            0x1d => self.rr(hw, L),
            0x1e => self.rr(hw, Addr::HL),
            0x1f => self.rr(hw, A),

            0x20 => self.sla(hw, B),
            0x21 => self.sla(hw, C),
            0x22 => self.sla(hw, D),
            0x23 => self.sla(hw, E),
            0x24 => self.sla(hw, H),
            0x25 => self.sla(hw, L),
            0x26 => self.sla(hw, Addr::HL),
            0x27 => self.sla(hw, A),
            0x28 => self.sra(hw, B),
            0x29 => self.sra(hw, C),
            0x2a => self.sra(hw, D),
            0x2b => self.sra(hw, E),
            0x2c => self.sra(hw, H),
            0x2d => self.sra(hw, L),
            0x2e => self.sra(hw, Addr::HL),
            0x2f => self.sra(hw, A),

            0x30 => self.swap(hw, B),
            0x31 => self.swap(hw, C),
            0x32 => self.swap(hw, D),
            0x33 => self.swap(hw, E),
            0x34 => self.swap(hw, H),
            0x35 => self.swap(hw, L),
            0x36 => self.swap(hw, Addr::HL),
            0x37 => self.swap(hw, A),
            0x38 => self.srl(hw, B),
            0x39 => self.srl(hw, C),
            0x3a => self.srl(hw, D),
            0x3b => self.srl(hw, E),
            0x3c => self.srl(hw, H),
            0x3d => self.srl(hw, L),
            0x3e => self.srl(hw, Addr::HL),
            0x3f => self.srl(hw, A),

            0x40 => self.bit(hw, 0, B),
            0x41 => self.bit(hw, 0, C),
            0x42 => self.bit(hw, 0, D),
            0x43 => self.bit(hw, 0, E),
            0x44 => self.bit(hw, 0, H),
            0x45 => self.bit(hw, 0, L),
            0x46 => self.bit(hw, 0, Addr::HL),
            0x47 => self.bit(hw, 0, A),
            0x48 => self.bit(hw, 1, B),
            0x49 => self.bit(hw, 1, C),
            0x4a => self.bit(hw, 1, D),
            0x4b => self.bit(hw, 1, E),
            0x4c => self.bit(hw, 1, H),
            0x4d => self.bit(hw, 1, L),
            0x4e => self.bit(hw, 1, Addr::HL),
            0x4f => self.bit(hw, 1, A),

            0x50 => self.bit(hw, 2, B),
            0x51 => self.bit(hw, 2, C),
            0x52 => self.bit(hw, 2, D),
            0x53 => self.bit(hw, 2, E),
            0x54 => self.bit(hw, 2, H),
            0x55 => self.bit(hw, 2, L),
            0x56 => self.bit(hw, 2, Addr::HL),
            0x57 => self.bit(hw, 2, A),
            0x58 => self.bit(hw, 3, B),
            0x59 => self.bit(hw, 3, C),
            0x5a => self.bit(hw, 3, D),
            0x5b => self.bit(hw, 3, E),
            0x5c => self.bit(hw, 3, H),
            0x5d => self.bit(hw, 3, L),
            0x5e => self.bit(hw, 3, Addr::HL),
            0x5f => self.bit(hw, 3, A),

            0x60 => self.bit(hw, 4, B),
            0x61 => self.bit(hw, 4, C),
            0x62 => self.bit(hw, 4, D),
            0x63 => self.bit(hw, 4, E),
            0x64 => self.bit(hw, 4, H),
            0x65 => self.bit(hw, 4, L),
            0x66 => self.bit(hw, 4, Addr::HL),
            0x67 => self.bit(hw, 4, A),
            0x68 => self.bit(hw, 5, B),
            0x69 => self.bit(hw, 5, C),
            0x6a => self.bit(hw, 5, D),
            0x6b => self.bit(hw, 5, E),
            0x6c => self.bit(hw, 5, H),
            0x6d => self.bit(hw, 5, L),
            0x6e => self.bit(hw, 5, Addr::HL),
            0x6f => self.bit(hw, 5, A),

            0x70 => self.bit(hw, 6, B),
            0x71 => self.bit(hw, 6, C),
            0x72 => self.bit(hw, 6, D),
            0x73 => self.bit(hw, 6, E),
            0x74 => self.bit(hw, 6, H),
            0x75 => self.bit(hw, 6, L),
            0x76 => self.bit(hw, 6, Addr::HL),
            0x77 => self.bit(hw, 6, A),
            0x78 => self.bit(hw, 7, B),
            0x79 => self.bit(hw, 7, C),
            0x7a => self.bit(hw, 7, D),
            0x7b => self.bit(hw, 7, E),
            0x7c => self.bit(hw, 7, H),
            0x7d => self.bit(hw, 7, L),
            0x7e => self.bit(hw, 7, Addr::HL),
            0x7f => self.bit(hw, 7, A),

            0x80 => self.res(hw, 0, B),
            0x81 => self.res(hw, 0, C),
            0x82 => self.res(hw, 0, D),
            0x83 => self.res(hw, 0, E),
            0x84 => self.res(hw, 0, H),
            0x85 => self.res(hw, 0, L),
            0x86 => self.res(hw, 0, Addr::HL),
            0x87 => self.res(hw, 0, A),
            0x88 => self.res(hw, 1, B),
            0x89 => self.res(hw, 1, C),
            0x8a => self.res(hw, 1, D),
            0x8b => self.res(hw, 1, E),
            0x8c => self.res(hw, 1, H),
            0x8d => self.res(hw, 1, L),
            0x8e => self.res(hw, 1, Addr::HL),
            0x8f => self.res(hw, 1, A),

            0x90 => self.res(hw, 2, B),
            0x91 => self.res(hw, 2, C),
            0x92 => self.res(hw, 2, D),
            0x93 => self.res(hw, 2, E),
            0x94 => self.res(hw, 2, H),
            0x95 => self.res(hw, 2, L),
            0x96 => self.res(hw, 2, Addr::HL),
            0x97 => self.res(hw, 2, A),
            0x98 => self.res(hw, 3, B),
            0x99 => self.res(hw, 3, C),
            0x9a => self.res(hw, 3, D),
            0x9b => self.res(hw, 3, E),
            0x9c => self.res(hw, 3, H),
            0x9d => self.res(hw, 3, L),
            0x9e => self.res(hw, 3, Addr::HL),
            0x9f => self.res(hw, 3, A),

            0xa0 => self.res(hw, 4, B),
            0xa1 => self.res(hw, 4, C),
            0xa2 => self.res(hw, 4, D),
            0xa3 => self.res(hw, 4, E),
            0xa4 => self.res(hw, 4, H),
            0xa5 => self.res(hw, 4, L),
            0xa6 => self.res(hw, 4, Addr::HL),
            0xa7 => self.res(hw, 4, A),
            0xa8 => self.res(hw, 5, B),
            0xa9 => self.res(hw, 5, C),
            0xaa => self.res(hw, 5, D),
            0xab => self.res(hw, 5, E),
            0xac => self.res(hw, 5, H),
            0xad => self.res(hw, 5, L),
            0xae => self.res(hw, 5, Addr::HL),
            0xaf => self.res(hw, 5, A),

            0xb0 => self.res(hw, 6, B),
            0xb1 => self.res(hw, 6, C),
            0xb2 => self.res(hw, 6, D),
            0xb3 => self.res(hw, 6, E),
            0xb4 => self.res(hw, 6, H),
            0xb5 => self.res(hw, 6, L),
            0xb6 => self.res(hw, 6, Addr::HL),
            0xb7 => self.res(hw, 6, A),
            0xb8 => self.res(hw, 7, B),
            0xb9 => self.res(hw, 7, C),
            0xba => self.res(hw, 7, D),
            0xbb => self.res(hw, 7, E),
            0xbc => self.res(hw, 7, H),
            0xbd => self.res(hw, 7, L),
            0xbe => self.res(hw, 7, Addr::HL),
            0xbf => self.res(hw, 7, A),

            0xc0 => self.set(hw, 0, B),
            0xc1 => self.set(hw, 0, C),
            0xc2 => self.set(hw, 0, D),
            0xc3 => self.set(hw, 0, E),
            0xc4 => self.set(hw, 0, H),
            0xc5 => self.set(hw, 0, L),
            0xc6 => self.set(hw, 0, Addr::HL),
            0xc7 => self.set(hw, 0, A),
            0xc8 => self.set(hw, 1, B),
            0xc9 => self.set(hw, 1, C),
            0xca => self.set(hw, 1, D),
            0xcb => self.set(hw, 1, E),
            0xcc => self.set(hw, 1, H),
            0xcd => self.set(hw, 1, L),
            0xce => self.set(hw, 1, Addr::HL),
            0xcf => self.set(hw, 1, A),

            0xd0 => self.set(hw, 2, B),
            0xd1 => self.set(hw, 2, C),
            0xd2 => self.set(hw, 2, D),
            0xd3 => self.set(hw, 2, E),
            0xd4 => self.set(hw, 2, H),
            0xd5 => self.set(hw, 2, L),
            0xd6 => self.set(hw, 2, Addr::HL),
            0xd7 => self.set(hw, 2, A),
            0xd8 => self.set(hw, 3, B),
            0xd9 => self.set(hw, 3, C),
            0xda => self.set(hw, 3, D),
            0xdb => self.set(hw, 3, E),
            0xdc => self.set(hw, 3, H),
            0xdd => self.set(hw, 3, L),
            0xde => self.set(hw, 3, Addr::HL),
            0xdf => self.set(hw, 3, A),

            0xe0 => self.set(hw, 4, B),
            0xe1 => self.set(hw, 4, C),
            0xe2 => self.set(hw, 4, D),
            0xe3 => self.set(hw, 4, E),
            0xe4 => self.set(hw, 4, H),
            0xe5 => self.set(hw, 4, L),
            0xe6 => self.set(hw, 4, Addr::HL),
            0xe7 => self.set(hw, 4, A),
            0xe8 => self.set(hw, 5, B),
            0xe9 => self.set(hw, 5, C),
            0xea => self.set(hw, 5, D),
            0xeb => self.set(hw, 5, E),
            0xec => self.set(hw, 5, H),
            0xed => self.set(hw, 5, L),
            0xee => self.set(hw, 5, Addr::HL),
            0xef => self.set(hw, 5, A),

            0xf0 => self.set(hw, 6, B),
            0xf1 => self.set(hw, 6, C),
            0xf2 => self.set(hw, 6, D),
            0xf3 => self.set(hw, 6, E),
            0xf4 => self.set(hw, 6, H),
            0xf5 => self.set(hw, 6, L),
            0xf6 => self.set(hw, 6, Addr::HL),
            0xf7 => self.set(hw, 6, A),
            0xf8 => self.set(hw, 7, B),
            0xf9 => self.set(hw, 7, C),
            0xfa => self.set(hw, 7, D),
            0xfb => self.set(hw, 7, E),
            0xfc => self.set(hw, 7, H),
            0xfd => self.set(hw, 7, L),
            0xfe => self.set(hw, 7, Addr::HL),
            0xff => self.set(hw, 7, A),
        }
    }

    fn invalid_opcode(&mut self, _op_code: u8) {
        // TODO panic?
    }
}

```

`gb/src/cpu/instructions.rs`:

```rs
use std::u16;

use cpu::{Cpu, Flags, Reg16, Reg8};
use parse_display::{Display, FromStr};

use crate::emulator::Hardware;

use super::cpu;

#[derive(Display, FromStr, Copy, Clone, PartialEq, Eq)]
#[allow(clippy::upper_case_acronyms)]
pub enum JumpConditions {
    NZ,
    Z,
    NC,
    C,
    #[display("")]
    NONE, // direct jump
}

#[derive(Display, FromStr, Copy, Clone)]
#[allow(clippy::upper_case_acronyms)]
#[display("({})")]
pub enum Addr {
    BC,
    DE,
    HL,

    #[display("(HL+)")]
    HLI,
    #[display("(HL-)")]
    HLD,
    #[display("(u16)")]
    U16,
    #[display("(FF00+C)")]
    HighC,
    #[display("(FF00+u8)")]
    HighU8,
}
#[derive(Display, Clone, Copy)]
#[display("u8")]
pub struct ImmediateU8;
#[derive(Display, Clone, Copy)]
#[display("u16")]
pub struct ImmediateU16;

// ALU
impl Cpu {
    /**
     ADD A,n
     Add n to A.

     Use with:
     n = A,B,C,D,E,H,L,(HL),#

     Flags affected:
     Z - Set if result is zero
     N - Reset
     H - Set if carry from bit 3
     C - Set if carry from bit 7
    */
    pub fn add<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let a = self.read_reg8(Reg8::A);
        let (result, overflow) = a.overflowing_add(value);

        let half_carry = (a & 0x0f).checked_add(value | 0xf0).is_none();

        self.update_flag(Flags::C, overflow);
        self.update_flag(Flags::Z, result == 0);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, half_carry);

        self.write_reg8(Reg8::A, result);
    }

    pub fn adc<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let a = self.read_reg8(Reg8::A);
        let carry_value = self.get_carry_bit();

        let result = a.wrapping_add(value).wrapping_add(carry_value);

        self.update_flag(
            Flags::C,
            a as u16 + value as u16 + carry_value as u16 > 0xff,
        );
        self.update_flag(Flags::H, (a & 0xf) + (value & 0xf) + carry_value > 0xf);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::Z, result == 0);

        self.write_reg8(Reg8::A, result);
    }

    fn base_sub(&mut self, value: u8, subtract_carry: bool) -> u8 {
        let a = self.read_reg8(Reg8::A);

        let carry_value = u8::from(subtract_carry && self.f.contains(Flags::C));

        let result = a.wrapping_sub(value).wrapping_sub(carry_value);

        self.update_flag(Flags::N, true);
        self.update_flag(Flags::Z, result == 0);
        self.update_flag(
            Flags::C,
            (a as u16) < ((value as u16) + (carry_value as u16)),
        );
        self.update_flag(
            Flags::H,
            (a & 0xf)
                .wrapping_sub(value & 0xf)
                .wrapping_sub(carry_value)
                & (0xf + 1)
                != 0,
        );
        result
    }

    pub fn sub<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let result = self.base_sub(value, false);
        self.write_reg8(Reg8::A, result);
    }

    pub fn cp<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        self.base_sub(value, false);
    }

    pub fn sbc<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let result = self.base_sub(value, true);
        self.write_reg8(Reg8::A, result);
    }

    pub fn and<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let result = self.read_reg8(Reg8::A) & value;
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, true);
        self.update_flag(Flags::C, false);
        self.update_flag(Flags::Z, result == 0);

        self.write_reg8(Reg8::A, result);
    }

    pub fn or<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let result = self.read_reg8(Reg8::A) | value;
        self.clear_flags();
        if result == 0 {
            self.set_flag(Flags::Z);
        }
        self.write_reg8(Reg8::A, result);
    }

    pub fn xor<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let result = self.read_reg8(Reg8::A) ^ value;
        self.clear_flags();
        if result == 0 {
            self.set_flag(Flags::Z);
        }
        self.write_reg8(Reg8::A, result);
    }

    pub fn inc<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let result = value.wrapping_add(1);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::Z, result == 0);
        self.update_flag(Flags::H, value & 0xf == 0xf);

        source.write8(self, hw, result);
    }

    pub fn inc16<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read16 + Write16 + std::fmt::Display + Copy,
    {
        let value = source.read16(self, hw);
        let result = value.wrapping_add(1);
        source.write16(self, hw, result);
        self.tick(hw); // internal
    }

    pub fn dec<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let result = value.wrapping_sub(1);
        self.update_flag(Flags::N, true);
        self.update_flag(Flags::Z, result == 0);
        self.update_flag(Flags::H, value & 0xf == 0);

        source.write8(self, hw, result);
    }

    pub fn dec16<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read16 + Write16 + std::fmt::Display + Copy,
    {
        let value = source.read16(self, hw);
        let result = value.wrapping_sub(1);
        source.write16(self, hw, result);
        self.tick(hw); // internal
    }

    /* Jumps */
    pub fn jp_hl_address(&mut self) {
        let address = self.read_reg16(Reg16::HL);
        self.pc = address;
    }

    pub fn jp_cc_imm_u16(&mut self, hw: &mut Hardware, condition: JumpConditions) {
        let address = self.read_imm_u16_tick(hw);
        let condition_result = match condition {
            JumpConditions::NZ => !self.f.contains(Flags::Z),
            JumpConditions::Z => self.f.contains(Flags::Z),
            JumpConditions::NC => !self.f.contains(Flags::C),
            JumpConditions::C => self.f.contains(Flags::C),
            JumpConditions::NONE => true,
        };

        if condition_result {
            self.pc = address;
            self.tick(hw) // internal
        }
    }

    pub fn jr_cc(&mut self, hw: &mut Hardware, condition: JumpConditions) {
        let condition_result = match condition {
            JumpConditions::NZ => !self.f.contains(Flags::Z),
            JumpConditions::Z => self.f.contains(Flags::Z),
            JumpConditions::NC => !self.f.contains(Flags::C),
            JumpConditions::C => self.f.contains(Flags::C),
            JumpConditions::NONE => true,
        };

        // Convert to signed value

        let offset = self.read_imm_u8_tick(hw) as i8;
        if condition_result {
            self.pc = self.pc.wrapping_add(offset as u16);

            self.tick(hw) // internal
        } else {
        }
    }

    /* Returns */
    pub fn ret(&mut self, hw: &mut Hardware) {
        let address = self.read_u16_tick(hw, self.sp);

        self.tick(hw); // internal

        self.pc = address;
        self.sp = self.sp.wrapping_add(2);
    }

    pub fn ret_cc(&mut self, hw: &mut Hardware, condition: JumpConditions) {
        let condition_result = match condition {
            JumpConditions::NZ => !self.f.contains(Flags::Z),
            JumpConditions::Z => self.f.contains(Flags::Z),
            JumpConditions::NC => !self.f.contains(Flags::C),
            JumpConditions::C => self.f.contains(Flags::C),
            JumpConditions::NONE => panic!("Use cpu.ret directly."),
        };

        self.tick(hw); // internal
        if condition_result {
            self.ret(hw);
        }
    }

    pub fn reti(&mut self, hw: &mut Hardware) {
        self.ret(hw);
        self.ime = true;
    }

    pub fn rst(&mut self, hw: &mut Hardware, address: u16) {
        self.tick(hw);
        self.sp = self.sp.wrapping_sub(2);
        self.write_u16_tick(hw, self.sp, self.pc);
        self.pc = address;
    }

    pub fn push<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read16 + std::fmt::Display + Copy,
    {
        self.tick(hw); // internal

        let value = source.read16(self, hw);
        self.sp = self.sp.wrapping_sub(2);
        self.write_u16_tick(hw, self.sp, value);
    }

    pub fn pop<T>(&mut self, hw: &mut Hardware, target: T)
    where
        T: Write16 + std::fmt::Display + Copy,
    {
        let value = self.read_u16_tick(hw, self.sp);
        self.sp = self.sp.wrapping_add(2);

        target.write16(self, hw, value);
    }

    pub fn ld_hl_sp_i8(&mut self, hw: &mut Hardware) {
        let n = self.read_imm_u8_tick(hw) as i8 as i16 as u16;
        let result = self.sp.wrapping_add(n);

        let op = self.sp ^ n ^ result;
        self.update_flag(Flags::Z, false);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, op & 0x10 > 0);
        self.update_flag(Flags::C, op & 0x100 > 0);
        self.write_reg16(Reg16::HL, result);
        self.tick(hw); // internal
    }
}

// Rotates
impl Cpu {
    pub fn rlca(&mut self) {
        let value = self.read_reg8(Reg8::A);
        let old_7bit = value & 0b1000_0000;
        let result = value.rotate_left(1);
        self.update_flag(Flags::Z, false);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, old_7bit > 0);

        self.write_reg8(Reg8::A, result);
    }

    pub fn rla(&mut self) {
        let value = self.read_reg8(Reg8::A);
        let old_7bit = value & 0b1000_0000;
        let result = value << 1 | self.get_carry_bit();

        self.update_flag(Flags::Z, false);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, old_7bit > 0);

        self.write_reg8(Reg8::A, result);
    }

    pub fn rrca(&mut self) {
        let value = self.read_reg8(Reg8::A);
        let old_0bit = value & 0b0000_0001;
        let result = value.rotate_right(1);

        self.update_flag(Flags::Z, false);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, old_0bit > 0);

        self.write_reg8(Reg8::A, result);
    }

    pub fn rra(&mut self) {
        let value = self.read_reg8(Reg8::A);
        let old_0bit = value & 0b0000_0001;
        let result = (value >> 1) | (self.get_carry_bit() << 7);

        self.update_flag(Flags::Z, false);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, old_0bit > 0);

        self.write_reg8(Reg8::A, result);
    }
}

// Misc
impl Cpu {
    pub fn scf(&mut self) {
        self.clear_flag(Flags::N);
        self.clear_flag(Flags::H);
        self.set_flag(Flags::C);
    }

    pub fn ccf(&mut self) {
        self.clear_flag(Flags::N);
        self.clear_flag(Flags::H);
        if self.f.contains(Flags::C) {
            self.clear_flag(Flags::C);
        } else {
            self.set_flag(Flags::C);
        }
    }

    pub fn cpl(&mut self) {
        let value = self.read_reg8(Reg8::A);
        let result = value ^ 0xff;
        self.write_reg8(Reg8::A, result);
        self.set_flag(Flags::N);
        self.set_flag(Flags::H);
    }

    pub fn daa(&mut self) {
        // https://ehaskins.com/2018-01-30%20Z80%20DAA/
        // Thank you master
        let a = self.read_reg8(Reg8::A);
        let mut carry = false;

        let flag_h = self.f.contains(Flags::H);
        let flag_c = self.f.contains(Flags::C);
        let flag_n = self.f.contains(Flags::N);

        let mut correction = 0;

        if flag_h || (!flag_n && (a & 0xf) > 0x09) {
            correction |= 0x06;
        }

        if flag_c || (!flag_n && a > 0x99) {
            correction |= 0x60;
            carry = true;
        }

        let result = if flag_n {
            a.wrapping_sub(correction)
        } else {
            a.wrapping_add(correction)
        };

        self.update_flag(Flags::C, carry);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::Z, result == 0);
        self.write_reg8(Reg8::A, result);
    }

    pub fn halt(&mut self, hw: &mut Hardware) {
        self.halted = true;
        if hw.interrupts.has_available_interrupts() {
            self.halted = false;
            if self.ime {
                self.increment_pc();
            } else {
                self.halt_bug = true;
            }
        }
        self.just_halted = true;
    }

    pub fn di(&mut self) {
        self.ime = false;
    }

    pub fn ei(&mut self) {
        self.ime_requested = true;
    }
}

// Calls
impl Cpu {
    pub fn call_cc(&mut self, hw: &mut Hardware, condition: JumpConditions) {
        let condition_result = match condition {
            JumpConditions::NZ => !self.f.contains(Flags::Z),
            JumpConditions::Z => self.f.contains(Flags::Z),
            JumpConditions::NC => !self.f.contains(Flags::C),
            JumpConditions::C => self.f.contains(Flags::C),
            JumpConditions::NONE => true,
        };

        let next_instruction_address = self.pc.wrapping_add(2);
        let new_address = self.read_imm_u16_tick(hw);
        if condition_result {
            self.tick(hw); // internal
            self.sp = self.sp.wrapping_sub(2);
            self.write_u16_tick(hw, self.sp, next_instruction_address);
            self.pc = new_address;
        }
    }
}

// ALU16
impl Cpu {
    pub fn add16<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read16 + std::fmt::Display + Copy,
    {
        let value = source.read16(self, hw);
        let hl = self.read_reg16(Reg16::HL);

        let result = hl.wrapping_add(value);
        self.clear_flag(Flags::N);
        if hl > 0xffff - value {
            self.set_flag(Flags::C);
        } else {
            self.clear_flag(Flags::C);
        }

        if (hl ^ value ^ result) & 0x1000 != 0 {
            self.set_flag(Flags::H);
        } else {
            self.clear_flag(Flags::H);
        }

        self.write_reg16(Reg16::HL, result);
        self.tick(hw); // internal
    }

    pub fn add_sp_i8(&mut self, hw: &mut Hardware) {
        let n = self.read_imm_u8_tick(hw) as i8 as i16 as u16;
        let result = self.sp.wrapping_add(n);

        let op = self.sp ^ n ^ result;
        self.update_flag(Flags::Z, false);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, op & 0x10 > 0);
        self.update_flag(Flags::C, op & 0x100 > 0);

        self.sp = result;
        self.tick(hw); // internal
        self.tick(hw); // internal
    }
}

// CB
impl Cpu {
    pub fn bit<S>(&mut self, hw: &mut Hardware, bit_index: u8, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let bit_mask = 1 << bit_index;
        let bit = value & bit_mask;
        self.update_flag(Flags::Z, bit == 0);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, true);
    }

    pub fn set<S>(&mut self, hw: &mut Hardware, bit_index: u8, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let mask = 1 << bit_index;
        let result = value | mask;
        source.write8(self, hw, result);
    }

    pub fn res<S>(&mut self, hw: &mut Hardware, bit_index: u8, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let mask = !(1 << bit_index);
        let result = value & mask;
        source.write8(self, hw, result);
    }

    pub fn rlc<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let old_7bit = value & 0b1000_0000;
        let result = value.rotate_left(1);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, old_7bit > 0);
        self.update_flag(Flags::Z, result == 0);

        source.write8(self, hw, result);
    }

    pub fn rrc<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let old_0bit = value & 0b0000_0001;
        let result = value.rotate_right(1);
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, old_0bit > 0);
        self.update_flag(Flags::Z, result == 0);

        source.write8(self, hw, result);
    }

    pub fn rl<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let old_7bit = value & 0b1000_0000;
        let result = (value << 1) | self.get_carry_bit();

        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, old_7bit > 0);
        self.update_flag(Flags::Z, result == 0);

        source.write8(self, hw, result);
    }

    pub fn rr<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let result = (value >> 1) | (self.get_carry_bit() << 7);

        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, value & 1 > 0);
        self.update_flag(Flags::Z, result == 0);

        source.write8(self, hw, result);
    }

    pub fn sla<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let old_7bit = value & 0b1000_0000;
        let result = value << 1;
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, old_7bit > 0);
        self.update_flag(Flags::Z, result == 0);

        source.write8(self, hw, result);
    }

    pub fn sra<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let old_7bit = value & 0b1000_0000;
        let old_0bit = value & 0b0000_0001;
        let result = (value >> 1) | old_7bit;
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, old_0bit > 0);
        self.update_flag(Flags::Z, result == 0);

        source.write8(self, hw, result);
    }

    pub fn srl<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let result = value >> 1;
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, value & 1 > 0);
        self.update_flag(Flags::Z, result == 0);

        source.write8(self, hw, result);
    }

    pub fn swap<S>(&mut self, hw: &mut Hardware, source: S)
    where
        S: Read8 + Write8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        let high = value << 4;
        let low = value >> 4;
        let result = high | low;
        self.update_flag(Flags::N, false);
        self.update_flag(Flags::H, false);
        self.update_flag(Flags::C, false);
        self.update_flag(Flags::Z, result == 0);

        source.write8(self, hw, result);
    }
}

impl Cpu {
    pub fn load8<T, S>(&mut self, hw: &mut Hardware, target: T, source: S)
    where
        T: Write8 + std::fmt::Display + Copy,
        S: Read8 + std::fmt::Display + Copy,
    {
        let value = source.read8(self, hw);
        target.write8(self, hw, value);
    }

    pub fn load16<T, S>(&mut self, hw: &mut Hardware, target: T, source: S)
    where
        T: Write16 + std::fmt::Display + Copy,
        S: Read16 + std::fmt::Display + Copy,
    {
        let value = source.read16(self, hw);
        target.write16(self, hw, value);
    }
}

/* 8bit operations */
pub trait Read8 {
    fn read8(self, cpu: &mut Cpu, hw: &mut Hardware) -> u8;
}
pub trait Write8 {
    fn write8(self, cpu: &mut Cpu, hw: &mut Hardware, value: u8);
}

impl Read8 for Reg8 {
    fn read8(self, cpu: &mut Cpu, _: &mut Hardware) -> u8 {
        cpu.read_reg8(self)
    }
}

impl Write8 for Reg8 {
    fn write8(self, cpu: &mut Cpu, _: &mut Hardware, value: u8) {
        cpu.write_reg8(self, value);
    }
}

impl Addr {
    fn modify_address_register(self, cpu: &mut Cpu) {
        match self {
            Addr::HLI => {
                let value = cpu.read_reg16(Reg16::HL);
                cpu.write_reg16(Reg16::HL, value.wrapping_add(1));
            }
            Addr::HLD => {
                let value = cpu.read_reg16(Reg16::HL);
                cpu.write_reg16(Reg16::HL, value.wrapping_sub(1));
            }
            _ => {}
        }
    }

    fn read_address(self, cpu: &mut Cpu, hw: &mut Hardware) -> u16 {
        match self {
            Addr::U16 => cpu.read_imm_u16_tick(hw),
            Addr::BC => cpu.read_reg16(Reg16::BC),
            Addr::DE => cpu.read_reg16(Reg16::DE),
            Addr::HL => cpu.read_reg16(Reg16::HL),
            Addr::HLI => {
                let address = cpu.read_reg16(Reg16::HL);
                self.modify_address_register(cpu);
                address
            }
            Addr::HLD => {
                let address = cpu.read_reg16(Reg16::HL);
                self.modify_address_register(cpu);
                address
            }
            Addr::HighC => 0xff00 + cpu.read_reg8(Reg8::C) as u16,
            Addr::HighU8 => 0xff00 + cpu.read_imm_u8_tick(hw) as u16,
        }
    }
}

impl Read8 for Addr {
    fn read8(self, cpu: &mut Cpu, hw: &mut Hardware) -> u8 {
        let address = self.read_address(cpu, hw);
        cpu.read_u8_tick(hw, address)
    }
}

impl Write8 for Addr {
    fn write8(self, cpu: &mut Cpu, hw: &mut Hardware, value: u8) {
        let address = self.read_address(cpu, hw);
        cpu.write_u8_tick(hw, address, value);
    }
}

impl Read8 for ImmediateU8 {
    fn read8(self, cpu: &mut Cpu, hw: &mut Hardware) -> u8 {
        cpu.read_imm_u8_tick(hw)
    }
}

/* 16bit operations */
pub trait Read16 {
    fn read16(self, cpu: &mut Cpu, hw: &mut Hardware) -> u16;
}

pub trait Write16 {
    fn write16(self, cpu: &mut Cpu, hw: &mut Hardware, value: u16);
}

impl Read16 for Reg16 {
    fn read16(self, cpu: &mut Cpu, _: &mut Hardware) -> u16 {
        cpu.read_reg16(self)
    }
}

impl Write16 for Reg16 {
    fn write16(self, cpu: &mut Cpu, _: &mut Hardware, value: u16) {
        cpu.write_reg16(self, value)
    }
}

impl Read16 for ImmediateU16 {
    fn read16(self, cpu: &mut Cpu, hw: &mut Hardware) -> u16 {
        cpu.read_imm_u16_tick(hw)
    }
}

impl Write16 for ImmediateU16 {
    fn write16(self, cpu: &mut Cpu, hw: &mut Hardware, value: u16) {
        let address = cpu.read_imm_u16_tick(hw);
        cpu.write_u16_tick(hw, address, value);
    }
}

```

`gb/src/cpu/mod.rs`:

```rs
pub mod cpu;

mod execute;
mod instructions;

```

`gb/src/dma.rs`:

```rs
#[derive(PartialEq)]
enum State {
    Idle,
    Requested,
    Triggered,
    Active,
}
pub struct OamDma {
    state: State,
    transfer_from_addr: u16,
    last_written: u8,
    offset: u16,
    requested: Option<u8>,
}

impl OamDma {
    pub fn new() -> OamDma {
        OamDma {
            state: State::Idle,
            last_written: 0xff,
            transfer_from_addr: 0,
            offset: 0,
            requested: None,
        }
    }

    pub fn read_byte(&self) -> u8 {
        self.last_written
    }

    pub fn is_active(&self) -> bool {
        if [State::Active].contains(&self.state) {
            return true;
        }
        false
    }

    pub fn request(&mut self, value: u8) {
        self.last_written = value;

        self.requested = Some(value);
        if self.state == State::Idle {
            self.state = State::Requested;
        }
    }

    fn get_source_addr(&self) -> u16 {
        // 0xfe00 -> 0xffff range cannot be accessed by DMA and is mapped to WRAM
        if 0xfe00 <= self.transfer_from_addr {
            return self.transfer_from_addr - 0x2000;
        }
        self.transfer_from_addr
    }

    pub fn tick(&mut self) -> Option<(u16, u16)> {
        if self.state == State::Idle {
            return None;
        }

        // Request write + tick is same M cycle
        // One cycle delay before start
        if self.state == State::Requested {
            self.state = State::Triggered;
            self.transfer_from_addr = (self.last_written as u16) << 8;
            self.requested = None;
            self.offset = 0;
            return None;
        }

        if self.state == State::Triggered {
            self.state = State::Active;
        }

        // One cycle delay before end
        if self.offset == 160 {
            self.state = State::Idle;
            return None;
        }

        let source = self.get_source_addr();
        let target = self.offset | 0xfe00;
        self.transfer_from_addr += 1;
        self.offset += 1;

        // DMA is active, but restart occured -> previous DMA proceeds during 1
        if self.requested.is_some() {
            self.transfer_from_addr = (self.last_written as u16) << 8;
            self.requested = None;
            self.offset = 0;
        }

        Some((source, target))
    }
}

```

`gb/src/emulator.rs`:

```rs
use std::u16;

use log::debug;

use crate::{
    apu::apu::Apu,
    audio::AudioDevice,
    bios::BIOS,
    cartridges::cartridge::Cartridge,
    cpu::cpu::{Cpu, Flags, Reg8},
    dma::OamDma,
    events::Events,
    hdma::Hdma,
    interrupts::InterruptController,
    joypad::{Joypad, JoypadKey},
    ppu::{palettes::DmgPalettes, ppu::Ppu, screen_buffer::Buffer},
    serial::Serial,
    timer::Timer,
    traits::MemoryAccess,
    wram::Wram,
};
pub trait SplitU16 {
    fn split_to_u8(self) -> (u8, u8);
}

impl SplitU16 for u16 {
    fn split_to_u8(self) -> (u8, u8) {
        let high = (self >> 8) as u8;
        let low = (self & 0xff) as u8;
        (high, low)
    }
}

const HRAM_START: u16 = 0xff80;
const HRAM_END: u16 = 0xfffe;
const HRAM_SIZE: usize = HRAM_END as usize - HRAM_START as usize + 1;

pub struct Hardware {
    is_cgb: bool,
    bios_enabled: bool,
    pub cartridge: Cartridge,
    pub ppu: Ppu,
    pub apu: Apu,
    wram: Wram,
    hram: Box<[u8; HRAM_SIZE]>,
    capture_serial: bool,
    pub serial_output: Vec<char>,
    pub interrupts: InterruptController,
    serial: Serial,
    pub timer: Timer,
    pub oam_dma: OamDma,
    pub hdma: Hdma,
    joypad: Joypad,
    pub events: Events,
}

impl MemoryAccess for Hardware {
    fn read_byte(&self, address: u16) -> u8 {
        match address {
            // Cartridge ROM - bank 0 - 16kb
            0x0000..=0x3fff => {
                if self.bios_enabled && (address as usize) < BIOS.len() {
                    return BIOS[address as usize];
                }
                self.cartridge.read_byte(address)
            }

            // Cartridge ROM - bank 1 - 16kb
            0x4000..=0x7fff => self.cartridge.read_byte(address),

            // Graphics RAM (VRAM)
            0x8000..=0x9fff => self.ppu.read_byte(address),

            // Cartridge (External) RAM
            0xa000..=0xbfff => self.cartridge.read_byte(address),

            // Working RAM - 8kb
            0xc000..=0xdfff => self.wram.read_byte(address),

            // Working RAM (shadow) exact copy of previous working RAM, due to the HW wiring
            0xe000..=0xfdff => self.wram.read_byte(address - 0x2000),

            // Sprite attribute table (OAM)
            0xfe00..=0xfe9f => {
                if self.oam_dma.is_active() {
                    return 0xff;
                }
                self.ppu.read_byte(address)
            }

            // Not Usable
            0xfea0..=0xfeff => 0xff,

            // I/O Registers
            0xff00..=0xff7f => match address {
                0xff00 => self.joypad.read_byte(address),          // Joypad
                0xff01..=0xff02 => self.serial.read_byte(address), // Serial
                0xff03 => 0xff,                                    // unused
                0xff04..=0xff07 => self.timer.read_byte(address),  // Timer
                0xff0f => self.interrupts.read_byte(address),      // Interrupt controller
                0xff10..=0xff14 => self.apu.read_byte(address),    // APU Channel 1
                0xff16..=0xff19 => self.apu.read_byte(address),    // APU Channel 2
                0xff1a..=0xff1e => self.apu.read_byte(address),    // APU Channel 3
                0xff20..=0xff23 => self.apu.read_byte(address),    // APU Channel 4
                0xff24..=0xff26 => self.apu.read_byte(address),    // APU Sound controls
                0xff30..=0xff3f => self.apu.read_byte(address),    // APU Channel 3 Wave RAM
                0xff40..=0xff45 => self.ppu.read_byte(address),    // PPU
                0xff46 => self.oam_dma.read_byte(),                // DMA
                0xff47..=0xff4b => self.ppu.read_byte(address),    // PPU
                0xff4f => {
                    if self.is_cgb {
                        self.ppu.read_byte(address)
                    } else {
                        0xff
                    }
                } // CGB VRAM bank switch
                0xff51..=0xff55 => {
                    if self.is_cgb {
                        self.hdma.read_byte(address)
                    } else {
                        0xff
                    }
                } // CGB HDMA
                0xff68 => {
                    if self.is_cgb {
                        self.ppu.read_byte(address)
                    } else {
                        0xff
                    }
                } // CGB Background Palette Index
                0xff69 => {
                    if self.is_cgb {
                        self.ppu.read_byte(address)
                    } else {
                        0xff
                    }
                } // CGB Background Palette Data
                0xff6a => {
                    if self.is_cgb {
                        self.ppu.read_byte(address)
                    } else {
                        0xff
                    }
                } // CGB Object Palette Index
                0xff6b => {
                    if self.is_cgb {
                        self.ppu.read_byte(address)
                    } else {
                        0xff
                    }
                } // CGB Object Palette Data
                0xff6c => {
                    if self.is_cgb {
                        self.ppu.read_byte(address)
                    } else {
                        0xff
                    }
                } // CGB Object Priority Mode
                0xff70 => {
                    if self.is_cgb {
                        self.wram.read_byte(address)
                    } else {
                        0xff
                    }
                } // CGB WRAM bank switch
                _ => 0xff,                                         // unused
            },

            // High RAM (HRAM)
            0xff80..=0xfffe => self.hram[(address - HRAM_START) as usize],

            // Interrupts Enable Register (IE)
            0xffff => self.interrupts.read_byte(address),
        }
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        let ic = &mut self.interrupts;
        match address {
            // Cartridge ROM - bank 0 - 16kb
            0x0000..=0x3fff => self.cartridge.write_byte(address, value),

            // Cartridge ROM - bank 1 - 16kb
            0x4000..=0x7fff => self.cartridge.write_byte(address, value),

            // Graphics RAM (VRAM)
            0x8000..=0x9fff => self.ppu.write_byte(address, value, ic),

            // Cartridge (External) RAM
            0xa000..=0xbfff => self.cartridge.write_byte(address, value),

            // Working RAM - 8kb
            0xc000..=0xdfff => self.wram.write_byte(address, value),

            // Working RAM (shadow) exact copy of previous working RAM, due to the HW wiring
            0xe000..=0xfdff => self.wram.write_byte(address - 0x2000, value),

            // Sprite attribute table (OAM)
            0xfe00..=0xfe9f => {
                if self.oam_dma.is_active() {
                    return;
                }
                self.ppu.write_byte(address, value, ic)
            }

            // Not Usable
            0xfea0..=0xfeff => {}

            // I/O Registers
            0xff00..=0xff7f => match address {
                0xff00 => self.joypad.write_byte(address, value), // Joypad
                0xff01..=0xff02 => {
                    if self.capture_serial && address == 0xff01 {
                        self.serial_output.push(value as char);
                    }
                    self.serial.write_byte(address, value)
                } // Serial
                0xff04..=0xff07 => self.timer.write_byte(address, value, ic), // Timer
                0xff0f => self.interrupts.write_byte(address, value), // Interrupt controller
                0xff10..=0xff14 => self.apu.write_byte(address, value), // APU Channel 1
                0xff16..=0xff19 => self.apu.write_byte(address, value), // APU Channel 2
                0xff1a..=0xff1e => self.apu.write_byte(address, value), // APU Channel 3
                0xff20..=0xff23 => self.apu.write_byte(address, value), // APU Channel 4
                0xff24..=0xff26 => self.apu.write_byte(address, value), // APU Sound controls
                0xff30..=0xff3f => self.apu.write_byte(address, value), // APU Channel 3 Wave RAM
                0xff40..=0xff45 => self.ppu.write_byte(address, value, ic), // PPU
                0xff46 => self.oam_dma.request(value),            // DMA
                0xff47..=0xff4b => self.ppu.write_byte(address, value, ic), // PPU
                0xff50 => self.bios_enabled = false,              // Remove bios
                0xff4f => self.ppu.write_byte(address, value, ic), // CGB VRAM bank switch
                0xff51..=0xff55 => self.hdma.write_byte(address, value), // CGB HDMA
                0xff68 => self.ppu.write_byte(address, value, ic), // CGB Background Palette Index
                0xff69 => self.ppu.write_byte(address, value, ic), // CGB Background Palette Data
                0xff6a => self.ppu.write_byte(address, value, ic), // CGB Object Palette Index
                0xff6b => self.ppu.write_byte(address, value, ic), // CGB Object Palette Data
                0xff6c => self.ppu.write_byte(address, value, ic), // CGB Object Priority Mode
                0xff70 => self.wram.write_byte(address, value),   // CGB WRAM bank switch
                _ => {}                                           // unused
            },

            // High RAM (HRAM)
            0xff80..=0xfffe => self.hram[(address - HRAM_START) as usize] = value,

            // Interrupts Enable Register (IE)
            0xffff => self.interrupts.write_byte(address, value),
        }
    }
}

pub struct Emulator {
    pub cpu: Cpu,
    pub hw: Hardware,
    pub frames: u32,
    executed_instructions: u32,
    is_cgb: bool,
}

#[derive(Debug, Clone, Copy, PartialEq, Eq)]
pub enum Device {
    AutoDetect, // will enable CGB mode if the cartridge is CGB compatible
    DMG,
    CGB,
}

impl Emulator {
    pub fn new(
        bios_enabled: bool,
        cartridge: Cartridge,
        audio_device: Box<dyn AudioDevice>,
        device: Device,
    ) -> Emulator {
        let interrupt_controller = InterruptController::new();
        let is_cgb = match device {
            Device::AutoDetect => cartridge.supports_cgb(),
            Device::DMG => false,
            Device::CGB => true,
        };
        let ppu = Ppu::new(is_cgb);
        let apu = Apu::new(audio_device);
        let mut e = Emulator {
            cpu: Cpu::new(),
            frames: 0,
            executed_instructions: 0,
            hw: Hardware {
                is_cgb,
                bios_enabled,
                ppu,
                apu,
                serial: Serial::new(),
                timer: Timer::new(),
                interrupts: interrupt_controller,
                cartridge,
                capture_serial: false,
                serial_output: Vec::new(),
                wram: Wram::new(is_cgb),
                hram: Box::new([0xff; HRAM_SIZE]),
                oam_dma: OamDma::new(),
                hdma: Hdma::new(),
                joypad: Joypad::new(),
                events: Events::empty(),
            },
            is_cgb,
        };

        if !bios_enabled {
            let a = if e.is_cgb { 0x11 } else { 0x01 };
            e.cpu
                .write_reg8(Reg8::A, a)
                .write_reg8(Reg8::B, 0x00)
                .write_reg8(Reg8::C, 0x13)
                .write_reg8(Reg8::D, 0x00)
                .write_reg8(Reg8::E, 0xd8)
                .write_reg8(Reg8::H, 0x01)
                .write_reg8(Reg8::L, 0x4d)
                .update_flag(Flags::Z, true)
                .update_flag(Flags::N, false)
                .update_flag(Flags::H, true)
                .update_flag(Flags::C, true);
            e.cpu.sp = 0xfffe;
            e.cpu.pc = 0x0100;

            e.hw.timer.init_without_bios();
            e.hw.ppu.init_without_bios();
            e.hw.apu.init_without_bios();
            e.hw.interrupts.init_without_bios();
        }

        e
    }

    pub fn run_frame(&mut self) {
        loop {
            self.run_instruction();
            self.executed_instructions += 1;
            if self.hw.events.contains(Events::V_BLANK) {
                self.hw.events.remove(Events::V_BLANK);
                break;
            }
        }
        self.frames += 1;
        self.cpu.frame_cycles = 0;
    }

    #[allow(dead_code)]
    fn create_peach_log_line(&mut self) {
        let pc = self.cpu.pc;
        let n1 = self.hw.read_byte(pc);
        let n2 = self.hw.read_byte(pc.wrapping_add(1));
        let n3 = self.hw.read_byte(pc.wrapping_add(2));
        let n4 = self.hw.read_byte(pc.wrapping_add(3));

        // {:02x}
        // : - special formatting
        // 02 - prepend 0 to max 2 chars
        // x - hex small (X - bigger hex)
        debug!(
            "A: {:02X} F: {:02X} B: {:02X} C: {:02X} D: {:02X} E: {:02X} H: {:02X} L: {:02X} SP: {:04X} PC: 00:{:04X} ({:02X} {:02X} {:02X} {:02X})",
            self.cpu.a,
            self.cpu.f,
            self.cpu.b,
            self.cpu.c,
            self.cpu.d,
            self.cpu.e,
            self.cpu.h,
            self.cpu.l,
            self.cpu.sp,
            pc,
            n1,
            n2,
            n3,
            n4
        );
    }

    fn handle_interrupts(&mut self) {
        self.cpu.ime = false;
        self.cpu.halted = false;

        self.cpu.tick(&mut self.hw);
        self.cpu.tick(&mut self.hw);
        self.cpu.tick(&mut self.hw);

        self.cpu.sp = self.cpu.sp.wrapping_sub(1);
        let (high, _) = self.cpu.pc.split_to_u8();
        self.cpu.write_u8_tick(&mut self.hw, self.cpu.sp, high);

        let address = self.hw.interrupts.ack_interrupt();

        self.cpu.sp = self.cpu.sp.wrapping_sub(1);
        let (_, low) = self.cpu.pc.split_to_u8();
        self.cpu.write_u8_tick(&mut self.hw, self.cpu.sp, low);

        self.cpu.pc = address;
    }

    pub fn run_instruction(&mut self) {
        if self.cpu.halted && !self.cpu.just_halted {
            self.cpu.tick(&mut self.hw);
        }

        // self.create_peach_log_line();
        let pending_interrupts = self.hw.interrupts.has_available_interrupts();

        self.cpu.just_halted = false;
        let current_ime = self.cpu.ime;

        if self.cpu.ime_requested {
            self.cpu.ime_requested = false;
            self.cpu.ime = true;
        }

        if self.cpu.halted && !current_ime && pending_interrupts {
            self.cpu.halted = false;
        } else if current_ime && pending_interrupts {
            self.cpu.halted = false;
            self.handle_interrupts();
        } else if !self.cpu.halted {
            let op_code = self.cpu.read_imm_u8_tick(&mut self.hw);
            if self.cpu.halt_bug {
                self.cpu.pc -= 1;
                self.cpu.halt_bug = false;
            }
            self.cpu.execute(op_code, &mut self.hw);
        } else {
            // should not happend invalid state?
        }
    }

    pub fn on_key_down(&mut self, key: JoypadKey) {
        let ic = &mut self.hw.interrupts;
        self.hw.joypad.on_key_down(key, ic)
    }

    pub fn on_key_up(&mut self, key: JoypadKey) {
        let ic = &mut self.hw.interrupts;
        self.hw.joypad.on_key_up(key, ic)
    }

    pub fn get_screen_buffer(&self) -> &Buffer {
        self.hw.ppu.get_screen_buffer()
    }

    pub fn set_system_palette(&mut self, palette: &DmgPalettes) {
        self.hw.ppu.set_system_palette(palette);
    }

    pub fn set_capture_serial(&mut self, capture: bool) {
        self.hw.capture_serial = capture;
    }

    pub fn set_audio_device(&mut self, audio_device: Box<dyn AudioDevice>) {
        self.hw.apu.set_audio_device(audio_device);
    }

    pub fn is_cgb(&self) -> bool {
        self.is_cgb
    }
}

```

`gb/src/events.rs`:

```rs
use bitflags::bitflags;

bitflags! {
    pub struct Events: u8 {
        const V_BLANK          = 0b0000_0001;
        const MAGIC_BREAKPOINT = 0b0000_0010; // LD B,B for tests
    }
}

```

`gb/src/hdma.rs`:

```rs
use crate::utils::invalid_address;

pub const R_HDMA1: u16 = 0xff51;
pub const R_HDMA2: u16 = 0xff52;
pub const R_HDMA3: u16 = 0xff53;
pub const R_HDMA4: u16 = 0xff54;
pub const R_HDMA5: u16 = 0xff55;

enum TransferMode {
    GeneralDMA,
    HblankDMA,
}

impl TransferMode {
    fn from_bits(bits: u8) -> TransferMode {
        if bits & 0b1000_0000 > 0 {
            TransferMode::HblankDMA
        } else {
            TransferMode::GeneralDMA
        }
    }
}
pub struct Hdma {
    source: u16,
    destination: u16,
    mode: TransferMode,
}

impl Hdma {
    pub fn new() -> Self {
        Self {
            source: 0,
            destination: 0,
            mode: TransferMode::GeneralDMA,
        }
    }

    pub fn tick(&mut self) -> Option<(u16, u16)> {
        // TODO
        None
    }

    pub fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_HDMA1 | R_HDMA2 | R_HDMA3 | R_HDMA4 | R_HDMA5 => 0xff,
            _ => invalid_address("HDMA (write)", address),
        }
    }

    pub fn write_byte(&mut self, address: u16, value: u8) {
        match address {
            R_HDMA1 => self.source = (self.source & 0x00ff) | ((value as u16) << 8), // upper bits of address
            R_HDMA2 => self.source = (self.source & 0xff00) | ((value as u16) & 0xf0), // lower bits of address (lower 4 are always ignored)
            R_HDMA3 => self.destination = (self.destination & 0x00ff) | ((value as u16) << 8), // upper bits of address
            R_HDMA4 => self.destination = (self.destination & 0xff00) | ((value as u16) & 0xf0), // lower bits of address (lower 4 are always ignored)
            R_HDMA5 => {
                let mode = TransferMode::from_bits(value);

                self.mode = mode;
            }
            _ => invalid_address("HDMA (write)", address),
        }
    }
}

```

`gb/src/interrupts.rs`:

```rs
use bitflags::bitflags;

use crate::{traits::MemoryAccess, utils::invalid_address};

bitflags! {
    #[derive(PartialEq, Eq, Copy, Clone)]
    pub struct InterruptBits: u8 {
        const V_BLANK =   0b0000_0001;
        const LCD_STATS = 0b0000_0010;
        const TIMER =     0b0000_0100;
        const SERIAL =    0b0000_1000;
        const JOYPAD =    0b0001_0000;

        const UNUSED =    0b1110_0000;
    }
}

impl InterruptBits {
    fn get_address(self) -> u16 {
        match self {
            InterruptBits::V_BLANK => 0x0040,
            InterruptBits::LCD_STATS => 0x0048,
            InterruptBits::TIMER => 0x0050,
            InterruptBits::SERIAL => 0x0058,
            InterruptBits::JOYPAD => 0x0060,
            _ => 0x0000,
        }
    }
}

/**
 * Interrupt Flag (R/W)
 *
 * Bit 4: Transition from High to Low of Pin number P10-P13
 * Bit 3: Serial I/O transfer complete
 * Bit 2: Timer Overflow
 * Bit 1: LCDC (see STAT)
 * Bit 0: V-Blank
 */
const R_IF: u16 = 0xff0f;

/**
 * Interrupt Enable (R/W)
 *
 * Bit 4: Transition from High to Low of Pin number P10-P13
 * Bit 3: Serial I/O transfer complete
 * Bit 2: Timer Overflow
 * Bit 1: LCDC (see STAT)
 * Bit 0: V-Blank
 */
const R_IE: u16 = 0xffff;

pub struct InterruptController {
    /*
     * IF register
     * When bits are set, an interrupt has happened
     */
    interrupt_flag: InterruptBits,

    /*
     * IE register
     * When bits are set, the corresponding interrupt can be triggered
     */
    interrupt_enable: InterruptBits,
}

const INTERRUPTS_PRIORITY: [InterruptBits; 5] = [
    InterruptBits::V_BLANK,
    InterruptBits::LCD_STATS,
    InterruptBits::TIMER,
    InterruptBits::SERIAL,
    InterruptBits::JOYPAD,
];

impl InterruptController {
    pub fn new() -> InterruptController {
        InterruptController {
            interrupt_enable: InterruptBits::empty(),
            interrupt_flag: InterruptBits::empty(),
        }
    }

    pub fn init_without_bios(&mut self) {
        self.interrupt_flag = InterruptBits::from_bits_truncate(0xe1);
        self.interrupt_enable = InterruptBits::from_bits_truncate(0x00);
    }

    pub fn request_interrupt(&mut self, bit: InterruptBits) {
        self.interrupt_flag.insert(bit);
    }

    pub fn has_available_interrupts(&mut self) -> bool {
        !self.get_available_interrups().is_empty()
    }

    pub fn get_available_interrups(&mut self) -> InterruptBits {
        self.interrupt_flag & self.interrupt_enable
    }

    pub fn ack_interrupt(&mut self) -> u16 {
        let flags = self.get_available_interrups();
        let possible_interrupt = INTERRUPTS_PRIORITY
            .iter()
            .find(|&&interrupt| flags.contains(interrupt));

        match possible_interrupt {
            Some(interrupt) => {
                self.interrupt_flag.remove(*interrupt);

                interrupt.get_address()
            }
            None => 0x0000,
        }
    }
}

impl MemoryAccess for InterruptController {
    fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_IE => self.interrupt_enable.bits(),
            R_IF => self.interrupt_flag.bits() | 0b1110_0000,
            _ => invalid_address("Interrupts (read)", address),
        }
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        match address {
            R_IE => self.interrupt_enable = InterruptBits::from_bits_truncate(value),
            R_IF => self.interrupt_flag = InterruptBits::from_bits_truncate(value),
            _ => invalid_address("Interrupts (write)", address),
        }
    }
}

```

`gb/src/joypad.rs`:

```rs
use crate::{
    interrupts::{InterruptBits, InterruptController},
    utils::invalid_address,
};

const R_JOYP: u16 = 0xff00;
const JOYP_UNUSED_MASK: u8 = 0b1100_0000;

pub struct Joypad {
    selected_column: u8,
    arrows_bits: u8,
    buttons_bits: u8,
}

pub enum JoypadKey {
    ArrowDown,
    ArrowLeft,
    ArrowRight,
    ArrowUp,
    A,
    B,
    Start,
    Select,
}

enum KeyType {
    Arrow,
    Button,
}

impl JoypadKey {
    fn get_bit(&self) -> u8 {
        match self {
            JoypadKey::ArrowRight => 0b0000_0001,
            JoypadKey::ArrowLeft => 0b0000_0010,
            JoypadKey::ArrowUp => 0b0000_0100,
            JoypadKey::ArrowDown => 0b0000_1000,

            JoypadKey::A => 0b0000_0001,
            JoypadKey::B => 0b0000_0010,
            JoypadKey::Select => 0b0000_0100,
            JoypadKey::Start => 0b0000_1000,
        }
    }

    fn get_type(&self) -> KeyType {
        match self {
            JoypadKey::ArrowRight
            | JoypadKey::ArrowLeft
            | JoypadKey::ArrowUp
            | JoypadKey::ArrowDown => KeyType::Arrow,

            JoypadKey::A | JoypadKey::B | JoypadKey::Select | JoypadKey::Start => KeyType::Button,
        }
    }
}

impl Joypad {
    pub fn new() -> Self {
        Self {
            selected_column: 0b11,
            arrows_bits: 0b1111,
            buttons_bits: 0b1111,
        }
    }

    pub fn on_key_up(&mut self, key: JoypadKey, ic: &mut InterruptController) {
        match key.get_type() {
            KeyType::Button => self.buttons_bits |= key.get_bit(),
            KeyType::Arrow => self.arrows_bits |= key.get_bit(),
        }
        ic.request_interrupt(InterruptBits::JOYPAD)
    }

    pub fn on_key_down(&mut self, key: JoypadKey, ic: &mut InterruptController) {
        match key.get_type() {
            KeyType::Button => self.buttons_bits &= !key.get_bit(),
            KeyType::Arrow => self.arrows_bits &= !key.get_bit(),
        }
        ic.request_interrupt(InterruptBits::JOYPAD)
    }

    pub fn read_byte(&self, address: u16) -> u8 {
        if address != R_JOYP {
            invalid_address("Joypad", address);
        }

        if self.selected_column & 0b01 > 0 {
            return self.buttons_bits | JOYP_UNUSED_MASK;
        }

        if self.selected_column & 0b10 > 0 {
            return self.arrows_bits | JOYP_UNUSED_MASK;
        }

        0xff
    }

    pub fn write_byte(&mut self, address: u16, value: u8) {
        if address != R_JOYP {
            invalid_address("Joypad", address);
        }

        self.selected_column = (value & 0b0011_0000) >> 4
    }
}

```

`gb/src/lib.rs`:

```rs
#![warn(clippy::all, rust_2018_idioms)]
#![allow(
    clippy::let_and_return,
    clippy::new_without_default,
    clippy::len_zero,
    clippy::module_inception,
    clippy::collapsible_match,
    clippy::single_match,
    clippy::many_single_char_names,
    non_fmt_panics
)]

mod apu;
pub mod audio;
mod bios;
pub mod cartridges;
pub mod constants;
pub mod cpu;
mod dma;
pub mod emulator;
pub mod events;
mod hdma;
pub mod interrupts;
pub mod joypad;
pub mod ppu;
mod serial;
mod timer;
pub mod traits;
mod utils;
mod wram;

```

`gb/src/ppu/fetcher.rs`:

```rs
use std::collections::VecDeque;

use crate::{constants::TILE_WIDTH, traits::MemoryAccess};

use super::{
    ppu::MapLayer,
    utils::{
        get_background_tile_map_address, get_window_tile_map_address, transform_tile_number,
        LcdcBits,
    },
    vram::{BgToOamPriority, TileAttributes, Vram},
};

enum FetcherState {
    ReadTileNumber,
    ReadTileData0,
    ReadTileData1,
    PushToFifo,
}

pub struct FifoItem {
    pub color_number: u8,
    pub priority: BgToOamPriority,
    pub palette: u8,
}

impl FifoItem {
    fn new(color_number: u8, attributes: &TileAttributes) -> Self {
        Self {
            color_number,
            priority: attributes.priority,
            palette: attributes.bg_palette_index,
        }
    }
}

pub struct Fetcher {
    pub mode: MapLayer,
    is_cgb: bool,
    x: u8,
    y: u8,
    tile_number: usize,
    tile_attributes: TileAttributes,
    tile_offset: u32,
    tile_data_lower: u8,
    tile_data_upper: u8,
    state: FetcherState,
    fifo: VecDeque<FifoItem>,
    cycles: u8,
}

fn get_bit(byte: u8, index: usize) -> u8 {
    if byte & (1 << index) > 0 {
        return 1;
    }
    0
}

impl Fetcher {
    pub fn new(is_cgb: bool) -> Fetcher {
        Fetcher {
            is_cgb,
            mode: MapLayer::Background,
            x: 0,
            y: 0,
            tile_number: 0,
            tile_attributes: TileAttributes::new(),
            tile_data_upper: 0,
            tile_data_lower: 0,

            tile_offset: 0,
            state: FetcherState::ReadTileNumber,
            fifo: VecDeque::new(),
            cycles: 0,
        }
    }

    pub fn start(&mut self, x: u8, y: u8, mode: MapLayer) {
        self.x = x;
        self.y = y;
        self.tile_number = 0;
        self.tile_offset = 0;
        self.cycles = 0;
        self.fifo.clear();
        self.state = FetcherState::ReadTileNumber;
        self.mode = mode;
    }

    pub fn len(&self) -> usize {
        self.fifo.len()
    }

    pub fn shift(&mut self) -> Option<FifoItem> {
        self.fifo.pop_front()
    }

    pub fn tick(&mut self, vram: &Vram, lcdc: &LcdcBits, bg_y: u8) {
        self.cycles += 1;
        if self.cycles < 2 {
            return;
        }
        self.cycles = 0;

        // TODO refactor this ugly code
        // workaround for SCY immediate change
        let y = if self.mode == MapLayer::Window {
            self.y
        } else {
            bg_y
        };

        match self.state {
            FetcherState::ReadTileNumber => {
                let map_address = match self.mode {
                    MapLayer::Background => get_background_tile_map_address(lcdc),
                    MapLayer::Window => get_window_tile_map_address(lcdc),
                };

                let tile_row = (y / 8) as u16;
                let tile_col = (((self.x as u32 + self.tile_offset * 8) & 0xff) / 8) as u16;
                let tile_address = map_address + (tile_row * 32 + tile_col);

                let n = vram.read_byte(tile_address);
                self.tile_number = transform_tile_number(lcdc, n);
                self.state = FetcherState::ReadTileData0;

                self.tile_attributes = if self.is_cgb {
                    vram.get_tile_attributes(tile_address)
                } else {
                    TileAttributes::new()
                }
            }
            FetcherState::ReadTileData0 => {
                let tile_row = (y % 8) as usize;
                self.tile_data_lower =
                    vram.get_tile_low(self.tile_number, tile_row, &self.tile_attributes);
                self.state = FetcherState::ReadTileData1;
            }
            FetcherState::ReadTileData1 => {
                let tile_row = (y % 8) as usize;
                self.tile_data_upper =
                    vram.get_tile_high(self.tile_number, tile_row, &self.tile_attributes);
                self.state = FetcherState::PushToFifo;
            }
            FetcherState::PushToFifo => {
                if self.fifo.len() <= 8 {
                    for x in (0..TILE_WIDTH).rev() {
                        let high = get_bit(self.tile_data_upper, x);
                        let low = get_bit(self.tile_data_lower, x);
                        let pixel = (high << 1) | low;
                        self.fifo
                            .push_back(FifoItem::new(pixel, &self.tile_attributes));
                    }

                    self.tile_offset += 1;
                    self.state = FetcherState::ReadTileNumber;
                }
            }
        }
    }
}

```

`gb/src/ppu/mod.rs`:

```rs
pub mod ppu;

mod fetcher;
mod oam;
pub mod palettes;
pub mod registers;
pub mod screen_buffer;
pub mod utils;
mod vram;

```

`gb/src/ppu/oam.rs`:

```rs
use std::usize;

use crate::{constants::SPRITES_COUNT, traits::MemoryAccess, utils::invalid_address};
pub const OAM_START: u16 = 0xfe00;
pub const OAM_END: u16 = 0xfe9f;

const DATA_MASK: u16 = 0xff;

const OAM_SIZE: usize = OAM_END as usize - OAM_START as usize + 1;

#[derive(Clone, Copy, Hash)]
pub struct Sprite {
    pub x: isize,
    pub y: isize,
    pub tile_number: usize,
    pub is_above_bg: bool,
    pub is_y_flipped: bool,
    pub is_x_flipped: bool,
    pub palette: usize,
    pub cgb_palette: usize,
    pub tile_vram_bank: u8,
}

impl Sprite {
    fn new() -> Sprite {
        Sprite {
            x: 0,
            y: 0,
            tile_number: 0,
            is_above_bg: false,
            is_y_flipped: false,
            is_x_flipped: false,
            palette: 0,
            cgb_palette: 0,
            tile_vram_bank: 0,
        }
    }
}

pub struct Oam {
    memory: Box<[u8; OAM_SIZE]>,
    pub sprites: Box<[Sprite; SPRITES_COUNT]>,
}

impl Oam {
    pub fn new() -> Oam {
        Oam {
            memory: Box::new([0; OAM_SIZE]),
            sprites: Box::new([Sprite::new(); SPRITES_COUNT]),
        }
    }

    fn update_sprite(&mut self, address: usize, value: u8) {
        let index = address >> 2; // 4 bytes per sprite
        if index >= SPRITES_COUNT {
            invalid_address("OAM (write)", address as u16);
        }

        let value = value as usize;

        let sprite = &mut self.sprites[index];

        match address & 0b11 {
            0 => sprite.y = value as isize - 16,
            1 => sprite.x = value as isize - 8,
            2 => sprite.tile_number = value,
            3 => {
                sprite.cgb_palette = value & 0b111;
                sprite.palette = usize::from(value & 0x10 > 0);
                sprite.is_x_flipped = value & 0x20 > 0;
                sprite.is_y_flipped = value & 0x40 > 0;
                sprite.is_above_bg = value & 0x80 == 0;
                sprite.tile_vram_bank = ((value & 0b0000_1000) >> 3) as u8;
            }
            _ => invalid_address("OAM (write)", address as u16),
        }
    }
}

fn get_address(address: u16) -> usize {
    // 0xfe01 -> 0x0001
    (address & DATA_MASK) as usize
}

impl MemoryAccess for Oam {
    fn read_byte(&self, address: u16) -> u8 {
        self.memory[get_address(address)]
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        let addr = get_address(address);

        self.memory[addr] = value;
        self.update_sprite(addr, value);
    }
}

```

`gb/src/ppu/palettes.rs`:

```rs
#[derive(Clone, Copy, Debug, PartialEq, Eq)]
pub struct Rgb {
    pub r: u8,
    pub g: u8,
    pub b: u8,
}

// https://github.com/mattcurrie/cgb-acid2#reference-image
fn convert_from_cgb(value: u8) -> u8 {
    value << 3 | value >> 2
}

impl Rgb {
    pub fn empty() -> Rgb {
        Rgb { r: 0, g: 0, b: 0 }
    }

    pub fn new(r: u8, g: u8, b: u8) -> Rgb {
        Rgb { r, g, b }
    }

    pub fn from_u16(data: u16) -> Rgb {
        let mask = 0b1_1111;
        let r = (data & mask) as u8; // bits 0-4
        let g = ((data >> 5) & mask) as u8; // bits 5-9
        let b = ((data >> 10) & mask) as u8; // bits 10-14
        Rgb {
            r: convert_from_cgb(r),
            g: convert_from_cgb(g),
            b: convert_from_cgb(b),
        }
    }
}

#[derive(Clone, Copy)]
pub struct Palette {
    pub colors: [Rgb; 4],
    pub bits: u8,
}

fn create_colors(bits: u8, system_palette: &DmgPalette) -> [Rgb; 4] {
    let bits = bits as usize;
    [
        system_palette.colors[bits & 0b11],
        system_palette.colors[bits >> 2 & 0b11],
        system_palette.colors[bits >> 4 & 0b11],
        system_palette.colors[bits >> 6 & 0b11],
    ]
}

impl Palette {
    pub fn from_bits(bits: u8, system_palette: &DmgPalette) -> Self {
        Self {
            bits,
            colors: create_colors(bits, system_palette),
        }
    }

    pub fn empty() -> Self {
        Self {
            bits: 0x00,
            colors: [Rgb::empty(); 4],
        }
    }

    pub fn change_system_palette(&mut self, system_palette: &DmgPalette) {
        self.colors = create_colors(self.bits, system_palette)
    }

    pub fn bits(&self) -> u8 {
        self.bits
    }
}

pub enum DmgPalettes {
    Gray,
    Green,
    GreenDmg,
}

pub struct DmgPalette {
    pub colors: [Rgb; 4],
}

impl DmgPalette {
    pub fn new(colors: [Rgb; 4]) -> Self {
        Self { colors }
    }
}

impl DmgPalettes {
    pub fn get_palette(&self) -> DmgPalette {
        match self {
            DmgPalettes::Gray => DmgPalette::new([
                Rgb::new(255, 255, 255),
                Rgb::new(192, 192, 192),
                Rgb::new(96, 96, 96),
                Rgb::new(0, 0, 0),
            ]),
            // Used in scribbltests
            DmgPalettes::Green => DmgPalette::new([
                Rgb::new(224, 248, 208),
                Rgb::new(136, 191, 112),
                Rgb::new(52, 104, 86),
                Rgb::new(9, 25, 33),
            ]),
            // https://www.designpieces.com/palette/game-boy-original-color-palette-hex-and-rgb/
            DmgPalettes::GreenDmg => DmgPalette::new([
                Rgb::new(155, 188, 15),
                Rgb::new(139, 172, 15),
                Rgb::new(48, 98, 48),
                Rgb::new(15, 56, 15),
            ]),
        }
    }
}

const MASK_INDEX: u8 = 0x3f;

pub struct ColorPaletteMemory {
    pub palettes: [Palette; 8],
    data: [u8; 64], // 8 palettes x 4 colors x 2 bytes
    index: u8,
    auto_increment: bool,
}

impl ColorPaletteMemory {
    pub fn new() -> Self {
        Self {
            palettes: [Palette::empty(); 8], // precomputed colors
            data: [0; 64],                   // 8 palettes x 4 colors x 2 bytes
            index: 0,
            auto_increment: false,
        }
    }

    pub fn get_palette(&self, index: u8) -> &Palette {
        &self.palettes[index as usize]
    }

    pub fn read_index(&self) -> u8 {
        let increment_bit = if self.auto_increment { 1 << 7 } else { 0 };
        increment_bit | self.index
    }

    pub fn write_index(&mut self, value: u8) {
        self.index = value & MASK_INDEX;
        self.auto_increment = (value >> 7) > 0;
    }

    pub fn read_data(&self) -> u8 {
        self.data[self.index as usize]
    }

    pub fn write_data(&mut self, value: u8) {
        self.data[self.index as usize] = value;
        // 0b0000_000X - color byte     (0-1) / 2 bytes per color
        // 0b0000_0XX0 - color index    (0-3) / 4 colors per palette
        // 0b00XX_X000 - palette index  (0-7) / 8 palettes

        let palette_index = ((self.index & 0b0011_1000) >> 3) as usize;
        let color_index = ((self.index & 0b0000_0110) >> 1) as usize;
        let base_index = (self.index & 0b1111_1110) as usize;

        let upper = (self.data[base_index + 1] as u16) << 8;
        let lower = self.data[base_index] as u16;
        let color16 = upper | lower;
        let rgb = Rgb::from_u16(color16);

        self.palettes[palette_index].colors[color_index] = rgb;

        if self.auto_increment {
            self.index = (self.index + 1) & 0x3f
        }
    }
}

```

`gb/src/ppu/ppu.rs`:

```rs
use arrayvec::ArrayVec;
use constants::DISPLAY_WIDTH;
use parse_display::Display;

use crate::{
    constants::{self, SPRITES_PER_LINE, TILE_SIZE},
    events::Events,
    interrupts::{InterruptBits, InterruptController},
    ppu::vram::BgToOamPriority,
    traits::MemoryAccess,
    utils::invalid_address,
};

use super::{
    fetcher::{Fetcher, FifoItem},
    oam::{Oam, Sprite, OAM_END, OAM_START},
    palettes::{ColorPaletteMemory, DmgPalette, DmgPalettes, Palette, Rgb},
    screen_buffer::{Buffer, ScreenBuffer},
    utils::{
        are_sprites_enabled, get_background_tile_map_address, get_oam_priority, get_sprites_height,
        get_window_tile_map_address, is_background_or_window_enable, is_lcd_enabled,
        is_window_enabled, transform_tile_number, LcdcBits, OamPriority, StatBits,
    },
    vram::{Tile, Vram, VRAM_END, VRAM_START},
};

use super::registers::*;

const CGB_REGISTERS: [u16; 6] = [R_BGPD, R_BGPI, R_OBPD, R_OBPI, R_OPRI, R_VBK];

const TOTAL_LINE_CLOCKS: u32 = 456;
const STAT_UNUSED_MASK: u8 = 0b1000_0000;
#[derive(PartialEq)]
enum Access {
    Read,
    Write,
}

#[derive(PartialEq, Eq, Clone, Copy, Debug)]
pub enum MapLayer {
    Background,
    Window,
}

#[derive(Clone, Copy, PartialEq, Eq, Debug, Display)]
pub enum Mode {
    HBlank,        // m0
    VBlank,        // m1
    OamSearch,     // m2
    PixelTransfer, // m3
}

impl Mode {
    pub fn to_bits(self) -> u8 {
        match self {
            Mode::HBlank => 0b00,
            Mode::VBlank => 0b01,
            Mode::OamSearch => 0b10,
            Mode::PixelTransfer => 0b11,
        }
    }

    pub fn from_bits(bits: u8) -> Mode {
        match bits & 0b11 {
            0b00 => Mode::HBlank,
            0b01 => Mode::VBlank,
            0b10 => Mode::OamSearch,
            0b11 => Mode::PixelTransfer,
            _ => panic!("Unable to parse PPU mode from {}", bits),
        }
    }
}

pub struct Ppu {
    // Registers
    stat: StatBits,
    stat_mode: Mode,
    lcdc: LcdcBits,
    ly: u8,
    lyc: u8,
    scx: u8,
    scy: u8,
    wx: u8,
    wy: u8,
    opri: u8,

    // internals
    pub ly_to_compare: Option<u8>,
    window_line: u8,
    window_line_enabled: bool,
    window_x: i32,
    x: u8,
    sampled_scx: u8,
    pub prev_stat_flag: bool,
    pub line_clocks: u32,
    pub mode: Mode,
    pub line: u8,
    dropped_pixels: u8,
    pending_mode: Option<Mode>,
    skip_frames: u32,
    system_palette: DmgPalette,

    bg_color_palettes: ColorPaletteMemory,
    obj_color_palettes: ColorPaletteMemory,

    // Pre-computed palettes
    bgp_pal: Palette,
    obp0_pal: Palette,
    obp1_pal: Palette,

    screen_buffer: ScreenBuffer,

    line_tiles: [Option<(u8, BgToOamPriority)>; DISPLAY_WIDTH], // index = x, value = (color index,priority)
    fetcher: Fetcher,
    possible_sprites: ArrayVec<Sprite, 40>,

    is_cgb: bool,

    // RAM
    pub vram: Vram,
    pub oam: Oam,
}

impl Ppu {
    pub fn new(is_cgb: bool) -> Ppu {
        let system_palette = DmgPalettes::Gray.get_palette();
        Ppu {
            stat_mode: Mode::HBlank,
            lcdc: LcdcBits::empty(),
            stat: StatBits::empty(),
            ly: 0,
            lyc: 0,
            scx: 0,
            scy: 0,
            wx: 0,
            wy: 0,
            opri: 0,

            // internals
            ly_to_compare: Some(0),
            window_line: 0,
            window_x: 0,
            window_line_enabled: false,
            x: 0,
            sampled_scx: 0,
            prev_stat_flag: false,
            line_clocks: 0,
            mode: Mode::HBlank,
            line: 0,
            pending_mode: None,
            skip_frames: 0,
            system_palette,

            possible_sprites: ArrayVec::new(),

            bg_color_palettes: ColorPaletteMemory::new(),
            obj_color_palettes: ColorPaletteMemory::new(),
            bgp_pal: Palette::empty(),
            obp0_pal: Palette::empty(),
            obp1_pal: Palette::empty(),

            dropped_pixels: 0,

            screen_buffer: ScreenBuffer::new(),
            fetcher: Fetcher::new(is_cgb),
            line_tiles: [None; DISPLAY_WIDTH],

            is_cgb,

            // RAM
            vram: Vram::new(),
            oam: Oam::new(),
        }
    }

    pub fn init_without_bios(&mut self) {
        self.lcdc = LcdcBits::from_bits_truncate(0x91);
        self.stat = StatBits::from_bits_truncate(0x80);
        self.scy = 0x00;
        self.scx = 0x00;
        self.lyc = 0x00;
        self.bgp_pal = Palette::from_bits(0xfc, &self.system_palette);
        self.obp0_pal = Palette::from_bits(0xff, &self.system_palette);
        self.obp1_pal = Palette::from_bits(0xff, &self.system_palette);
        self.wy = 0x00;
        self.wx = 0x00;
    }

    pub fn tick(&mut self, ic: &mut InterruptController, events: &mut Events) {
        if !is_lcd_enabled(&self.lcdc) {
            self.line_clocks = 0;
            return;
        }

        self.line_clocks += 1;

        // Mode change is delayed
        if let Some(pending_mode) = self.pending_mode {
            self.change_stat_mode(pending_mode);
            self.stat_update(ic, pending_mode);
            self.pending_mode = None;
        }

        if self.line < 144 {
            self.process_screen_line(ic, events);
        } else {
            self.process_vblank_line(ic);
        }
    }

    fn change_stat_mode(&mut self, mode: Mode) {
        self.stat_mode = mode;
    }

    fn process_screen_line(&mut self, ic: &mut InterruptController, events: &mut Events) {
        // 2   -> 3              -> 0
        // OAM -> PIXEL TRANSFER -> H-BLANK

        // LY=LYC handler
        match self.line_clocks {
            // Line to compare is 4 cycles late
            4 => {
                // the check for 0 line is performed during line 153 or when LCD is turned on
                if self.line != 0 {
                    self.ly_to_compare = Some(self.ly);
                    self.check_ly_equals_lyc(ic);
                }
            }
            _ => {}
        }

        match self.mode {
            Mode::OamSearch => {
                // window is enabled for current line only if WY=LY
                if self.wy == self.ly {
                    self.window_line_enabled = true
                }
                if self.line_clocks == 80 {
                    self.mode = Mode::PixelTransfer;
                    self.pending_mode = Some(Mode::PixelTransfer);
                    self.init_pixel_transfer();
                    self.screen_buffer.get_write_buffer_mut().set_stats(
                        Mode::PixelTransfer,
                        self.line as usize,
                        self.line_clocks,
                    );
                }
            }
            Mode::PixelTransfer => {
                self.process_pixel_transfer();

                if self.x == DISPLAY_WIDTH as u8 {
                    self.pending_mode = Some(Mode::HBlank);
                    self.mode = Mode::HBlank;

                    self.render_sprites();

                    self.screen_buffer.get_write_buffer_mut().set_stats(
                        Mode::HBlank,
                        self.line as usize,
                        self.line_clocks,
                    );
                }
            }
            Mode::HBlank => {
                if self.line_clocks == TOTAL_LINE_CLOCKS {
                    self.line_clocks = 0;
                    self.ly += 1;
                    self.line += 1;
                    self.ly_to_compare = None;
                    self.check_ly_equals_lyc(ic);

                    match self.ly {
                        0..=143 => {
                            self.mode = Mode::OamSearch;
                            self.pending_mode = Some(Mode::OamSearch);
                        }
                        144 => {
                            self.mode = Mode::VBlank;
                            self.pending_mode = Some(Mode::VBlank);
                            self.window_line_enabled = false;

                            if self.skip_frames == 0 {
                                events.insert(Events::V_BLANK);
                                self.screen_buffer.commit_frame();
                            }
                        }
                        line => panic!("Invalid screen line {}", line),
                    }
                }
            }
            Mode::VBlank => panic!("VBlank should not be processed here, line={}", self.line),
        }
    }

    fn process_vblank_line(&mut self, ic: &mut InterruptController) {
        match self.line {
            144..=152 => {
                match self.line_clocks {
                    4 => {
                        self.ly_to_compare = Some(self.ly);
                        self.check_ly_equals_lyc(ic);
                        if self.line == 144 {
                            ic.request_interrupt(InterruptBits::V_BLANK);
                            self.stat_update(ic, Mode::OamSearch);
                        }
                    }
                    TOTAL_LINE_CLOCKS => {
                        self.line_clocks = 0;
                        self.ly += 1;
                        self.line += 1;
                        self.ly_to_compare = None;
                        self.check_ly_equals_lyc(ic);
                    }
                    _ => {}
                }
                self.stat_update(ic, Mode::VBlank);
            }
            153 => match self.line_clocks {
                4 => {
                    self.ly_to_compare = Some(153);
                    self.check_ly_equals_lyc(ic);
                    self.ly = 0;
                }
                8 => {
                    self.ly_to_compare = None;
                    self.check_ly_equals_lyc(ic);
                }
                12 => {
                    self.ly_to_compare = Some(0);
                    self.check_ly_equals_lyc(ic);
                }
                TOTAL_LINE_CLOCKS => {
                    self.mode = Mode::OamSearch;
                    self.pending_mode = Some(Mode::OamSearch);
                    // Transition from the last line 153 to the line 0 goes like this:
                    // Cycle 456    line 153 => STAT mode=1
                    // Cycle 0      line   0 => STAT mode=0
                    // Cycle 4+     line   0 => STAT mode=2
                    // tested by ly00_mode0_2.gs
                    // https://github.com/AntonioND/giibiiadvance/blob/master/docs/TCAGBD.pdf section 8.9.1
                    self.change_stat_mode(Mode::HBlank);

                    if self.skip_frames > 0 {
                        self.skip_frames -= 1;
                    }
                    self.window_line = 0;
                    self.line = 0;
                    self.line_clocks = 0;
                }
                _ => {}
            },
            line => panic!("Processing line {} during vblank.", line),
        }
    }

    fn stat_update(&mut self, ic: &mut InterruptController, mode: Mode) {
        if !is_lcd_enabled(&self.lcdc) {
            return;
        }

        let mode_intr = match mode {
            Mode::OamSearch => self.stat.get_bits(StatBits::OAM_INTERRUPT),
            Mode::HBlank => self.stat.get_bits(StatBits::H_BLANK_INTERRUPT),
            Mode::VBlank => self.stat.get_bits(StatBits::V_BLANK_INTERRUPT),
            Mode::PixelTransfer => 0,
        };

        let ly_equals_ly_intr = self.stat.contains(StatBits::LYC_EQUALS_LY_FLAG)
            && self.stat.contains(StatBits::LYC_EQUALS_LY_INTERRUPT);

        let stat_flag = mode_intr > 0 || ly_equals_ly_intr;

        if !self.prev_stat_flag && stat_flag {
            ic.request_interrupt(InterruptBits::LCD_STATS);
        }
        self.prev_stat_flag = stat_flag;
    }

    fn check_ly_equals_lyc(&mut self, ic: &mut InterruptController) {
        if Some(self.lyc) == self.ly_to_compare {
            self.stat.set(StatBits::LYC_EQUALS_LY_FLAG, true);
        } else {
            self.stat.remove(StatBits::LYC_EQUALS_LY_FLAG);
        }
        self.stat_update(ic, self.stat_mode)
    }

    fn check_ly_equals_lyc_no_mode(&mut self, ic: &mut InterruptController) {
        if Some(self.lyc) == self.ly_to_compare {
            self.stat.set(StatBits::LYC_EQUALS_LY_FLAG, true);
        } else {
            self.stat.remove(StatBits::LYC_EQUALS_LY_FLAG);
        }
        // This is ugly hack, because this function is called when LCD is turned oo
        // and the mode can't be PixelTransfer so mode interrupt wont happend
        self.stat_update(ic, Mode::PixelTransfer)
    }

    fn init_pixel_transfer(&mut self) {
        self.x = 0;
        self.window_x = (self.wx as i32) - 7;
        self.dropped_pixels = 0;

        // Reset
        for x in self.line_tiles.iter_mut() {
            *x = None;
        }

        // TODO check this
        self.sampled_scx = self.scx;

        let x = self.sampled_scx;
        let y = self.ly.wrapping_add(self.scy);
        self.fetcher.start(x, y, MapLayer::Background);
    }

    fn process_pixel_transfer(&mut self) {
        self.fetcher
            .tick(&self.vram, &self.lcdc, self.ly.wrapping_add(self.scy));

        if self.fetcher.len() <= 8 {
            return;
        }

        if is_background_or_window_enable(&self.lcdc) {
            // TODO check this - this might be true even if bg&win is disabled
            // discard pixels from tile that are not visible due to X scroll
            if self.dropped_pixels < self.sampled_scx % (TILE_SIZE as u8) {
                self.dropped_pixels += 1;
                self.fetcher.shift();
                return;
            }

            // WX is between <0,6> - discard previous fetched pixels
            // TODO WX=0 is probably broken somehow https://discord.com/channels/465585922579103744/465586075830845475/786173202211799051
            if self.fetcher.mode == MapLayer::Window && self.window_x < 0 {
                self.window_x += 1;
                self.fetcher.shift();
                return;
            }

            let wx = if self.wx <= 7 { 0 } else { self.wx - 7 };
            let is_window_possible = self.window_line_enabled && self.x == wx;
            if is_window_enabled(&self.lcdc)
                && is_window_possible
                && self.fetcher.mode != MapLayer::Window
            {
                let x = self.x.wrapping_sub(self.wx).wrapping_add(7);
                let y = self.window_line;
                self.window_line += 1;
                self.fetcher.start(x, y, MapLayer::Window);
                return;
            }
        }

        let fifo_item = self.fetcher.shift();
        let bg_layer_enabled = if self.is_cgb {
            true
        } else {
            is_background_or_window_enable(&self.lcdc)
        };
        if bg_layer_enabled {
            match fifo_item {
                Some(fifo_item) => {
                    let palette = if self.is_cgb {
                        self.bg_color_palettes.get_palette(fifo_item.palette)
                    } else {
                        &self.bgp_pal
                    };

                    let color = palette.colors[fifo_item.color_number as usize];
                    let priority = self.get_bg_tile_priority(&fifo_item);
                    self.line_tiles[self.x as usize] = Some((fifo_item.color_number, priority));
                    // self.line_tiles
                    //     .insert(self.x, (fifo_item.color_number, priority));

                    self.render_pixel(&color);
                }
                None => panic!("Trying to pop pixels from empty FIFO."),
            }
        } else {
            // TODO is this true for CGB?
            let color = self.bgp_pal.colors[0];
            self.render_pixel(&color);
        }

        self.x += 1;
    }

    fn get_bg_tile_priority(&self, fifo_item: &FifoItem) -> BgToOamPriority {
        if !self.is_cgb {
            return BgToOamPriority::OamPriorityBit;
        }
        if self.lcdc.bits() & 0b0000_0001 == 0 {
            return BgToOamPriority::OamPriorityBit;
        }
        fifo_item.priority
    }

    fn render_pixel(&mut self, pixel: &Rgb) {
        self.screen_buffer.get_write_buffer_mut().set_pixel(
            self.x as usize,
            self.ly as usize,
            pixel,
        )
    }

    fn collect_sprites(&mut self) {
        let sprite_height = get_sprites_height(&self.lcdc) as isize;

        let current_line = self.ly as isize;

        self.possible_sprites = self
            .oam
            .sprites
            .into_iter()
            .filter(|sprite| sprite.y <= current_line && current_line < sprite.y + sprite_height)
            .collect();

        if !self.is_cgb || get_oam_priority(self.opri) == OamPriority::XPosition {
            self.possible_sprites.sort_by(|&a, &b| a.x.cmp(&b.x));
        }
    }

    fn render_sprites(&mut self) {
        if !are_sprites_enabled(&self.lcdc) {
            return;
        }

        self.collect_sprites();

        // 10 pixels per max 8 pixels = 80
        let pixels: ArrayVec<(usize, usize, Rgb, bool), 80> = self
            .possible_sprites
            .iter()
            .take(SPRITES_PER_LINE)
            .rev()
            .flat_map(|sprite| self.render_sprite(sprite))
            .collect();
        let screen_buffer = self.screen_buffer.get_write_buffer_mut();

        // TODO refactor this sh**
        for (x, y, pixel, is_above_bg) in pixels {
            if self.is_cgb {
                let obj_on_top = self.lcdc.bits() & 1 == 0;
                let line_tile_attributes = self.line_tiles[x];
                let bg_is_zero = line_tile_attributes.map_or(false, |pair| pair.0 == 0);
                let bg_has_priority = line_tile_attributes
                    .map_or(false, |pair| pair.1 == BgToOamPriority::BgPriority);

                if obj_on_top || bg_is_zero || (is_above_bg && !bg_has_priority) {
                    screen_buffer.set_pixel(x, y, &pixel);
                }
            } else {
                if !is_above_bg {
                    let current_pixel = screen_buffer.get_pixel(x, y);
                    if current_pixel != self.bgp_pal.colors[0] {
                        continue;
                    }
                }
                screen_buffer.set_pixel(x, y, &pixel);
            }
        }
    }

    fn render_sprite(&self, sprite: &Sprite) -> ArrayVec<(usize, usize, Rgb, bool), 8> {
        let sprite_height = get_sprites_height(&self.lcdc) as isize;
        let palette = if sprite.palette == 0 {
            &self.obp0_pal
        } else {
            &self.obp1_pal
        };
        let current_line = self.ly as isize;

        let y = if sprite.is_y_flipped {
            sprite_height - 1 - (current_line - sprite.y)
        } else {
            current_line - sprite.y
        };

        let mut pixels: ArrayVec<_, 8> = ArrayVec::new();
        for x in sprite.x..(sprite.x + 8) {
            if x < 0 || x >= DISPLAY_WIDTH as isize {
                continue;
            }
            let extra_offset = (y as usize >> 3) & 1; // double sprite height -> take next tile
            let tile_number = if sprite_height == 16 {
                // bit 0 of the tile index is ignored for 8x16 objects
                sprite.tile_number & 0xfe
            } else {
                sprite.tile_number
            };

            let bank = if self.is_cgb {
                sprite.tile_vram_bank
            } else {
                0
            };
            let tile = self.vram.get_tile(tile_number + extra_offset, bank);
            let x_index = x - sprite.x;
            let tile_row = y as usize;
            let tile_col = if sprite.is_x_flipped {
                7 - x_index
            } else {
                x_index
            } as usize;

            // & 7 - double sprite height
            let pixel = tile.get_at(tile_col, tile_row & 7);

            // 0 is always transparent
            if pixel == 0 {
                continue;
            }

            let obj_palette = if self.is_cgb {
                self.obj_color_palettes
                    .get_palette(sprite.cgb_palette as u8)
            } else {
                palette
            };
            let color = obj_palette.colors[pixel as usize];
            pixels.push((x as usize, current_line as usize, color, sprite.is_above_bg));
        }
        pixels
    }

    fn can_access_oam(&self, access: Access) -> bool {
        // ugly implementation taken from JS version
        let is_oam_search = self.stat_mode == Mode::OamSearch;
        let is_pixel_transfer = self.stat_mode == Mode::PixelTransfer;
        if access == Access::Read {
            if is_oam_search || is_pixel_transfer {
                return false;
            }

            if self.pending_mode == Some(Mode::OamSearch) {
                return false;
            }
        }

        let is_oam_accessed = is_oam_search && self.line_clocks <= 76;
        let is_used = is_oam_accessed || is_pixel_transfer;
        !is_used
    }

    fn can_access_vram(&self, access: Access) -> bool {
        if self.stat_mode == Mode::PixelTransfer {
            return false;
        }
        if access == Access::Read && self.stat_mode == Mode::OamSearch && self.line_clocks == 80 {
            return false;
        }
        true
    }
}

impl Ppu {
    pub fn get_screen_buffer(&self) -> &Buffer {
        self.screen_buffer.get_read_buffer()
    }

    pub fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_LCDC => self.lcdc.bits(),
            R_LY => self.ly,
            R_LYC => self.lyc,
            R_STAT => self.stat.bits() | STAT_UNUSED_MASK | self.stat_mode.to_bits(),
            R_SCX => self.scx,
            R_SCY => self.scy,
            R_WX => self.wx,
            R_WY => self.wy,
            R_BGP => self.bgp_pal.bits(),
            R_OBP0 => self.obp0_pal.bits(),
            R_OBP1 => self.obp1_pal.bits(),
            VRAM_START..=VRAM_END => {
                if !self.can_access_vram(Access::Read) {
                    return 0xff;
                }
                self.vram.read_byte(address)
            }
            OAM_START..=OAM_END => {
                if !self.can_access_oam(Access::Read) {
                    return 0xff;
                }
                self.oam.read_byte(address)
            }
            _ => {
                if self.is_cgb {
                    return match address {
                        R_BGPI => self.bg_color_palettes.read_index(),
                        R_BGPD => self.bg_color_palettes.read_data(),
                        R_OBPI => self.obj_color_palettes.read_index(),
                        R_OBPD => self.obj_color_palettes.read_data(),
                        R_OPRI => self.opri | 0b1111_1110,
                        R_VBK => self.vram.read_byte(address),
                        _ => invalid_address("PPU (read)", address),
                    };
                }
                if CGB_REGISTERS.contains(&address) {
                    return 0xff;
                }
                invalid_address("PPU (read)", address)
            }
        }
    }

    pub fn write_byte(&mut self, address: u16, value: u8, ic: &mut InterruptController) {
        match address {
            R_LCDC => {
                let was_enabled = is_lcd_enabled(&self.lcdc);
                self.lcdc = LcdcBits::from_bits_truncate(value);
                let is_enabled = is_lcd_enabled(&self.lcdc);
                // off - on
                if !was_enabled && is_enabled {
                    // OAM on the first line is skipped
                    // https://www.reddit.com/r/EmuDev/comments/6h2asw/stat_register_and_stat_interrupt_delay_in_dmgcgb/
                    self.change_stat_mode(Mode::HBlank);
                    self.mode = Mode::OamSearch;
                    self.pending_mode = None;

                    self.line_clocks = 4;
                    // Only LY=LYC can trigger STAT interrupt now
                    self.check_ly_equals_lyc_no_mode(ic);
                    self.ly_to_compare = None;

                    // The first frame (after LCD is turned on) is skipped
                    self.skip_frames = 1;
                }

                // On -> off
                if was_enabled && !is_enabled {
                    self.ly = 0;
                    self.ly_to_compare = Some(0);
                    self.line = 0;
                    self.change_stat_mode(Mode::HBlank);
                    self.screen_buffer
                        .get_write_buffer_mut()
                        .clear_with(&self.system_palette.colors[0]);
                }
            }
            R_LY => {} // read-only
            R_LYC => {
                self.lyc = value;
                if is_lcd_enabled(&self.lcdc) {
                    self.check_ly_equals_lyc(ic);
                    self.stat_update(ic, self.stat_mode);
                }
            }
            R_STAT => {
                let mut new_stat = StatBits::from_bits_truncate(value);
                // LY=LYC is not writeable
                new_stat.remove(StatBits::LYC_EQUALS_LY_FLAG);
                self.stat = (self.stat & StatBits::LYC_EQUALS_LY_FLAG) | new_stat;

                if is_lcd_enabled(&self.lcdc)
                    && [Mode::HBlank, Mode::VBlank].contains(&self.stat_mode)
                {
                    self.stat_update(ic, self.stat_mode)
                }
            }
            R_SCX => self.scx = value,
            R_SCY => {
                // this should be immediately propagated to fetcher
                self.scy = value
            }
            R_WX => self.wx = value,
            R_WY => self.wy = value,
            R_BGP => self.bgp_pal = Palette::from_bits(value, &self.system_palette),
            R_OBP0 => self.obp0_pal = Palette::from_bits(value, &self.system_palette),
            R_OBP1 => self.obp1_pal = Palette::from_bits(value, &self.system_palette),

            VRAM_START..=VRAM_END => {
                if !self.can_access_vram(Access::Write) {
                    return;
                }
                self.vram.write_byte(address, value);
            }
            OAM_START..=OAM_END => {
                if !self.can_access_oam(Access::Write) {
                    return;
                }
                self.oam.write_byte(address, value);
            }
            _ => {
                if self.is_cgb {
                    return match address {
                        R_BGPI => self.bg_color_palettes.write_index(value),
                        R_BGPD => self.bg_color_palettes.write_data(value),
                        R_OBPI => self.obj_color_palettes.write_index(value),
                        R_OBPD => self.obj_color_palettes.write_data(value),
                        R_OPRI => self.opri = value & 1,
                        R_VBK => self.vram.write_byte(address, value),
                        _ => invalid_address("PPU (write)", address),
                    };
                }
                if CGB_REGISTERS.contains(&address) {
                    return;
                }
                invalid_address("PPU (write)", address)
            }
        }
    }
}

// Debug info
impl Ppu {
    pub fn set_system_palette(&mut self, palette: &DmgPalettes) {
        self.system_palette = palette.get_palette();
        self.bgp_pal.change_system_palette(&self.system_palette);
        self.obp0_pal.change_system_palette(&self.system_palette);
        self.obp1_pal.change_system_palette(&self.system_palette);
    }

    pub fn get_tile(&self, index: usize, layer: MapLayer) -> &Tile {
        let base_address = match layer {
            MapLayer::Background => get_background_tile_map_address(&self.lcdc),
            MapLayer::Window => get_window_tile_map_address(&self.lcdc),
        } as usize;

        let n = self.vram.memory[base_address + index];
        let tile_number = transform_tile_number(&self.lcdc, n);

        &self.vram.tiles[tile_number]
    }

    pub fn get_backround_palette(&self) -> &Palette {
        &self.bgp_pal
    }

    pub fn get_background_pos(&self) -> (u8, u8, bool) {
        (
            self.scx,
            self.scy,
            is_background_or_window_enable(&self.lcdc),
        )
    }

    pub fn get_window_pos(&self) -> (u8, u8, bool) {
        (
            self.wx,
            self.wy,
            is_background_or_window_enable(&self.lcdc) && is_window_enabled(&self.lcdc),
        )
    }
}

```

`gb/src/ppu/registers.rs`:

```rs
/**
 * LCD Control (R/W)
 *
 * Bit 7 - LCD Control Operation *
 *    0: Stop completely (no picture on screen)
 *    1: operation
 * Bit 6 - Window Tile Map Display Select
 *    0: $9800-$9BFF
 *    1: $9C00-$9FFF
 * Bit 5 - Window Display
 *    0: off
 *    1: on
 * Bit 4 - BG & Window Tile Data Select
 *    0: $8800-$97FF
 *    1: $8000-$8FFF <- Same area as OBJ
 * Bit 3 - BG Tile Map Display Select
 *    0: $9800-$9BFF
 *    1: $9C00-$9FFF
 * Bit 2 - OBJ (Sprite) Size
 *    0: 8*8
 *    1: 8*16 (width*height)
 * Bit 1 - OBJ (Sprite) Display
 *    0: off
 *    1: on
 * Bit 0 - BG & Window Display
 *    0: off
 *    1: on
 *
 * Stopping LCD operation (bit 7 from 1 to 0) must be performed
 * during V-blank to work properly. V-blank can be confirmed
 * when the value of LY is greater than or equal to 144.
 */
pub const R_LCDC: u16 = 0xff40;

/**
 *  LCDC Status (R/W)
 *  Bit 7 - Unused
 *  Bit 6 - LYC=LY Coincidence Interrupt (1=Enable) (Read/Write)
 *  Bit 5 - Mode 2 OAM Interrupt         (1=Enable) (Read/Write)
 *  Bit 4 - Mode 1 V-Blank Interrupt     (1=Enable) (Read/Write)
 *  Bit 3 - Mode 0 H-Blank Interrupt     (1=Enable) (Read/Write)
 *  Bit 2 - Coincidence Flag  (0:LYC<>LY, 1:LYC=LY) (Read Only)
 *  Bit 1-0 - Mode Flag       (Mode 0-3, see below) (Read Only)
 *         0: During H-Blank
 *         1: During V-Blank
 *         2: During Searching OAM
 *         3: During Transferring Data to LCD Driver
 */
pub const R_STAT: u16 = 0xff41;

/**
 * Scroll Y (R/W)
 *
 * 8 Bit value $00-$FF to scroll BG Y screen position.
 */
pub const R_SCY: u16 = 0xff42;

/**
 *  Scroll X (R/W)
 *
 * 8 Bit value $00-$FF to scroll BG X screen position.
 */
pub const R_SCX: u16 = 0xff43;

/**
 * LCDC Y-Coordinate (R)
 *
 * The LY indicates the vertical line to which
 * the present data is transferred to the LCD
 * Driver. The LY can take on any value
 * between 0 through 153. The values between
 * 144 and 153 indicate the V-Blank period.
 * Writing will reset the counter.
 */
pub const R_LY: u16 = 0xff44;

/**
 * LY Compare (R/W)
 *
 * The LYC compares itself with the LY. If the
 * values are the same it causes the STAT to
 * set the coincident flag.
 */
pub const R_LYC: u16 = 0xff45;

/**
 * DMA Transfer and Start Address (W)
 *
 * The DMA Transfer (40*28 bit) from internal ROM or
 * RAM ($0000-$F19F) to the OAM (address $FE00-$FE9F)
 *
 * 40 sprites, 4 clocks per sprite = 160 clocks
 * 160 clocks = 40 sprites
 */
// pub const R_DMA: u16 = 0xff46;

/**
 *  BG & Window Palette Data (R/W)
 *    Bit 7-6 - Data for Dot Data 11 - (Normally darkest color)
 *    Bit 5-4 - Data for Dot Data 10
 *    Bit 3-2 - Data for Dot Data 01
 *    Bit 1-0 - Data for Dot Data 00 - (Normally lightest color)
 *
 * This selects the shade of grays to use
 * for the background (BG) & window pixels.
 * Since each pixel uses 2 bits, the
 * corresponding shade will be selected from here.
 */
pub const R_BGP: u16 = 0xff47;

pub const R_OBP0: u16 = 0xff48;
pub const R_OBP1: u16 = 0xff49;

/**
 * Window Y Position (R/W)
 *
 * 0 <= WY <= 143
 * WY must be greater than or equal to 0 and
 * must be less than or eq
 */
pub const R_WY: u16 = 0xff4a;
pub const R_WX: u16 = 0xff4b;

/**
 * CGB Mode Only - VRAM Bank (R/W)
 *
 * This register can be written to to change VRAM banks. Only bit 0 matters, all other bits are ignored.
 */
pub const R_VBK: u16 = 0xff4f;

/**
 * CGB Mode Only BCPS/BGPI (Background Color Palette Specification or Background Palette Index)
 *
 * This register is used to address a byte in the CGBs Background Palette Memory. Each two byte in that memory define a color value. The first 8 bytes define Color 0-3 of Palette 0 (BGP0), and so on for BGP1-7.
 *
 *  Bit 7     Auto Increment  (0=Disabled, 1=Increment after Writing)
 *  Bit 5-0   Index (00-3F)
 */
pub const R_BGPI: u16 = 0xff68;

/**
 * CGB Mode Only - BCPD/BGPD (Background Color Palette Data or Background Palette Data)
 *
 * This register allows to read/write data to the CGBs Background Palette Memory, addressed through Register FF68. Each color is defined by two bytes (Bit 0-7 in first byte).
 *  Bit 0-4   Red Intensity   (00-1F)
 *  Bit 5-9   Green Intensity (00-1F)
 *  Bit 10-14 Blue Intensity  (00-1F)
 */
pub const R_BGPD: u16 = 0xff69;

pub const R_OBPI: u16 = 0xff6a;
pub const R_OBPD: u16 = 0xff6b;

/**
 * CGB Mode Only - Object Priority Mode
 *
 * This register serves as a flag for which object priority mode to use. While the DMG prioritizes objects by x-coordinate,
 * the CGB prioritizes them by location in OAM. This flag is set by the CGB bios after checking the game's CGB compatibility.
 *
 * Bit 0: OBJ Priority Mode (0=OAM Priority, 1=Coordinate Priority) (Read/Write)
 */
pub const R_OPRI: u16 = 0xff6c;

```

`gb/src/ppu/screen_buffer.rs`:

```rs
use crate::constants::{DISPLAY_HEIGHT, DISPLAY_WIDTH, PIXELS};

use super::{palettes::Rgb, ppu::Mode};
#[derive(PartialEq)]
enum ActiveBuffer {
    Front,
    Back,
}

const PIXEL_DATA_SIZE: usize = PIXELS * 3;

pub type LineStatsData = [LineStats; DISPLAY_HEIGHT];

#[derive(Clone, Copy)]
pub struct LineStats {
    pub pixel_transfer: u32,
    pub h_blank: u32,
}

impl LineStats {
    fn empty() -> Self {
        Self {
            pixel_transfer: 0,
            h_blank: 0,
        }
    }

    pub fn set_stats(&mut self, mode: Mode, started_at: u32) {
        match mode {
            Mode::HBlank => self.h_blank = started_at,
            Mode::PixelTransfer => self.pixel_transfer = started_at,
            // VBLANK takes up the whole line, OAM starts always at 0 (besides the special first line after turn on)
            _ => panic!("Don't need track cycles for mode {}", mode),
        }
    }
}

// Stored as an array so we can use pointer to the JS world
pub struct Buffer {
    data: Box<[u8; PIXEL_DATA_SIZE]>,
    stats: Box<LineStatsData>,
}

fn get_offset(x: usize, y: usize) -> usize {
    (y * DISPLAY_WIDTH + x) * 3
}

impl Buffer {
    fn new() -> Self {
        Self {
            data: Box::new([0; PIXEL_DATA_SIZE]),
            stats: Box::new([LineStats::empty(); DISPLAY_HEIGHT]),
        }
    }

    pub fn get_pixel(&self, x: usize, y: usize) -> Rgb {
        let offset = get_offset(x, y);
        Rgb {
            r: self.data[offset],
            g: self.data[offset + 1],
            b: self.data[offset + 2],
        }
    }

    pub fn set_pixel(&mut self, x: usize, y: usize, pixel: &Rgb) {
        let offset = get_offset(x, y);

        self.data[offset] = pixel.r;
        self.data[offset + 1] = pixel.g;
        self.data[offset + 2] = pixel.b;
    }

    pub fn set_stats(&mut self, mode: Mode, line: usize, started_at: u32) {
        self.stats[line].set_stats(mode, started_at);
    }

    pub fn get_stats(&self) -> &LineStatsData {
        &self.stats
    }

    pub fn clear(&mut self) {
        self.data = Box::new([0; PIXEL_DATA_SIZE]);
    }

    pub fn clear_with(&mut self, pixel: &Rgb) {
        for y in 0..DISPLAY_HEIGHT {
            for x in 0..DISPLAY_WIDTH {
                self.set_pixel(x, y, pixel)
            }
        }
    }

    pub fn get_raw_data(&self) -> *const u8 {
        self.data.as_ptr()
    }
}

pub struct ScreenBuffer {
    active: ActiveBuffer,
    front: Buffer,
    back: Buffer,
}

impl ScreenBuffer {
    pub fn new() -> ScreenBuffer {
        ScreenBuffer {
            active: ActiveBuffer::Front,
            front: Buffer::new(),
            back: Buffer::new(),
        }
    }

    pub fn get_read_buffer(&self) -> &Buffer {
        match self.active {
            ActiveBuffer::Front => &self.back,
            ActiveBuffer::Back => &self.front,
        }
    }

    pub fn get_write_buffer_mut(&mut self) -> &mut Buffer {
        match self.active {
            ActiveBuffer::Front => &mut self.front,
            ActiveBuffer::Back => &mut self.back,
        }
    }

    pub fn commit_frame(&mut self) {
        self.active = if self.active == ActiveBuffer::Front {
            ActiveBuffer::Back
        } else {
            ActiveBuffer::Front
        }
    }
}

```

`gb/src/ppu/utils.rs`:

```rs
use bitflags::bitflags;

bitflags! {
    pub struct LcdcBits: u8 {
        const LCD_ENABLED = 0b1000_0000;      // 7.
        const WIN_TILE_MAP = 0b0100_0000;     // 6.
        const WIN_ENABLED = 0b0010_0000;      // 5.
        const BG_WIN_TILE_DATA = 0b0001_0000; // 4.

        const BG_TILE_MAP = 0b0000_1000;      // 3.
        const OBJ_SIZE = 0b0000_0100;         // 2.
        const OBJ_ENABLED = 0b0000_0010;      // 1.
        const BG_WIN_ENABLED = 0b0000_0001;   // 0.
    }
}

// unused // 7.
bitflags! {
    #[derive(Copy, Clone)]
    pub struct StatBits: u8 {
        const LYC_EQUALS_LY_INTERRUPT   = 0b0100_0000; // 6.
        const OAM_INTERRUPT             = 0b0010_0000; // 5.
        const V_BLANK_INTERRUPT         = 0b0001_0000; // 4.

        const H_BLANK_INTERRUPT         = 0b0000_1000; // 3.
        const LYC_EQUALS_LY_FLAG        = 0b0000_0100; // 2.
    }
}
// const MODE                      = 0b0000_0011; // 0. - 1.

impl StatBits {
    pub fn get_bits(&self, bits: StatBits) -> u8 {
        if self.contains(bits) {
            return bits.bits();
        }
        0
    }
}

pub fn is_lcd_enabled(lcdc: &LcdcBits) -> bool {
    lcdc.contains(LcdcBits::LCD_ENABLED)
}

pub fn is_background_or_window_enable(lcdc: &LcdcBits) -> bool {
    lcdc.contains(LcdcBits::BG_WIN_ENABLED)
}

pub fn is_window_enabled(lcdc: &LcdcBits) -> bool {
    lcdc.contains(LcdcBits::WIN_ENABLED)
}

pub fn get_sprites_height(lcdc: &LcdcBits) -> usize {
    if lcdc.contains(LcdcBits::OBJ_SIZE) {
        16
    } else {
        8
    }
}

pub fn are_sprites_enabled(lcdc: &LcdcBits) -> bool {
    lcdc.contains(LcdcBits::OBJ_ENABLED)
}

pub fn get_background_tile_map_address(lcdc: &LcdcBits) -> u16 {
    let base_address = if lcdc.contains(LcdcBits::BG_TILE_MAP) {
        0x9c00
    } else {
        0x9800
    };
    base_address & 0x1fff
}

pub fn get_window_tile_map_address(lcdc: &LcdcBits) -> u16 {
    let base_address = if lcdc.contains(LcdcBits::WIN_TILE_MAP) {
        0x9c00
    } else {
        0x9800
    };
    base_address & 0x1fff
}

pub fn transform_tile_number(lcdc: &LcdcBits, tile_number: u8) -> usize {
    let unsigned = lcdc.contains(LcdcBits::BG_WIN_TILE_DATA);
    /*
     * 8000-87FF  Tile set #1: tiles 0-127
     * 8800-8FFF  Tile set #1: tiles 128-255
     *            Tile set #0: tiles -1 to -128
     * 9000-97FF  Tile set #0: tiles 0-127
     */

    // Tile set #1
    if unsigned {
        return tile_number as usize;
    }

    // Tile set #0
    ((tile_number as i8 as i16) + 256) as usize
}

#[derive(PartialEq, Eq)]
pub enum OamPriority {
    OamLocation,
    XPosition,
}

pub fn get_oam_priority(opri: u8) -> OamPriority {
    if opri & 0b0000_0001 == 0 {
        return OamPriority::OamLocation;
    }
    OamPriority::XPosition
}

```

`gb/src/ppu/vram.rs`:

```rs
use std::{
    collections::hash_map::DefaultHasher,
    hash::{Hash, Hasher},
    usize,
};

use crate::constants::TILE_SIZE;
use crate::traits::MemoryAccess;

use super::registers::R_VBK;

pub const VRAM_START: u16 = 0x8000;
pub const VRAM_END: u16 = 0x9fff;
const TILES_COUNT: usize = 384;
// Tiles        0x8000 -> 0x97FF 8x8 pixels, 384 tiles
// Tile maps    0x9800 -> 0x9BFF
//              0x9C00 -> 0x9FFF
// CGB has extra VRAM bank, tiles are doubled and 0x9800 -> 0x9FFF is reserved for BG Map Attributes

const DATA_MASK: u16 = 0x1fff;

const VRAM_SIZE: usize = VRAM_END as usize - VRAM_START as usize + 1;

#[derive(Hash, Clone, Copy, PartialEq, Eq)]
pub enum BgToOamPriority {
    OamPriorityBit, // Object has priority according to its priority flag (DMG behavior)
    BgPriority,     // BG tile is always on top of the objects
}

#[derive(Hash)]
pub struct TileAttributes {
    // Bit 7        BG-to-OAM Priority          (0=Use OAM Priority bit, 1=BG Priority)
    // Bit 6        Vertical Flip               (0=Normal, 1=Mirror vertically)
    // Bit 5        Horizontal Flip             (0=Normal, 1=Mirror horizontally)
    // Bit 4        Not used
    // Bit 3        Tile VRAM Bank number       (0=Bank 0, 1=Bank 1)
    // Bit 2-0      Background Palette number   (BGP0-7)
    pub bank_number: u8,
    pub is_y_flipped: bool,
    pub is_x_flipped: bool,
    pub priority: BgToOamPriority,
    pub bg_palette_index: u8,
}

impl TileAttributes {
    pub fn new() -> Self {
        // DMG defaults
        Self {
            bank_number: 0,
            is_x_flipped: false,
            is_y_flipped: false,
            priority: BgToOamPriority::OamPriorityBit,
            bg_palette_index: 0,
        }
    }

    pub fn from_bits(bits: u8) -> Self {
        let bg_palette_index = bits & 0b000_0111;
        let bank_number = (bits & 0b0000_1000) >> 3;
        let is_x_flipped = (bits & 0b0010_0000) > 0;
        let is_y_flipped = (bits & 0b0100_0000) > 0;
        let priority = if (bits & 0b1000_0000) > 0 {
            BgToOamPriority::BgPriority
        } else {
            BgToOamPriority::OamPriorityBit
        };
        Self {
            bank_number,
            is_y_flipped,
            is_x_flipped,
            priority,
            bg_palette_index,
        }
    }
}

#[derive(Clone, Copy, Hash)]
pub struct Tile {
    pub data: [[u8; 8]; 8],
}

impl Tile {
    pub fn new() -> Tile {
        Tile { data: [[0; 8]; 8] }
    }

    pub fn get_at(&self, x: usize, y: usize) -> u8 {
        self.data[y][x]
    }
}

pub struct Vram {
    pub memory: Box<[u8]>,
    pub tiles: Box<[Tile]>,
    bank: u8,
}

fn get_bit(byte: u8, index: usize) -> u8 {
    if byte & (1 << index) > 0 {
        return 1;
    }
    0
}

fn calculate_hash<T: Hash>(t: &T) -> u64 {
    let mut s = DefaultHasher::new();
    t.hash(&mut s);
    s.finish()
}

enum TileData {
    Low,
    High,
}

impl Vram {
    pub fn new() -> Vram {
        // CGB has doubled VRAM size (extra ram bank)
        Vram {
            bank: 0,
            memory: Box::new([0x00; 2 * VRAM_SIZE]),
            tiles: Box::new([Tile::new(); 2 * TILES_COUNT]),
        }
    }

    fn get_tile_address(
        &self,
        tile_data: TileData,
        tile_number: usize,
        tile_row: usize,
        attributes: &TileAttributes,
    ) -> usize {
        // 2x = 2 bytes per line
        let line_base = if attributes.is_y_flipped {
            (7 - tile_row) * 2
        } else {
            tile_row * 2
        };

        let line_offset = match tile_data {
            TileData::Low => line_base,
            TileData::High => line_base + 1,
        };

        let tile_mask = tile_number << 4;
        let address = tile_mask + line_offset;

        let offset = attributes.bank_number as usize * VRAM_SIZE;
        address + offset
    }

    pub fn get_tile_low(
        &self,
        tile_number: usize,
        tile_row: usize,
        attributes: &TileAttributes,
    ) -> u8 {
        let address = self.get_tile_address(TileData::Low, tile_number, tile_row, attributes);
        let data = self.memory[address];

        if attributes.is_x_flipped {
            data.reverse_bits()
        } else {
            data
        }
    }

    pub fn get_tile_high(
        &self,
        tile_number: usize,
        tile_row: usize,
        attributes: &TileAttributes,
    ) -> u8 {
        let address = self.get_tile_address(TileData::High, tile_number, tile_row, attributes);
        let data = self.memory[address];

        if attributes.is_x_flipped {
            data.reverse_bits()
        } else {
            data
        }
    }

    pub fn get_tile_attributes(&self, tile_address: u16) -> TileAttributes {
        let bits = self.memory[tile_address as usize + VRAM_SIZE];
        TileAttributes::from_bits(bits)
    }

    // TODO used only for the sprites, remove eventually
    pub fn get_tile(&self, tile_number: usize, bank: u8) -> &Tile {
        &self.tiles[tile_number + (bank as usize) * TILES_COUNT]
    }

    // TODO remove with sprite fetcher eventually
    fn update_tile(&mut self, address: u16) {
        // TODO this should be removed
        // Fetcher shouldn't use this - it's not accurate (tile can be changed between fetching high & low)
        // move this logic somewhere to debugger UI

        let local_address = (address & DATA_MASK) as usize;

        // 16 bytes per tile + bank offset
        let index = (local_address >> 4) + (TILES_COUNT * self.bank as usize);

        // 2 bytes per line
        let row = local_address >> 1 & 7;

        // always recompute with odd line as the base line, ignore first bit
        let base_address = (local_address + (self.bank as usize) * VRAM_SIZE) & 0xfffe;
        let tile_data_low = self.memory[base_address];
        let tile_data_high = self.memory[base_address + 1];

        for x in 0..TILE_SIZE {
            let high = get_bit(tile_data_high, x);
            let low = get_bit(tile_data_low, x);
            let pixel = (high << 1) | low;

            self.tiles[index].data[row][x] = pixel;
        }
        self.tiles[index].data[row].reverse();
    }

    pub fn get_tiles(&self) -> &[Tile] {
        &self.tiles
    }

    pub fn get_tiles_hash(&self) -> u64 {
        calculate_hash(&self.tiles)
    }
}

fn get_address(address: u16, bank: u8) -> usize {
    // 0x8001 -> 0x0001
    let offset = (address & DATA_MASK) as usize;
    let bank_offset = (bank as usize) * VRAM_SIZE;
    offset + bank_offset
}

impl MemoryAccess for Vram {
    fn read_byte(&self, address: u16) -> u8 {
        if address == R_VBK {
            return self.bank | 0b1111_1110;
        }
        self.memory[get_address(address, self.bank)]
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        if address == R_VBK {
            self.bank = value & 1;
            return;
        }

        // Tiles            0x8000 -> 0x97ff - store + transform pixels
        // Background maps  0x9800 -> 0x9fff - just store
        self.memory[get_address(address, self.bank)] = value;

        if (0x8000..=0x97ff).contains(&address) {
            self.update_tile(address);
        }
    }
}

```

`gb/src/serial.rs`:

```rs
use crate::{traits::MemoryAccess, utils::invalid_address};

pub struct Serial {
    sb: u8,
    sc: u8,
}

const R_SB: u16 = 0xff01;
const R_SC: u16 = 0xff02;

impl Serial {
    pub fn new() -> Self {
        Self { sb: 0x00, sc: 0xff }
    }
}

impl MemoryAccess for Serial {
    fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_SB => self.sb,
            R_SC => 0b0111_1110,
            _ => invalid_address("Serial (read)", address),
        }
    }

    fn write_byte(&mut self, address: u16, value: u8) {
        match address {
            R_SB => self.sb = value,
            R_SC => self.sc = value,
            _ => invalid_address("Serial (write)", address),
        };
    }
}

```

`gb/src/timer.rs`:

```rs
use bitflags::bitflags;

use crate::{
    constants::CPU_CLOCK_SPEED,
    interrupts::{InterruptBits, InterruptController},
    utils::invalid_address,
};

/**
 * Divider Register
 *
 * This register is incremented 16384 (~16779 on SGB) times a second. Writing any value sets it to $00.
 */
const R_DIV: u16 = 0xff04;

/**
 * Timer counter
 *
 * This timer is incremented by a clock frequency specified by the TAC register ($FF07). The timer generates an interrupt when it overflows.
 */
const R_TIMA: u16 = 0xff05;

/**
 * Timer Modulo (R/W)
 *
 * When the TIMA overflows, this data will be loaded.
 */
const R_TMA: u16 = 0xff06;

/**
 * Timer Control (R/W)
 *
 * Bits 3-7 unused = always 1
 * Bit 2 - Timer Stop
 *    0: Stop Timer
 *    1: Start Timer
 *
 * Bits 1+0 - Input Clock Select
 *    00: 4.096 KHz (~4.194 KHz SGB)
 *    01: 262.144 Khz (~268.4 KHz SGB)
 *    10: 65.536 KHz (~67.11 KHz SGB)
 *    11: 16.384 KHz (~16.78 KHz SGB)
 */
const R_TAC: u16 = 0xff07;

const TAC_UNUSED_MASK: u8 = 0b1111_1000;

bitflags! {
    pub struct TacBits: u8 {
        const ENABLED    = 0b0000_0100;
        const CLOCK_HIGH = 0b0000_0010;
        const CLOCK_LOW  = 0b0000_0001;
    }
}

pub struct Timer {
    pub divider_counter: u16,
    pub tima: u8,
    pub tac: TacBits,
    pub tma: u8,

    loading_delay_clocks: i8,
}

impl Timer {
    pub fn new() -> Timer {
        Timer {
            divider_counter: 0,
            tac: TacBits::empty(),
            tima: 0,
            tma: 0,
            loading_delay_clocks: 0,
        }
    }

    pub fn init_without_bios(&mut self) {
        // self.divider_counter = 0x1833; // for dmg0
        self.divider_counter = 0xabcf; // for dmgABC
        self.tac = TacBits::from_bits_truncate(0x00);
        self.tima = 0x00;
        self.tma = 0x00;
    }

    fn get_frequency_edge(&mut self) -> u16 {
        self.get_frequency() / 2
    }

    fn get_frequency(&mut self) -> u16 {
        // cycles needed to increment the counter
        // CPU 4 MHz / timer frequency = # cycles
        let cycles = match self.tac.bits() & 0b11 {
            0b01 => CPU_CLOCK_SPEED / 262_144, // every   16 cycles
            0b10 => CPU_CLOCK_SPEED / 65_536,  // every   64 cycles
            0b11 => CPU_CLOCK_SPEED / 16_384,  // every  256 cycles
            _ => CPU_CLOCK_SPEED / 4_096,      // every 1024 cycles
        };
        cycles as u16
    }

    fn is_enabled(&self) -> bool {
        self.tac.contains(TacBits::ENABLED)
    }

    fn has_counter_bit(&mut self) -> bool {
        if !self.is_enabled() {
            return false;
        }
        (self.divider_counter & self.get_frequency_edge()) > 0
    }

    fn increment_tima(&mut self, ic: &mut InterruptController) {
        self.tima = self.tima.wrapping_add(1);
        if self.tima == 0 {
            // TIMA loading has delay but interrupt is triggered right away
            self.loading_delay_clocks = 4;
            ic.request_interrupt(InterruptBits::TIMER);
        }
    }

    pub fn tick(&mut self, ic: &mut InterruptController) {
        let prev_counter_bit = self.has_counter_bit();
        self.divider_counter = self.divider_counter.wrapping_add(1);

        if self.loading_delay_clocks >= 0 {
            self.loading_delay_clocks -= 1;
        }
        if self.loading_delay_clocks == 0 {
            self.tima = self.tma;
        }

        if !self.is_enabled() {
            return;
        }

        // Timer is incremented on falling edge (on change from 1 to 0)
        if prev_counter_bit && !self.has_counter_bit() {
            self.increment_tima(ic);
        }
    }
}

impl Timer {
    pub fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_DIV => (self.divider_counter >> 8) as u8,
            R_TIMA => self.tima,
            R_TMA => self.tma,
            R_TAC => self.tac.bits() | TAC_UNUSED_MASK,
            _ => invalid_address("Timer (read)", address),
        }
    }
    pub fn write_byte(&mut self, address: u16, value: u8, ic: &mut InterruptController) {
        match address {
            R_DIV => {
                if self.has_counter_bit() {
                    self.increment_tima(ic);
                }
                self.divider_counter = 0
            }
            R_TIMA => {
                if self.loading_delay_clocks != 0 {
                    self.tima = value;

                    self.loading_delay_clocks = -1;
                }
            }
            R_TMA => {
                self.tma = value;
                if self.loading_delay_clocks == 0 {
                    self.tima = value
                }
            }
            R_TAC => {
                let prev_counter_bit = self.has_counter_bit();
                self.tac = TacBits::from_bits_truncate(value);

                if prev_counter_bit && !self.has_counter_bit() {
                    self.increment_tima(ic);
                }
            }
            _ => invalid_address("Timer (write)", address),
        }
    }
}

```

`gb/src/traits.rs`:

```rs
pub trait MemoryAccess {
    fn read_byte(&self, address: u16) -> u8;
    fn write_byte(&mut self, address: u16, value: u8);
}

pub trait DisplayHex {
    fn to_hex(&self) -> String;
}

```

`gb/src/utils.rs`:

```rs
use crate::traits::DisplayHex;

// {:02x}
// : - special formatting
// 02 - prepend 0 to max 2 chars
// x - hex small (X - bigger hex)

impl DisplayHex for usize {
    fn to_hex(&self) -> String {
        if self > &0xff_usize {
            format!("{:04x}", self)
        } else {
            format!("{:02x}", self)
        }
    }
}

impl DisplayHex for u16 {
    fn to_hex(&self) -> String {
        format!("{:04x}", self)
    }
}

impl DisplayHex for u8 {
    fn to_hex(&self) -> String {
        format!("{:02x}", self)
    }
}

pub fn invalid_address(section: &str, address: u16) -> ! {
    panic!("Unmapped address 0x{} at {}", address.to_hex(), section)
}
```

`gb/src/wram.rs`:

```rs
use std::cmp::max;

use crate::utils::invalid_address;

const WRAM_START: u16 = 0xc000;
const WRAM_END: u16 = 0xdfff;

const BANK_SIZE: usize = 4096;
const WRAM_SIZE: usize = 8 * BANK_SIZE;

const R_SVBK: u16 = 0xff70;

// DMG: bank 0        0xC000 - 0xCFFF
//      bank 1        0xD000 - 0xDFFF
// CGB: bank 0        0xC000 - 0xCFFF
//      bank 1-7      0xD000 - 0xDFFF

pub struct Wram {
    data: Box<[u8; WRAM_SIZE]>,
    bank: u8,
    is_cgb: bool,
}

impl Wram {
    pub fn new(is_cgb: bool) -> Self {
        Self {
            is_cgb,
            bank: 1,
            data: Box::new([0xff; WRAM_SIZE]),
        }
    }

    fn get_offset(&self, address: u16) -> usize {
        let base = (address & 0x1fff) as usize;
        match address {
            0xC000..=0xCFFF => base,
            0xD000..=0xDFFF => base + (self.bank as usize) * BANK_SIZE,
            _ => invalid_address("WRAM", address),
        }
    }

    pub fn read_byte(&self, address: u16) -> u8 {
        match address {
            R_SVBK => {
                if self.is_cgb {
                    return self.bank | 0b1111_1100;
                }
                0xff
            }
            WRAM_START..=WRAM_END => self.data[self.get_offset(address)],
            _ => invalid_address("WRAM (read)", address),
        }
    }

    pub fn write_byte(&mut self, address: u16, value: u8) {
        match address {
            R_SVBK => {
                if self.is_cgb {
                    let bank = value & 0b11;
                    self.bank = max(bank, 1);
                }
            }
            WRAM_START..=WRAM_END => self.data[self.get_offset(address)] = value,
            _ => invalid_address("WRAM (write)", address),
        }
    }
}

```

`gb/tests/ppu_test.rs`:

```rs
mod tests {
    use gb::{
        events::Events,
        interrupts::InterruptController,
        ppu::ppu::{Mode, Ppu},
    };
    trait DebugInfo {
        fn get_cycles(&self) -> u32;
        fn get_stat_mode(&self) -> Mode;
        fn execute_cycles(&mut self, cycles: usize);
        fn prepare(&mut self, line: u8);
        fn assert_stat_mode(&self, mode: Mode);
    }

    impl DebugInfo for Ppu {
        fn get_cycles(&self) -> u32 {
            self.line_clocks
        }

        fn get_stat_mode(&self) -> Mode {
            let stat = self.read_byte(0xff41);
            Mode::from_bits(stat)
        }

        fn execute_cycles(&mut self, cycles: usize) {
            let mut ic = InterruptController::new();
            (0..cycles).for_each(|_| self.tick(&mut ic, &mut Events::empty()));
        }

        fn prepare(&mut self, line: u8) {
            self.execute_cycles(1); // move from cycle 0

            loop {
                self.execute_cycles(1);
                if self.line == line && self.line_clocks == 0 {
                    break;
                }
            }
        }

        fn assert_stat_mode(&self, mode: Mode) {
            assert_eq!(
                self.get_stat_mode(),
                mode,
                "Cycle {} is expected to be mode {}",
                self.get_cycles(),
                mode
            );
        }
    }

    const M2_CYCLES: usize = 80;
    const M3_CYCLES: usize = 172; // shortest variant, without scroll and sprites = 160 cycles for each pixel + 12 cycles for initial fetch
    const M0_CYCLES: usize = 204;

    #[test]
    fn basic_mode_transitions() {
        let mut ppu = Ppu::new(false);

        ppu.init_without_bios();

        // LINE 0
        ppu.prepare(0);

        assert_eq!(M2_CYCLES + M3_CYCLES + M0_CYCLES, 456);

        // Cycle 0, mode=0 HBlank
        assert_eq!(ppu.get_cycles() as usize, 0);
        assert_eq!(ppu.mode, Mode::OamSearch);

        ppu.assert_stat_mode(Mode::HBlank);

        // Cycle 1, mode=2 OAM
        // 0 -> 80
        for _cycle in 0..M2_CYCLES {
            ppu.execute_cycles(1);
            ppu.assert_stat_mode(Mode::OamSearch);
        }

        // 81 -> 252
        for _cycle in 0..M3_CYCLES {
            ppu.execute_cycles(1);
            ppu.assert_stat_mode(Mode::PixelTransfer); // stat mode m=3
        }

        // Cycle 455
        ppu.execute_cycles(M0_CYCLES - 1);
        ppu.assert_stat_mode(Mode::HBlank);

        // Cycle 0 line 1
        ppu.execute_cycles(1);
        assert_eq!(ppu.get_cycles() as usize, 0);
        ppu.assert_stat_mode(Mode::HBlank);
    }
}

```

`generateRomsList.js`:

```js
/* eslint-disable import/no-extraneous-dependencies */
const fg = require('fast-glob')
const fs = require('fs')
const prettier = require('prettier')
const config = require('./.prettierrc')

const entries = fg.sync(['roms/**/*.{gb,gbc}'])

const roms = entries.map((e) => e.replace('roms/', '')).sort()

const PATH = '../roms'

function generateOutput(items) {
  const imports = items.map((item, i) => {
    const key = `rom${i}`
    return {
      import: `import ${key} from '${PATH}/${item}'`,
      key,
      name: item
    }
  })
  const importStatements = imports.map((item) => item.import).join('\n')
  const exportObj = imports.map((item) => `{ name: '${item.name}', url: ${item.key} }`).join(',')
  const exportStatement = `export const roms = [${exportObj}]`

  return `/* eslint-disable simple-import-sort/imports */\n// AUTOGENERATED\n${importStatements}\n\n${exportStatement}`
}

const out = prettier.format(generateOutput(roms), {
  ...config,
  parser: 'typescript'
})

fs.writeFileSync(`${__dirname}/browser/romsList.ts`, out)

```

`index.html`:

```html
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- Disable zooming: -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>FeatherGB</title>
    <style></style>
  </head>

  <body>
    <script>
      // The `--no-modules`-generated JS from `wasm-bindgen` attempts to use
      // `WebAssembly.instantiateStreaming` to instantiate the wasm module,
      // but this doesn't work with `file://` urls. This example is frequently
      // viewed by simply opening `index.html` in a browser (with a `file://`
      // url), so it would fail if we were to call this function!
      //
      // Work around this for now by deleting the function to ensure that the
      // `no_modules.js` script doesn't have access to it. You won't need this
      // hack when deploying over HTTP.
      delete WebAssembly.instantiateStreaming
    </script>
    <div id="root"></div>
    <script type="module" src="/browser/main.tsx" type="text/javascript"></script>
  </body>
</html>

```

`integration-tests/Cargo.toml`:

```toml
[package]
name = "integration-tests"
version = "0.1.0"
edition = "2021"

[dependencies]
gb = { path = "../gb" }
glob = "0.3.1"
regex = "1.8.1"
chrono = "0.4.24"
futures = "0.3.28"
tokio = { version = "1.28.1", features = ["full"] }
image = "0.24.6"
pixelmatch = "0.1.0"
```

`integration-tests/src/main.rs`:

```rs
use std::{
    fs,
    process::{Command, Stdio},
};

use futures::future::join_all;
use suites::{
    acid2_tests, age_tests, blarggs_sound_tests, blarggs_tests, mbc3_tester,
    mealybug_tearoom_tests, scribbl_tests, wilbertpol_tests,
};
use suites::{mooneye_tests, turtle_tests};
use tokio::time::Instant;
use utils::OUTPUT_DIR;

mod markdown;
mod suites;
mod tests;
mod utils;

#[tokio::main]
pub async fn main() {
    let now = Instant::now();

    let suites = vec![
        tokio::spawn(blarggs_tests::run_tests()),
        tokio::spawn(blarggs_sound_tests::run_tests()),
        tokio::spawn(mooneye_tests::run_tests()),
        tokio::spawn(wilbertpol_tests::run_tests()),
        tokio::spawn(acid2_tests::run_tests()),
        tokio::spawn(scribbl_tests::run_tests()),
        tokio::spawn(turtle_tests::run_tests()),
        tokio::spawn(mbc3_tester::run_tests()),
        tokio::spawn(mealybug_tearoom_tests::run_tests()),
        tokio::spawn(age_tests::run_tests()),
    ];

    let results = join_all(suites).await;
    let mut content = results
        .into_iter()
        .filter_map(|result| result.ok())
        .collect::<Vec<String>>();

    let output_file = format!("{}/results.md", OUTPUT_DIR);
    let generated_at = format!(
        "Generated at: {}, took {}s",
        chrono::offset::Utc::now(),
        now.elapsed().as_secs()
    );

    content.push(generated_at);

    fs::write(&output_file, content.join("\n\n")).unwrap();

    // Format markdown with prettier
    let mut child = Command::new("./node_modules/.bin/prettier")
        .arg("--write")
        .arg(OUTPUT_DIR)
        .stdout(Stdio::null()) // hide succces
        .spawn()
        .unwrap();

    child.wait().unwrap();

    println!(
        "Done in {}s, results: {}",
        now.elapsed().as_secs(),
        output_file
    )
}

```

`integration-tests/src/markdown.rs`:

```rs
use crate::utils::OUTPUT_DIR;
use std::path::Path;

pub fn table(heading: &[&str], rows: &[Vec<String>]) -> String {
    fn wrap(content: String) -> String {
        format!("| {} |", content)
    }

    let cols = heading.len();

    // | h1 | h2 | h3 |
    let head = wrap(heading.join(" | "));

    // |-|-|
    let line = wrap(heading.iter().map(|_| "-").collect::<Vec<&str>>().join("|"));

    let body = rows
        .iter()
        .map(|row| {
            if row.len() != cols {
                panic!(
                    "Number of cols doesn't match. Expected {}, got {}",
                    cols,
                    row.len()
                );
            }
            wrap(row.join(" | "))
        })
        .collect::<Vec<String>>()
        .join("\n");

    format!("{}\n{}\n{}\n", head, line, body)
}

pub fn image(path: impl Into<String>) -> String {
    let into = path.into();
    let p = Path::new(&into);
    let image_path = p.strip_prefix(OUTPUT_DIR).unwrap().to_str().unwrap();

    format!("![]({})", image_path)
}

pub fn test_report(name: &str, info: &str, result: &str) -> String {
    format!("## {}\n\n{}\n\n{}\n", name, info, result)
}

```

`integration-tests/src/suites/acid2_tests.rs`:

```rs
use gb::emulator::Device;

use crate::tests::{execute_tests, VisualTestCase, VisualTestCaseBuilder};

const TEST_CASES: [(&str, &str, &str, Device); 2] = [
    (
        "dmg-acid2",
        "roms/dmg-acid2/build/dmg-acid2.gb",
        "roms/dmg-acid2/img/reference-dmg.png",
        Device::DMG,
    ),
    (
        "cgb-acid2",
        "roms/cgb-acid2/build/cgb-acid2.gbc",
        "roms/cgb-acid2/img/reference.png",
        Device::CGB,
    ),
];

fn get_tests() -> Vec<VisualTestCase> {
    TEST_CASES
        .iter()
        .map(|(name, rom_path, refeference_path, device)| {
            VisualTestCaseBuilder::new(*name, *rom_path, *refeference_path, *device)
                .set_max_frames(20)
                .build()
        })
        .collect()
}

pub async fn run_tests() -> String {
    let tests = get_tests();

    execute_tests(
        "acid2 tests",
        "
- https://github.com/mattcurrie/dmg-acid2
- https://github.com/mattcurrie/cgb-acid2
    ",
        tests,
    )
    .await
}

```

`integration-tests/src/suites/age_tests.rs`:

```rs
use futures::{future::join_all, TryFutureExt};

use gb::emulator::{Device, Emulator};
use glob::glob;

use crate::utils::{get_result_mark, path_to_basename, save_screen, OUTPUT_DIR};
use crate::{markdown, utils::create_emulator};

fn should_collect(basename: String) -> bool {
    basename.contains("dmgC")
}

fn get_tests() -> Vec<String> {
    let mut files = vec![];
    for entry in glob("./roms/age-test-roms/**/*.gb").expect("Failed to read glob pattern") {
        match entry {
            Ok(path) => {
                let path = path.into_os_string().into_string().unwrap();
                let basename = path_to_basename(&path);
                if should_collect(basename) {
                    files.push(path);
                }
            }
            Err(e) => panic!("Glob file error, {:?}", e),
        }
    }
    files
}

fn is_valid(e: &Emulator) -> bool {
    e.cpu.b == 0x03
        && e.cpu.c == 0x05
        && e.cpu.d == 0x08
        && e.cpu.e == 0x0d
        && e.cpu.h == 0x15
        && e.cpu.l == 0x22
}

type TestResult = (String, bool, String); // (pathname, valid, screenshot)

fn execute_test(path: String) -> TestResult {
    let mut e = create_emulator(&path, Device::DMG); // TODO: use different devices

    let max_frames_to_run = 230;

    for _ in 0..max_frames_to_run {
        e.run_frame();

        // Dummy check for LD B,B breakpoint
        if !e.hw.events.is_empty() {
            break;
        }
    }

    let basename = path_to_basename(&path);
    let result_image = format!("{OUTPUT_DIR}/age-tests/{basename}/result.png");
    save_screen(&e, &result_image);

    (path, is_valid(&e), markdown::image(result_image))
}

fn generate_test_report(results: Vec<Result<TestResult, String>>) -> String {
    let data = results
        .into_iter()
        .map(|result| match result {
            Ok((path, valid, screenshot)) => vec![path, get_result_mark(valid), screenshot],
            Err(test_name) => vec![test_name, format!("{} (crashes)", get_result_mark(false))],
        })
        .collect::<Vec<Vec<String>>>();

    let headings = ["Test", "Result", "Screenshot"];
    let result = markdown::table(&headings, &data);

    markdown::test_report(
        "AGE test suite",
        "Only DMG-related tests for now. From https://github.com/c-sp/age-test-roms",
        &result,
    )
}

pub async fn run_tests() -> String {
    let files = get_tests();

    let mut handles = vec![];
    for file in files {
        let name = file.clone();
        let handle = tokio::spawn(async move { execute_test(file) }).map_err(|_| name);
        handles.push(handle);
    }

    let results = join_all(handles).await;
    generate_test_report(results)
}

```

`integration-tests/src/suites/blarggs_sound_tests.rs`:

```rs
use gb::{emulator::Device, traits::MemoryAccess};

use crate::{
    tests::{
        execute_tests, get_image_path, ImageResultTypes, VisualTestCase, VisualTestCaseBuilder,
    },
    utils::create_path,
};

// Sound tests end with infinite loop stuck on JR i8
const INFINITE_LOOP_OP_CODE: u8 = 0x18; // JR i8

// ROM names use spaces instead of _
const TEST_CASES: &[&str] = &[
    "01-registers",
    "02-len_ctr",
    "03-trigger",
    "04-sweep",
    "05-sweep_details",
    "06-overflow_on_trigger",
    "07-len_sweep_period_sync",
    "08-len_ctr_during_power",
    "09-wave_read_while_on",
    "10-wave_trigger_while_on",
    "11-regs_after_power",
    "12-wave_write_while_on",
];

const TESTS_PATH: &str = "roms/gb-test-roms/dmg_sound/rom_singles";

fn get_tests() -> Vec<VisualTestCase> {
    TEST_CASES
        .iter()
        .map(|name| {
            let reference_path = get_image_path(name, ImageResultTypes::Expected);
            let rom_base = format!("{}.gb", name.replace('_', " "));
            let rom_path = create_path(&[TESTS_PATH, &rom_base]);
            VisualTestCaseBuilder::new(*name, rom_path, reference_path, Device::DMG)
                .copy_reference(false)
                .set_max_frames(2000)
                .set_end_callback(|e| {
                    let opcode = e.hw.read_byte(e.cpu.pc);
                    INFINITE_LOOP_OP_CODE == opcode
                })
                .build()
        })
        .collect()
}

pub async fn run_tests() -> String {
    let tests = get_tests();

    execute_tests(
        "Blargg's tests - dmg_sound",
        "https://github.com/retrio/gb-test-roms",
        tests,
    )
    .await
}

```

`integration-tests/src/suites/blarggs_tests.rs`:

```rs
use futures::{future::join_all, TryFutureExt};

use gb::emulator::Device;
use glob::glob;

use crate::utils::get_result_mark;
use crate::{markdown, utils::create_emulator};

fn should_collect(path: &str) -> bool {
    // no CGB sound
    if path.contains("/cgb_sound/") {
        return false;
    }

    // tested in different suite (sound tests don't have any output)
    if path.contains("/dmg_sound/") {
        return false;
    }

    // not fixed yet
    if path.contains("/oam_bug/") {
        return false;
    }

    // broken for DMG only
    if path.contains("halt_bug.gb") || path.contains("interrupt_time.gb") {
        return false;
    }

    // those tests don't output anything :/
    if path.contains("mem_timing-2") {
        return false;
    }

    true
}

fn get_tests() -> Vec<String> {
    let mut files = vec![];
    for entry in glob("./roms/gb-test-roms/**/*.gb").expect("Failed to read glob pattern") {
        match entry {
            Ok(path) => {
                let path = path.into_os_string().into_string().unwrap();
                if should_collect(&path) {
                    files.push(path);
                }
            }
            Err(e) => panic!("Glob file error, {:?}", e),
        }
    }
    files
}

type TestResult = (String, bool); // (pathname, valid)

fn execute_test(path: String) -> TestResult {
    let mut e = create_emulator(&path, Device::DMG);

    e.set_capture_serial(true);
    let max_frames_to_run = 3200; // cpu_instr takes long time

    let mut valid = false;
    let mut output: String = String::from("");

    // TODO check for a inifinite loop at the end of test?
    for _ in 0..max_frames_to_run {
        e.run_frame();

        output = e.hw.serial_output.iter().collect::<String>();
        if output.contains("Passed") {
            valid = true;
            break;
        }

        if output.contains("Failed") {
            valid = false;
            break;
        }
    }

    if !valid {
        println!("{} failed, output: {}", path, output);
    }

    (path, valid)
}

fn generate_test_report(results: Vec<Result<TestResult, String>>) -> String {
    let data = results
        .into_iter()
        .map(|result| match result {
            Ok((path, valid)) => vec![path, get_result_mark(valid)],
            Err(test_name) => vec![test_name, format!("{} (crashes)", get_result_mark(false))],
        })
        .collect::<Vec<Vec<String>>>();

    let headings = ["Test", "Result"];
    let result = markdown::table(&headings, &data);

    markdown::test_report(
        "Blargg's tests",
        "https://github.com/retrio/gb-test-roms\n\n Some of those tests are skipped, see `blarggs_tests.rs` why.",
        &result,
    )
}

pub async fn run_tests() -> String {
    let files = get_tests();

    let mut handles = vec![];
    for file in files {
        let name = file.clone();
        let handle = tokio::spawn(async move { execute_test(file) }).map_err(|_| name);
        handles.push(handle);
    }

    let results = join_all(handles).await;
    generate_test_report(results)
}

```

`integration-tests/src/suites/mbc3_tester.rs`:

```rs
use gb::emulator::Device;

use crate::{
    markdown,
    tests::{get_image_path, ImageResultTypes, VisualTestCaseBuilder},
    utils::get_result_mark,
};

const TEST_PATH: &str = "roms/MBC3-Tester-gb/disassembly/game.gb";
const TEST_NAME: &str = "MBC3-Tester";

pub async fn run_tests() -> String {
    let test = VisualTestCaseBuilder::new(
        TEST_NAME,
        TEST_PATH,
        get_image_path(TEST_NAME, ImageResultTypes::Expected),
        Device::DMG,
    )
    .copy_reference(false)
    .set_max_frames(50)
    .has_breakpoint(false)
    .build();

    let (name, reference_image, result_image, diff_image, diff) = test.create_result();

    let headings = ["Name", "Expected", "Result", "Diff", "Status"];
    let result = markdown::table(
        &headings,
        &[vec![
            name,
            markdown::image(reference_image),
            markdown::image(result_image),
            markdown::image(diff_image),
            format!("{} Diff: {}", get_result_mark(diff == 0), diff),
        ]],
    );

    markdown::test_report(
        "MBC3-Tester",
        "https://github.com/EricKirschenmann/MBC3-Tester-gb",
        &result,
    )
}

```

`integration-tests/src/suites/mealybug_tearoom_tests.rs`:

```rs
use std::path::Path;

use gb::emulator::Device;
use glob::glob;

use crate::{
    tests::{execute_tests, VisualTestCase, VisualTestCaseBuilder},
    utils::path_to_basename,
};

const TESTS_PATH: &str = "roms/mealybug-tearoom-tests";

fn get_reference_image_path(test_name: &str) -> String {
    format!("{}/expected/DMG-blob/{}.png", TESTS_PATH, test_name)
}

fn get_files() -> Vec<(String, String)> {
    glob(&format!("{}/build/ppu/*.gb", TESTS_PATH))
        .expect("Failed to read glob pattern")
        .filter_map(|entry| match entry {
            Ok(path) => {
                let path = path.into_os_string().into_string().unwrap();
                let name = path_to_basename(&path).replace(".gb", "");
                Some((name, path))
            }
            Err(e) => panic!("Glob file error, {:?}", e),
        })
        .filter(|(name, _)| {
            // get only tests with existing reference image
            let reference_image = get_reference_image_path(name);
            Path::new(&reference_image).exists()
        })
        .collect::<Vec<(String, String)>>()
}

fn get_tests() -> Vec<VisualTestCase> {
    get_files()
        .into_iter()
        .map(|(name, rom_path)| {
            let reference_original = get_reference_image_path(&name);
            VisualTestCaseBuilder::new(name, rom_path, reference_original, Device::DMG).build()
        })
        .collect()
}

pub async fn run_tests() -> String {
    let tests = get_tests();

    execute_tests(
        "Mealybug Tearoom Tests",
        "https://github.com/mattcurrie/mealybug-tearoom-tests",
        tests,
    )
    .await
}

```

`integration-tests/src/suites/mod.rs`:

```rs
pub mod acid2_tests;
pub mod age_tests;
pub mod blarggs_sound_tests;
pub mod blarggs_tests;
pub mod mbc3_tester;
pub mod mealybug_tearoom_tests;
pub mod mooneye_tests;
pub mod scribbl_tests;
pub mod turtle_tests;
pub mod wilbertpol_tests;

```

`integration-tests/src/suites/mooneye_tests.rs`:

```rs
use futures::{future::join_all, TryFutureExt};

use gb::emulator::{Device, Emulator};
use glob::glob;
use regex::Regex;

use crate::utils::{get_result_mark, path_to_basename};
use crate::{markdown, utils::create_emulator};

/**
 * Test groups:
 *
 * dmg = Game Boy
 * mgb = Game Boy Pocket
 * sgb = Super Game Boy
 * sgb2 = Super Game Boy 2
 * cgb = Game Boy Color
 * agb = Game Boy Advance
 * ags = Game Boy Advance SP
 *
 * G = dmg+mgb
 * S = sgb+sgb2
 * C = cgb+agb+ags
 * A = agb+ags
 */

fn should_collect(basename: String) -> bool {
    // Test with no group -> use
    if !basename.contains('-') {
        return true;
    }

    let re = Regex::new("^(.*)-(?P<group>.*).gb$").unwrap();
    let captures = re.captures(&basename).unwrap();
    let group = captures["group"].to_string();

    // test only dmg + dmgABC
    group.contains('G') || group.contains("dmgABC")
}

fn get_tests() -> Vec<String> {
    let mut files = vec![];
    for entry in glob("./roms/mooneye-test-suite/**/*.gb").expect("Failed to read glob pattern") {
        match entry {
            Ok(path) => {
                let path = path.into_os_string().into_string().unwrap();
                let basename = path_to_basename(&path);
                if should_collect(basename) {
                    files.push(path);
                }
            }
            Err(e) => panic!("Glob file error, {:?}", e),
        }
    }
    files
}

fn is_valid(e: &Emulator) -> bool {
    e.cpu.b == 0x03
        && e.cpu.c == 0x05
        && e.cpu.d == 0x08
        && e.cpu.e == 0x0d
        && e.cpu.h == 0x15
        && e.cpu.l == 0x22
}

type TestResult = (String, bool); // (pathname, valid)

fn execute_test(path: String) -> TestResult {
    let mut e = create_emulator(&path, Device::AutoDetect);

    // mbc2/bits_ramg is the longest one
    let max_frames_to_run = 60 * 8;

    for _ in 0..max_frames_to_run {
        e.run_frame();

        // Dummy check for LD B,B breakpoint
        if !e.hw.events.is_empty() {
            break;
        }
    }

    (path, is_valid(&e))
}

fn generate_test_report(results: Vec<Result<TestResult, String>>) -> String {
    let data = results
        .into_iter()
        .map(|result| match result {
            Ok((path, valid)) => vec![path, get_result_mark(valid)],
            Err(test_name) => vec![test_name, format!("{} (crashes)", get_result_mark(false))],
        })
        .collect::<Vec<Vec<String>>>();

    let headings = ["Test", "Result"];
    let result = markdown::table(&headings, &data);

    markdown::test_report(
        "Mooneye Test Suite",
        "https://github.com/Gekkio/mooneye-test-suite\n\nOnly DMG compatible tests used.",
        &result,
    )
}

pub async fn run_tests() -> String {
    let files = get_tests();

    let mut handles = vec![];
    for file in files {
        let name = file.clone();
        let handle = tokio::spawn(async move { execute_test(file) }).map_err(|_| name);
        handles.push(handle);
    }

    let results = join_all(handles).await;
    generate_test_report(results)
}

```

`integration-tests/src/suites/scribbl_tests.rs`:

```rs
use gb::{emulator::Device, ppu::palettes::DmgPalettes};

use crate::{
    tests::{execute_tests, VisualTestCase, VisualTestCaseBuilder},
    utils::create_path,
};

const TEST_CASES: [(&str, &str, bool); 5] = [
    ("scxly", "scxly/scxly.gb", true),
    ("lycscx", "lycscx/lycscx.gb", true),
    ("lycscy", "lycscy/lycscy.gb", true),
    ("palettely", "palettely/palettely.gb", true),
    ("statcount", "statcount/statcount-auto.gb", false),
];

const TESTS_PATH: &str = "roms/scribbltests";

fn get_tests() -> Vec<VisualTestCase> {
    TEST_CASES
        .iter()
        .map(|(name, rom_base, copy_reference_image)| {
            let rom_path = create_path(&[TESTS_PATH, rom_base]);
            let reference_image = create_path(&[TESTS_PATH, name, "screenshots", "expected.png"]);
            VisualTestCaseBuilder::new(*name, rom_path, reference_image, Device::DMG)
                .copy_reference(*copy_reference_image)
                .set_max_frames(250) // statcount-auto
                .set_palette(DmgPalettes::Green)
                .build()
        })
        .collect()
}

pub async fn run_tests() -> String {
    let tests = get_tests();

    execute_tests(
        "Scribbltests",
        "https://github.com/Hacktix/scribbltests",
        tests,
    )
    .await
}

```

`integration-tests/src/suites/turtle_tests.rs`:

```rs
use gb::emulator::Device;

use crate::{
    tests::{
        execute_tests, get_image_path, ImageResultTypes, VisualTestCase, VisualTestCaseBuilder,
    },
    utils::create_path,
};

const TEST_CASES: [(&str, &str); 2] = [
    ("window_y_trigger", "window_y_trigger/window_y_trigger.gb"),
    (
        "window_y_trigger_wx_offscreen",
        "window_y_trigger_wx_offscreen/window_y_trigger_wx_offscreen.gb",
    ),
];

const TESTS_PATH: &str = "roms/TurtleTests/src";

fn get_tests() -> Vec<VisualTestCase> {
    TEST_CASES
        .iter()
        .map(|(name, rom_base)| {
            let reference_path = get_image_path(name, ImageResultTypes::Expected);
            let rom_path = create_path(&[TESTS_PATH, rom_base]);
            VisualTestCaseBuilder::new(*name, rom_path, reference_path, Device::DMG)
                .copy_reference(false)
                .build()
        })
        .collect()
}

pub async fn run_tests() -> String {
    let tests = get_tests();

    execute_tests(
        "TurtleTests",
        "https://github.com/Powerlated/TurtleTests",
        tests,
    )
    .await
}

```

`integration-tests/src/suites/wilbertpol_tests.rs`:

```rs
use futures::{future::join_all, TryFutureExt};

use gb::emulator::{Device, Emulator};
use glob::glob;
use regex::Regex;

use crate::utils::{get_result_mark, path_to_basename};
use crate::{markdown, utils::create_emulator};

/**
 * Test groups:
 *
 * dmg = Game Boy
 * mgb = Game Boy Pocket
 * sgb = Super Game Boy
 * sgb2 = Super Game Boy 2
 * cgb = Game Boy Color
 * agb = Game Boy Advance
 * ags = Game Boy Advance SP
 *
 * G = dmg+mgb
 * S = sgb+sgb2
 * C = cgb+agb+ags
 * A = agb+ags
 */

fn should_collect(basename: String) -> bool {
    // Test with no group -> use
    if !basename.contains('-') {
        return true;
    }

    let re = Regex::new("^(.*)-(?P<group>.*).gb$").unwrap();
    let captures = re.captures(&basename).unwrap();
    let group = captures["group"].to_string();

    // TODO test dmgABC as well?
    // test only dmg0 + G groups
    group.contains('G') || group.contains("dmg0")
}

fn get_tests() -> Vec<String> {
    let mut files = vec![];
    for entry in glob("./roms/wilbertpol-test-suite/**/*.gb").expect("Failed to read glob pattern")
    {
        match entry {
            Ok(path) => {
                let path = path.into_os_string().into_string().unwrap();
                let basename = path_to_basename(&path);
                if should_collect(basename) {
                    files.push(path);
                }
            }
            Err(e) => panic!("Glob file error, {:?}", e),
        }
    }
    files
}

fn is_valid(e: &Emulator) -> bool {
    e.cpu.b == 0x03
        && e.cpu.c == 0x05
        && e.cpu.d == 0x08
        && e.cpu.e == 0x0d
        && e.cpu.h == 0x15
        && e.cpu.l == 0x22
}

type TestResult = (String, bool); // (pathname, valid)

fn execute_test(path: String) -> TestResult {
    let mut e = create_emulator(&path, Device::AutoDetect);

    let max_frames_to_run = 60;

    for _ in 0..max_frames_to_run {
        e.run_frame();

        // Dummy check for LD B,B breakpoint
        if !e.hw.events.is_empty() {
            break;
        }
    }

    (path, is_valid(&e))
}

fn generate_test_report(results: Vec<Result<TestResult, String>>) -> String {
    let data = results
        .into_iter()
        .map(|result| match result {
            Ok((path, valid)) => vec![path, get_result_mark(valid)],
            Err(test_name) => vec![test_name, format!("{} (crashes)", get_result_mark(false))],
        })
        .collect::<Vec<Vec<String>>>();

    let headings = ["Test", "Result"];
    let result = markdown::table(&headings, &data);

    markdown::test_report(
        "Wilbertpol's tests",
        "From https://github.com/vojty/wilbertpol-test-suite",
        &result,
    )
}

pub async fn run_tests() -> String {
    let files = get_tests();

    let mut handles = vec![];
    for file in files {
        let name = file.clone();
        let handle = tokio::spawn(async move { execute_test(file) }).map_err(|_| name);
        handles.push(handle);
    }

    let results = join_all(handles).await;
    generate_test_report(results)
}

```

`integration-tests/src/tests.rs`:

```rs
use futures::{future::join_all, TryFutureExt};

use gb::{
    emulator::{Device, Emulator},
    events::Events,
    ppu::palettes::DmgPalettes,
};

use crate::{
    markdown,
    utils::{
        copy_file, create_emulator, create_path, get_result_mark, save_diff_image, save_screen,
        OUTPUT_DIR,
    },
};

pub struct VisualTestCaseBuilder {
    test: VisualTestCase,
}

type EndCallback = fn(&Emulator) -> bool;

impl VisualTestCaseBuilder {
    pub fn new(
        name: impl Into<String>,
        rom_path: impl Into<String>,
        reference_path: impl Into<String>,
        device: Device,
    ) -> Self {
        let test = VisualTestCase {
            name: name.into(),
            rom_path: rom_path.into(),
            reference_path: reference_path.into(),
            copy_reference: true,
            has_breakpoint: true,
            max_frames: 10,
            palette: DmgPalettes::Gray,
            end_callback: |_| false,
            device,
        };
        Self { test }
    }

    pub fn set_max_frames(mut self, frames: u32) -> Self {
        self.test.max_frames = frames;
        self
    }

    pub fn set_end_callback(mut self, callback: EndCallback) -> Self {
        self.test.end_callback = callback;
        self
    }

    pub fn set_palette(mut self, palette: DmgPalettes) -> Self {
        self.test.palette = palette;
        self
    }

    pub fn has_breakpoint(mut self, has_breakpoint: bool) -> Self {
        self.test.has_breakpoint = has_breakpoint;
        self
    }

    pub fn copy_reference(mut self, copy_reference: bool) -> Self {
        self.test.copy_reference = copy_reference;
        self
    }

    pub fn build(self) -> VisualTestCase {
        self.test
    }
}

pub struct VisualTestCase {
    name: String,

    rom_path: String,
    reference_path: String,
    device: Device,

    copy_reference: bool,
    max_frames: u32,
    has_breakpoint: bool,
    palette: DmgPalettes,

    end_callback: EndCallback,
}

pub enum ImageResultTypes {
    Result,
    Expected,
    Diff,
}

pub fn get_image_path(name: &str, file_type: ImageResultTypes) -> String {
    let filename = match file_type {
        ImageResultTypes::Diff => "diff.png",
        ImageResultTypes::Expected => "expected.png",
        ImageResultTypes::Result => "result.png",
    };
    create_path(&[OUTPUT_DIR, name, filename])
}

type TestResult = (String, String, String, String, usize); // (name, reference path, result path, diff path, diff)

impl VisualTestCase {
    pub fn get_name(&self) -> &String {
        &self.name
    }

    pub fn get_rom_path(&self) -> &String {
        &self.rom_path
    }

    fn get_image_path(&self, file_type: ImageResultTypes) -> String {
        get_image_path(&self.name, file_type)
    }

    pub fn create_result(&self) -> TestResult {
        let mut e = create_emulator(self.get_rom_path(), self.device);
        e.set_system_palette(&self.palette);

        // Copy original expected
        let expected_path = self.get_image_path(ImageResultTypes::Expected);
        if self.copy_reference {
            copy_file(&self.reference_path, &expected_path);
        }

        // Execute
        for _ in 0..self.max_frames {
            e.run_frame();

            // End callback check
            if (self.end_callback)(&e) {
                break;
            }

            // Check for magic breakpoint LD B,B
            if self.has_breakpoint && e.hw.events.contains(Events::MAGIC_BREAKPOINT) {
                break;
            }
        }

        // Save result
        let result_path = self.get_image_path(ImageResultTypes::Result);
        save_screen(&e, &result_path);

        // Generate and save diff
        let diff_path = self.get_image_path(ImageResultTypes::Diff);
        let diff = save_diff_image(&expected_path, &result_path, &diff_path);

        (
            self.name.clone(),
            expected_path,
            result_path,
            diff_path,
            diff,
        )
    }
}

fn generate_table(results: Vec<Result<TestResult, String>>) -> String {
    let data = results
        .into_iter()
        .map(|result| match result {
            Ok((name, reference_image, result_image, diff_image, diff)) => vec![
                name,
                markdown::image(reference_image),
                markdown::image(result_image),
                markdown::image(diff_image),
                format!("{} Diff: {}", get_result_mark(diff == 0), diff),
            ],
            Err(test_name) => vec![test_name, format!("{} (crashes)", get_result_mark(false))],
        })
        .collect::<Vec<Vec<String>>>();

    let headings = ["Name", "Expected", "Result", "Diff", "Status"];
    markdown::table(&headings, &data)
}

pub async fn execute_tests(
    name: impl Into<String>,
    info: impl Into<String>,
    tests: Vec<VisualTestCase>,
) -> String {
    let mut handles = vec![];
    for test in tests {
        let name = test.get_name().clone();
        let handle = tokio::spawn(async move { test.create_result() }).map_err(|_| name);
        handles.push(handle);
    }

    let results = join_all(handles).await;
    let md_table = generate_table(results);

    markdown::test_report(&name.into(), &info.into(), &md_table)
}

```

`integration-tests/src/utils.rs`:

```rs
use std::{
    fs::{self, create_dir_all, File},
    io::Read,
    path::{Path, PathBuf},
};

use gb::{
    audio::AudioDevice,
    cartridges::cartridge::Cartridge,
    constants::{DISPLAY_HEIGHT, DISPLAY_WIDTH},
    emulator::{Device, Emulator},
};
use image::ImageBuffer;
use pixelmatch::pixelmatch;

pub const OUTPUT_DIR: &str = "docs/results";

fn get_file_as_byte_vec(filename: &str) -> Vec<u8> {
    let mut f = File::open(filename).expect("no file found");

    let mut data = vec![];
    f.read_to_end(&mut data).unwrap();

    data
}

pub fn path_to_basename(path: &str) -> String {
    match path.split('/').last() {
        Some(last) => last.to_string(),
        None => panic!("Can't get basename from path {}", path),
    }
}

pub fn get_result_mark(valid: bool) -> String {
    if valid {
        String::from('✅')
    } else {
        String::from('❌')
    }
}

pub fn create_path(paths: &[&str]) -> String {
    paths
        .iter()
        .collect::<PathBuf>()
        .to_str()
        .unwrap()
        .to_string()
}

struct DummyAudio;

impl AudioDevice for DummyAudio {
    fn queue(&mut self, _buffer: &[f32]) {
        // noop - no sound for tests
    }
}

pub fn create_emulator(path: &str, device: Device) -> Emulator {
    let binary = get_file_as_byte_vec(path);
    let cartridge = Cartridge::from_bytes(&binary);
    Emulator::new(false, cartridge, Box::new(DummyAudio {}), device)
}

pub fn save_screen(e: &Emulator, path: impl Into<String>) {
    let screen = e.get_screen_buffer();
    let image = ImageBuffer::from_fn(DISPLAY_WIDTH as u32, DISPLAY_HEIGHT as u32, |x, y| {
        let pixel = screen.get_pixel(x as usize, y as usize);
        image::Rgb([pixel.r, pixel.g, pixel.b])
    });

    let path: String = path.into();

    let directory = Path::new(&path).parent().unwrap();
    create_dir_all(directory).unwrap();

    image.save(&path).unwrap();
}

pub fn copy_file(from: &str, to: &str) {
    let to_directory = Path::new(&to).parent().unwrap();

    create_dir_all(to_directory).unwrap_or_else(|_| {
        panic!(
            "Can't create target directory {}",
            to_directory.to_str().unwrap()
        )
    });
    fs::copy(from, to)
        .unwrap_or_else(|error| panic!("Can't copy [{}] -> [{}]. Error {}", from, to, error));
}

pub fn save_diff_image(reference_image: &str, result_image: &str, diff_image: &str) -> usize {
    let reference =
        File::open(reference_image).unwrap_or_else(|_| panic!("Can't open {}", reference_image));
    let result = File::open(result_image).unwrap();

    let mut diff_image_data = Vec::new();
    let output = Some(&mut diff_image_data);

    let diff = pixelmatch(
        reference,
        result,
        output,
        Some(DISPLAY_WIDTH as u32),
        Some(DISPLAY_HEIGHT as u32),
        None,
    )
    .unwrap();

    std::fs::write(diff_image, diff_image_data).unwrap();

    diff
}

```

`package.json`:

```json
{
  "name": "feather-gb",
  "license": "UNLICENSED",
  "homepage": "https://vojty.github.io/feather-gb/",
  "scripts": {
    "build": "pnpm run build:gb && pnpm run build:debugger && rimraf public && vite build && gzip --keep --recursive public",
    "build:gb": "wasm-pack build --release ./gb-web --target bundler",
    "build:debugger": "wasm-pack build --release ./debugger-web --target bundler",
    "dev": "pnpm run build:gb && pnpm run build:debugger && vite dev",
    "preview": "vite preview",
    "debugger": "cargo run -p debugger --release",
    "desktop": "cargo run -p desktop --release",
    "tests": "cargo run -p integration-tests --release",
    "lint": "eslint --ext .tsx,.ts,.js,.jsx browser vite.config.mts",
    "tsc": "tsc --noEmit",
    "validate": "pnpm run tsc && pnpm run lint",
    "prettier": "prettier --write \"browser/**/*.{js,jsx,ts,tsx,json,css,scss,md}\""
  },
  "devDependencies": {
    "@darkobits/vite-plugin-favicons": "^0.3.0",
    "@types/babel__core": "^7.20.0",
    "@types/node": "^18.11.18",
    "@types/prettier": "^2.7.2",
    "@types/react": "^17.0.39",
    "@types/react-dom": "^17.0.13",
    "@types/styled-components": "^5.1.26",
    "@typescript-eslint/eslint-plugin": "^5.59.6",
    "@typescript-eslint/parser": "^5.59.6",
    "@vitejs/plugin-react": "^4.0.0",
    "autoprefixer": "^10.4.14",
    "eslint": "^8.41.0",
    "eslint-config-airbnb": "^19.0.4",
    "eslint-config-prettier": "^8.8.0",
    "eslint-plugin-import": "^2.27.5",
    "eslint-plugin-jsx-a11y": "^6.7.1",
    "eslint-plugin-prettier": "^4.2.1",
    "eslint-plugin-react": "^7.32.2",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-simple-import-sort": "^10.0.0",
    "fast-glob": "^3.2.12",
    "postcss": "^8.4.23",
    "prettier": "^2.8.8",
    "rehype-parse": "^8.0.4",
    "rehype-rewrite": "^3.0.6",
    "rehype-stringify": "^9.0.3",
    "remark": "^14.0.3",
    "remark-gfm": "^3.0.1",
    "remark-html": "^15.0.2",
    "rimraf": "^5.0.1",
    "typescript": "^5.0.4",
    "unified": "^10.1.2",
    "vite": "^4.3.8",
    "vite-plugin-fonts": "^0.7.0",
    "vite-plugin-svgr": "^3.2.0",
    "vite-plugin-wasm": "^3.2.2",
    "vite-plugin-wasm-pack": "^0.1.12"
  },
  "dependencies": {
    "@rehooks/local-storage": "^2.4.4",
    "react": "^17.0.2",
    "react-dom": "^17.0.2",
    "react-is": "^17.0.2",
    "react-router-dom": "^6.11.2",
    "styled-components": "^5.3.6",
    "svgo": "^3.0.2",
    "tailwindcss": "^3.3.2"
  }
}

```

`pnpm-lock.yaml`:

```yaml
lockfileVersion: '6.0'

dependencies:
  '@rehooks/local-storage':
    specifier: ^2.4.4
    version: 2.4.4(react@17.0.2)
  react:
    specifier: ^17.0.2
    version: 17.0.2
  react-dom:
    specifier: ^17.0.2
    version: 17.0.2(react@17.0.2)
  react-is:
    specifier: ^17.0.2
    version: 17.0.2
  react-router-dom:
    specifier: ^6.11.2
    version: 6.11.2(react-dom@17.0.2)(react@17.0.2)
  styled-components:
    specifier: ^5.3.6
    version: 5.3.6(react-dom@17.0.2)(react-is@17.0.2)(react@17.0.2)
  svgo:
    specifier: ^3.0.2
    version: 3.0.2
  tailwindcss:
    specifier: ^3.3.2
    version: 3.3.2

devDependencies:
  '@darkobits/vite-plugin-favicons':
    specifier: ^0.3.0
    version: 0.3.0(typescript@5.0.4)(vite@4.3.8)
  '@types/babel__core':
    specifier: ^7.20.0
    version: 7.20.0
  '@types/node':
    specifier: ^18.11.18
    version: 18.11.18
  '@types/prettier':
    specifier: ^2.7.2
    version: 2.7.2
  '@types/react':
    specifier: ^17.0.39
    version: 17.0.39
  '@types/react-dom':
    specifier: ^17.0.13
    version: 17.0.13
  '@types/styled-components':
    specifier: ^5.1.26
    version: 5.1.26
  '@typescript-eslint/eslint-plugin':
    specifier: ^5.59.6
    version: 5.59.6(@typescript-eslint/parser@5.59.6)(eslint@8.41.0)(typescript@5.0.4)
  '@typescript-eslint/parser':
    specifier: ^5.59.6
    version: 5.59.6(eslint@8.41.0)(typescript@5.0.4)
  '@vitejs/plugin-react':
    specifier: ^4.0.0
    version: 4.0.0(vite@4.3.8)
  autoprefixer:
    specifier: ^10.4.14
    version: 10.4.14(postcss@8.4.23)
  eslint:
    specifier: ^8.41.0
    version: 8.41.0
  eslint-config-airbnb:
    specifier: ^19.0.4
    version: 19.0.4(eslint-plugin-import@2.27.5)(eslint-plugin-jsx-a11y@6.7.1)(eslint-plugin-react-hooks@4.6.0)(eslint-plugin-react@7.32.2)(eslint@8.41.0)
  eslint-config-prettier:
    specifier: ^8.8.0
    version: 8.8.0(eslint@8.41.0)
  eslint-plugin-import:
    specifier: ^2.27.5
    version: 2.27.5(@typescript-eslint/parser@5.59.6)(eslint@8.41.0)
  eslint-plugin-jsx-a11y:
    specifier: ^6.7.1
    version: 6.7.1(eslint@8.41.0)
  eslint-plugin-prettier:
    specifier: ^4.2.1
    version: 4.2.1(eslint-config-prettier@8.8.0)(eslint@8.41.0)(prettier@2.8.8)
  eslint-plugin-react:
    specifier: ^7.32.2
    version: 7.32.2(eslint@8.41.0)
  eslint-plugin-react-hooks:
    specifier: ^4.6.0
    version: 4.6.0(eslint@8.41.0)
  eslint-plugin-simple-import-sort:
    specifier: ^10.0.0
    version: 10.0.0(eslint@8.41.0)
  fast-glob:
    specifier: ^3.2.12
    version: 3.2.12
  postcss:
    specifier: ^8.4.23
    version: 8.4.23
  prettier:
    specifier: ^2.8.8
    version: 2.8.8
  rehype-parse:
    specifier: ^8.0.4
    version: 8.0.4
  rehype-rewrite:
    specifier: ^3.0.6
    version: 3.0.6
  rehype-stringify:
    specifier: ^9.0.3
    version: 9.0.3
  remark:
    specifier: ^14.0.3
    version: 14.0.3
  remark-gfm:
    specifier: ^3.0.1
    version: 3.0.1
  remark-html:
    specifier: ^15.0.2
    version: 15.0.2
  rimraf:
    specifier: ^5.0.1
    version: 5.0.1
  typescript:
    specifier: ^5.0.4
    version: 5.0.4
  unified:
    specifier: ^10.1.2
    version: 10.1.2
  vite:
    specifier: ^4.3.8
    version: 4.3.8(@types/node@18.11.18)
  vite-plugin-fonts:
    specifier: ^0.7.0
    version: 0.7.0(vite@4.3.8)
  vite-plugin-svgr:
    specifier: ^3.2.0
    version: 3.2.0(vite@4.3.8)
  vite-plugin-wasm:
    specifier: ^3.2.2
    version: 3.2.2(vite@4.3.8)
  vite-plugin-wasm-pack:
    specifier: ^0.1.12
    version: 0.1.12

packages:

  /@alloc/quick-lru@5.2.0:
    resolution: {integrity: sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==}
    engines: {node: '>=10'}
    dev: false

  /@ampproject/remapping@2.2.1:
    resolution: {integrity: sha512-lFMjJTrFL3j7L9yBxwYfCq2k6qqwHyzuUl/XBnif78PWTJYyL/dfowQHWE3sp6U6ZzqWiiIZnpTMO96zhkjwtg==}
    engines: {node: '>=6.0.0'}
    dependencies:
      '@jridgewell/gen-mapping': 0.3.3
      '@jridgewell/trace-mapping': 0.3.18
    dev: true

  /@babel/code-frame@7.21.4:
    resolution: {integrity: sha512-LYvhNKfwWSPpocw8GI7gpK2nq3HSDuEPC/uSYaALSJu9xjsalaaYFOq0Pwt5KmVqwEbZlDu81aLXwBOmD/Fv9g==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/highlight': 7.18.6

  /@babel/compat-data@7.21.7:
    resolution: {integrity: sha512-KYMqFYTaenzMK4yUtf4EW9wc4N9ef80FsbMtkwool5zpwl4YrT1SdWYSTRcT94KO4hannogdS+LxY7L+arP3gA==}
    engines: {node: '>=6.9.0'}
    dev: true

  /@babel/core@7.21.8:
    resolution: {integrity: sha512-YeM22Sondbo523Sz0+CirSPnbj9bG3P0CdHcBZdqUuaeOaYEFbOLoGU7lebvGP6P5J/WE9wOn7u7C4J9HvS1xQ==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@ampproject/remapping': 2.2.1
      '@babel/code-frame': 7.21.4
      '@babel/generator': 7.21.5
      '@babel/helper-compilation-targets': 7.21.5(@babel/core@7.21.8)
      '@babel/helper-module-transforms': 7.21.5
      '@babel/helpers': 7.21.5
      '@babel/parser': 7.21.8
      '@babel/template': 7.20.7
      '@babel/traverse': 7.21.5(supports-color@5.5.0)
      '@babel/types': 7.21.5
      convert-source-map: 1.9.0
      debug: 4.3.4(supports-color@5.5.0)
      gensync: 1.0.0-beta.2
      json5: 2.2.3
      semver: 6.3.0
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@babel/generator@7.21.5:
    resolution: {integrity: sha512-SrKK/sRv8GesIW1bDagf9cCG38IOMYZusoe1dfg0D8aiUe3Amvoj1QtjTPAWcfrZFvIwlleLb0gxzQidL9w14w==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/types': 7.21.5
      '@jridgewell/gen-mapping': 0.3.3
      '@jridgewell/trace-mapping': 0.3.18
      jsesc: 2.5.2

  /@babel/helper-annotate-as-pure@7.18.6:
    resolution: {integrity: sha512-duORpUiYrEpzKIop6iNbjnwKLAKnJ47csTyRACyEmWj0QdUrm5aqNJGHSSEQSUAvNW0ojX0dOmK9dZduvkfeXA==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/types': 7.21.5
    dev: false

  /@babel/helper-compilation-targets@7.21.5(@babel/core@7.21.8):
    resolution: {integrity: sha512-1RkbFGUKex4lvsB9yhIfWltJM5cZKUftB2eNajaDv3dCMEp49iBG0K14uH8NnX9IPux2+mK7JGEOB0jn48/J6w==}
    engines: {node: '>=6.9.0'}
    peerDependencies:
      '@babel/core': ^7.0.0
    dependencies:
      '@babel/compat-data': 7.21.7
      '@babel/core': 7.21.8
      '@babel/helper-validator-option': 7.21.0
      browserslist: 4.21.5
      lru-cache: 5.1.1
      semver: 6.3.0
    dev: true

  /@babel/helper-environment-visitor@7.21.5:
    resolution: {integrity: sha512-IYl4gZ3ETsWocUWgsFZLM5i1BYx9SoemminVEXadgLBa9TdeorzgLKm8wWLA6J1N/kT3Kch8XIk1laNzYoHKvQ==}
    engines: {node: '>=6.9.0'}

  /@babel/helper-function-name@7.21.0:
    resolution: {integrity: sha512-HfK1aMRanKHpxemaY2gqBmL04iAPOPRj7DxtNbiDOrJK+gdwkiNRVpCpUJYbUT+aZyemKN8brqTOxzCaG6ExRg==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/template': 7.20.7
      '@babel/types': 7.21.5

  /@babel/helper-hoist-variables@7.18.6:
    resolution: {integrity: sha512-UlJQPkFqFULIcyW5sbzgbkxn2FKRgwWiRexcuaR8RNJRy8+LLveqPjwZV/bwrLZCN0eUHD/x8D0heK1ozuoo6Q==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/types': 7.21.5

  /@babel/helper-module-imports@7.21.4:
    resolution: {integrity: sha512-orajc5T2PsRYUN3ZryCEFeMDYwyw09c/pZeaQEZPH0MpKzSvn3e0uXsDBu3k03VI+9DBiRo+l22BfKTpKwa/Wg==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/types': 7.21.5

  /@babel/helper-module-transforms@7.21.5:
    resolution: {integrity: sha512-bI2Z9zBGY2q5yMHoBvJ2a9iX3ZOAzJPm7Q8Yz6YeoUjU/Cvhmi2G4QyTNyPBqqXSgTjUxRg3L0xV45HvkNWWBw==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/helper-environment-visitor': 7.21.5
      '@babel/helper-module-imports': 7.21.4
      '@babel/helper-simple-access': 7.21.5
      '@babel/helper-split-export-declaration': 7.18.6
      '@babel/helper-validator-identifier': 7.19.1
      '@babel/template': 7.20.7
      '@babel/traverse': 7.21.5(supports-color@5.5.0)
      '@babel/types': 7.21.5
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@babel/helper-plugin-utils@7.21.5:
    resolution: {integrity: sha512-0WDaIlXKOX/3KfBK/dwP1oQGiPh6rjMkT7HIRv7i5RR2VUMwrx5ZL0dwBkKx7+SW1zwNdgjHd34IMk5ZjTeHVg==}
    engines: {node: '>=6.9.0'}
    dev: true

  /@babel/helper-simple-access@7.21.5:
    resolution: {integrity: sha512-ENPDAMC1wAjR0uaCUwliBdiSl1KBJAVnMTzXqi64c2MG8MPR6ii4qf7bSXDqSFbr4W6W028/rf5ivoHop5/mkg==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/types': 7.21.5
    dev: true

  /@babel/helper-split-export-declaration@7.18.6:
    resolution: {integrity: sha512-bde1etTx6ZyTmobl9LLMMQsaizFVZrquTEHOqKeQESMKo4PlObf+8+JA25ZsIpZhT/WEd39+vOdLXAFG/nELpA==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/types': 7.21.5

  /@babel/helper-string-parser@7.21.5:
    resolution: {integrity: sha512-5pTUx3hAJaZIdW99sJ6ZUUgWq/Y+Hja7TowEnLNMm1VivRgZQL3vpBY3qUACVsvw+yQU6+YgfBVmcbLaZtrA1w==}
    engines: {node: '>=6.9.0'}

  /@babel/helper-validator-identifier@7.19.1:
    resolution: {integrity: sha512-awrNfaMtnHUr653GgGEs++LlAvW6w+DcPrOliSMXWCKo597CwL5Acf/wWdNkf/tfEQE3mjkeD1YOVZOUV/od1w==}
    engines: {node: '>=6.9.0'}

  /@babel/helper-validator-option@7.21.0:
    resolution: {integrity: sha512-rmL/B8/f0mKS2baE9ZpyTcTavvEuWhTTW8amjzXNvYG4AwBsqTLikfXsEofsJEfKHf+HQVQbFOHy6o+4cnC/fQ==}
    engines: {node: '>=6.9.0'}
    dev: true

  /@babel/helpers@7.21.5:
    resolution: {integrity: sha512-BSY+JSlHxOmGsPTydUkPf1MdMQ3M81x5xGCOVgWM3G8XH77sJ292Y2oqcp0CbbgxhqBuI46iUz1tT7hqP7EfgA==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/template': 7.20.7
      '@babel/traverse': 7.21.5(supports-color@5.5.0)
      '@babel/types': 7.21.5
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@babel/highlight@7.18.6:
    resolution: {integrity: sha512-u7stbOuYjaPezCuLj29hNW1v64M2Md2qupEKP1fHc7WdOA3DgLh37suiSrZYY7haUB7iBeQZ9P1uiRF359do3g==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/helper-validator-identifier': 7.19.1
      chalk: 2.4.2
      js-tokens: 4.0.0

  /@babel/parser@7.21.8:
    resolution: {integrity: sha512-6zavDGdzG3gUqAdWvlLFfk+36RilI+Pwyuuh7HItyeScCWP3k6i8vKclAQ0bM/0y/Kz/xiwvxhMv9MgTJP5gmA==}
    engines: {node: '>=6.0.0'}
    hasBin: true
    dependencies:
      '@babel/types': 7.21.5

  /@babel/plugin-transform-react-jsx-self@7.21.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-f/Eq+79JEu+KUANFks9UZCcvydOOGMgF7jBrcwjHa5jTZD8JivnhCJYvmlhR/WTXBWonDExPoW0eO/CR4QJirA==}
    engines: {node: '>=6.9.0'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
      '@babel/helper-plugin-utils': 7.21.5
    dev: true

  /@babel/plugin-transform-react-jsx-source@7.19.6(@babel/core@7.21.8):
    resolution: {integrity: sha512-RpAi004QyMNisst/pvSanoRdJ4q+jMCWyk9zdw/CyLB9j8RXEahodR6l2GyttDRyEVWZtbN+TpLiHJ3t34LbsQ==}
    engines: {node: '>=6.9.0'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
      '@babel/helper-plugin-utils': 7.21.5
    dev: true

  /@babel/runtime@7.21.5:
    resolution: {integrity: sha512-8jI69toZqqcsnqGGqwGS4Qb1VwLOEp4hz+CXPywcvjs60u3B4Pom/U/7rm4W8tMOYEB+E9wgD0mW1l3r8qlI9Q==}
    engines: {node: '>=6.9.0'}
    dependencies:
      regenerator-runtime: 0.13.11
    dev: true

  /@babel/template@7.20.7:
    resolution: {integrity: sha512-8SegXApWe6VoNw0r9JHpSteLKTpTiLZ4rMlGIm9JQ18KiCtyQiAMEazujAHrUS5flrcqYZa75ukev3P6QmUwUw==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/code-frame': 7.21.4
      '@babel/parser': 7.21.8
      '@babel/types': 7.21.5

  /@babel/traverse@7.21.5(supports-color@5.5.0):
    resolution: {integrity: sha512-AhQoI3YjWi6u/y/ntv7k48mcrCXmus0t79J9qPNlk/lAsFlCiJ047RmbfMOawySTHtywXhbXgpx/8nXMYd+oFw==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/code-frame': 7.21.4
      '@babel/generator': 7.21.5
      '@babel/helper-environment-visitor': 7.21.5
      '@babel/helper-function-name': 7.21.0
      '@babel/helper-hoist-variables': 7.18.6
      '@babel/helper-split-export-declaration': 7.18.6
      '@babel/parser': 7.21.8
      '@babel/types': 7.21.5
      debug: 4.3.4(supports-color@5.5.0)
      globals: 11.12.0
    transitivePeerDependencies:
      - supports-color

  /@babel/types@7.21.5:
    resolution: {integrity: sha512-m4AfNvVF2mVC/F7fDEdH2El3HzUg9It/XsCxZiOTTA3m3qYfcSVSbTfM6Q9xG+hYDniZssYhlXKKUMD5m8tF4Q==}
    engines: {node: '>=6.9.0'}
    dependencies:
      '@babel/helper-string-parser': 7.21.5
      '@babel/helper-validator-identifier': 7.19.1
      to-fast-properties: 2.0.0

  /@darkobits/env@1.3.5:
    resolution: {integrity: sha512-E/C7Shhm9T6XUGmdFVuIwVUEyJcCo80m8ksxBEK1SJOrH6FvaTKBKnvD/2R4LyfHysxBFbz4HsgMqHMu9o1s1A==}
    dev: true

  /@darkobits/log@2.0.0-beta.16:
    resolution: {integrity: sha512-aiwtq11fBFik3DRuLXL+k+5Ymjie5Jfd7nA0CuD8cqIBSElj6dSgEqbCvcHTJ1IHysos4H6vEIE4hs/QfaE4gQ==}
    dependencies:
      '@darkobits/env': 1.3.5
      '@darkobits/mask-string': 2.0.1
      '@darkobits/sleep': 1.0.4
      ansi-escapes: 4.3.2
      callsite-record: 4.1.5
      chalk: 4.1.2
      clean-stack: 3.0.1
      cli-spinners: 2.9.0
      date-fns: 2.30.0
      deepmerge: 4.3.1
      is-ci: 3.0.1
      is-plain-object: 5.0.0
      over-9000: 9000.1.4
      ow: 0.22.0
      pretty-ms: 7.0.1
      source-map-support: 0.5.21
      strip-ansi: 6.0.1
      strip-indent: 3.0.0
    dev: true

  /@darkobits/mask-string@2.0.1:
    resolution: {integrity: sha512-jNboxfoD6zzVCfBnl4gg3ZWo+gXAhXYihc+RTgnYma+Ey1YEslYdLGuj/O4prkNFnC7UnLMDbZ3EoUUZV0hJpA==}
    engines: {node: '>= 12.0.0'}
    dev: true

  /@darkobits/sleep@1.0.4:
    resolution: {integrity: sha512-CQv7leAj3fXnsSOvsAqugg6xbtqcyonpTLlCyajuwLx3uaO9d7qXUpTfVlPlh3hoW+fif/tZJP9lmdaxHeHhOA==}
    dependencies:
      ms: 2.1.3
    dev: true

  /@darkobits/valida@0.1.6(typescript@5.0.4):
    resolution: {integrity: sha512-VISYOmYC61XEoyNil4MCzt9/8ge5pwGHNXjXeHNIjqqB7QXAsuDEjfasSXNcdFf6apw11iegxK+U+DMSNMXdcg==}
    engines: {node: '>=14', npm: '>=7'}
    dependencies:
      deepmerge: 4.3.1
      fastest-levenshtein: 1.0.16
      is-plain-object: 5.0.0
      ow: 0.28.1
      ramda: 0.28.0
      ts-essentials: 9.3.2(typescript@5.0.4)
    transitivePeerDependencies:
      - typescript
    dev: true

  /@darkobits/vite-plugin-favicons@0.3.0(typescript@5.0.4)(vite@4.3.8):
    resolution: {integrity: sha512-V1jLNBeHU5zHEL+URENjr1g5+B5+iYil9212cNMiHa/pt1C2rXKXOsSrQP/yxUjgXCsrmVV2KyoA0cRBIrQ33w==}
    engines: {node: '>=16', npm: '>=8'}
    peerDependencies:
      vite: ^4.0.4
    dependencies:
      '@darkobits/log': 2.0.0-beta.16
      '@darkobits/valida': 0.1.6(typescript@5.0.4)
      cacache: 17.1.3
      fast-json-stable-stringify: 2.1.0
      favicons: 7.1.2
      find-cache-dir: 3.3.2
      fs-extra: 11.1.1
      parse5: 7.1.2
      ssri: 10.0.4
      ts-essentials: 9.3.2(typescript@5.0.4)
      vite: 4.3.8(@types/node@18.11.18)
    transitivePeerDependencies:
      - typescript
    dev: true

  /@devexpress/error-stack-parser@2.0.6:
    resolution: {integrity: sha512-fneVypElGUH6Be39mlRZeAu00pccTlf4oVuzf9xPJD1cdEqI8NyAiQua/EW7lZdrbMUbgyXcJmfKPefhYius3A==}
    dependencies:
      stackframe: 1.3.4
    dev: true

  /@emotion/is-prop-valid@1.2.1:
    resolution: {integrity: sha512-61Mf7Ufx4aDxx1xlDeOm8aFFigGHE4z+0sKCa+IHCeZKiyP9RLD0Mmx7m8b9/Cf37f7NAvQOOJAbQQGVr5uERw==}
    dependencies:
      '@emotion/memoize': 0.8.1
    dev: false

  /@emotion/memoize@0.8.1:
    resolution: {integrity: sha512-W2P2c/VRW1/1tLox0mVUalvnWXxavmv/Oum2aPsRcoDJuob75FC3Y8FbpfLwUegRcxINtGUMPq0tFCvYNTBXNA==}
    dev: false

  /@emotion/stylis@0.8.5:
    resolution: {integrity: sha512-h6KtPihKFn3T9fuIrwvXXUOwlx3rfUvfZIcP5a6rh8Y7zjE3O06hT5Ss4S/YI1AYhuZ1kjaE/5EaOOI2NqSylQ==}
    dev: false

  /@emotion/unitless@0.7.5:
    resolution: {integrity: sha512-OWORNpfjMsSSUBVrRBVGECkhWcULOAJz9ZW8uK9qgxD+87M7jHRcvh/A96XXNhXTLmKcoYSQtBEX7lHMO7YRwg==}
    dev: false

  /@esbuild/android-arm64@0.17.19:
    resolution: {integrity: sha512-KBMWvEZooR7+kzY0BtbTQn0OAYY7CsiydT63pVEaPtVYF0hXbUaOyZog37DKxK7NF3XacBJOpYT4adIJh+avxA==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [android]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/android-arm@0.17.19:
    resolution: {integrity: sha512-rIKddzqhmav7MSmoFCmDIb6e2W57geRsM94gV2l38fzhXMwq7hZoClug9USI2pFRGL06f4IOPHHpFNOkWieR8A==}
    engines: {node: '>=12'}
    cpu: [arm]
    os: [android]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/android-x64@0.17.19:
    resolution: {integrity: sha512-uUTTc4xGNDT7YSArp/zbtmbhO0uEEK9/ETW29Wk1thYUJBz3IVnvgEiEwEa9IeLyvnpKrWK64Utw2bgUmDveww==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [android]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/darwin-arm64@0.17.19:
    resolution: {integrity: sha512-80wEoCfF/hFKM6WE1FyBHc9SfUblloAWx6FJkFWTWiCoht9Mc0ARGEM47e67W9rI09YoUxJL68WHfDRYEAvOhg==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [darwin]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/darwin-x64@0.17.19:
    resolution: {integrity: sha512-IJM4JJsLhRYr9xdtLytPLSH9k/oxR3boaUIYiHkAawtwNOXKE8KoU8tMvryogdcT8AU+Bflmh81Xn6Q0vTZbQw==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [darwin]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/freebsd-arm64@0.17.19:
    resolution: {integrity: sha512-pBwbc7DufluUeGdjSU5Si+P3SoMF5DQ/F/UmTSb8HXO80ZEAJmrykPyzo1IfNbAoaqw48YRpv8shwd1NoI0jcQ==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [freebsd]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/freebsd-x64@0.17.19:
    resolution: {integrity: sha512-4lu+n8Wk0XlajEhbEffdy2xy53dpR06SlzvhGByyg36qJw6Kpfk7cp45DR/62aPH9mtJRmIyrXAS5UWBrJT6TQ==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [freebsd]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/linux-arm64@0.17.19:
    resolution: {integrity: sha512-ct1Tg3WGwd3P+oZYqic+YZF4snNl2bsnMKRkb3ozHmnM0dGWuxcPTTntAF6bOP0Sp4x0PjSF+4uHQ1xvxfRKqg==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [linux]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/linux-arm@0.17.19:
    resolution: {integrity: sha512-cdmT3KxjlOQ/gZ2cjfrQOtmhG4HJs6hhvm3mWSRDPtZ/lP5oe8FWceS10JaSJC13GBd4eH/haHnqf7hhGNLerA==}
    engines: {node: '>=12'}
    cpu: [arm]
    os: [linux]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/linux-ia32@0.17.19:
    resolution: {integrity: sha512-w4IRhSy1VbsNxHRQpeGCHEmibqdTUx61Vc38APcsRbuVgK0OPEnQ0YD39Brymn96mOx48Y2laBQGqgZ0j9w6SQ==}
    engines: {node: '>=12'}
    cpu: [ia32]
    os: [linux]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/linux-loong64@0.17.19:
    resolution: {integrity: sha512-2iAngUbBPMq439a+z//gE+9WBldoMp1s5GWsUSgqHLzLJ9WoZLZhpwWuym0u0u/4XmZ3gpHmzV84PonE+9IIdQ==}
    engines: {node: '>=12'}
    cpu: [loong64]
    os: [linux]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/linux-mips64el@0.17.19:
    resolution: {integrity: sha512-LKJltc4LVdMKHsrFe4MGNPp0hqDFA1Wpt3jE1gEyM3nKUvOiO//9PheZZHfYRfYl6AwdTH4aTcXSqBerX0ml4A==}
    engines: {node: '>=12'}
    cpu: [mips64el]
    os: [linux]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/linux-ppc64@0.17.19:
    resolution: {integrity: sha512-/c/DGybs95WXNS8y3Ti/ytqETiW7EU44MEKuCAcpPto3YjQbyK3IQVKfF6nbghD7EcLUGl0NbiL5Rt5DMhn5tg==}
    engines: {node: '>=12'}
    cpu: [ppc64]
    os: [linux]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/linux-riscv64@0.17.19:
    resolution: {integrity: sha512-FC3nUAWhvFoutlhAkgHf8f5HwFWUL6bYdvLc/TTuxKlvLi3+pPzdZiFKSWz/PF30TB1K19SuCxDTI5KcqASJqA==}
    engines: {node: '>=12'}
    cpu: [riscv64]
    os: [linux]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/linux-s390x@0.17.19:
    resolution: {integrity: sha512-IbFsFbxMWLuKEbH+7sTkKzL6NJmG2vRyy6K7JJo55w+8xDk7RElYn6xvXtDW8HCfoKBFK69f3pgBJSUSQPr+4Q==}
    engines: {node: '>=12'}
    cpu: [s390x]
    os: [linux]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/linux-x64@0.17.19:
    resolution: {integrity: sha512-68ngA9lg2H6zkZcyp22tsVt38mlhWde8l3eJLWkyLrp4HwMUr3c1s/M2t7+kHIhvMjglIBrFpncX1SzMckomGw==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [linux]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/netbsd-x64@0.17.19:
    resolution: {integrity: sha512-CwFq42rXCR8TYIjIfpXCbRX0rp1jo6cPIUPSaWwzbVI4aOfX96OXY8M6KNmtPcg7QjYeDmN+DD0Wp3LaBOLf4Q==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [netbsd]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/openbsd-x64@0.17.19:
    resolution: {integrity: sha512-cnq5brJYrSZ2CF6c35eCmviIN3k3RczmHz8eYaVlNasVqsNY+JKohZU5MKmaOI+KkllCdzOKKdPs762VCPC20g==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [openbsd]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/sunos-x64@0.17.19:
    resolution: {integrity: sha512-vCRT7yP3zX+bKWFeP/zdS6SqdWB8OIpaRq/mbXQxTGHnIxspRtigpkUcDMlSCOejlHowLqII7K2JKevwyRP2rg==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [sunos]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/win32-arm64@0.17.19:
    resolution: {integrity: sha512-yYx+8jwowUstVdorcMdNlzklLYhPxjniHWFKgRqH7IFlUEa0Umu3KuYplf1HUZZ422e3NU9F4LGb+4O0Kdcaag==}
    engines: {node: '>=12'}
    cpu: [arm64]
    os: [win32]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/win32-ia32@0.17.19:
    resolution: {integrity: sha512-eggDKanJszUtCdlVs0RB+h35wNlb5v4TWEkq4vZcmVt5u/HiDZrTXe2bWFQUez3RgNHwx/x4sk5++4NSSicKkw==}
    engines: {node: '>=12'}
    cpu: [ia32]
    os: [win32]
    requiresBuild: true
    dev: true
    optional: true

  /@esbuild/win32-x64@0.17.19:
    resolution: {integrity: sha512-lAhycmKnVOuRYNtRtatQR1LPQf2oYCkRGkSFnseDAKPl8lu5SOsK/e1sXe5a0Pc5kHIHe6P2I/ilntNv2xf3cA==}
    engines: {node: '>=12'}
    cpu: [x64]
    os: [win32]
    requiresBuild: true
    dev: true
    optional: true

  /@eslint-community/eslint-utils@4.4.0(eslint@8.41.0):
    resolution: {integrity: sha512-1/sA4dwrzBAyeUoQ6oxahHKmrZvsnLCg4RfxW3ZFGGmQkSNQPFNLV9CUEFQP1x9EYXHTo5p6xdhZM1Ne9p/AfA==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    peerDependencies:
      eslint: ^6.0.0 || ^7.0.0 || >=8.0.0
    dependencies:
      eslint: 8.41.0
      eslint-visitor-keys: 3.4.1
    dev: true

  /@eslint-community/regexpp@4.5.1:
    resolution: {integrity: sha512-Z5ba73P98O1KUYCCJTUeVpja9RcGoMdncZ6T49FCUl2lN38JtCJ+3WgIDBv0AuY4WChU5PmtJmOCTlN6FZTFKQ==}
    engines: {node: ^12.0.0 || ^14.0.0 || >=16.0.0}
    dev: true

  /@eslint/eslintrc@2.0.3:
    resolution: {integrity: sha512-+5gy6OQfk+xx3q0d6jGZZC3f3KzAkXc/IanVxd1is/VIIziRqqt3ongQz0FiTUXqTk0c7aDB3OaFuKnuSoJicQ==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    dependencies:
      ajv: 6.12.6
      debug: 4.3.4(supports-color@5.5.0)
      espree: 9.5.2
      globals: 13.20.0
      ignore: 5.2.4
      import-fresh: 3.3.0
      js-yaml: 4.1.0
      minimatch: 3.1.2
      strip-json-comments: 3.1.1
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@eslint/js@8.41.0:
    resolution: {integrity: sha512-LxcyMGxwmTh2lY9FwHPGWOHmYFCZvbrFCBZL4FzSSsxsRPuhrYUg/49/0KDfW8tnIEaEHtfmn6+NPN+1DqaNmA==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    dev: true

  /@humanwhocodes/config-array@0.11.8:
    resolution: {integrity: sha512-UybHIJzJnR5Qc/MsD9Kr+RpO2h+/P1GhOwdiLPXK5TWk5sgTdu88bTD9UP+CKbPPh5Rni1u0GjAdYQLemG8g+g==}
    engines: {node: '>=10.10.0'}
    dependencies:
      '@humanwhocodes/object-schema': 1.2.1
      debug: 4.3.4(supports-color@5.5.0)
      minimatch: 3.1.2
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@humanwhocodes/module-importer@1.0.1:
    resolution: {integrity: sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==}
    engines: {node: '>=12.22'}
    dev: true

  /@humanwhocodes/object-schema@1.2.1:
    resolution: {integrity: sha512-ZnQMnLV4e7hDlUvw8H+U8ASL02SS2Gn6+9Ac3wGGLIe7+je2AeAOxPY+izIPJDfFDb7eDjev0Us8MO1iFRN8hA==}
    dev: true

  /@isaacs/cliui@8.0.2:
    resolution: {integrity: sha512-O8jcjabXaleOG9DQ0+ARXWZBTfnP4WNAqzuiJK7ll44AmxGKv/J2M4TPjxjY3znBCfvBXFzucm1twdyFybFqEA==}
    engines: {node: '>=12'}
    dependencies:
      string-width: 5.1.2
      string-width-cjs: /string-width@4.2.3
      strip-ansi: 7.0.1
      strip-ansi-cjs: /strip-ansi@6.0.1
      wrap-ansi: 8.1.0
      wrap-ansi-cjs: /wrap-ansi@7.0.0
    dev: true

  /@jridgewell/gen-mapping@0.3.3:
    resolution: {integrity: sha512-HLhSWOLRi875zjjMG/r+Nv0oCW8umGb0BgEhyX3dDX3egwZtB8PqLnjz3yedt8R5StBrzcg4aBpnh8UA9D1BoQ==}
    engines: {node: '>=6.0.0'}
    dependencies:
      '@jridgewell/set-array': 1.1.2
      '@jridgewell/sourcemap-codec': 1.4.15
      '@jridgewell/trace-mapping': 0.3.18

  /@jridgewell/resolve-uri@3.1.0:
    resolution: {integrity: sha512-F2msla3tad+Mfht5cJq7LSXcdudKTWCVYUgw6pLFOOHSTtZlj6SWNYAp+AhuqLmWdBO2X5hPrLcu8cVP8fy28w==}
    engines: {node: '>=6.0.0'}

  /@jridgewell/set-array@1.1.2:
    resolution: {integrity: sha512-xnkseuNADM0gt2bs+BvhO0p78Mk762YnZdsuzFV018NoG1Sj1SCQvpSqa7XUaTam5vAGasABV9qXASMKnFMwMw==}
    engines: {node: '>=6.0.0'}

  /@jridgewell/sourcemap-codec@1.4.14:
    resolution: {integrity: sha512-XPSJHWmi394fuUuzDnGz1wiKqWfo1yXecHQMRf2l6hztTO+nPru658AyDngaBe7isIxEkRsPR3FZh+s7iVa4Uw==}

  /@jridgewell/sourcemap-codec@1.4.15:
    resolution: {integrity: sha512-eF2rxCRulEKXHTRiDrDy6erMYWqNw4LPdQ8UQA4huuxaQsVeRPFl2oM8oDGxMFhJUWZf9McpLtJasDDZb/Bpeg==}

  /@jridgewell/trace-mapping@0.3.18:
    resolution: {integrity: sha512-w+niJYzMHdd7USdiH2U6869nqhD2nbfZXND5Yp93qIbEmnDNk7PD48o+YchRVpzMU7M6jVCbenTR7PA1FLQ9pA==}
    dependencies:
      '@jridgewell/resolve-uri': 3.1.0
      '@jridgewell/sourcemap-codec': 1.4.14

  /@nodelib/fs.scandir@2.1.5:
    resolution: {integrity: sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==}
    engines: {node: '>= 8'}
    dependencies:
      '@nodelib/fs.stat': 2.0.5
      run-parallel: 1.2.0

  /@nodelib/fs.stat@2.0.5:
    resolution: {integrity: sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==}
    engines: {node: '>= 8'}

  /@nodelib/fs.walk@1.2.8:
    resolution: {integrity: sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==}
    engines: {node: '>= 8'}
    dependencies:
      '@nodelib/fs.scandir': 2.1.5
      fastq: 1.15.0

  /@npmcli/fs@3.1.0:
    resolution: {integrity: sha512-7kZUAaLscfgbwBQRbvdMYaZOWyMEcPTH/tJjnyAWJ/dvvs9Ef+CERx/qJb9GExJpl1qipaDGn7KqHnFGGixd0w==}
    engines: {node: ^14.17.0 || ^16.13.0 || >=18.0.0}
    dependencies:
      semver: 7.5.1
    dev: true

  /@pkgjs/parseargs@0.11.0:
    resolution: {integrity: sha512-+1VkjdD0QBLPodGrJUeqarH8VAIvQODIbwh9XpP5Syisf7YoQgsJKPNFoqqLQlu+VQ/tVSshMR6loPMn8U+dPg==}
    engines: {node: '>=14'}
    requiresBuild: true
    dev: true
    optional: true

  /@rehooks/local-storage@2.4.4(react@17.0.2):
    resolution: {integrity: sha512-zE+kfOkG59n/1UTxdmbwktIosclr67Nlbf2MzUJ9mNtCSypVscNHeD1qT6JCSo5Pjj8DO893IKWNLJqKKzDL/Q==}
    peerDependencies:
      react: '>=16.8.0'
    dependencies:
      react: 17.0.2
    dev: false

  /@remix-run/router@1.6.2:
    resolution: {integrity: sha512-LzqpSrMK/3JBAVBI9u3NWtOhWNw5AMQfrUFYB0+bDHTSw17z++WJLsPsxAuK+oSddsxk4d7F/JcdDPM1M5YAhA==}
    engines: {node: '>=14'}
    dev: false

  /@rollup/pluginutils@5.0.2:
    resolution: {integrity: sha512-pTd9rIsP92h+B6wWwFbW8RkZv4hiR/xKsqre4SIuAOaOEQRxi0lqLke9k2/7WegC85GgUs9pjmOjCUi3In4vwA==}
    engines: {node: '>=14.0.0'}
    peerDependencies:
      rollup: ^1.20.0||^2.0.0||^3.0.0
    peerDependenciesMeta:
      rollup:
        optional: true
    dependencies:
      '@types/estree': 1.0.1
      estree-walker: 2.0.2
      picomatch: 2.3.1
    dev: true

  /@sindresorhus/is@4.6.0:
    resolution: {integrity: sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==}
    engines: {node: '>=10'}
    dev: true

  /@svgr/babel-plugin-add-jsx-attribute@7.0.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-khWbXesWIP9v8HuKCl2NU2HNAyqpSQ/vkIl36Nbn4HIwEYSRWL0H7Gs6idJdha2DkpFDWlsqMELvoCE8lfFY6Q==}
    engines: {node: '>=14'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
    dev: true

  /@svgr/babel-plugin-remove-jsx-attribute@7.0.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-iiZaIvb3H/c7d3TH2HBeK91uI2rMhZNwnsIrvd7ZwGLkFw6mmunOCoVnjdYua662MqGFxlN9xTq4fv9hgR4VXQ==}
    engines: {node: '>=14'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
    dev: true

  /@svgr/babel-plugin-remove-jsx-empty-expression@7.0.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-sQQmyo+qegBx8DfFc04PFmIO1FP1MHI1/QEpzcIcclo5OAISsOJPW76ZIs0bDyO/DBSJEa/tDa1W26pVtt0FRw==}
    engines: {node: '>=14'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
    dev: true

  /@svgr/babel-plugin-replace-jsx-attribute-value@7.0.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-i6MaAqIZXDOJeikJuzocByBf8zO+meLwfQ/qMHIjCcvpnfvWf82PFvredEZElErB5glQFJa2KVKk8N2xV6tRRA==}
    engines: {node: '>=14'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
    dev: true

  /@svgr/babel-plugin-svg-dynamic-title@7.0.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-BoVSh6ge3SLLpKC0pmmN9DFlqgFy4NxNgdZNLPNJWBUU7TQpDWeBuyVuDW88iXydb5Cv0ReC+ffa5h3VrKfk1w==}
    engines: {node: '>=14'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
    dev: true

  /@svgr/babel-plugin-svg-em-dimensions@7.0.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-tNDcBa+hYn0gO+GkP/AuNKdVtMufVhU9fdzu+vUQsR18RIJ9RWe7h/pSBY338RO08wArntwbDk5WhQBmhf2PaA==}
    engines: {node: '>=14'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
    dev: true

  /@svgr/babel-plugin-transform-react-native-svg@7.0.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-qw54u8ljCJYL2KtBOjI5z7Nzg8LnSvQOP5hPKj77H4VQL4+HdKbAT5pnkkZLmHKYwzsIHSYKXxHouD8zZamCFQ==}
    engines: {node: '>=14'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
    dev: true

  /@svgr/babel-plugin-transform-svg-component@7.0.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-CcFECkDj98daOg9jE3Bh3uyD9kzevCAnZ+UtzG6+BQG/jOQ2OA3jHnX6iG4G1MCJkUQFnUvEv33NvQfqrb/F3A==}
    engines: {node: '>=12'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
    dev: true

  /@svgr/babel-preset@7.0.0(@babel/core@7.21.8):
    resolution: {integrity: sha512-EX/NHeFa30j5UjldQGVQikuuQNHUdGmbh9kEpBKofGUtF0GUPJ4T4rhoYiqDAOmBOxojyot36JIFiDUHUK1ilQ==}
    engines: {node: '>=14'}
    peerDependencies:
      '@babel/core': ^7.0.0-0
    dependencies:
      '@babel/core': 7.21.8
      '@svgr/babel-plugin-add-jsx-attribute': 7.0.0(@babel/core@7.21.8)
      '@svgr/babel-plugin-remove-jsx-attribute': 7.0.0(@babel/core@7.21.8)
      '@svgr/babel-plugin-remove-jsx-empty-expression': 7.0.0(@babel/core@7.21.8)
      '@svgr/babel-plugin-replace-jsx-attribute-value': 7.0.0(@babel/core@7.21.8)
      '@svgr/babel-plugin-svg-dynamic-title': 7.0.0(@babel/core@7.21.8)
      '@svgr/babel-plugin-svg-em-dimensions': 7.0.0(@babel/core@7.21.8)
      '@svgr/babel-plugin-transform-react-native-svg': 7.0.0(@babel/core@7.21.8)
      '@svgr/babel-plugin-transform-svg-component': 7.0.0(@babel/core@7.21.8)
    dev: true

  /@svgr/core@7.0.0:
    resolution: {integrity: sha512-ztAoxkaKhRVloa3XydohgQQCb0/8x9T63yXovpmHzKMkHO6pkjdsIAWKOS4bE95P/2quVh1NtjSKlMRNzSBffw==}
    engines: {node: '>=14'}
    dependencies:
      '@babel/core': 7.21.8
      '@svgr/babel-preset': 7.0.0(@babel/core@7.21.8)
      camelcase: 6.3.0
      cosmiconfig: 8.1.3
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@svgr/hast-util-to-babel-ast@7.0.0:
    resolution: {integrity: sha512-42Ej9sDDEmsJKjrfQ1PHmiDiHagh/u9AHO9QWbeNx4KmD9yS5d1XHmXUNINfUcykAU+4431Cn+k6Vn5mWBYimQ==}
    engines: {node: '>=14'}
    dependencies:
      '@babel/types': 7.21.5
      entities: 4.5.0
    dev: true

  /@svgr/plugin-jsx@7.0.0:
    resolution: {integrity: sha512-SWlTpPQmBUtLKxXWgpv8syzqIU8XgFRvyhfkam2So8b3BE0OS0HPe5UfmlJ2KIC+a7dpuuYovPR2WAQuSyMoPw==}
    engines: {node: '>=14'}
    dependencies:
      '@babel/core': 7.21.8
      '@svgr/babel-preset': 7.0.0(@babel/core@7.21.8)
      '@svgr/hast-util-to-babel-ast': 7.0.0
      svg-parser: 2.0.4
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@trysound/sax@0.2.0:
    resolution: {integrity: sha512-L7z9BgrNEcYyUYtF+HaEfiS5ebkh9jXqbszz7pC0hRBPaatV0XjSD3+eHrpqFemQfgwiFF0QPIarnIihIDn7OA==}
    engines: {node: '>=10.13.0'}
    dev: false

  /@types/babel__core@7.20.0:
    resolution: {integrity: sha512-+n8dL/9GWblDO0iU6eZAwEIJVr5DWigtle+Q6HLOrh/pdbXOhOtqzq8VPPE2zvNJzSKY4vH/z3iT3tn0A3ypiQ==}
    dependencies:
      '@babel/parser': 7.21.8
      '@babel/types': 7.21.5
      '@types/babel__generator': 7.6.4
      '@types/babel__template': 7.4.1
      '@types/babel__traverse': 7.18.5
    dev: true

  /@types/babel__generator@7.6.4:
    resolution: {integrity: sha512-tFkciB9j2K755yrTALxD44McOrk+gfpIpvC3sxHjRawj6PfnQxrse4Clq5y/Rq+G3mrBurMax/lG8Qn2t9mSsg==}
    dependencies:
      '@babel/types': 7.21.5
    dev: true

  /@types/babel__template@7.4.1:
    resolution: {integrity: sha512-azBFKemX6kMg5Io+/rdGT0dkGreboUVR0Cdm3fz9QJWpaQGJRQXl7C+6hOTCZcMll7KFyEQpgbYI2lHdsS4U7g==}
    dependencies:
      '@babel/parser': 7.21.8
      '@babel/types': 7.21.5
    dev: true

  /@types/babel__traverse@7.18.5:
    resolution: {integrity: sha512-enCvTL8m/EHS/zIvJno9nE+ndYPh1/oNFzRYRmtUqJICG2VnCSBzMLW5VN2KCQU91f23tsNKR8v7VJJQMatl7Q==}
    dependencies:
      '@babel/types': 7.21.5
    dev: true

  /@types/debug@4.1.7:
    resolution: {integrity: sha512-9AonUzyTjXXhEOa0DnqpzZi6VHlqKMswga9EXjpXnnqxwLtdvPPtlO8evrI5D9S6asFRCQ6v+wpiUKbw+vKqyg==}
    dependencies:
      '@types/ms': 0.7.31
    dev: true

  /@types/estree@1.0.1:
    resolution: {integrity: sha512-LG4opVs2ANWZ1TJoKc937iMmNstM/d0ae1vNbnBvBhqCSezgVUOzcLCqbI5elV8Vy6WKwKjaqR+zO9VKirBBCA==}
    dev: true

  /@types/hast@2.3.4:
    resolution: {integrity: sha512-wLEm0QvaoawEDoTRwzTXp4b4jpwiJDvR5KMnFnVodm3scufTlBOWRD6N1OBf9TZMhjlNsSfcO5V+7AF4+Vy+9g==}
    dependencies:
      '@types/unist': 2.0.6
    dev: true

  /@types/hoist-non-react-statics@3.3.1:
    resolution: {integrity: sha512-iMIqiko6ooLrTh1joXodJK5X9xeEALT1kM5G3ZLhD3hszxBdIEd5C75U834D9mLcINgD4OyZf5uQXjkuYydWvA==}
    dependencies:
      '@types/react': 17.0.39
      hoist-non-react-statics: 3.3.2
    dev: true

  /@types/json-schema@7.0.11:
    resolution: {integrity: sha512-wOuvG1SN4Us4rez+tylwwwCV1psiNVOkJeM3AUWUNWg/jDQY2+HE/444y5gc+jBmRqASOm2Oeh5c1axHobwRKQ==}
    dev: true

  /@types/json5@0.0.29:
    resolution: {integrity: sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==}
    dev: true

  /@types/lodash@4.14.194:
    resolution: {integrity: sha512-r22s9tAS7imvBt2lyHC9B8AGwWnXaYb1tY09oyLkXDs4vArpYJzw09nj8MLx5VfciBPGIb+ZwG0ssYnEPJxn/g==}
    dev: true

  /@types/mdast@3.0.11:
    resolution: {integrity: sha512-Y/uImid8aAwrEA24/1tcRZwpxX3pIFTSilcNDKSPn+Y2iDywSEachzRuvgAYYLR3wpGXAsMbv5lvKLDZLeYPAw==}
    dependencies:
      '@types/unist': 2.0.6
    dev: true

  /@types/ms@0.7.31:
    resolution: {integrity: sha512-iiUgKzV9AuaEkZqkOLDIvlQiL6ltuZd9tGcW3gwpnX8JbuiuhFlEGmmFXEXkN50Cvq7Os88IY2v0dkDqXYWVgA==}
    dev: true

  /@types/node@18.11.18:
    resolution: {integrity: sha512-DHQpWGjyQKSHj3ebjFI/wRKcqQcdR+MoFBygntYOZytCqNfkd2ZC4ARDJ2DQqhjH5p85Nnd3jhUJIXrszFX/JA==}
    dev: true

  /@types/parse5@6.0.3:
    resolution: {integrity: sha512-SuT16Q1K51EAVPz1K29DJ/sXjhSQ0zjvsypYJ6tlwVsRV9jwW5Adq2ch8Dq8kDBCkYnELS7N7VNCSB5nC56t/g==}
    dev: true

  /@types/prettier@2.7.2:
    resolution: {integrity: sha512-KufADq8uQqo1pYKVIYzfKbJfBAc0sOeXqGbFaSpv8MRmC/zXgowNZmFcbngndGk922QDmOASEXUZCaY48gs4cg==}
    dev: true

  /@types/prop-types@15.7.5:
    resolution: {integrity: sha512-JCB8C6SnDoQf0cNycqd/35A7MjcnK+ZTqE7judS6o7utxUCg6imJg3QK2qzHKszlTjcj2cn+NwMB2i96ubpj7w==}
    dev: true

  /@types/react-dom@17.0.13:
    resolution: {integrity: sha512-wEP+B8hzvy6ORDv1QBhcQia4j6ea4SFIBttHYpXKPFZRviBvknq0FRh3VrIxeXUmsPkwuXVZrVGG7KUVONmXCQ==}
    dependencies:
      '@types/react': 17.0.39
    dev: true

  /@types/react@17.0.39:
    resolution: {integrity: sha512-UVavlfAxDd/AgAacMa60Azl7ygyQNRwC/DsHZmKgNvPmRR5p70AJ5Q9EAmL2NWOJmeV+vVUI4IAP7GZrN8h8Ug==}
    dependencies:
      '@types/prop-types': 15.7.5
      '@types/scheduler': 0.16.3
      csstype: 3.1.2
    dev: true

  /@types/scheduler@0.16.3:
    resolution: {integrity: sha512-5cJ8CB4yAx7BH1oMvdU0Jh9lrEXyPkar6F9G/ERswkCuvP4KQZfZkSjcMbAICCpQTN4OuZn8tz0HiKv9TGZgrQ==}
    dev: true

  /@types/semver@7.5.0:
    resolution: {integrity: sha512-G8hZ6XJiHnuhQKR7ZmysCeJWE08o8T0AXtk5darsCaTVsYZhhgUrq53jizaR2FvsoeCwJhlmwTjkXBY5Pn/ZHw==}
    dev: true

  /@types/styled-components@5.1.26:
    resolution: {integrity: sha512-KuKJ9Z6xb93uJiIyxo/+ksS7yLjS1KzG6iv5i78dhVg/X3u5t1H7juRWqVmodIdz6wGVaIApo1u01kmFRdJHVw==}
    dependencies:
      '@types/hoist-non-react-statics': 3.3.1
      '@types/react': 17.0.39
      csstype: 3.1.2
    dev: true

  /@types/unist@2.0.6:
    resolution: {integrity: sha512-PBjIUxZHOuj0R15/xuwJYjFi+KZdNFrehocChv4g5hu6aFroHue8m0lBP0POdK2nKzbw0cgV1mws8+V/JAcEkQ==}
    dev: true

  /@typescript-eslint/eslint-plugin@5.59.6(@typescript-eslint/parser@5.59.6)(eslint@8.41.0)(typescript@5.0.4):
    resolution: {integrity: sha512-sXtOgJNEuRU5RLwPUb1jxtToZbgvq3M6FPpY4QENxoOggK+UpTxUBpj6tD8+Qh2g46Pi9We87E+eHnUw8YcGsw==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    peerDependencies:
      '@typescript-eslint/parser': ^5.0.0
      eslint: ^6.0.0 || ^7.0.0 || ^8.0.0
      typescript: '*'
    peerDependenciesMeta:
      typescript:
        optional: true
    dependencies:
      '@eslint-community/regexpp': 4.5.1
      '@typescript-eslint/parser': 5.59.6(eslint@8.41.0)(typescript@5.0.4)
      '@typescript-eslint/scope-manager': 5.59.6
      '@typescript-eslint/type-utils': 5.59.6(eslint@8.41.0)(typescript@5.0.4)
      '@typescript-eslint/utils': 5.59.6(eslint@8.41.0)(typescript@5.0.4)
      debug: 4.3.4(supports-color@5.5.0)
      eslint: 8.41.0
      grapheme-splitter: 1.0.4
      ignore: 5.2.4
      natural-compare-lite: 1.4.0
      semver: 7.5.1
      tsutils: 3.21.0(typescript@5.0.4)
      typescript: 5.0.4
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@typescript-eslint/parser@5.59.6(eslint@8.41.0)(typescript@5.0.4):
    resolution: {integrity: sha512-7pCa6al03Pv1yf/dUg/s1pXz/yGMUBAw5EeWqNTFiSueKvRNonze3hma3lhdsOrQcaOXhbk5gKu2Fludiho9VA==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    peerDependencies:
      eslint: ^6.0.0 || ^7.0.0 || ^8.0.0
      typescript: '*'
    peerDependenciesMeta:
      typescript:
        optional: true
    dependencies:
      '@typescript-eslint/scope-manager': 5.59.6
      '@typescript-eslint/types': 5.59.6
      '@typescript-eslint/typescript-estree': 5.59.6(typescript@5.0.4)
      debug: 4.3.4(supports-color@5.5.0)
      eslint: 8.41.0
      typescript: 5.0.4
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@typescript-eslint/scope-manager@5.59.6:
    resolution: {integrity: sha512-gLbY3Le9Dxcb8KdpF0+SJr6EQ+hFGYFl6tVY8VxLPFDfUZC7BHFw+Vq7bM5lE9DwWPfx4vMWWTLGXgpc0mAYyQ==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    dependencies:
      '@typescript-eslint/types': 5.59.6
      '@typescript-eslint/visitor-keys': 5.59.6
    dev: true

  /@typescript-eslint/type-utils@5.59.6(eslint@8.41.0)(typescript@5.0.4):
    resolution: {integrity: sha512-A4tms2Mp5yNvLDlySF+kAThV9VTBPCvGf0Rp8nl/eoDX9Okun8byTKoj3fJ52IJitjWOk0fKPNQhXEB++eNozQ==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    peerDependencies:
      eslint: '*'
      typescript: '*'
    peerDependenciesMeta:
      typescript:
        optional: true
    dependencies:
      '@typescript-eslint/typescript-estree': 5.59.6(typescript@5.0.4)
      '@typescript-eslint/utils': 5.59.6(eslint@8.41.0)(typescript@5.0.4)
      debug: 4.3.4(supports-color@5.5.0)
      eslint: 8.41.0
      tsutils: 3.21.0(typescript@5.0.4)
      typescript: 5.0.4
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@typescript-eslint/types@5.59.6:
    resolution: {integrity: sha512-tH5lBXZI7T2MOUgOWFdVNUILsI02shyQvfzG9EJkoONWugCG77NDDa1EeDGw7oJ5IvsTAAGVV8I3Tk2PNu9QfA==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    dev: true

  /@typescript-eslint/typescript-estree@5.59.6(typescript@5.0.4):
    resolution: {integrity: sha512-vW6JP3lMAs/Tq4KjdI/RiHaaJSO7IUsbkz17it/Rl9Q+WkQ77EOuOnlbaU8kKfVIOJxMhnRiBG+olE7f3M16DA==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    peerDependencies:
      typescript: '*'
    peerDependenciesMeta:
      typescript:
        optional: true
    dependencies:
      '@typescript-eslint/types': 5.59.6
      '@typescript-eslint/visitor-keys': 5.59.6
      debug: 4.3.4(supports-color@5.5.0)
      globby: 11.1.0
      is-glob: 4.0.3
      semver: 7.5.1
      tsutils: 3.21.0(typescript@5.0.4)
      typescript: 5.0.4
    transitivePeerDependencies:
      - supports-color
    dev: true

  /@typescript-eslint/utils@5.59.6(eslint@8.41.0)(typescript@5.0.4):
    resolution: {integrity: sha512-vzaaD6EXbTS29cVH0JjXBdzMt6VBlv+hE31XktDRMX1j3462wZCJa7VzO2AxXEXcIl8GQqZPcOPuW/Z1tZVogg==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    peerDependencies:
      eslint: ^6.0.0 || ^7.0.0 || ^8.0.0
    dependencies:
      '@eslint-community/eslint-utils': 4.4.0(eslint@8.41.0)
      '@types/json-schema': 7.0.11
      '@types/semver': 7.5.0
      '@typescript-eslint/scope-manager': 5.59.6
      '@typescript-eslint/types': 5.59.6
      '@typescript-eslint/typescript-estree': 5.59.6(typescript@5.0.4)
      eslint: 8.41.0
      eslint-scope: 5.1.1
      semver: 7.5.1
    transitivePeerDependencies:
      - supports-color
      - typescript
    dev: true

  /@typescript-eslint/visitor-keys@5.59.6:
    resolution: {integrity: sha512-zEfbFLzB9ETcEJ4HZEEsCR9HHeNku5/Qw1jSS5McYJv5BR+ftYXwFFAH5Al+xkGaZEqowMwl7uoJjQb1YSPF8Q==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    dependencies:
      '@typescript-eslint/types': 5.59.6
      eslint-visitor-keys: 3.4.1
    dev: true

  /@vitejs/plugin-react@4.0.0(vite@4.3.8):
    resolution: {integrity: sha512-HX0XzMjL3hhOYm+0s95pb0Z7F8O81G7joUHgfDd/9J/ZZf5k4xX6QAMFkKsHFxaHlf6X7GD7+XuaZ66ULiJuhQ==}
    engines: {node: ^14.18.0 || >=16.0.0}
    peerDependencies:
      vite: ^4.2.0
    dependencies:
      '@babel/core': 7.21.8
      '@babel/plugin-transform-react-jsx-self': 7.21.0(@babel/core@7.21.8)
      '@babel/plugin-transform-react-jsx-source': 7.19.6(@babel/core@7.21.8)
      react-refresh: 0.14.0
      vite: 4.3.8(@types/node@18.11.18)
    transitivePeerDependencies:
      - supports-color
    dev: true

  /acorn-jsx@5.3.2(acorn@8.8.2):
    resolution: {integrity: sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==}
    peerDependencies:
      acorn: ^6.0.0 || ^7.0.0 || ^8.0.0
    dependencies:
      acorn: 8.8.2
    dev: true

  /acorn@8.8.2:
    resolution: {integrity: sha512-xjIYgE8HBrkpd/sJqOGNspf8uHG+NOHGOw6a/Urj8taM2EXfdNAH2oFcPeIFfsv3+kz/mJrS5VuMqbNLjCa2vw==}
    engines: {node: '>=0.4.0'}
    hasBin: true
    dev: true

  /aggregate-error@3.1.0:
    resolution: {integrity: sha512-4I7Td01quW/RpocfNayFdFVk1qSuoh0E7JrbRJ16nH01HhKFQ88INq9Sd+nd72zqRySlr9BmDA8xlEJ6vJMrYA==}
    engines: {node: '>=8'}
    dependencies:
      clean-stack: 2.2.0
      indent-string: 4.0.0
    dev: true

  /ajv@6.12.6:
    resolution: {integrity: sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==}
    dependencies:
      fast-deep-equal: 3.1.3
      fast-json-stable-stringify: 2.1.0
      json-schema-traverse: 0.4.1
      uri-js: 4.4.1
    dev: true

  /ansi-escapes@4.3.2:
    resolution: {integrity: sha512-gKXj5ALrKWQLsYG9jlTRmR/xKluxHV+Z9QEwNIgCfM1/uwPMCuzVVnh5mwTd+OuBZcwSIMbqssNWRm1lE51QaQ==}
    engines: {node: '>=8'}
    dependencies:
      type-fest: 0.21.3
    dev: true

  /ansi-regex@5.0.1:
    resolution: {integrity: sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==}
    engines: {node: '>=8'}
    dev: true

  /ansi-regex@6.0.1:
    resolution: {integrity: sha512-n5M855fKb2SsfMIiFFoVrABHJC8QtHwVx+mHWP3QcEqBHYienj5dHSgjbxtC0WEZXYt4wcD6zrQElDPhFuZgfA==}
    engines: {node: '>=12'}
    dev: true

  /ansi-styles@3.2.1:
    resolution: {integrity: sha512-VT0ZI6kZRdTh8YyJw3SMbYm/u+NqfsAxEpWO0Pf9sq8/e94WxxOpPKx9FR1FlyCtOVDNOQ+8ntlqFxiRc+r5qA==}
    engines: {node: '>=4'}
    dependencies:
      color-convert: 1.9.3

  /ansi-styles@4.3.0:
    resolution: {integrity: sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==}
    engines: {node: '>=8'}
    dependencies:
      color-convert: 2.0.1
    dev: true

  /ansi-styles@6.2.1:
    resolution: {integrity: sha512-bN798gFfQX+viw3R7yrGWRqnrN2oRkEkUjjl4JNn4E8GxxbjtG3FbrEIIY3l8/hrwUwIeCZvi4QuOTP4MErVug==}
    engines: {node: '>=12'}
    dev: true

  /any-promise@1.3.0:
    resolution: {integrity: sha512-7UvmKalWRt1wgjL1RrGxoSJW/0QZFIegpeGvZG9kjp8vrRu55XTHbwnqq2GpXm9uLbcuhxm3IqX9OB4MZR1b2A==}
    dev: false

  /anymatch@3.1.3:
    resolution: {integrity: sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==}
    engines: {node: '>= 8'}
    dependencies:
      normalize-path: 3.0.0
      picomatch: 2.3.1
    dev: false

  /arg@5.0.2:
    resolution: {integrity: sha512-PYjyFOLKQ9y57JvQ6QLo8dAgNqswh8M1RMJYdQduT6xbWSgK36P/Z/v+p888pM69jMMfS8Xd8F6I1kQ/I9HUGg==}
    dev: false

  /argparse@2.0.1:
    resolution: {integrity: sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==}
    dev: true

  /aria-query@5.1.3:
    resolution: {integrity: sha512-R5iJ5lkuHybztUfuOAznmboyjWq8O6sqNqtK7CLOqdydi54VNbORp49mb14KbWgG1QD3JFO9hJdZ+y4KutfdOQ==}
    dependencies:
      deep-equal: 2.2.1
    dev: true

  /array-buffer-byte-length@1.0.0:
    resolution: {integrity: sha512-LPuwb2P+NrQw3XhxGc36+XSvuBPopovXYTR9Ew++Du9Yb/bx5AzBfrIsBoj0EZUifjQU+sHL21sseZ3jerWO/A==}
    dependencies:
      call-bind: 1.0.2
      is-array-buffer: 3.0.2
    dev: true

  /array-includes@3.1.6:
    resolution: {integrity: sha512-sgTbLvL6cNnw24FnbaDyjmvddQ2ML8arZsgaJhoABMoplz/4QRhtrYS+alr1BUM1Bwp6dhx8vVCBSLG+StwOFw==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
      get-intrinsic: 1.2.1
      is-string: 1.0.7
    dev: true

  /array-union@2.1.0:
    resolution: {integrity: sha512-HGyxoOTYUyCM6stUe6EJgnd4EoewAI7zMdfqO+kGjnlZmBDz/cR5pf8r/cR4Wq60sL/p0IkcjUEEPwS3GFrIyw==}
    engines: {node: '>=8'}
    dev: true

  /array.prototype.flat@1.3.1:
    resolution: {integrity: sha512-roTU0KWIOmJ4DRLmwKd19Otg0/mT3qPNt0Qb3GWW8iObuZXxrjB/pzn0R3hqpRSWg4HCwqx+0vwOnWnvlOyeIA==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
      es-shim-unscopables: 1.0.0
    dev: true

  /array.prototype.flatmap@1.3.1:
    resolution: {integrity: sha512-8UGn9O1FDVvMNB0UlLv4voxRMze7+FpHyF5mSMRjWHUMlpoDViniy05870VlxhfgTnLbpuwTzvD76MTtWxB/mQ==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
      es-shim-unscopables: 1.0.0
    dev: true

  /array.prototype.tosorted@1.1.1:
    resolution: {integrity: sha512-pZYPXPRl2PqWcsUs6LOMn+1f1532nEoPTYowBtqLwAW+W8vSVhkIGnmOX1t/UQjD6YGI0vcD2B1U7ZFGQH9jnQ==}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
      es-shim-unscopables: 1.0.0
      get-intrinsic: 1.2.1
    dev: true

  /ast-types-flow@0.0.7:
    resolution: {integrity: sha512-eBvWn1lvIApYMhzQMsu9ciLfkBY499mFZlNqG+/9WR7PVlroQw0vG30cOQQbaKz3sCEc44TAOu2ykzqXSNnwag==}
    dev: true

  /autoprefixer@10.4.14(postcss@8.4.23):
    resolution: {integrity: sha512-FQzyfOsTlwVzjHxKEqRIAdJx9niO6VCBCoEwax/VLSoQF29ggECcPuBqUMZ+u8jCZOPSy8b8/8KnuFbp0SaFZQ==}
    engines: {node: ^10 || ^12 || >=14}
    hasBin: true
    peerDependencies:
      postcss: ^8.1.0
    dependencies:
      browserslist: 4.21.5
      caniuse-lite: 1.0.30001488
      fraction.js: 4.2.0
      normalize-range: 0.1.2
      picocolors: 1.0.0
      postcss: 8.4.23
      postcss-value-parser: 4.2.0
    dev: true

  /available-typed-arrays@1.0.5:
    resolution: {integrity: sha512-DMD0KiN46eipeziST1LPP/STfDU0sufISXmjSgvVsoU2tqxctQeASejWcfNtxYKqETM1UxQ8sp2OrSBWpHY6sw==}
    engines: {node: '>= 0.4'}
    dev: true

  /axe-core@4.7.1:
    resolution: {integrity: sha512-sCXXUhA+cljomZ3ZAwb8i1p3oOlkABzPy08ZDAoGcYuvtBPlQ1Ytde129ArXyHWDhfeewq7rlx9F+cUx2SSlkg==}
    engines: {node: '>=4'}
    dev: true

  /axobject-query@3.1.1:
    resolution: {integrity: sha512-goKlv8DZrK9hUh975fnHzhNIO4jUnFCfv/dszV5VwUGDFjI6vQ2VwoyjYjYNEbBE8AH87TduWP5uyDR1D+Iteg==}
    dependencies:
      deep-equal: 2.2.1
    dev: true

  /babel-plugin-styled-components@2.1.3(styled-components@5.3.6):
    resolution: {integrity: sha512-jBioLwBVHpOMU4NsueH/ADcHrjS0Y/WTpt2eGVmmuSFNEv2DF3XhcMncuZlbbjxQ4vzxg+yEr6E6TNjrIQbsJQ==}
    peerDependencies:
      styled-components: '>= 2'
    dependencies:
      '@babel/helper-annotate-as-pure': 7.18.6
      '@babel/helper-module-imports': 7.21.4
      babel-plugin-syntax-jsx: 6.18.0
      lodash: 4.17.21
      picomatch: 2.3.1
      styled-components: 5.3.6(react-dom@17.0.2)(react-is@17.0.2)(react@17.0.2)
    dev: false

  /babel-plugin-syntax-jsx@6.18.0:
    resolution: {integrity: sha512-qrPaCSo9c8RHNRHIotaufGbuOBN8rtdC4QrrFFc43vyWCCz7Kl7GL1PGaXtMGQZUXrkCjNEgxDfmAuAabr/rlw==}
    dev: false

  /bail@2.0.2:
    resolution: {integrity: sha512-0xO6mYd7JB2YesxDKplafRpsiOzPt9V02ddPCLbY1xYGPOX24NTyN50qnUxgCPcSoYMhKpAuBTjQoRZCAkUDRw==}
    dev: true

  /balanced-match@1.0.2:
    resolution: {integrity: sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==}

  /base64-js@1.5.1:
    resolution: {integrity: sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==}
    dev: true

  /bcp-47-match@2.0.3:
    resolution: {integrity: sha512-JtTezzbAibu8G0R9op9zb3vcWZd9JF6M0xOYGPn0fNCd7wOpRB1mU2mH9T8gaBGbAAyIIVgB2G7xG0GP98zMAQ==}
    dev: true

  /binary-extensions@2.2.0:
    resolution: {integrity: sha512-jDctJ/IVQbZoJykoeHbhXpOlNBqGNcwXJKJog42E5HDPUwQTSdjCHdihjj0DlnheQ7blbT6dHOafNAiS8ooQKA==}
    engines: {node: '>=8'}
    dev: false

  /bl@4.1.0:
    resolution: {integrity: sha512-1W07cM9gS6DcLperZfFSj+bWLtaPGSOHWhPiGzXmvVJbRLdG82sH/Kn8EtW1VqWVA54AKf2h5k5BbnIbwF3h6w==}
    dependencies:
      buffer: 5.7.1
      inherits: 2.0.4
      readable-stream: 3.6.2
    dev: true

  /boolbase@1.0.0:
    resolution: {integrity: sha512-JZOSA7Mo9sNGB8+UjSgzdLtokWAky1zbztM3WRLCbZ70/3cTANmQmOdR7y2g+J0e2WXywy1yS468tY+IruqEww==}

  /brace-expansion@1.1.11:
    resolution: {integrity: sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==}
    dependencies:
      balanced-match: 1.0.2
      concat-map: 0.0.1

  /brace-expansion@2.0.1:
    resolution: {integrity: sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==}
    dependencies:
      balanced-match: 1.0.2
    dev: true

  /braces@3.0.2:
    resolution: {integrity: sha512-b8um+L1RzM3WDSzvhm6gIz1yfTbBt6YTlcEKAvsmqCZZFw46z626lVj9j1yEPW33H5H+lBQpZMP1k8l+78Ha0A==}
    engines: {node: '>=8'}
    dependencies:
      fill-range: 7.0.1

  /browserslist@4.21.5:
    resolution: {integrity: sha512-tUkiguQGW7S3IhB7N+c2MV/HZPSCPAAiYBZXLsBhFB/PCy6ZKKsZrmBayHV9fdGV/ARIfJ14NkxKzRDjvp7L6w==}
    engines: {node: ^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7}
    hasBin: true
    dependencies:
      caniuse-lite: 1.0.30001488
      electron-to-chromium: 1.4.402
      node-releases: 2.0.11
      update-browserslist-db: 1.0.11(browserslist@4.21.5)
    dev: true

  /buffer-from@1.1.2:
    resolution: {integrity: sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==}
    dev: true

  /buffer@5.7.1:
    resolution: {integrity: sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==}
    dependencies:
      base64-js: 1.5.1
      ieee754: 1.2.1
    dev: true

  /cacache@17.1.3:
    resolution: {integrity: sha512-jAdjGxmPxZh0IipMdR7fK/4sDSrHMLUV0+GvVUsjwyGNKHsh79kW/otg+GkbXwl6Uzvy9wsvHOX4nUoWldeZMg==}
    engines: {node: ^14.17.0 || ^16.13.0 || >=18.0.0}
    dependencies:
      '@npmcli/fs': 3.1.0
      fs-minipass: 3.0.2
      glob: 10.2.5
      lru-cache: 7.18.3
      minipass: 5.0.0
      minipass-collect: 1.0.2
      minipass-flush: 1.0.5
      minipass-pipeline: 1.2.4
      p-map: 4.0.0
      ssri: 10.0.4
      tar: 6.1.15
      unique-filename: 3.0.0
    dev: true

  /call-bind@1.0.2:
    resolution: {integrity: sha512-7O+FbCihrB5WGbFYesctwmTKae6rOiIzmz1icreWJ+0aA7LJfuqhEso2T9ncpcFtzMQtzXf2QGGueWJGTYsqrA==}
    dependencies:
      function-bind: 1.1.1
      get-intrinsic: 1.2.1
    dev: true

  /callsite-record@4.1.5:
    resolution: {integrity: sha512-OqeheDucGKifjQRx524URgV4z4NaKjocGhygTptDea+DLROre4ZEecA4KXDq+P7qlGCohYVNOh3qr+y5XH5Ftg==}
    dependencies:
      '@devexpress/error-stack-parser': 2.0.6
      '@types/lodash': 4.14.194
      callsite: 1.0.0
      chalk: 2.4.2
      highlight-es: 1.0.3
      lodash: 4.17.21
      pinkie-promise: 2.0.1
    dev: true

  /callsite@1.0.0:
    resolution: {integrity: sha512-0vdNRFXn5q+dtOqjfFtmtlI9N2eVZ7LMyEV2iKC5mEEFvSg/69Ml6b/WU2qF8W1nLRa0wiSrDT3Y5jOHZCwKPQ==}
    dev: true

  /callsites@3.1.0:
    resolution: {integrity: sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==}
    engines: {node: '>=6'}
    dev: true

  /camelcase-css@2.0.1:
    resolution: {integrity: sha512-QOSvevhslijgYwRx6Rv7zKdMF8lbRmx+uQGx2+vDc+KI/eBnsy9kit5aj23AgGu3pa4t9AgwbnXWqS+iOY+2aA==}
    engines: {node: '>= 6'}
    dev: false

  /camelcase@6.3.0:
    resolution: {integrity: sha512-Gmy6FhYlCY7uOElZUSbxo2UCDH8owEk996gkbrpsgGtrJLM3J7jGxl9Ic7Qwwj4ivOE5AWZWRMecDdF7hqGjFA==}
    engines: {node: '>=10'}
    dev: true

  /camelize@1.0.1:
    resolution: {integrity: sha512-dU+Tx2fsypxTgtLoE36npi3UqcjSSMNYfkqgmoEhtZrraP5VWq0K7FkWVTYa8eMPtnU/G2txVsfdCJTn9uzpuQ==}
    dev: false

  /caniuse-lite@1.0.30001488:
    resolution: {integrity: sha512-NORIQuuL4xGpIy6iCCQGN4iFjlBXtfKWIenlUuyZJumLRIindLb7wXM+GO8erEhb7vXfcnf4BAg2PrSDN5TNLQ==}
    dev: true

  /ccount@2.0.1:
    resolution: {integrity: sha512-eyrF0jiFpY+3drT6383f1qhkbGsLSifNAjA61IUjZjmLCWjItY6LB9ft9YhoDgwfmclB2zhu51Lc7+95b8NRAg==}
    dev: true

  /chalk@2.4.2:
    resolution: {integrity: sha512-Mti+f9lpJNcwF4tWV8/OrTTtF1gZi+f8FqlyAdouralcFWFQWF2+NgCHShjkCb+IFBLq9buZwE1xckQU4peSuQ==}
    engines: {node: '>=4'}
    dependencies:
      ansi-styles: 3.2.1
      escape-string-regexp: 1.0.5
      supports-color: 5.5.0

  /chalk@4.1.2:
    resolution: {integrity: sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==}
    engines: {node: '>=10'}
    dependencies:
      ansi-styles: 4.3.0
      supports-color: 7.2.0
    dev: true

  /character-entities-html4@2.1.0:
    resolution: {integrity: sha512-1v7fgQRj6hnSwFpq1Eu0ynr/CDEw0rXo2B61qXrLNdHZmPKgb7fqS1a2JwF0rISo9q77jDI8VMEHoApn8qDoZA==}
    dev: true

  /character-entities-legacy@3.0.0:
    resolution: {integrity: sha512-RpPp0asT/6ufRm//AJVwpViZbGM/MkjQFxJccQRHmISF/22NBtsHqAWmL+/pmkPWoIUJdWyeVleTl1wydHATVQ==}
    dev: true

  /character-entities@2.0.2:
    resolution: {integrity: sha512-shx7oQ0Awen/BRIdkjkvz54PnEEI/EjwXDSIZp86/KKdbafHh1Df/RYGBhn4hbe2+uKC9FnT5UCEdyPz3ai9hQ==}
    dev: true

  /chokidar@3.5.3:
    resolution: {integrity: sha512-Dr3sfKRP6oTcjf2JmUmFJfeVMvXBdegxB0iVQ5eb2V10uFJUCAS8OByZdVAyVb8xXNz3GjjTgj9kLWsZTqE6kw==}
    engines: {node: '>= 8.10.0'}
    dependencies:
      anymatch: 3.1.3
      braces: 3.0.2
      glob-parent: 5.1.2
      is-binary-path: 2.1.0
      is-glob: 4.0.3
      normalize-path: 3.0.0
      readdirp: 3.6.0
    optionalDependencies:
      fsevents: 2.3.2
    dev: false

  /chownr@1.1.4:
    resolution: {integrity: sha512-jJ0bqzaylmJtVnNgzTeSOs8DPavpbYgEr/b0YL8/2GO3xJEhInFmhKMUnEJQjZumK7KXGFhUy89PrsJWlakBVg==}
    dev: true

  /chownr@2.0.0:
    resolution: {integrity: sha512-bIomtDF5KGpdogkLd9VspvFzk9KfpyyGlS8YFVZl7TGPBHL5snIOnxeshwVgPteQ9b4Eydl+pVbIyE1DcvCWgQ==}
    engines: {node: '>=10'}
    dev: true

  /ci-info@3.8.0:
    resolution: {integrity: sha512-eXTggHWSooYhq49F2opQhuHWgzucfF2YgODK4e1566GQs5BIfP30B0oenwBJHfWxAs2fyPB1s7Mg949zLf61Yw==}
    engines: {node: '>=8'}
    dev: true

  /clean-stack@2.2.0:
    resolution: {integrity: sha512-4diC9HaTE+KRAMWhDhrGOECgWZxoevMc5TlkObMqNSsVU62PYzXZ/SMTjzyGAFF1YusgxGcSWTEXBhp0CPwQ1A==}
    engines: {node: '>=6'}
    dev: true

  /clean-stack@3.0.1:
    resolution: {integrity: sha512-lR9wNiMRcVQjSB3a7xXGLuz4cr4wJuuXlaAEbRutGowQTmlp7R72/DOgN21e8jdwblMWl9UOJMJXarX94pzKdg==}
    engines: {node: '>=10'}
    dependencies:
      escape-string-regexp: 4.0.0
    dev: true

  /cli-spinners@2.9.0:
    resolution: {integrity: sha512-4/aL9X3Wh0yiMQlE+eeRhWP6vclO3QRtw1JHKIT0FFUs5FjpFmESqtMvYZ0+lbzBw900b95mS0hohy+qn2VK/g==}
    engines: {node: '>=6'}
    dev: true

  /color-convert@1.9.3:
    resolution: {integrity: sha512-QfAUtd+vFdAtFQcC8CCyYt1fYWxSqAiK2cSD6zDB8N3cpsEBAvRxp9zOGg6G/SHHJYAT88/az/IuDGALsNVbGg==}
    dependencies:
      color-name: 1.1.3

  /color-convert@2.0.1:
    resolution: {integrity: sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==}
    engines: {node: '>=7.0.0'}
    dependencies:
      color-name: 1.1.4
    dev: true

  /color-name@1.1.3:
    resolution: {integrity: sha512-72fSenhMw2HZMTVHeCA9KCmpEIbzWiQsjN+BHcBbS9vr1mtt+vJjPdksIBNUmKAW8TFUDPJK5SUU3QhE9NEXDw==}

  /color-name@1.1.4:
    resolution: {integrity: sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==}
    dev: true

  /color-string@1.9.1:
    resolution: {integrity: sha512-shrVawQFojnZv6xM40anx4CkoDP+fZsw/ZerEMsW/pyzsRbElpsL/DBVW7q3ExxwusdNXI3lXpuhEZkzs8p5Eg==}
    dependencies:
      color-name: 1.1.4
      simple-swizzle: 0.2.2
    dev: true

  /color@4.2.3:
    resolution: {integrity: sha512-1rXeuUUiGGrykh+CeBdu5Ie7OJwinCgQY0bc7GCRxy5xVHy+moaqkpL/jqQq0MtQOeYcrqEz4abc5f0KtU7W4A==}
    engines: {node: '>=12.5.0'}
    dependencies:
      color-convert: 2.0.1
      color-string: 1.9.1
    dev: true

  /comma-separated-tokens@2.0.3:
    resolution: {integrity: sha512-Fu4hJdvzeylCfQPp9SGWidpzrMs7tTrlu6Vb8XGaRGck8QSNZJJp538Wrb60Lax4fPwR64ViY468OIUTbRlGZg==}
    dev: true

  /commander@4.1.1:
    resolution: {integrity: sha512-NOKm8xhkzAjzFx8B2v5OAHT+u5pRQc2UCa2Vq9jYL/31o2wi9mxBA7LIFs3sV5VSC49z6pEhfbMULvShKj26WA==}
    engines: {node: '>= 6'}
    dev: false

  /commander@7.2.0:
    resolution: {integrity: sha512-QrWXB+ZQSVPmIWIhtEO9H+gwHaMGYiF5ChvoJ+K9ZGHG/sVsa6yiesAD1GC/x46sET00Xlwo1u49RVVVzvcSkw==}
    engines: {node: '>= 10'}
    dev: false

  /commondir@1.0.1:
    resolution: {integrity: sha512-W9pAhw0ja1Edb5GVdIF1mjZw/ASI0AlShXM83UUGe2DVr5TdAPEA1OA8m/g8zWp9x6On7gqufY+FatDbC3MDQg==}
    dev: true

  /concat-map@0.0.1:
    resolution: {integrity: sha1-2Klr13/Wjfd5OnMDajug1UBdR3s=}

  /confusing-browser-globals@1.0.11:
    resolution: {integrity: sha512-JsPKdmh8ZkmnHxDk55FZ1TqVLvEQTvoByJZRN9jzI0UjxK/QgAmsphz7PGtqgPieQZ/CQcHWXCR7ATDNhGe+YA==}
    dev: true

  /convert-source-map@1.9.0:
    resolution: {integrity: sha512-ASFBup0Mz1uyiIjANan1jzLQami9z1PoYSZCiiYW2FczPbenXc45FZdBZLzOT+r6+iciuEModtmCti+hjaAk0A==}
    dev: true

  /cosmiconfig@8.1.3:
    resolution: {integrity: sha512-/UkO2JKI18b5jVMJUp0lvKFMpa/Gye+ZgZjKD+DGEN9y7NRcf/nK1A0sp67ONmKtnDCNMS44E6jrk0Yc3bDuUw==}
    engines: {node: '>=14'}
    dependencies:
      import-fresh: 3.3.0
      js-yaml: 4.1.0
      parse-json: 5.2.0
      path-type: 4.0.0
    dev: true

  /cross-spawn@7.0.3:
    resolution: {integrity: sha512-iRDPJKUPVEND7dHPO8rkbOnPpyDygcDFtWjpeWNCgy8WP2rXcxXL8TskReQl6OrB2G7+UJrags1q15Fudc7G6w==}
    engines: {node: '>= 8'}
    dependencies:
      path-key: 3.1.1
      shebang-command: 2.0.0
      which: 2.0.2
    dev: true

  /css-color-keywords@1.0.0:
    resolution: {integrity: sha512-FyyrDHZKEjXDpNJYvVsV960FiqQyXc/LlYmsxl2BcdMb2WPx0OGRVgTg55rPSyLSNMqP52R9r8geSp7apN3Ofg==}
    engines: {node: '>=4'}
    dev: false

  /css-select@5.1.0:
    resolution: {integrity: sha512-nwoRF1rvRRnnCqqY7updORDsuqKzqYJ28+oSMaJMMgOauh3fvwHqMS7EZpIPqK8GL+g9mKxF1vP/ZjSeNjEVHg==}
    dependencies:
      boolbase: 1.0.0
      css-what: 6.1.0
      domhandler: 5.0.3
      domutils: 3.1.0
      nth-check: 2.1.1
    dev: false

  /css-selector-parser@1.4.1:
    resolution: {integrity: sha512-HYPSb7y/Z7BNDCOrakL4raGO2zltZkbeXyAd6Tg9obzix6QhzxCotdBl6VT0Dv4vZfJGVz3WL/xaEI9Ly3ul0g==}
    dev: true

  /css-to-react-native@3.2.0:
    resolution: {integrity: sha512-e8RKaLXMOFii+02mOlqwjbD00KSEKqblnpO9e++1aXS1fPQOpS1YoqdVHBqPjHNoxeF2mimzVqawm2KCbEdtHQ==}
    dependencies:
      camelize: 1.0.1
      css-color-keywords: 1.0.0
      postcss-value-parser: 4.2.0
    dev: false

  /css-tree@2.2.1:
    resolution: {integrity: sha512-OA0mILzGc1kCOCSJerOeqDxDQ4HOh+G8NbOJFOTgOCzpw7fCBubk0fEyxp8AgOL/jvLgYA/uV0cMbe43ElF1JA==}
    engines: {node: ^10 || ^12.20.0 || ^14.13.0 || >=15.0.0, npm: '>=7.0.0'}
    dependencies:
      mdn-data: 2.0.28
      source-map-js: 1.0.2
    dev: false

  /css-tree@2.3.1:
    resolution: {integrity: sha512-6Fv1DV/TYw//QF5IzQdqsNDjx/wc8TrMBZsqjL9eW01tWb7R7k/mq+/VXfJCl7SoD5emsJop9cOByJZfs8hYIw==}
    engines: {node: ^10 || ^12.20.0 || ^14.13.0 || >=15.0.0}
    dependencies:
      mdn-data: 2.0.30
      source-map-js: 1.0.2
    dev: false

  /css-what@6.1.0:
    resolution: {integrity: sha512-HTUrgRJ7r4dsZKU6GjmpfRK1O76h97Z8MfS1G0FozR+oF2kG6Vfe8JE6zwrkbxigziPHinCJ+gCPjA9EaBDtRw==}
    engines: {node: '>= 6'}
    dev: false

  /cssesc@3.0.0:
    resolution: {integrity: sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==}
    engines: {node: '>=4'}
    hasBin: true
    dev: false

  /csso@5.0.5:
    resolution: {integrity: sha512-0LrrStPOdJj+SPCCrGhzryycLjwcgUSHBtxNA8aIDxf0GLsRh1cKYhB00Gd1lDOS4yGH69+SNn13+TWbVHETFQ==}
    engines: {node: ^10 || ^12.20.0 || ^14.13.0 || >=15.0.0, npm: '>=7.0.0'}
    dependencies:
      css-tree: 2.2.1
    dev: false

  /csstype@3.1.2:
    resolution: {integrity: sha512-I7K1Uu0MBPzaFKg4nI5Q7Vs2t+3gWWW648spaF+Rg7pI9ds18Ugn+lvg4SHczUdKlHI5LWBXyqfS8+DufyBsgQ==}
    dev: true

  /damerau-levenshtein@1.0.8:
    resolution: {integrity: sha512-sdQSFB7+llfUcQHUQO3+B8ERRj0Oa4w9POWMI/puGtuf7gFywGmkaLCElnudfTiKZV+NvHqL0ifzdrI8Ro7ESA==}
    dev: true

  /date-fns@2.30.0:
    resolution: {integrity: sha512-fnULvOpxnC5/Vg3NCiWelDsLiUc9bRwAPs/+LfTLNvetFCtCTN+yQz15C/fs4AwX1R9K5GLtLfn8QW+dWisaAw==}
    engines: {node: '>=0.11'}
    dependencies:
      '@babel/runtime': 7.21.5
    dev: true

  /debug@3.2.7:
    resolution: {integrity: sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==}
    peerDependencies:
      supports-color: '*'
    peerDependenciesMeta:
      supports-color:
        optional: true
    dependencies:
      ms: 2.1.3
    dev: true

  /debug@4.3.4(supports-color@5.5.0):
    resolution: {integrity: sha512-PRWFHuSU3eDtQJPvnNY7Jcket1j0t5OuOsFzPPzsekD52Zl8qUfFIPEiswXqIvHWGVHOgX+7G/vCNNhehwxfkQ==}
    engines: {node: '>=6.0'}
    peerDependencies:
      supports-color: '*'
    peerDependenciesMeta:
      supports-color:
        optional: true
    dependencies:
      ms: 2.1.2
      supports-color: 5.5.0

  /decode-named-character-reference@1.0.2:
    resolution: {integrity: sha512-O8x12RzrUF8xyVcY0KJowWsmaJxQbmy0/EtnNtHRpsOcT7dFk5W598coHqBVpmWo1oQQfsCqfCmkZN5DJrZVdg==}
    dependencies:
      character-entities: 2.0.2
    dev: true

  /decompress-response@6.0.0:
    resolution: {integrity: sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==}
    engines: {node: '>=10'}
    dependencies:
      mimic-response: 3.1.0
    dev: true

  /deep-equal@2.2.1:
    resolution: {integrity: sha512-lKdkdV6EOGoVn65XaOsPdH4rMxTZOnmFyuIkMjM1i5HHCbfjC97dawgTAy0deYNfuqUqW+Q5VrVaQYtUpSd6yQ==}
    dependencies:
      array-buffer-byte-length: 1.0.0
      call-bind: 1.0.2
      es-get-iterator: 1.1.3
      get-intrinsic: 1.2.1
      is-arguments: 1.1.1
      is-array-buffer: 3.0.2
      is-date-object: 1.0.5
      is-regex: 1.1.4
      is-shared-array-buffer: 1.0.2
      isarray: 2.0.5
      object-is: 1.1.5
      object-keys: 1.1.1
      object.assign: 4.1.4
      regexp.prototype.flags: 1.5.0
      side-channel: 1.0.4
      which-boxed-primitive: 1.0.2
      which-collection: 1.0.1
      which-typed-array: 1.1.9
    dev: true

  /deep-extend@0.6.0:
    resolution: {integrity: sha512-LOHxIOaPYdHlJRtCQfDIVZtfw/ufM8+rVj649RIHzcm/vGwQRXFt6OPqIFWsm2XEMrNIEtWR64sY1LEKD2vAOA==}
    engines: {node: '>=4.0.0'}
    dev: true

  /deep-is@0.1.4:
    resolution: {integrity: sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==}
    dev: true

  /deepmerge@4.3.1:
    resolution: {integrity: sha512-3sUqbMEc77XqpdNO7FRyRog+eW3ph+GYCbj+rK+uYyRMuwsVy0rMiVtPn+QJlKFvWP/1PYpapqYn0Me2knFn+A==}
    engines: {node: '>=0.10.0'}
    dev: true

  /define-properties@1.2.0:
    resolution: {integrity: sha512-xvqAVKGfT1+UAvPwKTVw/njhdQ8ZhXK4lI0bCIuCMrp2up9nPnaDftrLtmpTazqd1o+UY4zgzU+avtMbDP+ldA==}
    engines: {node: '>= 0.4'}
    dependencies:
      has-property-descriptors: 1.0.0
      object-keys: 1.1.1
    dev: true

  /dequal@2.0.3:
    resolution: {integrity: sha512-0je+qPKHEMohvfRTCEo3CrPG6cAzAYgmzKyxRiYSSDkS6eGJdyVJm7WaYA5ECaAD9wLB2T4EEeymA5aFVcYXCA==}
    engines: {node: '>=6'}
    dev: true

  /detect-libc@2.0.1:
    resolution: {integrity: sha512-463v3ZeIrcWtdgIg6vI6XUncguvr2TnGl4SzDXinkt9mSLpBJKXT3mW6xT3VQdDN11+WVs29pgvivTc4Lp8v+w==}
    engines: {node: '>=8'}
    dev: true

  /didyoumean@1.2.2:
    resolution: {integrity: sha512-gxtyfqMg7GKyhQmb056K7M3xszy/myH8w+B4RT+QXBQsvAOdc3XymqDDPHx1BgPgsdAA5SIifona89YtRATDzw==}
    dev: false

  /diff@5.1.0:
    resolution: {integrity: sha512-D+mk+qE8VC/PAUrlAU34N+VfXev0ghe5ywmpqrawphmVZc1bEfn56uo9qpyGp1p4xpzOHkSW4ztBd6L7Xx4ACw==}
    engines: {node: '>=0.3.1'}
    dev: true

  /dir-glob@3.0.1:
    resolution: {integrity: sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==}
    engines: {node: '>=8'}
    dependencies:
      path-type: 4.0.0
    dev: true

  /direction@2.0.1:
    resolution: {integrity: sha512-9S6m9Sukh1cZNknO1CWAr2QAWsbKLafQiyM5gZ7VgXHeuaoUwffKN4q6NC4A/Mf9iiPlOXQEKW/Mv/mh9/3YFA==}
    hasBin: true
    dev: true

  /dlv@1.1.3:
    resolution: {integrity: sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==}
    dev: false

  /doctrine@2.1.0:
    resolution: {integrity: sha512-35mSku4ZXK0vfCuHEDAwt55dg2jNajHZ1odvF+8SSr82EsZY4QmXfuWso8oEd8zRhVObSN18aM0CjSdoBX7zIw==}
    engines: {node: '>=0.10.0'}
    dependencies:
      esutils: 2.0.3
    dev: true

  /doctrine@3.0.0:
    resolution: {integrity: sha512-yS+Q5i3hBf7GBkd4KG8a7eBNNWNGLTaEwwYWUijIYM7zrlYDM0BFXHjjPWlWZ1Rg7UaddZeIDmi9jF3HmqiQ2w==}
    engines: {node: '>=6.0.0'}
    dependencies:
      esutils: 2.0.3
    dev: true

  /dom-serializer@2.0.0:
    resolution: {integrity: sha512-wIkAryiqt/nV5EQKqQpo3SToSOV9J0DnbJqwK7Wv/Trc92zIAYZ4FlMu+JPFW1DfGFt81ZTCGgDEabffXeLyJg==}
    dependencies:
      domelementtype: 2.3.0
      domhandler: 5.0.3
      entities: 4.5.0
    dev: false

  /domelementtype@2.3.0:
    resolution: {integrity: sha512-OLETBj6w0OsagBwdXnPdN0cnMfF9opN69co+7ZrbfPGrdpPVNBUj02spi6B1N7wChLQiPn4CSH/zJvXw56gmHw==}
    dev: false

  /domhandler@5.0.3:
    resolution: {integrity: sha512-cgwlv/1iFQiFnU96XXgROh8xTeetsnJiDsTc7TYCLFd9+/WNkIqPTxiM/8pSd8VIrhXGTf1Ny1q1hquVqDJB5w==}
    engines: {node: '>= 4'}
    dependencies:
      domelementtype: 2.3.0
    dev: false

  /domutils@3.1.0:
    resolution: {integrity: sha512-H78uMmQtI2AhgDJjWeQmHwJJ2bLPD3GMmO7Zja/ZZh84wkm+4ut+IUnUdRa8uCGX88DiVx1j6FRe1XfxEgjEZA==}
    dependencies:
      dom-serializer: 2.0.0
      domelementtype: 2.3.0
      domhandler: 5.0.3
    dev: false

  /dot-prop@6.0.1:
    resolution: {integrity: sha512-tE7ztYzXHIeyvc7N+hR3oi7FIbf/NIjVP9hmAt3yMXzrQ072/fpjGLx2GxNxGxUl5V73MEqYzioOMoVhGMJ5cA==}
    engines: {node: '>=10'}
    dependencies:
      is-obj: 2.0.0
    dev: true

  /eastasianwidth@0.2.0:
    resolution: {integrity: sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==}
    dev: true

  /electron-to-chromium@1.4.402:
    resolution: {integrity: sha512-gWYvJSkohOiBE6ecVYXkrDgNaUjo47QEKK0kQzmWyhkH+yoYiG44bwuicTGNSIQRG3WDMsWVZJLRnJnLNkbWvA==}
    dev: true

  /emoji-regex@8.0.0:
    resolution: {integrity: sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==}
    dev: true

  /emoji-regex@9.2.2:
    resolution: {integrity: sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==}
    dev: true

  /end-of-stream@1.4.4:
    resolution: {integrity: sha512-+uw1inIHVPQoaVuHzRyXd21icM+cnt4CzD5rW+NC1wjOUSTOs+Te7FOv7AhN7vS9x/oIyhLP5PR1H+phQAHu5Q==}
    dependencies:
      once: 1.4.0
    dev: true

  /entities@4.5.0:
    resolution: {integrity: sha512-V0hjH4dGPh9Ao5p0MoRY6BVqtwCjhz6vI5LT8AJ55H+4g9/4vbHx1I54fS0XuclLhDHArPQCiMjDxjaL8fPxhw==}
    engines: {node: '>=0.12'}

  /error-ex@1.3.2:
    resolution: {integrity: sha512-7dFHNmqeFSEt2ZBsCriorKnn3Z2pj+fd9kmI6QoWw4//DL+icEBfc0U7qJCisqrTsKTjw4fNFy2pW9OqStD84g==}
    dependencies:
      is-arrayish: 0.2.1
    dev: true

  /es-abstract@1.21.2:
    resolution: {integrity: sha512-y/B5POM2iBnIxCiernH1G7rC9qQoM77lLIMQLuob0zhp8C56Po81+2Nj0WFKnd0pNReDTnkYryc+zhOzpEIROg==}
    engines: {node: '>= 0.4'}
    dependencies:
      array-buffer-byte-length: 1.0.0
      available-typed-arrays: 1.0.5
      call-bind: 1.0.2
      es-set-tostringtag: 2.0.1
      es-to-primitive: 1.2.1
      function.prototype.name: 1.1.5
      get-intrinsic: 1.2.1
      get-symbol-description: 1.0.0
      globalthis: 1.0.3
      gopd: 1.0.1
      has: 1.0.3
      has-property-descriptors: 1.0.0
      has-proto: 1.0.1
      has-symbols: 1.0.3
      internal-slot: 1.0.5
      is-array-buffer: 3.0.2
      is-callable: 1.2.7
      is-negative-zero: 2.0.2
      is-regex: 1.1.4
      is-shared-array-buffer: 1.0.2
      is-string: 1.0.7
      is-typed-array: 1.1.10
      is-weakref: 1.0.2
      object-inspect: 1.12.3
      object-keys: 1.1.1
      object.assign: 4.1.4
      regexp.prototype.flags: 1.5.0
      safe-regex-test: 1.0.0
      string.prototype.trim: 1.2.7
      string.prototype.trimend: 1.0.6
      string.prototype.trimstart: 1.0.6
      typed-array-length: 1.0.4
      unbox-primitive: 1.0.2
      which-typed-array: 1.1.9
    dev: true

  /es-get-iterator@1.1.3:
    resolution: {integrity: sha512-sPZmqHBe6JIiTfN5q2pEi//TwxmAFHwj/XEuYjTuse78i8KxaqMTTzxPoFKuzRpDpTJ+0NAbpfenkmH2rePtuw==}
    dependencies:
      call-bind: 1.0.2
      get-intrinsic: 1.2.1
      has-symbols: 1.0.3
      is-arguments: 1.1.1
      is-map: 2.0.2
      is-set: 2.0.2
      is-string: 1.0.7
      isarray: 2.0.5
      stop-iteration-iterator: 1.0.0
    dev: true

  /es-set-tostringtag@2.0.1:
    resolution: {integrity: sha512-g3OMbtlwY3QewlqAiMLI47KywjWZoEytKr8pf6iTC8uJq5bIAH52Z9pnQ8pVL6whrCto53JZDuUIsifGeLorTg==}
    engines: {node: '>= 0.4'}
    dependencies:
      get-intrinsic: 1.2.1
      has: 1.0.3
      has-tostringtag: 1.0.0
    dev: true

  /es-shim-unscopables@1.0.0:
    resolution: {integrity: sha512-Jm6GPcCdC30eMLbZ2x8z2WuRwAws3zTBBKuusffYVUrNj/GVSUAZ+xKMaUpfNDR5IbyNA5LJbaecoUVbmUcB1w==}
    dependencies:
      has: 1.0.3
    dev: true

  /es-to-primitive@1.2.1:
    resolution: {integrity: sha512-QCOllgZJtaUo9miYBcLChTUaHNjJF3PYs1VidD7AwiEj1kYxKeQTctLAezAOH5ZKRH0g2IgPn6KwB4IT8iRpvA==}
    engines: {node: '>= 0.4'}
    dependencies:
      is-callable: 1.2.7
      is-date-object: 1.0.5
      is-symbol: 1.0.4
    dev: true

  /esbuild@0.17.19:
    resolution: {integrity: sha512-XQ0jAPFkK/u3LcVRcvVHQcTIqD6E2H1fvZMA5dQPSOWb3suUbWbfbRf94pjc0bNzRYLfIrDRQXr7X+LHIm5oHw==}
    engines: {node: '>=12'}
    hasBin: true
    requiresBuild: true
    optionalDependencies:
      '@esbuild/android-arm': 0.17.19
      '@esbuild/android-arm64': 0.17.19
      '@esbuild/android-x64': 0.17.19
      '@esbuild/darwin-arm64': 0.17.19
      '@esbuild/darwin-x64': 0.17.19
      '@esbuild/freebsd-arm64': 0.17.19
      '@esbuild/freebsd-x64': 0.17.19
      '@esbuild/linux-arm': 0.17.19
      '@esbuild/linux-arm64': 0.17.19
      '@esbuild/linux-ia32': 0.17.19
      '@esbuild/linux-loong64': 0.17.19
      '@esbuild/linux-mips64el': 0.17.19
      '@esbuild/linux-ppc64': 0.17.19
      '@esbuild/linux-riscv64': 0.17.19
      '@esbuild/linux-s390x': 0.17.19
      '@esbuild/linux-x64': 0.17.19
      '@esbuild/netbsd-x64': 0.17.19
      '@esbuild/openbsd-x64': 0.17.19
      '@esbuild/sunos-x64': 0.17.19
      '@esbuild/win32-arm64': 0.17.19
      '@esbuild/win32-ia32': 0.17.19
      '@esbuild/win32-x64': 0.17.19
    dev: true

  /escalade@3.1.1:
    resolution: {integrity: sha512-k0er2gUkLf8O0zKJiAhmkTnJlTvINGv7ygDNPbeIsX/TJjGJZHuh9B2UxbsaEkmlEo9MfhrSzmhIlhRlI2GXnw==}
    engines: {node: '>=6'}
    dev: true

  /escape-html@1.0.3:
    resolution: {integrity: sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow==}
    dev: true

  /escape-string-regexp@1.0.5:
    resolution: {integrity: sha512-vbRorB5FUQWvla16U8R/qgaFIya2qGzwDrNmCZuYKrbdSUMG6I1ZCGQRefkRVhuOkIGVne7BQ35DSfo1qvJqFg==}
    engines: {node: '>=0.8.0'}

  /escape-string-regexp@4.0.0:
    resolution: {integrity: sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==}
    engines: {node: '>=10'}
    dev: true

  /escape-string-regexp@5.0.0:
    resolution: {integrity: sha512-/veY75JbMK4j1yjvuUxuVsiS/hr/4iHs9FTT6cgTexxdE0Ly/glccBAkloH/DofkjRbZU3bnoj38mOmhkZ0lHw==}
    engines: {node: '>=12'}
    dev: true

  /eslint-config-airbnb-base@15.0.0(eslint-plugin-import@2.27.5)(eslint@8.41.0):
    resolution: {integrity: sha512-xaX3z4ZZIcFLvh2oUNvcX5oEofXda7giYmuplVxoOg5A7EXJMrUyqRgR+mhDhPK8LZ4PttFOBvCYDbX3sUoUig==}
    engines: {node: ^10.12.0 || >=12.0.0}
    peerDependencies:
      eslint: ^7.32.0 || ^8.2.0
      eslint-plugin-import: ^2.25.2
    dependencies:
      confusing-browser-globals: 1.0.11
      eslint: 8.41.0
      eslint-plugin-import: 2.27.5(@typescript-eslint/parser@5.59.6)(eslint@8.41.0)
      object.assign: 4.1.4
      object.entries: 1.1.6
      semver: 6.3.0
    dev: true

  /eslint-config-airbnb@19.0.4(eslint-plugin-import@2.27.5)(eslint-plugin-jsx-a11y@6.7.1)(eslint-plugin-react-hooks@4.6.0)(eslint-plugin-react@7.32.2)(eslint@8.41.0):
    resolution: {integrity: sha512-T75QYQVQX57jiNgpF9r1KegMICE94VYwoFQyMGhrvc+lB8YF2E/M/PYDaQe1AJcWaEgqLE+ErXV1Og/+6Vyzew==}
    engines: {node: ^10.12.0 || ^12.22.0 || ^14.17.0 || >=16.0.0}
    peerDependencies:
      eslint: ^7.32.0 || ^8.2.0
      eslint-plugin-import: ^2.25.3
      eslint-plugin-jsx-a11y: ^6.5.1
      eslint-plugin-react: ^7.28.0
      eslint-plugin-react-hooks: ^4.3.0
    dependencies:
      eslint: 8.41.0
      eslint-config-airbnb-base: 15.0.0(eslint-plugin-import@2.27.5)(eslint@8.41.0)
      eslint-plugin-import: 2.27.5(@typescript-eslint/parser@5.59.6)(eslint@8.41.0)
      eslint-plugin-jsx-a11y: 6.7.1(eslint@8.41.0)
      eslint-plugin-react: 7.32.2(eslint@8.41.0)
      eslint-plugin-react-hooks: 4.6.0(eslint@8.41.0)
      object.assign: 4.1.4
      object.entries: 1.1.6
    dev: true

  /eslint-config-prettier@8.8.0(eslint@8.41.0):
    resolution: {integrity: sha512-wLbQiFre3tdGgpDv67NQKnJuTlcUVYHas3k+DZCc2U2BadthoEY4B7hLPvAxaqdyOGCzuLfii2fqGph10va7oA==}
    hasBin: true
    peerDependencies:
      eslint: '>=7.0.0'
    dependencies:
      eslint: 8.41.0
    dev: true

  /eslint-import-resolver-node@0.3.7:
    resolution: {integrity: sha512-gozW2blMLJCeFpBwugLTGyvVjNoeo1knonXAcatC6bjPBZitotxdWf7Gimr25N4c0AAOo4eOUfaG82IJPDpqCA==}
    dependencies:
      debug: 3.2.7
      is-core-module: 2.12.1
      resolve: 1.22.2
    transitivePeerDependencies:
      - supports-color
    dev: true

  /eslint-module-utils@2.8.0(@typescript-eslint/parser@5.59.6)(eslint-import-resolver-node@0.3.7)(eslint@8.41.0):
    resolution: {integrity: sha512-aWajIYfsqCKRDgUfjEXNN/JlrzauMuSEy5sbd7WXbtW3EH6A6MpwEh42c7qD+MqQo9QMJ6fWLAeIJynx0g6OAw==}
    engines: {node: '>=4'}
    peerDependencies:
      '@typescript-eslint/parser': '*'
      eslint: '*'
      eslint-import-resolver-node: '*'
      eslint-import-resolver-typescript: '*'
      eslint-import-resolver-webpack: '*'
    peerDependenciesMeta:
      '@typescript-eslint/parser':
        optional: true
      eslint:
        optional: true
      eslint-import-resolver-node:
        optional: true
      eslint-import-resolver-typescript:
        optional: true
      eslint-import-resolver-webpack:
        optional: true
    dependencies:
      '@typescript-eslint/parser': 5.59.6(eslint@8.41.0)(typescript@5.0.4)
      debug: 3.2.7
      eslint: 8.41.0
      eslint-import-resolver-node: 0.3.7
    transitivePeerDependencies:
      - supports-color
    dev: true

  /eslint-plugin-import@2.27.5(@typescript-eslint/parser@5.59.6)(eslint@8.41.0):
    resolution: {integrity: sha512-LmEt3GVofgiGuiE+ORpnvP+kAm3h6MLZJ4Q5HCyHADofsb4VzXFsRiWj3c0OFiV+3DWFh0qg3v9gcPlfc3zRow==}
    engines: {node: '>=4'}
    peerDependencies:
      '@typescript-eslint/parser': '*'
      eslint: ^2 || ^3 || ^4 || ^5 || ^6 || ^7.2.0 || ^8
    peerDependenciesMeta:
      '@typescript-eslint/parser':
        optional: true
    dependencies:
      '@typescript-eslint/parser': 5.59.6(eslint@8.41.0)(typescript@5.0.4)
      array-includes: 3.1.6
      array.prototype.flat: 1.3.1
      array.prototype.flatmap: 1.3.1
      debug: 3.2.7
      doctrine: 2.1.0
      eslint: 8.41.0
      eslint-import-resolver-node: 0.3.7
      eslint-module-utils: 2.8.0(@typescript-eslint/parser@5.59.6)(eslint-import-resolver-node@0.3.7)(eslint@8.41.0)
      has: 1.0.3
      is-core-module: 2.12.1
      is-glob: 4.0.3
      minimatch: 3.1.2
      object.values: 1.1.6
      resolve: 1.22.2
      semver: 6.3.0
      tsconfig-paths: 3.14.2
    transitivePeerDependencies:
      - eslint-import-resolver-typescript
      - eslint-import-resolver-webpack
      - supports-color
    dev: true

  /eslint-plugin-jsx-a11y@6.7.1(eslint@8.41.0):
    resolution: {integrity: sha512-63Bog4iIethyo8smBklORknVjB0T2dwB8Mr/hIC+fBS0uyHdYYpzM/Ed+YC8VxTjlXHEWFOdmgwcDn1U2L9VCA==}
    engines: {node: '>=4.0'}
    peerDependencies:
      eslint: ^3 || ^4 || ^5 || ^6 || ^7 || ^8
    dependencies:
      '@babel/runtime': 7.21.5
      aria-query: 5.1.3
      array-includes: 3.1.6
      array.prototype.flatmap: 1.3.1
      ast-types-flow: 0.0.7
      axe-core: 4.7.1
      axobject-query: 3.1.1
      damerau-levenshtein: 1.0.8
      emoji-regex: 9.2.2
      eslint: 8.41.0
      has: 1.0.3
      jsx-ast-utils: 3.3.3
      language-tags: 1.0.5
      minimatch: 3.1.2
      object.entries: 1.1.6
      object.fromentries: 2.0.6
      semver: 6.3.0
    dev: true

  /eslint-plugin-prettier@4.2.1(eslint-config-prettier@8.8.0)(eslint@8.41.0)(prettier@2.8.8):
    resolution: {integrity: sha512-f/0rXLXUt0oFYs8ra4w49wYZBG5GKZpAYsJSm6rnYL5uVDjd+zowwMwVZHnAjf4edNrKpCDYfXDgmRE/Ak7QyQ==}
    engines: {node: '>=12.0.0'}
    peerDependencies:
      eslint: '>=7.28.0'
      eslint-config-prettier: '*'
      prettier: '>=2.0.0'
    peerDependenciesMeta:
      eslint-config-prettier:
        optional: true
    dependencies:
      eslint: 8.41.0
      eslint-config-prettier: 8.8.0(eslint@8.41.0)
      prettier: 2.8.8
      prettier-linter-helpers: 1.0.0
    dev: true

  /eslint-plugin-react-hooks@4.6.0(eslint@8.41.0):
    resolution: {integrity: sha512-oFc7Itz9Qxh2x4gNHStv3BqJq54ExXmfC+a1NjAta66IAN87Wu0R/QArgIS9qKzX3dXKPI9H5crl9QchNMY9+g==}
    engines: {node: '>=10'}
    peerDependencies:
      eslint: ^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0
    dependencies:
      eslint: 8.41.0
    dev: true

  /eslint-plugin-react@7.32.2(eslint@8.41.0):
    resolution: {integrity: sha512-t2fBMa+XzonrrNkyVirzKlvn5RXzzPwRHtMvLAtVZrt8oxgnTQaYbU6SXTOO1mwQgp1y5+toMSKInnzGr0Knqg==}
    engines: {node: '>=4'}
    peerDependencies:
      eslint: ^3 || ^4 || ^5 || ^6 || ^7 || ^8
    dependencies:
      array-includes: 3.1.6
      array.prototype.flatmap: 1.3.1
      array.prototype.tosorted: 1.1.1
      doctrine: 2.1.0
      eslint: 8.41.0
      estraverse: 5.3.0
      jsx-ast-utils: 3.3.3
      minimatch: 3.1.2
      object.entries: 1.1.6
      object.fromentries: 2.0.6
      object.hasown: 1.1.2
      object.values: 1.1.6
      prop-types: 15.8.1
      resolve: 2.0.0-next.4
      semver: 6.3.0
      string.prototype.matchall: 4.0.8
    dev: true

  /eslint-plugin-simple-import-sort@10.0.0(eslint@8.41.0):
    resolution: {integrity: sha512-AeTvO9UCMSNzIHRkg8S6c3RPy5YEwKWSQPx3DYghLedo2ZQxowPFLGDN1AZ2evfg6r6mjBSZSLxLFsWSu3acsw==}
    peerDependencies:
      eslint: '>=5.0.0'
    dependencies:
      eslint: 8.41.0
    dev: true

  /eslint-scope@5.1.1:
    resolution: {integrity: sha512-2NxwbF/hZ0KpepYN0cNbo+FN6XoK7GaHlQhgx/hIZl6Va0bF45RQOOwhLIy8lQDbuCiadSLCBnH2CFYquit5bw==}
    engines: {node: '>=8.0.0'}
    dependencies:
      esrecurse: 4.3.0
      estraverse: 4.3.0
    dev: true

  /eslint-scope@7.2.0:
    resolution: {integrity: sha512-DYj5deGlHBfMt15J7rdtyKNq/Nqlv5KfU4iodrQ019XESsRnwXH9KAE0y3cwtUHDo2ob7CypAnCqefh6vioWRw==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    dependencies:
      esrecurse: 4.3.0
      estraverse: 5.3.0
    dev: true

  /eslint-visitor-keys@3.4.1:
    resolution: {integrity: sha512-pZnmmLwYzf+kWaM/Qgrvpen51upAktaaiI01nsJD/Yr3lMOdNtq0cxkrrg16w64VtisN6okbs7Q8AfGqj4c9fA==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    dev: true

  /eslint@8.41.0:
    resolution: {integrity: sha512-WQDQpzGBOP5IrXPo4Hc0814r4/v2rrIsB0rhT7jtunIalgg6gYXWhRMOejVO8yH21T/FGaxjmFjBMNqcIlmH1Q==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    hasBin: true
    dependencies:
      '@eslint-community/eslint-utils': 4.4.0(eslint@8.41.0)
      '@eslint-community/regexpp': 4.5.1
      '@eslint/eslintrc': 2.0.3
      '@eslint/js': 8.41.0
      '@humanwhocodes/config-array': 0.11.8
      '@humanwhocodes/module-importer': 1.0.1
      '@nodelib/fs.walk': 1.2.8
      ajv: 6.12.6
      chalk: 4.1.2
      cross-spawn: 7.0.3
      debug: 4.3.4(supports-color@5.5.0)
      doctrine: 3.0.0
      escape-string-regexp: 4.0.0
      eslint-scope: 7.2.0
      eslint-visitor-keys: 3.4.1
      espree: 9.5.2
      esquery: 1.5.0
      esutils: 2.0.3
      fast-deep-equal: 3.1.3
      file-entry-cache: 6.0.1
      find-up: 5.0.0
      glob-parent: 6.0.2
      globals: 13.20.0
      graphemer: 1.4.0
      ignore: 5.2.4
      import-fresh: 3.3.0
      imurmurhash: 0.1.4
      is-glob: 4.0.3
      is-path-inside: 3.0.3
      js-yaml: 4.1.0
      json-stable-stringify-without-jsonify: 1.0.1
      levn: 0.4.1
      lodash.merge: 4.6.2
      minimatch: 3.1.2
      natural-compare: 1.4.0
      optionator: 0.9.1
      strip-ansi: 6.0.1
      strip-json-comments: 3.1.1
      text-table: 0.2.0
    transitivePeerDependencies:
      - supports-color
    dev: true

  /espree@9.5.2:
    resolution: {integrity: sha512-7OASN1Wma5fum5SrNhFMAMJxOUAbhyfQ8dQ//PJaJbNw0URTPWqIghHWt1MmAANKhHZIYOHruW4Kw4ruUWOdGw==}
    engines: {node: ^12.22.0 || ^14.17.0 || >=16.0.0}
    dependencies:
      acorn: 8.8.2
      acorn-jsx: 5.3.2(acorn@8.8.2)
      eslint-visitor-keys: 3.4.1
    dev: true

  /esquery@1.5.0:
    resolution: {integrity: sha512-YQLXUplAwJgCydQ78IMJywZCceoqk1oH01OERdSAJc/7U2AylwjhSCLDEtqwg811idIS/9fIU5GjG73IgjKMVg==}
    engines: {node: '>=0.10'}
    dependencies:
      estraverse: 5.3.0
    dev: true

  /esrecurse@4.3.0:
    resolution: {integrity: sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==}
    engines: {node: '>=4.0'}
    dependencies:
      estraverse: 5.3.0
    dev: true

  /estraverse@4.3.0:
    resolution: {integrity: sha512-39nnKffWz8xN1BU/2c79n9nB9HDzo0niYUqx6xyqUnyoAnQyyWpOTdZEeiCch8BBu515t4wp9ZmgVfVhn9EBpw==}
    engines: {node: '>=4.0'}
    dev: true

  /estraverse@5.3.0:
    resolution: {integrity: sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==}
    engines: {node: '>=4.0'}
    dev: true

  /estree-walker@2.0.2:
    resolution: {integrity: sha512-Rfkk/Mp/DL7JVje3u18FxFujQlTNR2q6QfMSMB7AvCBx91NGj/ba3kCfza0f6dVDbw7YlRf/nDrn7pQrCCyQ/w==}
    dev: true

  /esutils@2.0.3:
    resolution: {integrity: sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==}
    engines: {node: '>=0.10.0'}
    dev: true

  /expand-template@2.0.3:
    resolution: {integrity: sha512-XYfuKMvj4O35f/pOXLObndIRvyQ+/+6AhODh+OKWj9S9498pHHn/IMszH+gt0fBCRWMNfk1ZSp5x3AifmnI2vg==}
    engines: {node: '>=6'}
    dev: true

  /extend@3.0.2:
    resolution: {integrity: sha512-fjquC59cD7CyW6urNXK0FBufkZcoiGG80wTuPujX590cB5Ttln20E2UB4S/WARVqhXffZl2LNgS+gQdPIIim/g==}
    dev: true

  /fast-deep-equal@3.1.3:
    resolution: {integrity: sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==}
    dev: true

  /fast-diff@1.3.0:
    resolution: {integrity: sha512-VxPP4NqbUjj6MaAOafWeUn2cXWLcCtljklUtZf0Ind4XQ+QPtmA0b18zZy0jIQx+ExRVCR/ZQpBmik5lXshNsw==}
    dev: true

  /fast-glob@3.2.12:
    resolution: {integrity: sha512-DVj4CQIYYow0BlaelwK1pHl5n5cRSJfM60UA0zK891sVInoPri2Ekj7+e1CT3/3qxXenpI+nBBmQAcJPJgaj4w==}
    engines: {node: '>=8.6.0'}
    dependencies:
      '@nodelib/fs.stat': 2.0.5
      '@nodelib/fs.walk': 1.2.8
      glob-parent: 5.1.2
      merge2: 1.4.1
      micromatch: 4.0.5

  /fast-json-stable-stringify@2.1.0:
    resolution: {integrity: sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==}
    dev: true

  /fast-levenshtein@2.0.6:
    resolution: {integrity: sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==}
    dev: true

  /fastest-levenshtein@1.0.16:
    resolution: {integrity: sha512-eRnCtTTtGZFpQCwhJiUOuxPQWRXVKYDn0b2PeHfXL6/Zi53SLAzAHfVhVWK2AryC/WH05kGfxhFIPvTF0SXQzg==}
    engines: {node: '>= 4.9.1'}
    dev: true

  /fastq@1.15.0:
    resolution: {integrity: sha512-wBrocU2LCXXa+lWBt8RoIRD89Fi8OdABODa/kEnyeyjS5aZO5/GNvI5sEINADqP/h8M29UHTHUb53sUu5Ihqdw==}
    dependencies:
      reusify: 1.0.4

  /favicons@7.1.2:
    resolution: {integrity: sha512-kTgVOJ+xPKSGw7otDwVDdxw5n47FEiUuvPnrr3MoE03HLP6Wc9oA146eKVXVi0zkH1tf96SCcnFxKEafmKnovw==}
    engines: {node: '>=14.0.0'}
    dependencies:
      escape-html: 1.0.3
      sharp: 0.32.1
      xml2js: 0.5.0
    dev: true

  /file-entry-cache@6.0.1:
    resolution: {integrity: sha512-7Gps/XWymbLk2QLYK4NzpMOrYjMhdIxXuIvy2QBsLE6ljuodKvdkWs/cpyJJ3CVIVpH0Oi1Hvg1ovbMzLdFBBg==}
    engines: {node: ^10.12.0 || >=12.0.0}
    dependencies:
      flat-cache: 3.0.4
    dev: true

  /fill-range@7.0.1:
    resolution: {integrity: sha512-qOo9F+dMUmC2Lcb4BbVvnKJxTPjCm+RRpe4gDuGrzkL7mEVl/djYSu2OdQ2Pa302N4oqkSg9ir6jaLWJ2USVpQ==}
    engines: {node: '>=8'}
    dependencies:
      to-regex-range: 5.0.1

  /find-cache-dir@3.3.2:
    resolution: {integrity: sha512-wXZV5emFEjrridIgED11OoUKLxiYjAcqot/NJdAkOhlJ+vGzwhOAfcG5OX1jP+S0PcjEn8bdMJv+g2jwQ3Onig==}
    engines: {node: '>=8'}
    dependencies:
      commondir: 1.0.1
      make-dir: 3.1.0
      pkg-dir: 4.2.0
    dev: true

  /find-up@4.1.0:
    resolution: {integrity: sha512-PpOwAdQ/YlXQ2vj8a3h8IipDuYRi3wceVQQGYWxNINccq40Anw7BlsEXCMbt1Zt+OLA6Fq9suIpIWD0OsnISlw==}
    engines: {node: '>=8'}
    dependencies:
      locate-path: 5.0.0
      path-exists: 4.0.0
    dev: true

  /find-up@5.0.0:
    resolution: {integrity: sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==}
    engines: {node: '>=10'}
    dependencies:
      locate-path: 6.0.0
      path-exists: 4.0.0
    dev: true

  /flat-cache@3.0.4:
    resolution: {integrity: sha512-dm9s5Pw7Jc0GvMYbshN6zchCA9RgQlzzEZX3vylR9IqFfS8XciblUXOKfW6SiuJ0e13eDYZoZV5wdrev7P3Nwg==}
    engines: {node: ^10.12.0 || >=12.0.0}
    dependencies:
      flatted: 3.2.7
      rimraf: 3.0.2
    dev: true

  /flatted@3.2.7:
    resolution: {integrity: sha512-5nqDSxl8nn5BSNxyR3n4I6eDmbolI6WT+QqR547RwxQapgjQBmtktdP+HTBb/a/zLsbzERTONyUB5pefh5TtjQ==}
    dev: true

  /for-each@0.3.3:
    resolution: {integrity: sha512-jqYfLp7mo9vIyQf8ykW2v7A+2N4QjeCeI5+Dz9XraiO1ign81wjiH7Fb9vSOWvQfNtmSa4H2RoQTrrXivdUZmw==}
    dependencies:
      is-callable: 1.2.7
    dev: true

  /foreground-child@3.1.1:
    resolution: {integrity: sha512-TMKDUnIte6bfb5nWv7V/caI169OHgvwjb7V4WkeUvbQQdjr5rWKqHFiKWb/fcOwB+CzBT+qbWjvj+DVwRskpIg==}
    engines: {node: '>=14'}
    dependencies:
      cross-spawn: 7.0.3
      signal-exit: 4.0.2
    dev: true

  /fraction.js@4.2.0:
    resolution: {integrity: sha512-MhLuK+2gUcnZe8ZHlaaINnQLl0xRIGRfcGk2yl8xoQAfHrSsL3rYu6FCmBdkdbhc9EPlwyGHewaRsvwRMJtAlA==}
    dev: true

  /fs-constants@1.0.0:
    resolution: {integrity: sha512-y6OAwoSIf7FyjMIv94u+b5rdheZEjzR63GTyZJm5qh4Bi+2YgwLCcI/fPFZkL5PSixOt6ZNKm+w+Hfp/Bciwow==}
    dev: true

  /fs-extra@10.1.0:
    resolution: {integrity: sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==}
    engines: {node: '>=12'}
    dependencies:
      graceful-fs: 4.2.11
      jsonfile: 6.1.0
      universalify: 2.0.0
    dev: true

  /fs-extra@11.1.1:
    resolution: {integrity: sha512-MGIE4HOvQCeUCzmlHs0vXpih4ysz4wg9qiSAu6cd42lVwPbTM1TjV7RusoyQqMmk/95gdQZX72u+YW+c3eEpFQ==}
    engines: {node: '>=14.14'}
    dependencies:
      graceful-fs: 4.2.11
      jsonfile: 6.1.0
      universalify: 2.0.0
    dev: true

  /fs-minipass@2.1.0:
    resolution: {integrity: sha512-V/JgOLFCS+R6Vcq0slCuaeWEdNC3ouDlJMNIsacH2VtALiu9mV4LPrHc5cDl8k5aw6J8jwgWWpiTo5RYhmIzvg==}
    engines: {node: '>= 8'}
    dependencies:
      minipass: 3.3.6
    dev: true

  /fs-minipass@3.0.2:
    resolution: {integrity: sha512-2GAfyfoaCDRrM6jaOS3UsBts8yJ55VioXdWcOL7dK9zdAuKT71+WBA4ifnNYqVjYv+4SsPxjK0JT4yIIn4cA/g==}
    engines: {node: ^14.17.0 || ^16.13.0 || >=18.0.0}
    dependencies:
      minipass: 5.0.0
    dev: true

  /fs.realpath@1.0.0:
    resolution: {integrity: sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw==}

  /fsevents@2.3.2:
    resolution: {integrity: sha512-xiqMQR4xAeHTuB9uWm+fFRcIOgKBMiOBP+eXiyT7jsgVCq1bkVygt00oASowB7EdtpOHaaPgKt812P9ab+DDKA==}
    engines: {node: ^8.16.0 || ^10.6.0 || >=11.0.0}
    os: [darwin]
    requiresBuild: true
    optional: true

  /function-bind@1.1.1:
    resolution: {integrity: sha512-yIovAzMX49sF8Yl58fSCWJ5svSLuaibPxXQJFLmBObTuCr0Mf1KiPopGM9NiFjiYBCbfaa2Fh6breQ6ANVTI0A==}

  /function.prototype.name@1.1.5:
    resolution: {integrity: sha512-uN7m/BzVKQnCUF/iW8jYea67v++2u7m5UgENbHRtdDVclOUP+FMPlCNdmk0h/ysGyo2tavMJEDqJAkJdRa1vMA==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
      functions-have-names: 1.2.3
    dev: true

  /functions-have-names@1.2.3:
    resolution: {integrity: sha512-xckBUXyTIqT97tq2x2AMb+g163b5JFysYk0x4qxNFwbfQkmNZoiRHb6sPzI9/QV33WeuvVYBUIiD4NzNIyqaRQ==}
    dev: true

  /gensync@1.0.0-beta.2:
    resolution: {integrity: sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==}
    engines: {node: '>=6.9.0'}
    dev: true

  /get-intrinsic@1.2.1:
    resolution: {integrity: sha512-2DcsyfABl+gVHEfCOaTrWgyt+tb6MSEGmKq+kI5HwLbIYgjgmMcV8KQ41uaKz1xxUcn9tJtgFbQUEVcEbd0FYw==}
    dependencies:
      function-bind: 1.1.1
      has: 1.0.3
      has-proto: 1.0.1
      has-symbols: 1.0.3
    dev: true

  /get-symbol-description@1.0.0:
    resolution: {integrity: sha512-2EmdH1YvIQiZpltCNgkuiUnyukzxM/R6NDJX31Ke3BG1Nq5b0S2PhX59UKi9vZpPDQVdqn+1IcaAwnzTT5vCjw==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      get-intrinsic: 1.2.1
    dev: true

  /github-from-package@0.0.0:
    resolution: {integrity: sha1-l/tdlr/eiXMxPyDoKI75oWf6ZM4=}
    dev: true

  /glob-parent@5.1.2:
    resolution: {integrity: sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==}
    engines: {node: '>= 6'}
    dependencies:
      is-glob: 4.0.3

  /glob-parent@6.0.2:
    resolution: {integrity: sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==}
    engines: {node: '>=10.13.0'}
    dependencies:
      is-glob: 4.0.3

  /glob@10.2.5:
    resolution: {integrity: sha512-Gj+dFYPZ5hc5dazjXzB0iHg2jKWJZYMjITXYPBRQ/xc2Buw7H0BINknRTwURJ6IC6MEFpYbLvtgVb3qD+DwyuA==}
    engines: {node: '>=16 || 14 >=14.17'}
    hasBin: true
    dependencies:
      foreground-child: 3.1.1
      jackspeak: 2.2.0
      minimatch: 9.0.0
      minipass: 6.0.2
      path-scurry: 1.9.2
    dev: true

  /glob@7.1.6:
    resolution: {integrity: sha512-LwaxwyZ72Lk7vZINtNNrywX0ZuLyStrdDtabefZKAY5ZGJhVtgdznluResxNmPitE0SAO+O26sWTHeKSI2wMBA==}
    dependencies:
      fs.realpath: 1.0.0
      inflight: 1.0.6
      inherits: 2.0.4
      minimatch: 3.1.2
      once: 1.4.0
      path-is-absolute: 1.0.1
    dev: false

  /glob@7.2.3:
    resolution: {integrity: sha512-nFR0zLpU2YCaRxwoCJvL6UvCH2JFyFVIvwTLsIf21AuHlMskA1hhTdk+LlYJtOlYt9v6dvszD2BGRqBL+iQK9Q==}
    dependencies:
      fs.realpath: 1.0.0
      inflight: 1.0.6
      inherits: 2.0.4
      minimatch: 3.1.2
      once: 1.4.0
      path-is-absolute: 1.0.1
    dev: true

  /globals@11.12.0:
    resolution: {integrity: sha512-WOBp/EEGUiIsJSp7wcv/y6MO+lV9UoncWqxuFfm8eBwzWNgyfBd6Gz+IeKQ9jCmyhoH99g15M3T+QaVHFjizVA==}
    engines: {node: '>=4'}

  /globals@13.20.0:
    resolution: {integrity: sha512-Qg5QtVkCy/kv3FUSlu4ukeZDVf9ee0iXLAUYX13gbR17bnejFTzr4iS9bY7kwCf1NztRNm1t91fjOiyx4CSwPQ==}
    engines: {node: '>=8'}
    dependencies:
      type-fest: 0.20.2
    dev: true

  /globalthis@1.0.3:
    resolution: {integrity: sha512-sFdI5LyBiNTHjRd7cGPWapiHWMOXKyuBNX/cWJ3NfzrZQVa8GI/8cofCl74AOVqq9W5kNmguTIzJ/1s2gyI9wA==}
    engines: {node: '>= 0.4'}
    dependencies:
      define-properties: 1.2.0
    dev: true

  /globby@11.1.0:
    resolution: {integrity: sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==}
    engines: {node: '>=10'}
    dependencies:
      array-union: 2.1.0
      dir-glob: 3.0.1
      fast-glob: 3.2.12
      ignore: 5.2.4
      merge2: 1.4.1
      slash: 3.0.0
    dev: true

  /gopd@1.0.1:
    resolution: {integrity: sha512-d65bNlIadxvpb/A2abVdlqKqV563juRnZ1Wtk6s1sIR8uNsXR70xqIzVqxVf1eTqDunwT2MkczEeaezCKTZhwA==}
    dependencies:
      get-intrinsic: 1.2.1
    dev: true

  /graceful-fs@4.2.11:
    resolution: {integrity: sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==}
    dev: true

  /grapheme-splitter@1.0.4:
    resolution: {integrity: sha512-bzh50DW9kTPM00T8y4o8vQg89Di9oLJVLW/KaOGIXJWP/iqCN6WKYkbNOF04vFLJhwcpYUh9ydh/+5vpOqV4YQ==}
    dev: true

  /graphemer@1.4.0:
    resolution: {integrity: sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==}
    dev: true

  /has-bigints@1.0.2:
    resolution: {integrity: sha512-tSvCKtBr9lkF0Ex0aQiP9N+OpV4zi2r/Nee5VkRDbaqv35RLYMzbwQfFSZZH0kR+Rd6302UJZ2p/bJCEoR3VoQ==}
    dev: true

  /has-flag@3.0.0:
    resolution: {integrity: sha512-sKJf1+ceQBr4SMkvQnBDNDtf4TXpVhVGateu0t918bl30FnbE2m4vNLX+VWe/dpjlb+HugGYzW7uQXH98HPEYw==}
    engines: {node: '>=4'}

  /has-flag@4.0.0:
    resolution: {integrity: sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==}
    engines: {node: '>=8'}
    dev: true

  /has-property-descriptors@1.0.0:
    resolution: {integrity: sha512-62DVLZGoiEBDHQyqG4w9xCuZ7eJEwNmJRWw2VY84Oedb7WFcA27fiEVe8oUQx9hAUJ4ekurquucTGwsyO1XGdQ==}
    dependencies:
      get-intrinsic: 1.2.1
    dev: true

  /has-proto@1.0.1:
    resolution: {integrity: sha512-7qE+iP+O+bgF9clE5+UoBFzE65mlBiVj3tKCrlNQ0Ogwm0BjpT/gK4SlLYDMybDh5I3TCTKnPPa0oMG7JDYrhg==}
    engines: {node: '>= 0.4'}
    dev: true

  /has-symbols@1.0.3:
    resolution: {integrity: sha512-l3LCuF6MgDNwTDKkdYGEihYjt5pRPbEg46rtlmnSPlUbgmB8LOIrKJbYYFBSbnPaJexMKtiPO8hmeRjRz2Td+A==}
    engines: {node: '>= 0.4'}
    dev: true

  /has-tostringtag@1.0.0:
    resolution: {integrity: sha512-kFjcSNhnlGV1kyoGk7OXKSawH5JOb/LzUc5w9B02hOTO0dfFRjbHQKvg1d6cf3HbeUmtU9VbbV3qzZ2Teh97WQ==}
    engines: {node: '>= 0.4'}
    dependencies:
      has-symbols: 1.0.3
    dev: true

  /has@1.0.3:
    resolution: {integrity: sha512-f2dvO0VU6Oej7RkWJGrehjbzMAjFp5/VKPp5tTpWIV4JHHZK1/BxbFRtf/siA2SWTe09caDmVtYYzWEIbBS4zw==}
    engines: {node: '>= 0.4.0'}
    dependencies:
      function-bind: 1.1.1

  /hast-util-from-parse5@7.1.2:
    resolution: {integrity: sha512-Nz7FfPBuljzsN3tCQ4kCBKqdNhQE2l0Tn+X1ubgKBPRoiDIu1mL08Cfw4k7q71+Duyaw7DXDN+VTAp4Vh3oCOw==}
    dependencies:
      '@types/hast': 2.3.4
      '@types/unist': 2.0.6
      hastscript: 7.2.0
      property-information: 6.2.0
      vfile: 5.3.7
      vfile-location: 4.1.0
      web-namespaces: 2.0.1
    dev: true

  /hast-util-has-property@2.0.1:
    resolution: {integrity: sha512-X2+RwZIMTMKpXUzlotatPzWj8bspCymtXH3cfG3iQKV+wPF53Vgaqxi/eLqGck0wKq1kS9nvoB1wchbCPEL8sg==}
    dev: true

  /hast-util-parse-selector@3.1.1:
    resolution: {integrity: sha512-jdlwBjEexy1oGz0aJ2f4GKMaVKkA9jwjr4MjAAI22E5fM/TXVZHuS5OpONtdeIkRKqAaryQ2E9xNQxijoThSZA==}
    dependencies:
      '@types/hast': 2.3.4
    dev: true

  /hast-util-raw@7.2.3:
    resolution: {integrity: sha512-RujVQfVsOrxzPOPSzZFiwofMArbQke6DJjnFfceiEbFh7S05CbPt0cYN+A5YeD3pso0JQk6O1aHBnx9+Pm2uqg==}
    dependencies:
      '@types/hast': 2.3.4
      '@types/parse5': 6.0.3
      hast-util-from-parse5: 7.1.2
      hast-util-to-parse5: 7.1.0
      html-void-elements: 2.0.1
      parse5: 6.0.1
      unist-util-position: 4.0.4
      unist-util-visit: 4.1.2
      vfile: 5.3.7
      web-namespaces: 2.0.1
      zwitch: 2.0.4
    dev: true

  /hast-util-sanitize@4.1.0:
    resolution: {integrity: sha512-Hd9tU0ltknMGRDv+d6Ro/4XKzBqQnP/EZrpiTbpFYfXv/uOhWeKc+2uajcbEvAEH98VZd7eII2PiXm13RihnLw==}
    dependencies:
      '@types/hast': 2.3.4
    dev: true

  /hast-util-select@5.0.5:
    resolution: {integrity: sha512-QQhWMhgTFRhCaQdgTKzZ5g31GLQ9qRb1hZtDPMqQaOhpLBziWcshUS0uCR5IJ0U1jrK/mxg35fmcq+Dp/Cy2Aw==}
    dependencies:
      '@types/hast': 2.3.4
      '@types/unist': 2.0.6
      bcp-47-match: 2.0.3
      comma-separated-tokens: 2.0.3
      css-selector-parser: 1.4.1
      direction: 2.0.1
      hast-util-has-property: 2.0.1
      hast-util-to-string: 2.0.0
      hast-util-whitespace: 2.0.1
      not: 0.1.0
      nth-check: 2.1.1
      property-information: 6.2.0
      space-separated-tokens: 2.0.2
      unist-util-visit: 4.1.2
      zwitch: 2.0.4
    dev: true

  /hast-util-to-html@8.0.4:
    resolution: {integrity: sha512-4tpQTUOr9BMjtYyNlt0P50mH7xj0Ks2xpo8M943Vykljf99HW6EzulIoJP1N3eKOSScEHzyzi9dm7/cn0RfGwA==}
    dependencies:
      '@types/hast': 2.3.4
      '@types/unist': 2.0.6
      ccount: 2.0.1
      comma-separated-tokens: 2.0.3
      hast-util-raw: 7.2.3
      hast-util-whitespace: 2.0.1
      html-void-elements: 2.0.1
      property-information: 6.2.0
      space-separated-tokens: 2.0.2
      stringify-entities: 4.0.3
      zwitch: 2.0.4
    dev: true

  /hast-util-to-parse5@7.1.0:
    resolution: {integrity: sha512-YNRgAJkH2Jky5ySkIqFXTQiaqcAtJyVE+D5lkN6CdtOqrnkLfGYYrEcKuHOJZlp+MwjSwuD3fZuawI+sic/RBw==}
    dependencies:
      '@types/hast': 2.3.4
      comma-separated-tokens: 2.0.3
      property-information: 6.2.0
      space-separated-tokens: 2.0.2
      web-namespaces: 2.0.1
      zwitch: 2.0.4
    dev: true

  /hast-util-to-string@2.0.0:
    resolution: {integrity: sha512-02AQ3vLhuH3FisaMM+i/9sm4OXGSq1UhOOCpTLLQtHdL3tZt7qil69r8M8iDkZYyC0HCFylcYoP+8IO7ddta1A==}
    dependencies:
      '@types/hast': 2.3.4
    dev: true

  /hast-util-whitespace@2.0.1:
    resolution: {integrity: sha512-nAxA0v8+vXSBDt3AnRUNjyRIQ0rD+ntpbAp4LnPkumc5M9yUbSMa4XDU9Q6etY4f1Wp4bNgvc1yjiZtsTTrSng==}
    dev: true

  /hastscript@7.2.0:
    resolution: {integrity: sha512-TtYPq24IldU8iKoJQqvZOuhi5CyCQRAbvDOX0x1eW6rsHSxa/1i2CCiptNTotGHJ3VoHRGmqiv6/D3q113ikkw==}
    dependencies:
      '@types/hast': 2.3.4
      comma-separated-tokens: 2.0.3
      hast-util-parse-selector: 3.1.1
      property-information: 6.2.0
      space-separated-tokens: 2.0.2
    dev: true

  /highlight-es@1.0.3:
    resolution: {integrity: sha512-s/SIX6yp/5S1p8aC/NRDC1fwEb+myGIfp8/TzZz0rtAv8fzsdX7vGl3Q1TrXCsczFq8DI3CBFBCySPClfBSdbg==}
    dependencies:
      chalk: 2.4.2
      is-es2016-keyword: 1.0.0
      js-tokens: 3.0.2
    dev: true

  /hoist-non-react-statics@3.3.2:
    resolution: {integrity: sha512-/gGivxi8JPKWNm/W0jSmzcMPpfpPLc3dY/6GxhX2hQ9iGj3aDfklV4ET7NjKpSinLpJ5vafa9iiGIEZg10SfBw==}
    dependencies:
      react-is: 16.13.1

  /html-void-elements@2.0.1:
    resolution: {integrity: sha512-0quDb7s97CfemeJAnW9wC0hw78MtW7NU3hqtCD75g2vFlDLt36llsYD7uB7SUzojLMP24N5IatXf7ylGXiGG9A==}
    dev: true

  /ieee754@1.2.1:
    resolution: {integrity: sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==}
    dev: true

  /ignore@5.2.4:
    resolution: {integrity: sha512-MAb38BcSbH0eHNBxn7ql2NH/kX33OkB3lZ1BNdh7ENeRChHTYsTvWrMubiIAMNS2llXEEgZ1MUOBtXChP3kaFQ==}
    engines: {node: '>= 4'}
    dev: true

  /import-fresh@3.3.0:
    resolution: {integrity: sha512-veYYhQa+D1QBKznvhUHxb8faxlrwUnxseDAbAp457E0wLNio2bOSKnjYDhMj+YiAq61xrMGhQk9iXVk5FzgQMw==}
    engines: {node: '>=6'}
    dependencies:
      parent-module: 1.0.1
      resolve-from: 4.0.0
    dev: true

  /imurmurhash@0.1.4:
    resolution: {integrity: sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==}
    engines: {node: '>=0.8.19'}
    dev: true

  /indent-string@4.0.0:
    resolution: {integrity: sha512-EdDDZu4A2OyIK7Lr/2zG+w5jmbuk1DVBnEwREQvBzspBJkCEbRa8GxU1lghYcaGJCnRWibjDXlq779X1/y5xwg==}
    engines: {node: '>=8'}
    dev: true

  /inflight@1.0.6:
    resolution: {integrity: sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==}
    dependencies:
      once: 1.4.0
      wrappy: 1.0.2

  /inherits@2.0.4:
    resolution: {integrity: sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==}

  /ini@1.3.8:
    resolution: {integrity: sha512-JV/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew==}
    dev: true

  /internal-slot@1.0.5:
    resolution: {integrity: sha512-Y+R5hJrzs52QCG2laLn4udYVnxsfny9CpOhNhUvk/SSSVyF6T27FzRbF0sroPidSu3X8oEAkOn2K804mjpt6UQ==}
    engines: {node: '>= 0.4'}
    dependencies:
      get-intrinsic: 1.2.1
      has: 1.0.3
      side-channel: 1.0.4
    dev: true

  /is-arguments@1.1.1:
    resolution: {integrity: sha512-8Q7EARjzEnKpt/PCD7e1cgUS0a6X8u5tdSiMqXhojOdoV9TsMsiO+9VLC5vAmO8N7/GmXn7yjR8qnA6bVAEzfA==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      has-tostringtag: 1.0.0
    dev: true

  /is-array-buffer@3.0.2:
    resolution: {integrity: sha512-y+FyyR/w8vfIRq4eQcM1EYgSTnmHXPqaF+IgzgraytCFq5Xh8lllDVmAZolPJiZttZLeFSINPYMaEJ7/vWUa1w==}
    dependencies:
      call-bind: 1.0.2
      get-intrinsic: 1.2.1
      is-typed-array: 1.1.10
    dev: true

  /is-arrayish@0.2.1:
    resolution: {integrity: sha512-zz06S8t0ozoDXMG+ube26zeCTNXcKIPJZJi8hBrF4idCLms4CG9QtK7qBl1boi5ODzFpjswb5JPmHCbMpjaYzg==}
    dev: true

  /is-arrayish@0.3.2:
    resolution: {integrity: sha512-eVRqCvVlZbuw3GrM63ovNSNAeA1K16kaR/LRY/92w0zxQ5/1YzwblUX652i4Xs9RwAGjW9d9y6X88t8OaAJfWQ==}
    dev: true

  /is-bigint@1.0.4:
    resolution: {integrity: sha512-zB9CruMamjym81i2JZ3UMn54PKGsQzsJeo6xvN3HJJ4CAsQNB6iRutp2To77OfCNuoxspsIhzaPoO1zyCEhFOg==}
    dependencies:
      has-bigints: 1.0.2
    dev: true

  /is-binary-path@2.1.0:
    resolution: {integrity: sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==}
    engines: {node: '>=8'}
    dependencies:
      binary-extensions: 2.2.0
    dev: false

  /is-boolean-object@1.1.2:
    resolution: {integrity: sha512-gDYaKHJmnj4aWxyj6YHyXVpdQawtVLHU5cb+eztPGczf6cjuTdwve5ZIEfgXqH4e57An1D1AKf8CZ3kYrQRqYA==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      has-tostringtag: 1.0.0
    dev: true

  /is-buffer@2.0.5:
    resolution: {integrity: sha512-i2R6zNFDwgEHJyQUtJEk0XFi1i0dPFn/oqjK3/vPCcDeJvW5NQ83V8QbicfF1SupOaB0h8ntgBC2YiE7dfyctQ==}
    engines: {node: '>=4'}
    dev: true

  /is-callable@1.2.7:
    resolution: {integrity: sha512-1BC0BVFhS/p0qtw6enp8e+8OD0UrK0oFLztSjNzhcKA3WDuJxxAPXzPuPtKkjEY9UUoEWlX/8fgKeu2S8i9JTA==}
    engines: {node: '>= 0.4'}
    dev: true

  /is-ci@3.0.1:
    resolution: {integrity: sha512-ZYvCgrefwqoQ6yTyYUbQu64HsITZ3NfKX1lzaEYdkTDcfKzzCI/wthRRYKkdjHKFVgNiXKAKm65Zo1pk2as/QQ==}
    hasBin: true
    dependencies:
      ci-info: 3.8.0
    dev: true

  /is-core-module@2.12.1:
    resolution: {integrity: sha512-Q4ZuBAe2FUsKtyQJoQHlvP8OvBERxO3jEmy1I7hcRXcJBGGHFh/aJBswbXuS9sgrDH2QUO8ilkwNPHvHMd8clg==}
    dependencies:
      has: 1.0.3

  /is-date-object@1.0.5:
    resolution: {integrity: sha512-9YQaSxsAiSwcvS33MBk3wTCVnWK+HhF8VZR2jRxehM16QcVOdHqPn4VPHmRK4lSr38n9JriurInLcP90xsYNfQ==}
    engines: {node: '>= 0.4'}
    dependencies:
      has-tostringtag: 1.0.0
    dev: true

  /is-es2016-keyword@1.0.0:
    resolution: {integrity: sha512-JtZWPUwjdbQ1LIo9OSZ8MdkWEve198ors27vH+RzUUvZXXZkzXCxFnlUhzWYxy5IexQSRiXVw9j2q/tHMmkVYQ==}
    dev: true

  /is-extglob@2.1.1:
    resolution: {integrity: sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==}
    engines: {node: '>=0.10.0'}

  /is-fullwidth-code-point@3.0.0:
    resolution: {integrity: sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==}
    engines: {node: '>=8'}
    dev: true

  /is-glob@4.0.3:
    resolution: {integrity: sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==}
    engines: {node: '>=0.10.0'}
    dependencies:
      is-extglob: 2.1.1

  /is-map@2.0.2:
    resolution: {integrity: sha512-cOZFQQozTha1f4MxLFzlgKYPTyj26picdZTx82hbc/Xf4K/tZOOXSCkMvU4pKioRXGDLJRn0GM7Upe7kR721yg==}
    dev: true

  /is-negative-zero@2.0.2:
    resolution: {integrity: sha512-dqJvarLawXsFbNDeJW7zAz8ItJ9cd28YufuuFzh0G8pNHjJMnY08Dv7sYX2uF5UpQOwieAeOExEYAWWfu7ZZUA==}
    engines: {node: '>= 0.4'}
    dev: true

  /is-number-object@1.0.7:
    resolution: {integrity: sha512-k1U0IRzLMo7ZlYIfzRu23Oh6MiIFasgpb9X76eqfFZAqwH44UI4KTBvBYIZ1dSL9ZzChTB9ShHfLkR4pdW5krQ==}
    engines: {node: '>= 0.4'}
    dependencies:
      has-tostringtag: 1.0.0
    dev: true

  /is-number@7.0.0:
    resolution: {integrity: sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==}
    engines: {node: '>=0.12.0'}

  /is-obj@2.0.0:
    resolution: {integrity: sha512-drqDG3cbczxxEJRoOXcOjtdp1J/lyp1mNn0xaznRs8+muBhgQcrnbspox5X5fOw0HnMnbfDzvnEMEtqDEJEo8w==}
    engines: {node: '>=8'}
    dev: true

  /is-path-inside@3.0.3:
    resolution: {integrity: sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==}
    engines: {node: '>=8'}
    dev: true

  /is-plain-obj@4.1.0:
    resolution: {integrity: sha512-+Pgi+vMuUNkJyExiMBt5IlFoMyKnr5zhJ4Uspz58WOhBF5QoIZkFyNHIbBAtHwzVAgk5RtndVNsDRN61/mmDqg==}
    engines: {node: '>=12'}
    dev: true

  /is-plain-object@5.0.0:
    resolution: {integrity: sha512-VRSzKkbMm5jMDoKLbltAkFQ5Qr7VDiTFGXxYFXXowVj387GeGNOCsOH6Msy00SGZ3Fp84b1Naa1psqgcCIEP5Q==}
    engines: {node: '>=0.10.0'}
    dev: true

  /is-regex@1.1.4:
    resolution: {integrity: sha512-kvRdxDsxZjhzUX07ZnLydzS1TU/TJlTUHHY4YLL87e37oUA49DfkLqgy+VjFocowy29cKvcSiu+kIv728jTTVg==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      has-tostringtag: 1.0.0
    dev: true

  /is-set@2.0.2:
    resolution: {integrity: sha512-+2cnTEZeY5z/iXGbLhPrOAaK/Mau5k5eXq9j14CpRTftq0pAJu2MwVRSZhyZWBzx3o6X795Lz6Bpb6R0GKf37g==}
    dev: true

  /is-shared-array-buffer@1.0.2:
    resolution: {integrity: sha512-sqN2UDu1/0y6uvXyStCOzyhAjCSlHceFoMKJW8W9EU9cvic/QdsZ0kEU93HEy3IUEFZIiH/3w+AH/UQbPHNdhA==}
    dependencies:
      call-bind: 1.0.2
    dev: true

  /is-string@1.0.7:
    resolution: {integrity: sha512-tE2UXzivje6ofPW7l23cjDOMa09gb7xlAqG6jG5ej6uPV32TlWP3NKPigtaGeHNu9fohccRYvIiZMfOOnOYUtg==}
    engines: {node: '>= 0.4'}
    dependencies:
      has-tostringtag: 1.0.0
    dev: true

  /is-symbol@1.0.4:
    resolution: {integrity: sha512-C/CPBqKWnvdcxqIARxyOh4v1UUEOCHpgDa0WYgpKDFMszcrPcffg5uhwSgPCLD2WWxmq6isisz87tzT01tuGhg==}
    engines: {node: '>= 0.4'}
    dependencies:
      has-symbols: 1.0.3
    dev: true

  /is-typed-array@1.1.10:
    resolution: {integrity: sha512-PJqgEHiWZvMpaFZ3uTc8kHPM4+4ADTlDniuQL7cU/UDA0Ql7F70yGfHph3cLNe+c9toaigv+DFzTJKhc2CtO6A==}
    engines: {node: '>= 0.4'}
    dependencies:
      available-typed-arrays: 1.0.5
      call-bind: 1.0.2
      for-each: 0.3.3
      gopd: 1.0.1
      has-tostringtag: 1.0.0
    dev: true

  /is-weakmap@2.0.1:
    resolution: {integrity: sha512-NSBR4kH5oVj1Uwvv970ruUkCV7O1mzgVFO4/rev2cLRda9Tm9HrL70ZPut4rOHgY0FNrUu9BCbXA2sdQ+x0chA==}
    dev: true

  /is-weakref@1.0.2:
    resolution: {integrity: sha512-qctsuLZmIQ0+vSSMfoVvyFe2+GSEvnmZ2ezTup1SBse9+twCCeial6EEi3Nc2KFcf6+qz2FBPnjXsk8xhKSaPQ==}
    dependencies:
      call-bind: 1.0.2
    dev: true

  /is-weakset@2.0.2:
    resolution: {integrity: sha512-t2yVvttHkQktwnNNmBQ98AhENLdPUTDTE21uPqAQ0ARwQfGeQKRVS0NNurH7bTf7RrvcVn1OOge45CnBeHCSmg==}
    dependencies:
      call-bind: 1.0.2
      get-intrinsic: 1.2.1
    dev: true

  /isarray@2.0.5:
    resolution: {integrity: sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw==}
    dev: true

  /isexe@2.0.0:
    resolution: {integrity: sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==}
    dev: true

  /jackspeak@2.2.0:
    resolution: {integrity: sha512-r5XBrqIJfwRIjRt/Xr5fv9Wh09qyhHfKnYddDlpM+ibRR20qrYActpCAgU6U+d53EOEjzkvxPMVHSlgR7leXrQ==}
    engines: {node: '>=14'}
    dependencies:
      '@isaacs/cliui': 8.0.2
    optionalDependencies:
      '@pkgjs/parseargs': 0.11.0
    dev: true

  /jiti@1.18.2:
    resolution: {integrity: sha512-QAdOptna2NYiSSpv0O/BwoHBSmz4YhpzJHyi+fnMRTXFjp7B8i/YG5Z8IfusxB1ufjcD2Sre1F3R+nX3fvy7gg==}
    hasBin: true
    dev: false

  /js-tokens@3.0.2:
    resolution: {integrity: sha512-RjTcuD4xjtthQkaWH7dFlH85L+QaVtSoOyGdZ3g6HFhS9dFNDfLyqgm2NFe2X6cQpeFmt0452FJjFG5UameExg==}
    dev: true

  /js-tokens@4.0.0:
    resolution: {integrity: sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==}

  /js-yaml@4.1.0:
    resolution: {integrity: sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==}
    hasBin: true
    dependencies:
      argparse: 2.0.1
    dev: true

  /jsesc@2.5.2:
    resolution: {integrity: sha512-OYu7XEzjkCQ3C5Ps3QIZsQfNpqoJyZZA99wd9aWd05NCtC5pWOkShK2mkL6HXQR6/Cy2lbNdPlZBpuQHXE63gA==}
    engines: {node: '>=4'}
    hasBin: true

  /json-parse-even-better-errors@2.3.1:
    resolution: {integrity: sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==}
    dev: true

  /json-schema-traverse@0.4.1:
    resolution: {integrity: sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==}
    dev: true

  /json-stable-stringify-without-jsonify@1.0.1:
    resolution: {integrity: sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==}
    dev: true

  /json5@1.0.2:
    resolution: {integrity: sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==}
    hasBin: true
    dependencies:
      minimist: 1.2.8
    dev: true

  /json5@2.2.3:
    resolution: {integrity: sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==}
    engines: {node: '>=6'}
    hasBin: true
    dev: true

  /jsonfile@6.1.0:
    resolution: {integrity: sha512-5dgndWOriYSm5cnYaJNhalLNDKOqFwyDB/rr1E9ZsGciGvKPs8R2xYGCacuf3z6K1YKDz182fd+fY3cn3pMqXQ==}
    dependencies:
      universalify: 2.0.0
    optionalDependencies:
      graceful-fs: 4.2.11
    dev: true

  /jsx-ast-utils@3.3.3:
    resolution: {integrity: sha512-fYQHZTZ8jSfmWZ0iyzfwiU4WDX4HpHbMCZ3gPlWYiCl3BoeOTsqKBqnTVfH2rYT7eP5c3sVbeSPHnnJOaTrWiw==}
    engines: {node: '>=4.0'}
    dependencies:
      array-includes: 3.1.6
      object.assign: 4.1.4
    dev: true

  /kleur@4.1.5:
    resolution: {integrity: sha512-o+NO+8WrRiQEE4/7nwRJhN1HWpVmJm511pBHUxPLtp0BUISzlBplORYSmTclCnJvQq2tKu/sgl3xVpkc7ZWuQQ==}
    engines: {node: '>=6'}
    dev: true

  /language-subtag-registry@0.3.22:
    resolution: {integrity: sha512-tN0MCzyWnoz/4nHS6uxdlFWoUZT7ABptwKPQ52Ea7URk6vll88bWBVhodtnlfEuCcKWNGoc+uGbw1cwa9IKh/w==}
    dev: true

  /language-tags@1.0.5:
    resolution: {integrity: sha512-qJhlO9cGXi6hBGKoxEG/sKZDAHD5Hnu9Hs4WbOY3pCWXDhw0N8x1NenNzm2EnNLkLkk7J2SdxAkDSbb6ftT+UQ==}
    dependencies:
      language-subtag-registry: 0.3.22
    dev: true

  /levn@0.4.1:
    resolution: {integrity: sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==}
    engines: {node: '>= 0.8.0'}
    dependencies:
      prelude-ls: 1.2.1
      type-check: 0.4.0
    dev: true

  /lilconfig@2.1.0:
    resolution: {integrity: sha512-utWOt/GHzuUxnLKxB6dk81RoOeoNeHgbrXiuGk4yyF5qlRz+iIVWu56E2fqGHFrXz0QNUhLB/8nKqvRH66JKGQ==}
    engines: {node: '>=10'}
    dev: false

  /lines-and-columns@1.2.4:
    resolution: {integrity: sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==}

  /locate-path@5.0.0:
    resolution: {integrity: sha512-t7hw9pI+WvuwNJXwk5zVHpyhIqzg2qTlklJOf0mVxGSbe3Fp2VieZcduNYjaLDoy6p9uGpQEGWG87WpMKlNq8g==}
    engines: {node: '>=8'}
    dependencies:
      p-locate: 4.1.0
    dev: true

  /locate-path@6.0.0:
    resolution: {integrity: sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==}
    engines: {node: '>=10'}
    dependencies:
      p-locate: 5.0.0
    dev: true

  /lodash.isequal@4.5.0:
    resolution: {integrity: sha512-pDo3lu8Jhfjqls6GkMgpahsF9kCyayhgykjyLMNFTKWrpVdAQtYyB4muAMWozBB4ig/dtWAmsMxLEI8wuz+DYQ==}
    dev: true

  /lodash.merge@4.6.2:
    resolution: {integrity: sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==}
    dev: true

  /lodash@4.17.21:
    resolution: {integrity: sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==}

  /longest-streak@3.1.0:
    resolution: {integrity: sha512-9Ri+o0JYgehTaVBBDoMqIl8GXtbWg711O3srftcHhZ0dqnETqLaoIK0x17fUw9rFSlK/0NlsKe0Ahhyl5pXE2g==}
    dev: true

  /loose-envify@1.4.0:
    resolution: {integrity: sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==}
    hasBin: true
    dependencies:
      js-tokens: 4.0.0

  /lru-cache@5.1.1:
    resolution: {integrity: sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==}
    dependencies:
      yallist: 3.1.1
    dev: true

  /lru-cache@6.0.0:
    resolution: {integrity: sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==}
    engines: {node: '>=10'}
    dependencies:
      yallist: 4.0.0
    dev: true

  /lru-cache@7.18.3:
    resolution: {integrity: sha512-jumlc0BIUrS3qJGgIkWZsyfAM7NCWiBcCDhnd+3NNM5KbBmLTgHVfWBcg6W+rLUsIpzpERPsvwUP7CckAQSOoA==}
    engines: {node: '>=12'}
    dev: true

  /lru-cache@9.1.1:
    resolution: {integrity: sha512-65/Jky17UwSb0BuB9V+MyDpsOtXKmYwzhyl+cOa9XUiI4uV2Ouy/2voFP3+al0BjZbJgMBD8FojMpAf+Z+qn4A==}
    engines: {node: 14 || >=16.14}
    dev: true

  /make-dir@3.1.0:
    resolution: {integrity: sha512-g3FeP20LNwhALb/6Cz6Dd4F2ngze0jz7tbzrD2wAV+o9FeNHe4rL+yK2md0J/fiSf1sa1ADhXqi5+oVwOM/eGw==}
    engines: {node: '>=8'}
    dependencies:
      semver: 6.3.0
    dev: true

  /markdown-table@3.0.3:
    resolution: {integrity: sha512-Z1NL3Tb1M9wH4XESsCDEksWoKTdlUafKc4pt0GRwjUyXaCFZ+dc3g2erqB6zm3szA2IUSi7VnPI+o/9jnxh9hw==}
    dev: true

  /mdast-util-definitions@5.1.2:
    resolution: {integrity: sha512-8SVPMuHqlPME/z3gqVwWY4zVXn8lqKv/pAhC57FuJ40ImXyBpmO5ukh98zB2v7Blql2FiHjHv9LVztSIqjY+MA==}
    dependencies:
      '@types/mdast': 3.0.11
      '@types/unist': 2.0.6
      unist-util-visit: 4.1.2
    dev: true

  /mdast-util-find-and-replace@2.2.2:
    resolution: {integrity: sha512-MTtdFRz/eMDHXzeK6W3dO7mXUlF82Gom4y0oOgvHhh/HXZAGvIQDUvQ0SuUx+j2tv44b8xTHOm8K/9OoRFnXKw==}
    dependencies:
      '@types/mdast': 3.0.11
      escape-string-regexp: 5.0.0
      unist-util-is: 5.2.1
      unist-util-visit-parents: 5.1.3
    dev: true

  /mdast-util-from-markdown@1.3.0:
    resolution: {integrity: sha512-HN3W1gRIuN/ZW295c7zi7g9lVBllMgZE40RxCX37wrTPWXCWtpvOZdfnuK+1WNpvZje6XuJeI3Wnb4TJEUem+g==}
    dependencies:
      '@types/mdast': 3.0.11
      '@types/unist': 2.0.6
      decode-named-character-reference: 1.0.2
      mdast-util-to-string: 3.2.0
      micromark: 3.1.0
      micromark-util-decode-numeric-character-reference: 1.0.0
      micromark-util-decode-string: 1.0.2
      micromark-util-normalize-identifier: 1.0.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      unist-util-stringify-position: 3.0.3
      uvu: 0.5.6
    transitivePeerDependencies:
      - supports-color
    dev: true

  /mdast-util-gfm-autolink-literal@1.0.3:
    resolution: {integrity: sha512-My8KJ57FYEy2W2LyNom4n3E7hKTuQk/0SES0u16tjA9Z3oFkF4RrC/hPAPgjlSpezsOvI8ObcXcElo92wn5IGA==}
    dependencies:
      '@types/mdast': 3.0.11
      ccount: 2.0.1
      mdast-util-find-and-replace: 2.2.2
      micromark-util-character: 1.1.0
    dev: true

  /mdast-util-gfm-footnote@1.0.2:
    resolution: {integrity: sha512-56D19KOGbE00uKVj3sgIykpwKL179QsVFwx/DCW0u/0+URsryacI4MAdNJl0dh+u2PSsD9FtxPFbHCzJ78qJFQ==}
    dependencies:
      '@types/mdast': 3.0.11
      mdast-util-to-markdown: 1.5.0
      micromark-util-normalize-identifier: 1.0.0
    dev: true

  /mdast-util-gfm-strikethrough@1.0.3:
    resolution: {integrity: sha512-DAPhYzTYrRcXdMjUtUjKvW9z/FNAMTdU0ORyMcbmkwYNbKocDpdk+PX1L1dQgOID/+vVs1uBQ7ElrBQfZ0cuiQ==}
    dependencies:
      '@types/mdast': 3.0.11
      mdast-util-to-markdown: 1.5.0
    dev: true

  /mdast-util-gfm-table@1.0.7:
    resolution: {integrity: sha512-jjcpmNnQvrmN5Vx7y7lEc2iIOEytYv7rTvu+MeyAsSHTASGCCRA79Igg2uKssgOs1i1po8s3plW0sTu1wkkLGg==}
    dependencies:
      '@types/mdast': 3.0.11
      markdown-table: 3.0.3
      mdast-util-from-markdown: 1.3.0
      mdast-util-to-markdown: 1.5.0
    transitivePeerDependencies:
      - supports-color
    dev: true

  /mdast-util-gfm-task-list-item@1.0.2:
    resolution: {integrity: sha512-PFTA1gzfp1B1UaiJVyhJZA1rm0+Tzn690frc/L8vNX1Jop4STZgOE6bxUhnzdVSB+vm2GU1tIsuQcA9bxTQpMQ==}
    dependencies:
      '@types/mdast': 3.0.11
      mdast-util-to-markdown: 1.5.0
    dev: true

  /mdast-util-gfm@2.0.2:
    resolution: {integrity: sha512-qvZ608nBppZ4icQlhQQIAdc6S3Ffj9RGmzwUKUWuEICFnd1LVkN3EktF7ZHAgfcEdvZB5owU9tQgt99e2TlLjg==}
    dependencies:
      mdast-util-from-markdown: 1.3.0
      mdast-util-gfm-autolink-literal: 1.0.3
      mdast-util-gfm-footnote: 1.0.2
      mdast-util-gfm-strikethrough: 1.0.3
      mdast-util-gfm-table: 1.0.7
      mdast-util-gfm-task-list-item: 1.0.2
      mdast-util-to-markdown: 1.5.0
    transitivePeerDependencies:
      - supports-color
    dev: true

  /mdast-util-phrasing@3.0.1:
    resolution: {integrity: sha512-WmI1gTXUBJo4/ZmSk79Wcb2HcjPJBzM1nlI/OUWA8yk2X9ik3ffNbBGsU+09BFmXaL1IBb9fiuvq6/KMiNycSg==}
    dependencies:
      '@types/mdast': 3.0.11
      unist-util-is: 5.2.1
    dev: true

  /mdast-util-to-hast@12.3.0:
    resolution: {integrity: sha512-pits93r8PhnIoU4Vy9bjW39M2jJ6/tdHyja9rrot9uujkN7UTU9SDnE6WNJz/IGyQk3XHX6yNNtrBH6cQzm8Hw==}
    dependencies:
      '@types/hast': 2.3.4
      '@types/mdast': 3.0.11
      mdast-util-definitions: 5.1.2
      micromark-util-sanitize-uri: 1.1.0
      trim-lines: 3.0.1
      unist-util-generated: 2.0.1
      unist-util-position: 4.0.4
      unist-util-visit: 4.1.2
    dev: true

  /mdast-util-to-markdown@1.5.0:
    resolution: {integrity: sha512-bbv7TPv/WC49thZPg3jXuqzuvI45IL2EVAr/KxF0BSdHsU0ceFHOmwQn6evxAh1GaoK/6GQ1wp4R4oW2+LFL/A==}
    dependencies:
      '@types/mdast': 3.0.11
      '@types/unist': 2.0.6
      longest-streak: 3.1.0
      mdast-util-phrasing: 3.0.1
      mdast-util-to-string: 3.2.0
      micromark-util-decode-string: 1.0.2
      unist-util-visit: 4.1.2
      zwitch: 2.0.4
    dev: true

  /mdast-util-to-string@3.2.0:
    resolution: {integrity: sha512-V4Zn/ncyN1QNSqSBxTrMOLpjr+IKdHl2v3KVLoWmDPscP4r9GcCi71gjgvUV1SFSKh92AjAG4peFuBl2/YgCJg==}
    dependencies:
      '@types/mdast': 3.0.11
    dev: true

  /mdn-data@2.0.28:
    resolution: {integrity: sha512-aylIc7Z9y4yzHYAJNuESG3hfhC+0Ibp/MAMiaOZgNv4pmEdFyfZhhhny4MNiAfWdBQ1RQ2mfDWmM1x8SvGyp8g==}
    dev: false

  /mdn-data@2.0.30:
    resolution: {integrity: sha512-GaqWWShW4kv/G9IEucWScBx9G1/vsFZZJUO+tD26M8J8z3Kw5RDQjaoZe03YAClgeS/SWPOcb4nkFBTEi5DUEA==}
    dev: false

  /merge2@1.4.1:
    resolution: {integrity: sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==}
    engines: {node: '>= 8'}

  /micromark-core-commonmark@1.0.6:
    resolution: {integrity: sha512-K+PkJTxqjFfSNkfAhp4GB+cZPfQd6dxtTXnf+RjZOV7T4EEXnvgzOcnp+eSTmpGk9d1S9sL6/lqrgSNn/s0HZA==}
    dependencies:
      decode-named-character-reference: 1.0.2
      micromark-factory-destination: 1.0.0
      micromark-factory-label: 1.0.2
      micromark-factory-space: 1.0.0
      micromark-factory-title: 1.0.2
      micromark-factory-whitespace: 1.0.0
      micromark-util-character: 1.1.0
      micromark-util-chunked: 1.0.0
      micromark-util-classify-character: 1.0.0
      micromark-util-html-tag-name: 1.1.0
      micromark-util-normalize-identifier: 1.0.0
      micromark-util-resolve-all: 1.0.0
      micromark-util-subtokenize: 1.0.2
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      uvu: 0.5.6
    dev: true

  /micromark-extension-gfm-autolink-literal@1.0.4:
    resolution: {integrity: sha512-WCssN+M9rUyfHN5zPBn3/f0mIA7tqArHL/EKbv3CZK+LT2rG77FEikIQEqBkv46fOqXQK4NEW/Pc7Z27gshpeg==}
    dependencies:
      micromark-util-character: 1.1.0
      micromark-util-sanitize-uri: 1.1.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
    dev: true

  /micromark-extension-gfm-footnote@1.1.0:
    resolution: {integrity: sha512-RWYce7j8+c0n7Djzv5NzGEGitNNYO3uj+h/XYMdS/JinH1Go+/Qkomg/rfxExFzYTiydaV6GLeffGO5qcJbMPA==}
    dependencies:
      micromark-core-commonmark: 1.0.6
      micromark-factory-space: 1.0.0
      micromark-util-character: 1.1.0
      micromark-util-normalize-identifier: 1.0.0
      micromark-util-sanitize-uri: 1.1.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      uvu: 0.5.6
    dev: true

  /micromark-extension-gfm-strikethrough@1.0.5:
    resolution: {integrity: sha512-X0oI5eYYQVARhiNfbETy7BfLSmSilzN1eOuoRnrf9oUNsPRrWOAe9UqSizgw1vNxQBfOwL+n2610S3bYjVNi7w==}
    dependencies:
      micromark-util-chunked: 1.0.0
      micromark-util-classify-character: 1.0.0
      micromark-util-resolve-all: 1.0.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      uvu: 0.5.6
    dev: true

  /micromark-extension-gfm-table@1.0.6:
    resolution: {integrity: sha512-92pq7Q+T+4kXH4M6kL+pc8WU23Z9iuhcqmtYFWdFWjm73ZscFpH2xE28+XFpGWlvgq3LUwcN0XC0PGCicYFpgA==}
    dependencies:
      micromark-factory-space: 1.0.0
      micromark-util-character: 1.1.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      uvu: 0.5.6
    dev: true

  /micromark-extension-gfm-tagfilter@1.0.2:
    resolution: {integrity: sha512-5XWB9GbAUSHTn8VPU8/1DBXMuKYT5uOgEjJb8gN3mW0PNW5OPHpSdojoqf+iq1xo7vWzw/P8bAHY0n6ijpXF7g==}
    dependencies:
      micromark-util-types: 1.0.2
    dev: true

  /micromark-extension-gfm-task-list-item@1.0.4:
    resolution: {integrity: sha512-9XlIUUVnYXHsFF2HZ9jby4h3npfX10S1coXTnV035QGPgrtNYQq3J6IfIvcCIUAJrrqBVi5BqA/LmaOMJqPwMQ==}
    dependencies:
      micromark-factory-space: 1.0.0
      micromark-util-character: 1.1.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      uvu: 0.5.6
    dev: true

  /micromark-extension-gfm@2.0.3:
    resolution: {integrity: sha512-vb9OoHqrhCmbRidQv/2+Bc6pkP0FrtlhurxZofvOEy5o8RtuuvTq+RQ1Vw5ZDNrVraQZu3HixESqbG+0iKk/MQ==}
    dependencies:
      micromark-extension-gfm-autolink-literal: 1.0.4
      micromark-extension-gfm-footnote: 1.1.0
      micromark-extension-gfm-strikethrough: 1.0.5
      micromark-extension-gfm-table: 1.0.6
      micromark-extension-gfm-tagfilter: 1.0.2
      micromark-extension-gfm-task-list-item: 1.0.4
      micromark-util-combine-extensions: 1.0.0
      micromark-util-types: 1.0.2
    dev: true

  /micromark-factory-destination@1.0.0:
    resolution: {integrity: sha512-eUBA7Rs1/xtTVun9TmV3gjfPz2wEwgK5R5xcbIM5ZYAtvGF6JkyaDsj0agx8urXnO31tEO6Ug83iVH3tdedLnw==}
    dependencies:
      micromark-util-character: 1.1.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
    dev: true

  /micromark-factory-label@1.0.2:
    resolution: {integrity: sha512-CTIwxlOnU7dEshXDQ+dsr2n+yxpP0+fn271pu0bwDIS8uqfFcumXpj5mLn3hSC8iw2MUr6Gx8EcKng1dD7i6hg==}
    dependencies:
      micromark-util-character: 1.1.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      uvu: 0.5.6
    dev: true

  /micromark-factory-space@1.0.0:
    resolution: {integrity: sha512-qUmqs4kj9a5yBnk3JMLyjtWYN6Mzfcx8uJfi5XAveBniDevmZasdGBba5b4QsvRcAkmvGo5ACmSUmyGiKTLZew==}
    dependencies:
      micromark-util-character: 1.1.0
      micromark-util-types: 1.0.2
    dev: true

  /micromark-factory-title@1.0.2:
    resolution: {integrity: sha512-zily+Nr4yFqgMGRKLpTVsNl5L4PMu485fGFDOQJQBl2NFpjGte1e86zC0da93wf97jrc4+2G2GQudFMHn3IX+A==}
    dependencies:
      micromark-factory-space: 1.0.0
      micromark-util-character: 1.1.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      uvu: 0.5.6
    dev: true

  /micromark-factory-whitespace@1.0.0:
    resolution: {integrity: sha512-Qx7uEyahU1lt1RnsECBiuEbfr9INjQTGa6Err+gF3g0Tx4YEviPbqqGKNv/NrBaE7dVHdn1bVZKM/n5I/Bak7A==}
    dependencies:
      micromark-factory-space: 1.0.0
      micromark-util-character: 1.1.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
    dev: true

  /micromark-util-character@1.1.0:
    resolution: {integrity: sha512-agJ5B3unGNJ9rJvADMJ5ZiYjBRyDpzKAOk01Kpi1TKhlT1APx3XZk6eN7RtSz1erbWHC2L8T3xLZ81wdtGRZzg==}
    dependencies:
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
    dev: true

  /micromark-util-chunked@1.0.0:
    resolution: {integrity: sha512-5e8xTis5tEZKgesfbQMKRCyzvffRRUX+lK/y+DvsMFdabAicPkkZV6gO+FEWi9RfuKKoxxPwNL+dFF0SMImc1g==}
    dependencies:
      micromark-util-symbol: 1.0.1
    dev: true

  /micromark-util-classify-character@1.0.0:
    resolution: {integrity: sha512-F8oW2KKrQRb3vS5ud5HIqBVkCqQi224Nm55o5wYLzY/9PwHGXC01tr3d7+TqHHz6zrKQ72Okwtvm/xQm6OVNZA==}
    dependencies:
      micromark-util-character: 1.1.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
    dev: true

  /micromark-util-combine-extensions@1.0.0:
    resolution: {integrity: sha512-J8H058vFBdo/6+AsjHp2NF7AJ02SZtWaVUjsayNFeAiydTxUwViQPxN0Hf8dp4FmCQi0UUFovFsEyRSUmFH3MA==}
    dependencies:
      micromark-util-chunked: 1.0.0
      micromark-util-types: 1.0.2
    dev: true

  /micromark-util-decode-numeric-character-reference@1.0.0:
    resolution: {integrity: sha512-OzO9AI5VUtrTD7KSdagf4MWgHMtET17Ua1fIpXTpuhclCqD8egFWo85GxSGvxgkGS74bEahvtM0WP0HjvV0e4w==}
    dependencies:
      micromark-util-symbol: 1.0.1
    dev: true

  /micromark-util-decode-string@1.0.2:
    resolution: {integrity: sha512-DLT5Ho02qr6QWVNYbRZ3RYOSSWWFuH3tJexd3dgN1odEuPNxCngTCXJum7+ViRAd9BbdxCvMToPOD/IvVhzG6Q==}
    dependencies:
      decode-named-character-reference: 1.0.2
      micromark-util-character: 1.1.0
      micromark-util-decode-numeric-character-reference: 1.0.0
      micromark-util-symbol: 1.0.1
    dev: true

  /micromark-util-encode@1.0.1:
    resolution: {integrity: sha512-U2s5YdnAYexjKDel31SVMPbfi+eF8y1U4pfiRW/Y8EFVCy/vgxk/2wWTxzcqE71LHtCuCzlBDRU2a5CQ5j+mQA==}
    dev: true

  /micromark-util-html-tag-name@1.1.0:
    resolution: {integrity: sha512-BKlClMmYROy9UiV03SwNmckkjn8QHVaWkqoAqzivabvdGcwNGMMMH/5szAnywmsTBUzDsU57/mFi0sp4BQO6dA==}
    dev: true

  /micromark-util-normalize-identifier@1.0.0:
    resolution: {integrity: sha512-yg+zrL14bBTFrQ7n35CmByWUTFsgst5JhA4gJYoty4Dqzj4Z4Fr/DHekSS5aLfH9bdlfnSvKAWsAgJhIbogyBg==}
    dependencies:
      micromark-util-symbol: 1.0.1
    dev: true

  /micromark-util-resolve-all@1.0.0:
    resolution: {integrity: sha512-CB/AGk98u50k42kvgaMM94wzBqozSzDDaonKU7P7jwQIuH2RU0TeBqGYJz2WY1UdihhjweivStrJ2JdkdEmcfw==}
    dependencies:
      micromark-util-types: 1.0.2
    dev: true

  /micromark-util-sanitize-uri@1.1.0:
    resolution: {integrity: sha512-RoxtuSCX6sUNtxhbmsEFQfWzs8VN7cTctmBPvYivo98xb/kDEoTCtJQX5wyzIYEmk/lvNFTat4hL8oW0KndFpg==}
    dependencies:
      micromark-util-character: 1.1.0
      micromark-util-encode: 1.0.1
      micromark-util-symbol: 1.0.1
    dev: true

  /micromark-util-subtokenize@1.0.2:
    resolution: {integrity: sha512-d90uqCnXp/cy4G881Ub4psE57Sf8YD0pim9QdjCRNjfas2M1u6Lbt+XZK9gnHL2XFhnozZiEdCa9CNfXSfQ6xA==}
    dependencies:
      micromark-util-chunked: 1.0.0
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      uvu: 0.5.6
    dev: true

  /micromark-util-symbol@1.0.1:
    resolution: {integrity: sha512-oKDEMK2u5qqAptasDAwWDXq0tG9AssVwAx3E9bBF3t/shRIGsWIRG+cGafs2p/SnDSOecnt6hZPCE2o6lHfFmQ==}
    dev: true

  /micromark-util-types@1.0.2:
    resolution: {integrity: sha512-DCfg/T8fcrhrRKTPjRrw/5LLvdGV7BHySf/1LOZx7TzWZdYRjogNtyNq885z3nNallwr3QUKARjqvHqX1/7t+w==}
    dev: true

  /micromark@3.1.0:
    resolution: {integrity: sha512-6Mj0yHLdUZjHnOPgr5xfWIMqMWS12zDN6iws9SLuSz76W8jTtAv24MN4/CL7gJrl5vtxGInkkqDv/JIoRsQOvA==}
    dependencies:
      '@types/debug': 4.1.7
      debug: 4.3.4(supports-color@5.5.0)
      decode-named-character-reference: 1.0.2
      micromark-core-commonmark: 1.0.6
      micromark-factory-space: 1.0.0
      micromark-util-character: 1.1.0
      micromark-util-chunked: 1.0.0
      micromark-util-combine-extensions: 1.0.0
      micromark-util-decode-numeric-character-reference: 1.0.0
      micromark-util-encode: 1.0.1
      micromark-util-normalize-identifier: 1.0.0
      micromark-util-resolve-all: 1.0.0
      micromark-util-sanitize-uri: 1.1.0
      micromark-util-subtokenize: 1.0.2
      micromark-util-symbol: 1.0.1
      micromark-util-types: 1.0.2
      uvu: 0.5.6
    transitivePeerDependencies:
      - supports-color
    dev: true

  /micromatch@4.0.5:
    resolution: {integrity: sha512-DMy+ERcEW2q8Z2Po+WNXuw3c5YaUSFjAO5GsJqfEl7UjvtIuFKO6ZrKvcItdy98dwFI2N1tg3zNIdKaQT+aNdA==}
    engines: {node: '>=8.6'}
    dependencies:
      braces: 3.0.2
      picomatch: 2.3.1

  /mimic-response@3.1.0:
    resolution: {integrity: sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==}
    engines: {node: '>=10'}
    dev: true

  /min-indent@1.0.1:
    resolution: {integrity: sha512-I9jwMn07Sy/IwOj3zVkVik2JTvgpaykDZEigL6Rx6N9LbMywwUSMtxET+7lVoDLLd3O3IXwJwvuuns8UB/HeAg==}
    engines: {node: '>=4'}
    dev: true

  /minimatch@3.1.2:
    resolution: {integrity: sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==}
    dependencies:
      brace-expansion: 1.1.11

  /minimatch@9.0.0:
    resolution: {integrity: sha512-0jJj8AvgKqWN05mrwuqi8QYKx1WmYSUoKSxu5Qhs9prezTz10sxAHGNZe9J9cqIJzta8DWsleh2KaVaLl6Ru2w==}
    engines: {node: '>=16 || 14 >=14.17'}
    dependencies:
      brace-expansion: 2.0.1
    dev: true

  /minimist@1.2.8:
    resolution: {integrity: sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==}
    dev: true

  /minipass-collect@1.0.2:
    resolution: {integrity: sha512-6T6lH0H8OG9kITm/Jm6tdooIbogG9e0tLgpY6mphXSm/A9u8Nq1ryBG+Qspiub9LjWlBPsPS3tWQ/Botq4FdxA==}
    engines: {node: '>= 8'}
    dependencies:
      minipass: 3.3.6
    dev: true

  /minipass-flush@1.0.5:
    resolution: {integrity: sha512-JmQSYYpPUqX5Jyn1mXaRwOda1uQ8HP5KAT/oDSLCzt1BYRhQU0/hDtsB1ufZfEEzMZ9aAVmsBw8+FWsIXlClWw==}
    engines: {node: '>= 8'}
    dependencies:
      minipass: 3.3.6
    dev: true

  /minipass-pipeline@1.2.4:
    resolution: {integrity: sha512-xuIq7cIOt09RPRJ19gdi4b+RiNvDFYe5JH+ggNvBqGqpQXcru3PcRmOZuHBKWK1Txf9+cQ+HMVN4d6z46LZP7A==}
    engines: {node: '>=8'}
    dependencies:
      minipass: 3.3.6
    dev: true

  /minipass@3.3.6:
    resolution: {integrity: sha512-DxiNidxSEK+tHG6zOIklvNOwm3hvCrbUrdtzY74U6HKTJxvIDfOUL5W5P2Ghd3DTkhhKPYGqeNUIh5qcM4YBfw==}
    engines: {node: '>=8'}
    dependencies:
      yallist: 4.0.0
    dev: true

  /minipass@5.0.0:
    resolution: {integrity: sha512-3FnjYuehv9k6ovOEbyOswadCDPX1piCfhV8ncmYtHOjuPwylVWsghTLo7rabjC3Rx5xD4HDx8Wm1xnMF7S5qFQ==}
    engines: {node: '>=8'}
    dev: true

  /minipass@6.0.2:
    resolution: {integrity: sha512-MzWSV5nYVT7mVyWCwn2o7JH13w2TBRmmSqSRCKzTw+lmft9X4z+3wjvs06Tzijo5z4W/kahUCDpRXTF+ZrmF/w==}
    engines: {node: '>=16 || 14 >=14.17'}
    dev: true

  /minizlib@2.1.2:
    resolution: {integrity: sha512-bAxsR8BVfj60DWXHE3u30oHzfl4G7khkSuPW+qvpd7jFRHm7dLxOjUk1EHACJ/hxLY8phGJ0YhYHZo7jil7Qdg==}
    engines: {node: '>= 8'}
    dependencies:
      minipass: 3.3.6
      yallist: 4.0.0
    dev: true

  /mkdirp-classic@0.5.3:
    resolution: {integrity: sha512-gKLcREMhtuZRwRAfqP3RFW+TK4JqApVBtOIftVgjuABpAtpxhPGaDcfvbhNvD0B8iD1oUr/txX35NjcaY6Ns/A==}
    dev: true

  /mkdirp@1.0.4:
    resolution: {integrity: sha512-vVqVZQyf3WLx2Shd0qJ9xuvqgAyKPLAiqITEtqW0oIUjzo3PePDd6fW9iFz30ef7Ysp/oiWqbhszeGWW2T6Gzw==}
    engines: {node: '>=10'}
    hasBin: true
    dev: true

  /mri@1.2.0:
    resolution: {integrity: sha512-tzzskb3bG8LvYGFF/mDTpq3jpI6Q9wc3LEmBaghu+DdCssd1FakN7Bc0hVNmEyGq1bq3RgfkCb3cmQLpNPOroA==}
    engines: {node: '>=4'}
    dev: true

  /ms@2.1.2:
    resolution: {integrity: sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w==}

  /ms@2.1.3:
    resolution: {integrity: sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==}
    dev: true

  /mz@2.7.0:
    resolution: {integrity: sha512-z81GNO7nnYMEhrGh9LeymoE4+Yr0Wn5McHIZMK5cfQCl+NDX08sCZgUc9/6MHni9IWuFLm1Z3HTCXu2z9fN62Q==}
    dependencies:
      any-promise: 1.3.0
      object-assign: 4.1.1
      thenify-all: 1.6.0
    dev: false

  /nanoid@3.3.6:
    resolution: {integrity: sha512-BGcqMMJuToF7i1rt+2PWSNVnWIkGCU78jBG3RxO/bZlnZPK2Cmi2QaffxGO/2RvWi9sL+FAiRiXMgsyxQ1DIDA==}
    engines: {node: ^10 || ^12 || ^13.7 || ^14 || >=15.0.1}
    hasBin: true

  /napi-build-utils@1.0.2:
    resolution: {integrity: sha512-ONmRUqK7zj7DWX0D9ADe03wbwOBZxNAfF20PlGfCWQcD3+/MakShIHrMqx9YwPTfxDdF1zLeL+RGZiR9kGMLdg==}
    dev: true

  /narrowing@1.5.0:
    resolution: {integrity: sha512-DUu4XdKgkfAPTAL28k79pdnshDE2W5T24QAnidSPo2F/W1TX6CjNzmEeXQfE5O1lxQvC0GYI6ZRDsLcyzugEYA==}
    dev: true

  /natural-compare-lite@1.4.0:
    resolution: {integrity: sha512-Tj+HTDSJJKaZnfiuw+iaF9skdPpTo2GtEly5JHnWV/hfv2Qj/9RKsGISQtLh2ox3l5EAGw487hnBee0sIJ6v2g==}
    dev: true

  /natural-compare@1.4.0:
    resolution: {integrity: sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==}
    dev: true

  /node-abi@3.40.0:
    resolution: {integrity: sha512-zNy02qivjjRosswoYmPi8hIKJRr8MpQyeKT6qlcq/OnOgA3Rhoae+IYOqsM9V5+JnHWmxKnWOT2GxvtqdtOCXA==}
    engines: {node: '>=10'}
    dependencies:
      semver: 7.5.1
    dev: true

  /node-addon-api@6.1.0:
    resolution: {integrity: sha512-+eawOlIgy680F0kBzPUNFhMZGtJ1YmqM6l4+Crf4IkImjYrO/mqPwRMh352g23uIaQKFItcQ64I7KMaJxHgAVA==}
    dev: true

  /node-releases@2.0.11:
    resolution: {integrity: sha512-+M0PwXeU80kRohZ3aT4J/OnR+l9/KD2nVLNNoRgFtnf+umQVFdGBAO2N8+nCnEi0xlh/Wk3zOGC+vNNx+uM79Q==}
    dev: true

  /normalize-path@3.0.0:
    resolution: {integrity: sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==}
    engines: {node: '>=0.10.0'}
    dev: false

  /normalize-range@0.1.2:
    resolution: {integrity: sha512-bdok/XvKII3nUpklnV6P2hxtMNrCboOjAcyBuQnWEhO665FwrSNRxU+AqpsyvO6LgGYPspN+lu5CLtw4jPRKNA==}
    engines: {node: '>=0.10.0'}
    dev: true

  /not@0.1.0:
    resolution: {integrity: sha512-5PDmaAsVfnWUgTUbJ3ERwn7u79Z0dYxN9ErxCpVJJqe2RK0PJ3z+iFUxuqjwtlDDegXvtWoxD/3Fzxox7tFGWA==}
    dev: true

  /nth-check@2.1.1:
    resolution: {integrity: sha512-lqjrjmaOoAnWfMmBPL+XNnynZh2+swxiX3WUE0s4yEHI6m+AwrK2UZOimIRl3X/4QctVqS8AiZjFqyOGrMXb/w==}
    dependencies:
      boolbase: 1.0.0

  /object-assign@4.1.1:
    resolution: {integrity: sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==}
    engines: {node: '>=0.10.0'}

  /object-hash@3.0.0:
    resolution: {integrity: sha512-RSn9F68PjH9HqtltsSnqYC1XXoWe9Bju5+213R98cNGttag9q9yAOTzdbsqvIa7aNm5WffBZFpWYr2aWrklWAw==}
    engines: {node: '>= 6'}
    dev: false

  /object-inspect@1.12.3:
    resolution: {integrity: sha512-geUvdk7c+eizMNUDkRpW1wJwgfOiOeHbxBR/hLXK1aT6zmVSO0jsQcs7fj6MGw89jC/cjGfLcNOrtMYtGqm81g==}
    dev: true

  /object-is@1.1.5:
    resolution: {integrity: sha512-3cyDsyHgtmi7I7DfSSI2LDp6SK2lwvtbg0p0R1e0RvTqF5ceGx+K2dfSjm1bKDMVCFEDAQvy+o8c6a7VujOddw==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
    dev: true

  /object-keys@1.1.1:
    resolution: {integrity: sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==}
    engines: {node: '>= 0.4'}
    dev: true

  /object.assign@4.1.4:
    resolution: {integrity: sha512-1mxKf0e58bvyjSCtKYY4sRe9itRk3PJpquJOjeIkz885CczcI4IvJJDLPS72oowuSh+pBxUFROpX+TU++hxhZQ==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      has-symbols: 1.0.3
      object-keys: 1.1.1
    dev: true

  /object.entries@1.1.6:
    resolution: {integrity: sha512-leTPzo4Zvg3pmbQ3rDK69Rl8GQvIqMWubrkxONG9/ojtFE2rD9fjMKfSI5BxW3osRH1m6VdzmqK8oAY9aT4x5w==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
    dev: true

  /object.fromentries@2.0.6:
    resolution: {integrity: sha512-VciD13dswC4j1Xt5394WR4MzmAQmlgN72phd/riNp9vtD7tp4QQWJ0R4wvclXcafgcYK8veHRed2W6XeGBvcfg==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
    dev: true

  /object.hasown@1.1.2:
    resolution: {integrity: sha512-B5UIT3J1W+WuWIU55h0mjlwaqxiE5vYENJXIXZ4VFe05pNYrkKuK0U/6aFcb0pKywYJh7IhfoqUfKVmrJJHZHw==}
    dependencies:
      define-properties: 1.2.0
      es-abstract: 1.21.2
    dev: true

  /object.values@1.1.6:
    resolution: {integrity: sha512-FVVTkD1vENCsAcwNs9k6jea2uHC/X0+JcjG8YA60FN5CMaJmG95wT9jek/xX9nornqGRrBkKtzuAu2wuHpKqvw==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
    dev: true

  /once@1.4.0:
    resolution: {integrity: sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==}
    dependencies:
      wrappy: 1.0.2

  /optionator@0.9.1:
    resolution: {integrity: sha512-74RlY5FCnhq4jRxVUPKDaRwrVNXMqsGsiW6AJw4XK8hmtm10wC0ypZBLw5IIp85NZMr91+qd1RvvENwg7jjRFw==}
    engines: {node: '>= 0.8.0'}
    dependencies:
      deep-is: 0.1.4
      fast-levenshtein: 2.0.6
      levn: 0.4.1
      prelude-ls: 1.2.1
      type-check: 0.4.0
      word-wrap: 1.2.3
    dev: true

  /over-9000@9000.1.4:
    resolution: {integrity: sha512-4j7/ozQOyqXRNEY5HPmsOL6drQfpk4nEz87ciASGPZN3BQA19wIUHlvVO4FUpTG3+3IHrD3aduPGMPHyaD8sUA==}
    dev: true

  /ow@0.22.0:
    resolution: {integrity: sha512-VZpjntwsFxg+oM2pZ0Km8p6+FLAugD86TQWHmz0Ldm/rfSs6qezggArumK+FrBUFAXodWULJrbV5ie0LkhWJdQ==}
    engines: {node: '>=10'}
    dependencies:
      '@sindresorhus/is': 4.6.0
      callsites: 3.1.0
      dot-prop: 6.0.1
      lodash.isequal: 4.5.0
      type-fest: 0.20.2
      vali-date: 1.0.0
    dev: true

  /ow@0.28.1:
    resolution: {integrity: sha512-1EZTywPZeUKac9gD7q8np3Aj+V54kvfIcjNEVNDSbG2Ys5xA5foW2HquvMMqgyWGLqIFMlc0Iq/HmyMHqN48sA==}
    engines: {node: '>=12'}
    dependencies:
      '@sindresorhus/is': 4.6.0
      callsites: 3.1.0
      dot-prop: 6.0.1
      lodash.isequal: 4.5.0
      type-fest: 2.19.0
      vali-date: 1.0.0
    dev: true

  /p-limit@2.3.0:
    resolution: {integrity: sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==}
    engines: {node: '>=6'}
    dependencies:
      p-try: 2.2.0
    dev: true

  /p-limit@3.1.0:
    resolution: {integrity: sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==}
    engines: {node: '>=10'}
    dependencies:
      yocto-queue: 0.1.0
    dev: true

  /p-locate@4.1.0:
    resolution: {integrity: sha512-R79ZZ/0wAxKGu3oYMlz8jy/kbhsNrS7SKZ7PxEHBgJ5+F2mtFW2fK2cOtBh1cHYkQsbzFV7I+EoRKe6Yt0oK7A==}
    engines: {node: '>=8'}
    dependencies:
      p-limit: 2.3.0
    dev: true

  /p-locate@5.0.0:
    resolution: {integrity: sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==}
    engines: {node: '>=10'}
    dependencies:
      p-limit: 3.1.0
    dev: true

  /p-map@4.0.0:
    resolution: {integrity: sha512-/bjOqmgETBYB5BoEeGVea8dmvHb2m9GLy1E9W43yeyfP6QQCZGFNa+XRceJEuDB6zqr+gKpIAmlLebMpykw/MQ==}
    engines: {node: '>=10'}
    dependencies:
      aggregate-error: 3.1.0
    dev: true

  /p-try@2.2.0:
    resolution: {integrity: sha512-R4nPAVTAU0B9D35/Gk3uJf/7XYbQcyohSKdvAxIRSNghFl4e71hVoGnBNQz9cWaXxO2I10KTC+3jMdvvoKw6dQ==}
    engines: {node: '>=6'}
    dev: true

  /parent-module@1.0.1:
    resolution: {integrity: sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==}
    engines: {node: '>=6'}
    dependencies:
      callsites: 3.1.0
    dev: true

  /parse-json@5.2.0:
    resolution: {integrity: sha512-ayCKvm/phCGxOkYRSCM82iDwct8/EonSEgCSxWxD7ve6jHggsFl4fZVQBPRNgQoKiuV/odhFrGzQXZwbifC8Rg==}
    engines: {node: '>=8'}
    dependencies:
      '@babel/code-frame': 7.21.4
      error-ex: 1.3.2
      json-parse-even-better-errors: 2.3.1
      lines-and-columns: 1.2.4
    dev: true

  /parse-ms@2.1.0:
    resolution: {integrity: sha512-kHt7kzLoS9VBZfUsiKjv43mr91ea+U05EyKkEtqp7vNbHxmaVuEqN7XxeEVnGrMtYOAxGrDElSi96K7EgO1zCA==}
    engines: {node: '>=6'}
    dev: true

  /parse5@6.0.1:
    resolution: {integrity: sha512-Ofn/CTFzRGTTxwpNEs9PP93gXShHcTq255nzRYSKe8AkVpZY7e1fpmTfOyoIvjP5HG7Z2ZM7VS9PPhQGW2pOpw==}
    dev: true

  /parse5@7.1.2:
    resolution: {integrity: sha512-Czj1WaSVpaoj0wbhMzLmWD69anp2WH7FXMB9n1Sy8/ZFF9jolSQVMu1Ij5WIyGmcBmhk7EOndpO4mIpihVqAXw==}
    dependencies:
      entities: 4.5.0
    dev: true

  /path-exists@4.0.0:
    resolution: {integrity: sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==}
    engines: {node: '>=8'}
    dev: true

  /path-is-absolute@1.0.1:
    resolution: {integrity: sha512-AVbw3UJ2e9bq64vSaS9Am0fje1Pa8pbGqTTsmXfaIiMpnr5DlDhfJOuLj9Sf95ZPVDAUerDfEk88MPmPe7UCQg==}
    engines: {node: '>=0.10.0'}

  /path-key@3.1.1:
    resolution: {integrity: sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==}
    engines: {node: '>=8'}
    dev: true

  /path-parse@1.0.7:
    resolution: {integrity: sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==}

  /path-scurry@1.9.2:
    resolution: {integrity: sha512-qSDLy2aGFPm8i4rsbHd4MNyTcrzHFsLQykrtbuGRknZZCBBVXSv2tSCDN2Cg6Rt/GFRw8GoW9y9Ecw5rIPG1sg==}
    engines: {node: '>=16 || 14 >=14.17'}
    dependencies:
      lru-cache: 9.1.1
      minipass: 6.0.2
    dev: true

  /path-type@4.0.0:
    resolution: {integrity: sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==}
    engines: {node: '>=8'}
    dev: true

  /picocolors@1.0.0:
    resolution: {integrity: sha512-1fygroTLlHu66zi26VoTDv8yRgm0Fccecssto+MhsZ0D/DGW2sm8E8AjW7NU5VVTRt5GxbeZ5qBuJr+HyLYkjQ==}

  /picomatch@2.3.1:
    resolution: {integrity: sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==}
    engines: {node: '>=8.6'}

  /pify@2.3.0:
    resolution: {integrity: sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==}
    engines: {node: '>=0.10.0'}
    dev: false

  /pinkie-promise@2.0.1:
    resolution: {integrity: sha512-0Gni6D4UcLTbv9c57DfxDGdr41XfgUjqWZu492f0cIGr16zDU06BWP/RAEvOuo7CQ0CNjHaLlM59YJJFm3NWlw==}
    engines: {node: '>=0.10.0'}
    dependencies:
      pinkie: 2.0.4
    dev: true

  /pinkie@2.0.4:
    resolution: {integrity: sha512-MnUuEycAemtSaeFSjXKW/aroV7akBbY+Sv+RkyqFjgAe73F+MR0TBWKBRDkmfWq/HiFmdavfZ1G7h4SPZXaCSg==}
    engines: {node: '>=0.10.0'}
    dev: true

  /pirates@4.0.5:
    resolution: {integrity: sha512-8V9+HQPupnaXMA23c5hvl69zXvTwTzyAYasnkb0Tts4XvO4CliqONMOnvlq26rkhLC3nWDFBJf73LU1e1VZLaQ==}
    engines: {node: '>= 6'}
    dev: false

  /pkg-dir@4.2.0:
    resolution: {integrity: sha512-HRDzbaKjC+AOWVXxAU/x54COGeIv9eb+6CkDSQoNTt4XyWoIJvuPsXizxu/Fr23EiekbtZwmh1IcIG/l/a10GQ==}
    engines: {node: '>=8'}
    dependencies:
      find-up: 4.1.0
    dev: true

  /postcss-import@15.1.0(postcss@8.4.23):
    resolution: {integrity: sha512-hpr+J05B2FVYUAXHeK1YyI267J/dDDhMU6B6civm8hSY1jYJnBXxzKDKDswzJmtLHryrjhnDjqqp/49t8FALew==}
    engines: {node: '>=14.0.0'}
    peerDependencies:
      postcss: ^8.0.0
    dependencies:
      postcss: 8.4.23
      postcss-value-parser: 4.2.0
      read-cache: 1.0.0
      resolve: 1.22.2
    dev: false

  /postcss-js@4.0.1(postcss@8.4.23):
    resolution: {integrity: sha512-dDLF8pEO191hJMtlHFPRa8xsizHaM82MLfNkUHdUtVEV3tgTp5oj+8qbEqYM57SLfc74KSbw//4SeJma2LRVIw==}
    engines: {node: ^12 || ^14 || >= 16}
    peerDependencies:
      postcss: ^8.4.21
    dependencies:
      camelcase-css: 2.0.1
      postcss: 8.4.23
    dev: false

  /postcss-load-config@4.0.1(postcss@8.4.23):
    resolution: {integrity: sha512-vEJIc8RdiBRu3oRAI0ymerOn+7rPuMvRXslTvZUKZonDHFIczxztIyJ1urxM1x9JXEikvpWWTUUqal5j/8QgvA==}
    engines: {node: '>= 14'}
    peerDependencies:
      postcss: '>=8.0.9'
      ts-node: '>=9.0.0'
    peerDependenciesMeta:
      postcss:
        optional: true
      ts-node:
        optional: true
    dependencies:
      lilconfig: 2.1.0
      postcss: 8.4.23
      yaml: 2.2.2
    dev: false

  /postcss-nested@6.0.1(postcss@8.4.23):
    resolution: {integrity: sha512-mEp4xPMi5bSWiMbsgoPfcP74lsWLHkQbZc3sY+jWYd65CUwXrUaTp0fmNpa01ZcETKlIgUdFN/MpS2xZtqL9dQ==}
    engines: {node: '>=12.0'}
    peerDependencies:
      postcss: ^8.2.14
    dependencies:
      postcss: 8.4.23
      postcss-selector-parser: 6.0.13
    dev: false

  /postcss-selector-parser@6.0.13:
    resolution: {integrity: sha512-EaV1Gl4mUEV4ddhDnv/xtj7sxwrwxdetHdWUGnT4VJQf+4d05v6lHYZr8N573k5Z0BViss7BDhfWtKS3+sfAqQ==}
    engines: {node: '>=4'}
    dependencies:
      cssesc: 3.0.0
      util-deprecate: 1.0.2
    dev: false

  /postcss-value-parser@4.2.0:
    resolution: {integrity: sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==}

  /postcss@8.4.23:
    resolution: {integrity: sha512-bQ3qMcpF6A/YjR55xtoTr0jGOlnPOKAIMdOWiv0EIT6HVPEaJiJB4NLljSbiHoC2RX7DN5Uvjtpbg1NPdwv1oA==}
    engines: {node: ^10 || ^12 || >=14}
    dependencies:
      nanoid: 3.3.6
      picocolors: 1.0.0
      source-map-js: 1.0.2

  /prebuild-install@7.1.1:
    resolution: {integrity: sha512-jAXscXWMcCK8GgCoHOfIr0ODh5ai8mj63L2nWrjuAgXE6tDyYGnx4/8o/rCgU+B4JSyZBKbeZqzhtwtC3ovxjw==}
    engines: {node: '>=10'}
    hasBin: true
    dependencies:
      detect-libc: 2.0.1
      expand-template: 2.0.3
      github-from-package: 0.0.0
      minimist: 1.2.8
      mkdirp-classic: 0.5.3
      napi-build-utils: 1.0.2
      node-abi: 3.40.0
      pump: 3.0.0
      rc: 1.2.8
      simple-get: 4.0.1
      tar-fs: 2.1.1
      tunnel-agent: 0.6.0
    dev: true

  /prelude-ls@1.2.1:
    resolution: {integrity: sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==}
    engines: {node: '>= 0.8.0'}
    dev: true

  /prettier-linter-helpers@1.0.0:
    resolution: {integrity: sha512-GbK2cP9nraSSUF9N2XwUwqfzlAFlMNYYl+ShE/V+H8a9uNl/oUqB1w2EL54Jh0OlyRSd8RfWYJ3coVS4TROP2w==}
    engines: {node: '>=6.0.0'}
    dependencies:
      fast-diff: 1.3.0
    dev: true

  /prettier@2.8.8:
    resolution: {integrity: sha512-tdN8qQGvNjw4CHbY+XXk0JgCXn9QiF21a55rBe5LJAU+kDyC4WQn4+awm2Xfk2lQMk5fKup9XgzTZtGkjBdP9Q==}
    engines: {node: '>=10.13.0'}
    hasBin: true
    dev: true

  /pretty-ms@7.0.1:
    resolution: {integrity: sha512-973driJZvxiGOQ5ONsFhOF/DtzPMOMtgC11kCpUrPGMTgqp2q/1gwzCquocrN33is0VZ5GFHXZYMM9l6h67v2Q==}
    engines: {node: '>=10'}
    dependencies:
      parse-ms: 2.1.0
    dev: true

  /prop-types@15.8.1:
    resolution: {integrity: sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==}
    dependencies:
      loose-envify: 1.4.0
      object-assign: 4.1.1
      react-is: 16.13.1
    dev: true

  /property-information@6.2.0:
    resolution: {integrity: sha512-kma4U7AFCTwpqq5twzC1YVIDXSqg6qQK6JN0smOw8fgRy1OkMi0CYSzFmsy6dnqSenamAtj0CyXMUJ1Mf6oROg==}
    dev: true

  /pump@3.0.0:
    resolution: {integrity: sha512-LwZy+p3SFs1Pytd/jYct4wpv49HiYCqd9Rlc5ZVdk0V+8Yzv6jR5Blk3TRmPL1ft69TxP0IMZGJ+WPFU2BFhww==}
    dependencies:
      end-of-stream: 1.4.4
      once: 1.4.0
    dev: true

  /punycode@2.3.0:
    resolution: {integrity: sha512-rRV+zQD8tVFys26lAGR9WUuS4iUAngJScM+ZRSKtvl5tKeZ2t5bvdNFdNHBW9FWR4guGHlgmsZ1G7BSm2wTbuA==}
    engines: {node: '>=6'}
    dev: true

  /queue-microtask@1.2.3:
    resolution: {integrity: sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==}

  /ramda@0.28.0:
    resolution: {integrity: sha512-9QnLuG/kPVgWvMQ4aODhsBUFKOUmnbUnsSXACv+NCQZcHbeb+v8Lodp8OVxtRULN1/xOyYLLaL6npE6dMq5QTA==}
    dev: true

  /rc@1.2.8:
    resolution: {integrity: sha512-y3bGgqKj3QBdxLbLkomlohkvsA8gdAiUQlSBJnBhfn+BPxg4bc62d8TcBW15wavDfgexCgccckhcZvywyQYPOw==}
    hasBin: true
    dependencies:
      deep-extend: 0.6.0
      ini: 1.3.8
      minimist: 1.2.8
      strip-json-comments: 2.0.1
    dev: true

  /react-dom@17.0.2(react@17.0.2):
    resolution: {integrity: sha512-s4h96KtLDUQlsENhMn1ar8t2bEa+q/YAtj8pPPdIjPDGBDIVNsrD9aXNWqspUe6AzKCIG0C1HZZLqLV7qpOBGA==}
    peerDependencies:
      react: 17.0.2
    dependencies:
      loose-envify: 1.4.0
      object-assign: 4.1.1
      react: 17.0.2
      scheduler: 0.20.2
    dev: false

  /react-is@16.13.1:
    resolution: {integrity: sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==}

  /react-is@17.0.2:
    resolution: {integrity: sha512-w2GsyukL62IJnlaff/nRegPQR94C/XXamvMWmSHRJ4y7Ts/4ocGRmTHvOs8PSE6pB3dWOrD/nueuU5sduBsQ4w==}
    dev: false

  /react-refresh@0.14.0:
    resolution: {integrity: sha512-wViHqhAd8OHeLS/IRMJjTSDHF3U9eWi62F/MledQGPdJGDhodXJ9PBLNGr6WWL7qlH12Mt3TyTpbS+hGXMjCzQ==}
    engines: {node: '>=0.10.0'}
    dev: true

  /react-router-dom@6.11.2(react-dom@17.0.2)(react@17.0.2):
    resolution: {integrity: sha512-JNbKtAeh1VSJQnH6RvBDNhxNwemRj7KxCzc5jb7zvDSKRnPWIFj9pO+eXqjM69gQJ0r46hSz1x4l9y0651DKWw==}
    engines: {node: '>=14'}
    peerDependencies:
      react: '>=16.8'
      react-dom: '>=16.8'
    dependencies:
      '@remix-run/router': 1.6.2
      react: 17.0.2
      react-dom: 17.0.2(react@17.0.2)
      react-router: 6.11.2(react@17.0.2)
    dev: false

  /react-router@6.11.2(react@17.0.2):
    resolution: {integrity: sha512-74z9xUSaSX07t3LM+pS6Un0T55ibUE/79CzfZpy5wsPDZaea1F8QkrsiyRnA2YQ7LwE/umaydzXZV80iDCPkMg==}
    engines: {node: '>=14'}
    peerDependencies:
      react: '>=16.8'
    dependencies:
      '@remix-run/router': 1.6.2
      react: 17.0.2
    dev: false

  /react@17.0.2:
    resolution: {integrity: sha512-gnhPt75i/dq/z3/6q/0asP78D0u592D5L1pd7M8P+dck6Fu/jJeL6iVVK23fptSUZj8Vjf++7wXA8UNclGQcbA==}
    engines: {node: '>=0.10.0'}
    dependencies:
      loose-envify: 1.4.0
      object-assign: 4.1.1
    dev: false

  /read-cache@1.0.0:
    resolution: {integrity: sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==}
    dependencies:
      pify: 2.3.0
    dev: false

  /readable-stream@3.6.2:
    resolution: {integrity: sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==}
    engines: {node: '>= 6'}
    dependencies:
      inherits: 2.0.4
      string_decoder: 1.3.0
      util-deprecate: 1.0.2
    dev: true

  /readdirp@3.6.0:
    resolution: {integrity: sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==}
    engines: {node: '>=8.10.0'}
    dependencies:
      picomatch: 2.3.1
    dev: false

  /regenerator-runtime@0.13.11:
    resolution: {integrity: sha512-kY1AZVr2Ra+t+piVaJ4gxaFaReZVH40AKNo7UCX6W+dEwBo/2oZJzqfuN1qLq1oL45o56cPaTXELwrTh8Fpggg==}
    dev: true

  /regexp.prototype.flags@1.5.0:
    resolution: {integrity: sha512-0SutC3pNudRKgquxGoRGIz946MZVHqbNfPjBdxeOhBrdgDKlRoXmYLQN9xRbrR09ZXWeGAdPuif7egofn6v5LA==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      functions-have-names: 1.2.3
    dev: true

  /rehype-parse@8.0.4:
    resolution: {integrity: sha512-MJJKONunHjoTh4kc3dsM1v3C9kGrrxvA3U8PxZlP2SjH8RNUSrb+lF7Y0KVaUDnGH2QZ5vAn7ulkiajM9ifuqg==}
    dependencies:
      '@types/hast': 2.3.4
      hast-util-from-parse5: 7.1.2
      parse5: 6.0.1
      unified: 10.1.2
    dev: true

  /rehype-rewrite@3.0.6:
    resolution: {integrity: sha512-REDTNCvsKcAazy8IQWzKp66AhSUDSOIKssSCqNqCcT9sN7JCwAAm3mWGTUdUzq80ABuy8d0D6RBwbnewu1aY1g==}
    engines: {node: ^12.20.0 || ^14.13.1 || >=16.0.0}
    dependencies:
      hast-util-select: 5.0.5
      unified: 10.1.2
      unist-util-visit: 4.1.2
    dev: true

  /rehype-stringify@9.0.3:
    resolution: {integrity: sha512-kWiZ1bgyWlgOxpqD5HnxShKAdXtb2IUljn3hQAhySeak6IOQPPt6DeGnsIh4ixm7yKJWzm8TXFuC/lPfcWHJqw==}
    dependencies:
      '@types/hast': 2.3.4
      hast-util-to-html: 8.0.4
      unified: 10.1.2
    dev: true

  /remark-gfm@3.0.1:
    resolution: {integrity: sha512-lEFDoi2PICJyNrACFOfDD3JlLkuSbOa5Wd8EPt06HUdptv8Gn0bxYTdbU/XXQ3swAPkEaGxxPN9cbnMHvVu1Ig==}
    dependencies:
      '@types/mdast': 3.0.11
      mdast-util-gfm: 2.0.2
      micromark-extension-gfm: 2.0.3
      unified: 10.1.2
    transitivePeerDependencies:
      - supports-color
    dev: true

  /remark-html@15.0.2:
    resolution: {integrity: sha512-/CIOI7wzHJzsh48AiuIyIe1clxVkUtreul73zcCXLub0FmnevQE0UMFDQm7NUx8/3rl/4zCshlMfqBdWScQthw==}
    dependencies:
      '@types/mdast': 3.0.11
      hast-util-sanitize: 4.1.0
      hast-util-to-html: 8.0.4
      mdast-util-to-hast: 12.3.0
      unified: 10.1.2
    dev: true

  /remark-parse@10.0.2:
    resolution: {integrity: sha512-3ydxgHa/ZQzG8LvC7jTXccARYDcRld3VfcgIIFs7bI6vbRSxJJmzgLEIIoYKyrfhaY+ujuWaf/PJiMZXoiCXgw==}
    dependencies:
      '@types/mdast': 3.0.11
      mdast-util-from-markdown: 1.3.0
      unified: 10.1.2
    transitivePeerDependencies:
      - supports-color
    dev: true

  /remark-stringify@10.0.3:
    resolution: {integrity: sha512-koyOzCMYoUHudypbj4XpnAKFbkddRMYZHwghnxd7ue5210WzGw6kOBwauJTRUMq16jsovXx8dYNvSSWP89kZ3A==}
    dependencies:
      '@types/mdast': 3.0.11
      mdast-util-to-markdown: 1.5.0
      unified: 10.1.2
    dev: true

  /remark@14.0.3:
    resolution: {integrity: sha512-bfmJW1dmR2LvaMJuAnE88pZP9DktIFYXazkTfOIKZzi3Knk9lT0roItIA24ydOucI3bV/g/tXBA6hzqq3FV9Ew==}
    dependencies:
      '@types/mdast': 3.0.11
      remark-parse: 10.0.2
      remark-stringify: 10.0.3
      unified: 10.1.2
    transitivePeerDependencies:
      - supports-color
    dev: true

  /resolve-from@4.0.0:
    resolution: {integrity: sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==}
    engines: {node: '>=4'}
    dev: true

  /resolve@1.22.2:
    resolution: {integrity: sha512-Sb+mjNHOULsBv818T40qSPeRiuWLyaGMa5ewydRLFimneixmVy2zdivRl+AF6jaYPC8ERxGDmFSiqui6SfPd+g==}
    hasBin: true
    dependencies:
      is-core-module: 2.12.1
      path-parse: 1.0.7
      supports-preserve-symlinks-flag: 1.0.0

  /resolve@2.0.0-next.4:
    resolution: {integrity: sha512-iMDbmAWtfU+MHpxt/I5iWI7cY6YVEZUQ3MBgPQ++XD1PELuJHIl82xBmObyP2KyQmkNB2dsqF7seoQQiAn5yDQ==}
    hasBin: true
    dependencies:
      is-core-module: 2.12.1
      path-parse: 1.0.7
      supports-preserve-symlinks-flag: 1.0.0
    dev: true

  /reusify@1.0.4:
    resolution: {integrity: sha512-U9nH88a3fc/ekCF1l0/UP1IosiuIjyTh7hBvXVMHYgVcfGvt897Xguj2UOLDeI5BG2m7/uwyaLVT6fbtCwTyzw==}
    engines: {iojs: '>=1.0.0', node: '>=0.10.0'}

  /rimraf@3.0.2:
    resolution: {integrity: sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==}
    hasBin: true
    dependencies:
      glob: 7.2.3
    dev: true

  /rimraf@5.0.1:
    resolution: {integrity: sha512-OfFZdwtd3lZ+XZzYP/6gTACubwFcHdLRqS9UX3UwpU2dnGQYkPFISRwvM3w9IiB2w7bW5qGo/uAwE4SmXXSKvg==}
    engines: {node: '>=14'}
    hasBin: true
    dependencies:
      glob: 10.2.5
    dev: true

  /rollup@3.22.0:
    resolution: {integrity: sha512-imsigcWor5Y/dC0rz2q0bBt9PabcL3TORry2hAa6O6BuMvY71bqHyfReAz5qyAqiQATD1m70qdntqBfBQjVWpQ==}
    engines: {node: '>=14.18.0', npm: '>=8.0.0'}
    hasBin: true
    optionalDependencies:
      fsevents: 2.3.2
    dev: true

  /run-parallel@1.2.0:
    resolution: {integrity: sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==}
    dependencies:
      queue-microtask: 1.2.3

  /sade@1.8.1:
    resolution: {integrity: sha512-xal3CZX1Xlo/k4ApwCFrHVACi9fBqJ7V+mwhBsuf/1IOKbBy098Fex+Wa/5QMubw09pSZ/u8EY8PWgevJsXp1A==}
    engines: {node: '>=6'}
    dependencies:
      mri: 1.2.0
    dev: true

  /safe-buffer@5.2.1:
    resolution: {integrity: sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==}
    dev: true

  /safe-regex-test@1.0.0:
    resolution: {integrity: sha512-JBUUzyOgEwXQY1NuPtvcj/qcBDbDmEvWufhlnXZIm75DEHp+afM1r1ujJpJsV/gSM4t59tpDyPi1sd6ZaPFfsA==}
    dependencies:
      call-bind: 1.0.2
      get-intrinsic: 1.2.1
      is-regex: 1.1.4
    dev: true

  /sax@1.2.4:
    resolution: {integrity: sha512-NqVDv9TpANUjFm0N8uM5GxL36UgKi9/atZw+x7YFnQ8ckwFGKrl4xX4yWtrey3UJm5nP1kUbnYgLopqWNSRhWw==}
    dev: true

  /scheduler@0.20.2:
    resolution: {integrity: sha512-2eWfGgAqqWFGqtdMmcL5zCMK1U8KlXv8SQFGglL3CEtd0aDVDWgeF/YoCmvln55m5zSk3J/20hTaSBeSObsQDQ==}
    dependencies:
      loose-envify: 1.4.0
      object-assign: 4.1.1
    dev: false

  /semver@6.3.0:
    resolution: {integrity: sha512-b39TBaTSfV6yBrapU89p5fKekE2m/NwnDocOVruQFS1/veMgdzuPcnOM34M6CwxW8jH/lxEa5rBoDeUwu5HHTw==}
    hasBin: true
    dev: true

  /semver@7.5.1:
    resolution: {integrity: sha512-Wvss5ivl8TMRZXXESstBA4uR5iXgEN/VC5/sOcuXdVLzcdkz4HWetIoRfG5gb5X+ij/G9rw9YoGn3QoQ8OCSpw==}
    engines: {node: '>=10'}
    hasBin: true
    dependencies:
      lru-cache: 6.0.0
    dev: true

  /shallowequal@1.1.0:
    resolution: {integrity: sha512-y0m1JoUZSlPAjXVtPPW70aZWfIL/dSP7AFkRnniLCrK/8MDKog3TySTBmckD+RObVxH0v4Tox67+F14PdED2oQ==}
    dev: false

  /sharp@0.32.1:
    resolution: {integrity: sha512-kQTFtj7ldpUqSe8kDxoGLZc1rnMFU0AO2pqbX6pLy3b7Oj8ivJIdoKNwxHVQG2HN6XpHPJqCSM2nsma2gOXvOg==}
    engines: {node: '>=14.15.0'}
    requiresBuild: true
    dependencies:
      color: 4.2.3
      detect-libc: 2.0.1
      node-addon-api: 6.1.0
      prebuild-install: 7.1.1
      semver: 7.5.1
      simple-get: 4.0.1
      tar-fs: 2.1.1
      tunnel-agent: 0.6.0
    dev: true

  /shebang-command@2.0.0:
    resolution: {integrity: sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==}
    engines: {node: '>=8'}
    dependencies:
      shebang-regex: 3.0.0
    dev: true

  /shebang-regex@3.0.0:
    resolution: {integrity: sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==}
    engines: {node: '>=8'}
    dev: true

  /side-channel@1.0.4:
    resolution: {integrity: sha512-q5XPytqFEIKHkGdiMIrY10mvLRvnQh42/+GoBlFW3b2LXLE2xxJpZFdm94we0BaoV3RwJyGqg5wS7epxTv0Zvw==}
    dependencies:
      call-bind: 1.0.2
      get-intrinsic: 1.2.1
      object-inspect: 1.12.3
    dev: true

  /signal-exit@4.0.2:
    resolution: {integrity: sha512-MY2/qGx4enyjprQnFaZsHib3Yadh3IXyV2C321GY0pjGfVBu4un0uDJkwgdxqO+Rdx8JMT8IfJIRwbYVz3Ob3Q==}
    engines: {node: '>=14'}
    dev: true

  /simple-concat@1.0.1:
    resolution: {integrity: sha512-cSFtAPtRhljv69IK0hTVZQ+OfE9nePi/rtJmw5UjHeVyVroEqJXP1sFztKUy1qU+xvz3u/sfYJLa947b7nAN2Q==}
    dev: true

  /simple-get@4.0.1:
    resolution: {integrity: sha512-brv7p5WgH0jmQJr1ZDDfKDOSeWWg+OVypG99A/5vYGPqJ6pxiaHLy8nxtFjBA7oMa01ebA9gfh1uMCFqOuXxvA==}
    dependencies:
      decompress-response: 6.0.0
      once: 1.4.0
      simple-concat: 1.0.1
    dev: true

  /simple-swizzle@0.2.2:
    resolution: {integrity: sha512-JA//kQgZtbuY83m+xT+tXJkmJncGMTFT+C+g2h2R9uxkYIrE2yy9sgmcLhCnw57/WSD+Eh3J97FPEDFnbXnDUg==}
    dependencies:
      is-arrayish: 0.3.2
    dev: true

  /slash@3.0.0:
    resolution: {integrity: sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==}
    engines: {node: '>=8'}
    dev: true

  /source-map-js@1.0.2:
    resolution: {integrity: sha512-R0XvVJ9WusLiqTCEiGCmICCMplcCkIwwR11mOSD9CR5u+IXYdiseeEuXCVAjS54zqwkLcPNnmU4OeJ6tUrWhDw==}
    engines: {node: '>=0.10.0'}

  /source-map-support@0.5.21:
    resolution: {integrity: sha512-uBHU3L3czsIyYXKX88fdrGovxdSCoTGDRZ6SYXtSRxLZUzHg5P/66Ht6uoUlHu9EZod+inXhKo3qQgwXUT/y1w==}
    dependencies:
      buffer-from: 1.1.2
      source-map: 0.6.1
    dev: true

  /source-map@0.6.1:
    resolution: {integrity: sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==}
    engines: {node: '>=0.10.0'}
    dev: true

  /space-separated-tokens@2.0.2:
    resolution: {integrity: sha512-PEGlAwrG8yXGXRjW32fGbg66JAlOAwbObuqVoJpv/mRgoWDQfgH1wDPvtzWyUSNAXBGSk8h755YDbbcEy3SH2Q==}
    dev: true

  /ssri@10.0.4:
    resolution: {integrity: sha512-12+IR2CB2C28MMAw0Ncqwj5QbTcs0nGIhgJzYWzDkb21vWmfNI83KS4f3Ci6GI98WreIfG7o9UXp3C0qbpA8nQ==}
    engines: {node: ^14.17.0 || ^16.13.0 || >=18.0.0}
    dependencies:
      minipass: 5.0.0
    dev: true

  /stackframe@1.3.4:
    resolution: {integrity: sha512-oeVtt7eWQS+Na6F//S4kJ2K2VbRlS9D43mAlMyVpVWovy9o+jfgH8O9agzANzaiLjclA0oYzUXEM4PurhSUChw==}
    dev: true

  /stop-iteration-iterator@1.0.0:
    resolution: {integrity: sha512-iCGQj+0l0HOdZ2AEeBADlsRC+vsnDsZsbdSiH1yNSjcfKM7fdpCMfqAL/dwF5BLiw/XhRft/Wax6zQbhq2BcjQ==}
    engines: {node: '>= 0.4'}
    dependencies:
      internal-slot: 1.0.5
    dev: true

  /string-width@4.2.3:
    resolution: {integrity: sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==}
    engines: {node: '>=8'}
    dependencies:
      emoji-regex: 8.0.0
      is-fullwidth-code-point: 3.0.0
      strip-ansi: 6.0.1
    dev: true

  /string-width@5.1.2:
    resolution: {integrity: sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==}
    engines: {node: '>=12'}
    dependencies:
      eastasianwidth: 0.2.0
      emoji-regex: 9.2.2
      strip-ansi: 7.0.1
    dev: true

  /string.prototype.matchall@4.0.8:
    resolution: {integrity: sha512-6zOCOcJ+RJAQshcTvXPHoxoQGONa3e/Lqx90wUA+wEzX78sg5Bo+1tQo4N0pohS0erG9qtCqJDjNCQBjeWVxyg==}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
      get-intrinsic: 1.2.1
      has-symbols: 1.0.3
      internal-slot: 1.0.5
      regexp.prototype.flags: 1.5.0
      side-channel: 1.0.4
    dev: true

  /string.prototype.trim@1.2.7:
    resolution: {integrity: sha512-p6TmeT1T3411M8Cgg9wBTMRtY2q9+PNy9EV1i2lIXUN/btt763oIfxwN3RR8VU6wHX8j/1CFy0L+YuThm6bgOg==}
    engines: {node: '>= 0.4'}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
    dev: true

  /string.prototype.trimend@1.0.6:
    resolution: {integrity: sha512-JySq+4mrPf9EsDBEDYMOb/lM7XQLulwg5R/m1r0PXEFqrV0qHvl58sdTilSXtKOflCsK2E8jxf+GKC0T07RWwQ==}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
    dev: true

  /string.prototype.trimstart@1.0.6:
    resolution: {integrity: sha512-omqjMDaY92pbn5HOX7f9IccLA+U1tA9GvtU4JrodiXFfYB7jPzzHpRzpglLAjtUV6bB557zwClJezTqnAiYnQA==}
    dependencies:
      call-bind: 1.0.2
      define-properties: 1.2.0
      es-abstract: 1.21.2
    dev: true

  /string_decoder@1.3.0:
    resolution: {integrity: sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==}
    dependencies:
      safe-buffer: 5.2.1
    dev: true

  /stringify-entities@4.0.3:
    resolution: {integrity: sha512-BP9nNHMhhfcMbiuQKCqMjhDP5yBCAxsPu4pHFFzJ6Alo9dZgY4VLDPutXqIjpRiMoKdp7Av85Gr73Q5uH9k7+g==}
    dependencies:
      character-entities-html4: 2.1.0
      character-entities-legacy: 3.0.0
    dev: true

  /strip-ansi@6.0.1:
    resolution: {integrity: sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==}
    engines: {node: '>=8'}
    dependencies:
      ansi-regex: 5.0.1
    dev: true

  /strip-ansi@7.0.1:
    resolution: {integrity: sha512-cXNxvT8dFNRVfhVME3JAe98mkXDYN2O1l7jmcwMnOslDeESg1rF/OZMtK0nRAhiari1unG5cD4jG3rapUAkLbw==}
    engines: {node: '>=12'}
    dependencies:
      ansi-regex: 6.0.1
    dev: true

  /strip-bom@3.0.0:
    resolution: {integrity: sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==}
    engines: {node: '>=4'}
    dev: true

  /strip-indent@3.0.0:
    resolution: {integrity: sha512-laJTa3Jb+VQpaC6DseHhF7dXVqHTfJPCRDaEbid/drOhgitgYku/letMUqOXFoWV0zIIUbjpdH2t+tYj4bQMRQ==}
    engines: {node: '>=8'}
    dependencies:
      min-indent: 1.0.1
    dev: true

  /strip-json-comments@2.0.1:
    resolution: {integrity: sha512-4gB8na07fecVVkOI6Rs4e7T6NOTki5EmL7TUduTs6bu3EdnSycntVJ4re8kgZA+wx9IueI2Y11bfbgwtzuE0KQ==}
    engines: {node: '>=0.10.0'}
    dev: true

  /strip-json-comments@3.1.1:
    resolution: {integrity: sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==}
    engines: {node: '>=8'}
    dev: true

  /styled-components@5.3.6(react-dom@17.0.2)(react-is@17.0.2)(react@17.0.2):
    resolution: {integrity: sha512-hGTZquGAaTqhGWldX7hhfzjnIYBZ0IXQXkCYdvF1Sq3DsUaLx6+NTHC5Jj1ooM2F68sBiVz3lvhfwQs/S3l6qg==}
    engines: {node: '>=10'}
    requiresBuild: true
    peerDependencies:
      react: '>= 16.8.0'
      react-dom: '>= 16.8.0'
      react-is: '>= 16.8.0'
    dependencies:
      '@babel/helper-module-imports': 7.21.4
      '@babel/traverse': 7.21.5(supports-color@5.5.0)
      '@emotion/is-prop-valid': 1.2.1
      '@emotion/stylis': 0.8.5
      '@emotion/unitless': 0.7.5
      babel-plugin-styled-components: 2.1.3(styled-components@5.3.6)
      css-to-react-native: 3.2.0
      hoist-non-react-statics: 3.3.2
      react: 17.0.2
      react-dom: 17.0.2(react@17.0.2)
      react-is: 17.0.2
      shallowequal: 1.1.0
      supports-color: 5.5.0
    dev: false

  /sucrase@3.32.0:
    resolution: {integrity: sha512-ydQOU34rpSyj2TGyz4D2p8rbktIOZ8QY9s+DGLvFU1i5pWJE8vkpruCjGCMHsdXwnD7JDcS+noSwM/a7zyNFDQ==}
    engines: {node: '>=8'}
    hasBin: true
    dependencies:
      '@jridgewell/gen-mapping': 0.3.3
      commander: 4.1.1
      glob: 7.1.6
      lines-and-columns: 1.2.4
      mz: 2.7.0
      pirates: 4.0.5
      ts-interface-checker: 0.1.13
    dev: false

  /supports-color@5.5.0:
    resolution: {integrity: sha512-QjVjwdXIt408MIiAqCX4oUKsgU2EqAGzs2Ppkm4aQYbjm+ZEWEcW4SfFNTr4uMNZma0ey4f5lgLrkB0aX0QMow==}
    engines: {node: '>=4'}
    dependencies:
      has-flag: 3.0.0

  /supports-color@7.2.0:
    resolution: {integrity: sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==}
    engines: {node: '>=8'}
    dependencies:
      has-flag: 4.0.0
    dev: true

  /supports-preserve-symlinks-flag@1.0.0:
    resolution: {integrity: sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==}
    engines: {node: '>= 0.4'}

  /svg-parser@2.0.4:
    resolution: {integrity: sha512-e4hG1hRwoOdRb37cIMSgzNsxyzKfayW6VOflrwvR+/bzrkyxY/31WkbgnQpgtrNp1SdpJvpUAGTa/ZoiPNDuRQ==}
    dev: true

  /svgo@3.0.2:
    resolution: {integrity: sha512-Z706C1U2pb1+JGP48fbazf3KxHrWOsLme6Rv7imFBn5EnuanDW1GPaA/P1/dvObE670JDePC3mnj0k0B7P0jjQ==}
    engines: {node: '>=14.0.0'}
    hasBin: true
    dependencies:
      '@trysound/sax': 0.2.0
      commander: 7.2.0
      css-select: 5.1.0
      css-tree: 2.3.1
      csso: 5.0.5
      picocolors: 1.0.0
    dev: false

  /tailwindcss@3.3.2:
    resolution: {integrity: sha512-9jPkMiIBXvPc2KywkraqsUfbfj+dHDb+JPWtSJa9MLFdrPyazI7q6WX2sUrm7R9eVR7qqv3Pas7EvQFzxKnI6w==}
    engines: {node: '>=14.0.0'}
    hasBin: true
    dependencies:
      '@alloc/quick-lru': 5.2.0
      arg: 5.0.2
      chokidar: 3.5.3
      didyoumean: 1.2.2
      dlv: 1.1.3
      fast-glob: 3.2.12
      glob-parent: 6.0.2
      is-glob: 4.0.3
      jiti: 1.18.2
      lilconfig: 2.1.0
      micromatch: 4.0.5
      normalize-path: 3.0.0
      object-hash: 3.0.0
      picocolors: 1.0.0
      postcss: 8.4.23
      postcss-import: 15.1.0(postcss@8.4.23)
      postcss-js: 4.0.1(postcss@8.4.23)
      postcss-load-config: 4.0.1(postcss@8.4.23)
      postcss-nested: 6.0.1(postcss@8.4.23)
      postcss-selector-parser: 6.0.13
      postcss-value-parser: 4.2.0
      resolve: 1.22.2
      sucrase: 3.32.0
    transitivePeerDependencies:
      - ts-node
    dev: false

  /tar-fs@2.1.1:
    resolution: {integrity: sha512-V0r2Y9scmbDRLCNex/+hYzvp/zyYjvFbHPNgVTKfQvVrb6guiE/fxP+XblDNR011utopbkex2nM4dHNV6GDsng==}
    dependencies:
      chownr: 1.1.4
      mkdirp-classic: 0.5.3
      pump: 3.0.0
      tar-stream: 2.2.0
    dev: true

  /tar-stream@2.2.0:
    resolution: {integrity: sha512-ujeqbceABgwMZxEJnk2HDY2DlnUZ+9oEcb1KzTVfYHio0UE6dG71n60d8D2I4qNvleWrrXpmjpt7vZeF1LnMZQ==}
    engines: {node: '>=6'}
    dependencies:
      bl: 4.1.0
      end-of-stream: 1.4.4
      fs-constants: 1.0.0
      inherits: 2.0.4
      readable-stream: 3.6.2
    dev: true

  /tar@6.1.15:
    resolution: {integrity: sha512-/zKt9UyngnxIT/EAGYuxaMYgOIJiP81ab9ZfkILq4oNLPFX50qyYmu7jRj9qeXoxmJHjGlbH0+cm2uy1WCs10A==}
    engines: {node: '>=10'}
    dependencies:
      chownr: 2.0.0
      fs-minipass: 2.1.0
      minipass: 5.0.0
      minizlib: 2.1.2
      mkdirp: 1.0.4
      yallist: 4.0.0
    dev: true

  /text-table@0.2.0:
    resolution: {integrity: sha512-N+8UisAXDGk8PFXP4HAzVR9nbfmVJ3zYLAWiTIoqC5v5isinhr+r5uaO8+7r3BMfuNIufIsA7RdpVgacC2cSpw==}
    dev: true

  /thenify-all@1.6.0:
    resolution: {integrity: sha512-RNxQH/qI8/t3thXJDwcstUO4zeqo64+Uy/+sNVRBx4Xn2OX+OZ9oP+iJnNFqplFra2ZUVeKCSa2oVWi3T4uVmA==}
    engines: {node: '>=0.8'}
    dependencies:
      thenify: 3.3.1
    dev: false

  /thenify@3.3.1:
    resolution: {integrity: sha512-RVZSIV5IG10Hk3enotrhvz0T9em6cyHBLkH/YAZuKqd8hRkKhSfCGIcP2KUY0EPxndzANBmNllzWPwak+bheSw==}
    dependencies:
      any-promise: 1.3.0
    dev: false

  /to-fast-properties@2.0.0:
    resolution: {integrity: sha512-/OaKK0xYrs3DmxRYqL/yDc+FxFUVYhDlXMhRmv3z915w2HF1tnN1omB354j8VUGO/hbRzyD6Y3sA7v7GS/ceog==}
    engines: {node: '>=4'}

  /to-regex-range@5.0.1:
    resolution: {integrity: sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==}
    engines: {node: '>=8.0'}
    dependencies:
      is-number: 7.0.0

  /trim-lines@3.0.1:
    resolution: {integrity: sha512-kRj8B+YHZCc9kQYdWfJB2/oUl9rA99qbowYYBtr4ui4mZyAQ2JpvVBd/6U2YloATfqBhBTSMhTpgBHtU0Mf3Rg==}
    dev: true

  /trough@2.1.0:
    resolution: {integrity: sha512-AqTiAOLcj85xS7vQ8QkAV41hPDIJ71XJB4RCUrzo/1GM2CQwhkJGaf9Hgr7BOugMRpgGUrqRg/DrBDl4H40+8g==}
    dev: true

  /ts-essentials@9.3.2(typescript@5.0.4):
    resolution: {integrity: sha512-JxKJzuWqH1MmH4ZFHtJzGEhkfN3QvVR3C3w+4BIoWeoY68UVVoA2Np/Bca9z0IPSErVCWhv439aT0We4Dks8kQ==}
    peerDependencies:
      typescript: '>=4.1.0'
    dependencies:
      typescript: 5.0.4
    dev: true

  /ts-interface-checker@0.1.13:
    resolution: {integrity: sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA==}
    dev: false

  /tsconfig-paths@3.14.2:
    resolution: {integrity: sha512-o/9iXgCYc5L/JxCHPe3Hvh8Q/2xm5Z+p18PESBU6Ff33695QnCHBEjcytY2q19ua7Mbl/DavtBOLq+oG0RCL+g==}
    dependencies:
      '@types/json5': 0.0.29
      json5: 1.0.2
      minimist: 1.2.8
      strip-bom: 3.0.0
    dev: true

  /tslib@1.14.1:
    resolution: {integrity: sha512-Xni35NKzjgMrwevysHTCArtLDpPvye8zV/0E4EyYn43P7/7qvQwPh9BGkHewbMulVntbigmcT7rdX3BNo9wRJg==}
    dev: true

  /tsutils@3.21.0(typescript@5.0.4):
    resolution: {integrity: sha512-mHKK3iUXL+3UF6xL5k0PEhKRUBKPBCv/+RkEOpjRWxxx27KKRBmmA60A9pgOUvMi8GKhRMPEmjBRPzs2W7O1OA==}
    engines: {node: '>= 6'}
    peerDependencies:
      typescript: '>=2.8.0 || >= 3.2.0-dev || >= 3.3.0-dev || >= 3.4.0-dev || >= 3.5.0-dev || >= 3.6.0-dev || >= 3.6.0-beta || >= 3.7.0-dev || >= 3.7.0-beta'
    dependencies:
      tslib: 1.14.1
      typescript: 5.0.4
    dev: true

  /tunnel-agent@0.6.0:
    resolution: {integrity: sha512-McnNiV1l8RYeY8tBgEpuodCC1mLUdbSN+CYBL7kJsJNInOP8UjDDEwdk6Mw60vdLLrr5NHKZhMAOSrR2NZuQ+w==}
    dependencies:
      safe-buffer: 5.2.1
    dev: true

  /type-check@0.4.0:
    resolution: {integrity: sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==}
    engines: {node: '>= 0.8.0'}
    dependencies:
      prelude-ls: 1.2.1
    dev: true

  /type-fest@0.20.2:
    resolution: {integrity: sha512-Ne+eE4r0/iWnpAxD852z3A+N0Bt5RN//NjJwRd2VFHEmrywxf5vsZlh4R6lixl6B+wz/8d+maTSAkN1FIkI3LQ==}
    engines: {node: '>=10'}
    dev: true

  /type-fest@0.21.3:
    resolution: {integrity: sha512-t0rzBq87m3fVcduHDUFhKmyyX+9eo6WQjZvf51Ea/M0Q7+T374Jp1aUiyUl0GKxp8M/OETVHSDvmkyPgvX+X2w==}
    engines: {node: '>=10'}
    dev: true

  /type-fest@2.19.0:
    resolution: {integrity: sha512-RAH822pAdBgcNMAfWnCBU3CFZcfZ/i1eZjwFU/dsLKumyuuP3niueg2UAukXYF0E2AAoc82ZSSf9J0WQBinzHA==}
    engines: {node: '>=12.20'}
    dev: true

  /typed-array-length@1.0.4:
    resolution: {integrity: sha512-KjZypGq+I/H7HI5HlOoGHkWUUGq+Q0TPhQurLbyrVrvnKTBgzLhIJ7j6J/XTQOi0d1RjyZ0wdas8bKs2p0x3Ng==}
    dependencies:
      call-bind: 1.0.2
      for-each: 0.3.3
      is-typed-array: 1.1.10
    dev: true

  /typescript@5.0.4:
    resolution: {integrity: sha512-cW9T5W9xY37cc+jfEnaUvX91foxtHkza3Nw3wkoF4sSlKn0MONdkdEndig/qPBWXNkmplh3NzayQzCiHM4/hqw==}
    engines: {node: '>=12.20'}
    hasBin: true
    dev: true

  /unbox-primitive@1.0.2:
    resolution: {integrity: sha512-61pPlCD9h51VoreyJ0BReideM3MDKMKnh6+V9L08331ipq6Q8OFXZYiqP6n/tbHx4s5I9uRhcye6BrbkizkBDw==}
    dependencies:
      call-bind: 1.0.2
      has-bigints: 1.0.2
      has-symbols: 1.0.3
      which-boxed-primitive: 1.0.2
    dev: true

  /unified@10.1.2:
    resolution: {integrity: sha512-pUSWAi/RAnVy1Pif2kAoeWNBa3JVrx0MId2LASj8G+7AiHWoKZNTomq6LG326T68U7/e263X6fTdcXIy7XnF7Q==}
    dependencies:
      '@types/unist': 2.0.6
      bail: 2.0.2
      extend: 3.0.2
      is-buffer: 2.0.5
      is-plain-obj: 4.1.0
      trough: 2.1.0
      vfile: 5.3.7
    dev: true

  /unique-filename@3.0.0:
    resolution: {integrity: sha512-afXhuC55wkAmZ0P18QsVE6kp8JaxrEokN2HGIoIVv2ijHQd419H0+6EigAFcIzXeMIkcIkNBpB3L/DXB3cTS/g==}
    engines: {node: ^14.17.0 || ^16.13.0 || >=18.0.0}
    dependencies:
      unique-slug: 4.0.0
    dev: true

  /unique-slug@4.0.0:
    resolution: {integrity: sha512-WrcA6AyEfqDX5bWige/4NQfPZMtASNVxdmWR76WESYQVAACSgWcR6e9i0mofqqBxYFtL4oAxPIptY73/0YE1DQ==}
    engines: {node: ^14.17.0 || ^16.13.0 || >=18.0.0}
    dependencies:
      imurmurhash: 0.1.4
    dev: true

  /unist-util-generated@2.0.1:
    resolution: {integrity: sha512-qF72kLmPxAw0oN2fwpWIqbXAVyEqUzDHMsbtPvOudIlUzXYFIeQIuxXQCRCFh22B7cixvU0MG7m3MW8FTq/S+A==}
    dev: true

  /unist-util-is@5.2.1:
    resolution: {integrity: sha512-u9njyyfEh43npf1M+yGKDGVPbY/JWEemg5nH05ncKPfi+kBbKBJoTdsogMu33uhytuLlv9y0O7GH7fEdwLdLQw==}
    dependencies:
      '@types/unist': 2.0.6
    dev: true

  /unist-util-position@4.0.4:
    resolution: {integrity: sha512-kUBE91efOWfIVBo8xzh/uZQ7p9ffYRtUbMRZBNFYwf0RK8koUMx6dGUfwylLOKmaT2cs4wSW96QoYUSXAyEtpg==}
    dependencies:
      '@types/unist': 2.0.6
    dev: true

  /unist-util-stringify-position@3.0.3:
    resolution: {integrity: sha512-k5GzIBZ/QatR8N5X2y+drfpWG8IDBzdnVj6OInRNWm1oXrzydiaAT2OQiA8DPRRZyAKb9b6I2a6PxYklZD0gKg==}
    dependencies:
      '@types/unist': 2.0.6
    dev: true

  /unist-util-visit-parents@5.1.3:
    resolution: {integrity: sha512-x6+y8g7wWMyQhL1iZfhIPhDAs7Xwbn9nRosDXl7qoPTSCy0yNxnKc+hWokFifWQIDGi154rdUqKvbCa4+1kLhg==}
    dependencies:
      '@types/unist': 2.0.6
      unist-util-is: 5.2.1
    dev: true

  /unist-util-visit@4.1.2:
    resolution: {integrity: sha512-MSd8OUGISqHdVvfY9TPhyK2VdUrPgxkUtWSuMHF6XAAFuL4LokseigBnZtPnJMu+FbynTkFNnFlyjxpVKujMRg==}
    dependencies:
      '@types/unist': 2.0.6
      unist-util-is: 5.2.1
      unist-util-visit-parents: 5.1.3
    dev: true

  /universalify@2.0.0:
    resolution: {integrity: sha512-hAZsKq7Yy11Zu1DE0OzWjw7nnLZmJZYTDZZyEFHZdUhV8FkH5MCfoU1XMaxXovpyW5nq5scPqq0ZDP9Zyl04oQ==}
    engines: {node: '>= 10.0.0'}
    dev: true

  /update-browserslist-db@1.0.11(browserslist@4.21.5):
    resolution: {integrity: sha512-dCwEFf0/oT85M1fHBg4F0jtLwJrutGoHSQXCh7u4o2t1drG+c0a9Flnqww6XUKSfQMPpJBRjU8d4RXB09qtvaA==}
    hasBin: true
    peerDependencies:
      browserslist: '>= 4.21.0'
    dependencies:
      browserslist: 4.21.5
      escalade: 3.1.1
      picocolors: 1.0.0
    dev: true

  /uri-js@4.4.1:
    resolution: {integrity: sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==}
    dependencies:
      punycode: 2.3.0
    dev: true

  /util-deprecate@1.0.2:
    resolution: {integrity: sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==}

  /uvu@0.5.6:
    resolution: {integrity: sha512-+g8ENReyr8YsOc6fv/NVJs2vFdHBnBNdfE49rshrTzDWOlUx4Gq7KOS2GD8eqhy2j+Ejq29+SbKH8yjkAqXqoA==}
    engines: {node: '>=8'}
    hasBin: true
    dependencies:
      dequal: 2.0.3
      diff: 5.1.0
      kleur: 4.1.5
      sade: 1.8.1
    dev: true

  /vali-date@1.0.0:
    resolution: {integrity: sha512-sgECfZthyaCKW10N0fm27cg8HYTFK5qMWgypqkXMQ4Wbl/zZKx7xZICgcoxIIE+WFAP/MBL2EFwC/YvLxw3Zeg==}
    engines: {node: '>=0.10.0'}
    dev: true

  /vfile-location@4.1.0:
    resolution: {integrity: sha512-YF23YMyASIIJXpktBa4vIGLJ5Gs88UB/XePgqPmTa7cDA+JeO3yclbpheQYCHjVHBn/yePzrXuygIL+xbvRYHw==}
    dependencies:
      '@types/unist': 2.0.6
      vfile: 5.3.7
    dev: true

  /vfile-message@3.1.4:
    resolution: {integrity: sha512-fa0Z6P8HUrQN4BZaX05SIVXic+7kE3b05PWAtPuYP9QLHsLKYR7/AlLW3NtOrpXRLeawpDLMsVkmk5DG0NXgWw==}
    dependencies:
      '@types/unist': 2.0.6
      unist-util-stringify-position: 3.0.3
    dev: true

  /vfile@5.3.7:
    resolution: {integrity: sha512-r7qlzkgErKjobAmyNIkkSpizsFPYiUPuJb5pNW1RB4JcYVZhs4lIbVqk8XPk033CV/1z8ss5pkax8SuhGpcG8g==}
    dependencies:
      '@types/unist': 2.0.6
      is-buffer: 2.0.5
      unist-util-stringify-position: 3.0.3
      vfile-message: 3.1.4
    dev: true

  /vite-plugin-fonts@0.7.0(vite@4.3.8):
    resolution: {integrity: sha512-fisKirkQrA2RFwcyI96SENLu1FyRYNIiC/l5DGdD8oV3OsAWGrYKs0e7/VZF6l0rm0QiYA2sOVTzYfrLAzP9cw==}
    peerDependencies:
      vite: ^2.0.0 || ^3.0.0 || ^4.0.0
    dependencies:
      fast-glob: 3.2.12
      vite: 4.3.8(@types/node@18.11.18)
    dev: true

  /vite-plugin-svgr@3.2.0(vite@4.3.8):
    resolution: {integrity: sha512-Uvq6niTvhqJU6ga78qLKBFJSDvxWhOnyfQSoKpDPMAGxJPo5S3+9hyjExE5YDj6Lpa4uaLkGc1cBgxXov+LjSw==}
    peerDependencies:
      vite: ^2.6.0 || 3 || 4
    dependencies:
      '@rollup/pluginutils': 5.0.2
      '@svgr/core': 7.0.0
      '@svgr/plugin-jsx': 7.0.0
      vite: 4.3.8(@types/node@18.11.18)
    transitivePeerDependencies:
      - rollup
      - supports-color
    dev: true

  /vite-plugin-wasm-pack@0.1.12:
    resolution: {integrity: sha512-WliYvQp9HXluir4OKGbngkcKxtYtifU11cqLurRRJGsl770Sjr1iIkp5RuvU3IC1poT4A57Z2/YgAKI2Skm7ZA==}
    dependencies:
      chalk: 4.1.2
      fs-extra: 10.1.0
      narrowing: 1.5.0
    dev: true

  /vite-plugin-wasm@3.2.2(vite@4.3.8):
    resolution: {integrity: sha512-cdbBUNR850AEoMd5nvLmnyeq63CSfoP1ctD/L2vLk/5+wsgAPlAVAzUK5nGKWO/jtehNlrSSHLteN+gFQw7VOA==}
    peerDependencies:
      vite: ^2 || ^3 || ^4
    dependencies:
      vite: 4.3.8(@types/node@18.11.18)
    dev: true

  /vite@4.3.8(@types/node@18.11.18):
    resolution: {integrity: sha512-uYB8PwN7hbMrf4j1xzGDk/lqjsZvCDbt/JC5dyfxc19Pg8kRm14LinK/uq+HSLNswZEoKmweGdtpbnxRtrAXiQ==}
    engines: {node: ^14.18.0 || >=16.0.0}
    hasBin: true
    peerDependencies:
      '@types/node': '>= 14'
      less: '*'
      sass: '*'
      stylus: '*'
      sugarss: '*'
      terser: ^5.4.0
    peerDependenciesMeta:
      '@types/node':
        optional: true
      less:
        optional: true
      sass:
        optional: true
      stylus:
        optional: true
      sugarss:
        optional: true
      terser:
        optional: true
    dependencies:
      '@types/node': 18.11.18
      esbuild: 0.17.19
      postcss: 8.4.23
      rollup: 3.22.0
    optionalDependencies:
      fsevents: 2.3.2
    dev: true

  /web-namespaces@2.0.1:
    resolution: {integrity: sha512-bKr1DkiNa2krS7qxNtdrtHAmzuYGFQLiQ13TsorsdT6ULTkPLKuu5+GsFpDlg6JFjUTwX2DyhMPG2be8uPrqsQ==}
    dev: true

  /which-boxed-primitive@1.0.2:
    resolution: {integrity: sha512-bwZdv0AKLpplFY2KZRX6TvyuN7ojjr7lwkg6ml0roIy9YeuSr7JS372qlNW18UQYzgYK9ziGcerWqZOmEn9VNg==}
    dependencies:
      is-bigint: 1.0.4
      is-boolean-object: 1.1.2
      is-number-object: 1.0.7
      is-string: 1.0.7
      is-symbol: 1.0.4
    dev: true

  /which-collection@1.0.1:
    resolution: {integrity: sha512-W8xeTUwaln8i3K/cY1nGXzdnVZlidBcagyNFtBdD5kxnb4TvGKR7FfSIS3mYpwWS1QUCutfKz8IY8RjftB0+1A==}
    dependencies:
      is-map: 2.0.2
      is-set: 2.0.2
      is-weakmap: 2.0.1
      is-weakset: 2.0.2
    dev: true

  /which-typed-array@1.1.9:
    resolution: {integrity: sha512-w9c4xkx6mPidwp7180ckYWfMmvxpjlZuIudNtDf4N/tTAUB8VJbX25qZoAsrtGuYNnGw3pa0AXgbGKRB8/EceA==}
    engines: {node: '>= 0.4'}
    dependencies:
      available-typed-arrays: 1.0.5
      call-bind: 1.0.2
      for-each: 0.3.3
      gopd: 1.0.1
      has-tostringtag: 1.0.0
      is-typed-array: 1.1.10
    dev: true

  /which@2.0.2:
    resolution: {integrity: sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==}
    engines: {node: '>= 8'}
    hasBin: true
    dependencies:
      isexe: 2.0.0
    dev: true

  /word-wrap@1.2.3:
    resolution: {integrity: sha512-Hz/mrNwitNRh/HUAtM/VT/5VH+ygD6DV7mYKZAtHOrbs8U7lvPS6xf7EJKMF0uW1KJCl0H701g3ZGus+muE5vQ==}
    engines: {node: '>=0.10.0'}
    dev: true

  /wrap-ansi@7.0.0:
    resolution: {integrity: sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==}
    engines: {node: '>=10'}
    dependencies:
      ansi-styles: 4.3.0
      string-width: 4.2.3
      strip-ansi: 6.0.1
    dev: true

  /wrap-ansi@8.1.0:
    resolution: {integrity: sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==}
    engines: {node: '>=12'}
    dependencies:
      ansi-styles: 6.2.1
      string-width: 5.1.2
      strip-ansi: 7.0.1
    dev: true

  /wrappy@1.0.2:
    resolution: {integrity: sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==}

  /xml2js@0.5.0:
    resolution: {integrity: sha512-drPFnkQJik/O+uPKpqSgr22mpuFHqKdbS835iAQrUC73L2F5WkboIRd63ai/2Yg6I1jzifPFKH2NTK+cfglkIA==}
    engines: {node: '>=4.0.0'}
    dependencies:
      sax: 1.2.4
      xmlbuilder: 11.0.1
    dev: true

  /xmlbuilder@11.0.1:
    resolution: {integrity: sha512-fDlsI/kFEx7gLvbecc0/ohLG50fugQp8ryHzMTuW9vSa1GJ0XYWKnhsUx7oie3G98+r56aTQIUB4kht42R3JvA==}
    engines: {node: '>=4.0'}
    dev: true

  /yallist@3.1.1:
    resolution: {integrity: sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==}
    dev: true

  /yallist@4.0.0:
    resolution: {integrity: sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==}
    dev: true

  /yaml@2.2.2:
    resolution: {integrity: sha512-CBKFWExMn46Foo4cldiChEzn7S7SRV+wqiluAb6xmueD/fGyRHIhX8m14vVGgeFWjN540nKCNVj6P21eQjgTuA==}
    engines: {node: '>= 14'}
    dev: false

  /yocto-queue@0.1.0:
    resolution: {integrity: sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==}
    engines: {node: '>=10'}
    dev: true

  /zwitch@2.0.4:
    resolution: {integrity: sha512-bXE4cR/kVZhKZX/RjPEflHaKVhUVl85noU3v6b8apfQEc1x4A+zBxjZ4lN8LqGd6WZ3dl98pY4o717VFmoPp+A==}
    dev: true

```

`postcss.config.js`:

```js
// Vite build doesn't work without this file
module.exports = () => {
  const plugins = {
    tailwindcss: {},
    autoprefixer: {}
  }

  return {
    plugins
  }
}

```

`sync_submodules.sh`:

```sh
#!/bin/bash
git submodule update --init --recursive
git submodule update --remote

check_status() {
    if [ $? -eq 0 ]; then
        printf " ✅ OK\n"
    else
        printf " ❌ ERROR\n"
    fi
}

# Update TurtleTests
(
    printf "\n[ Make TurtleTests ]\n"
    cd roms/TurtleTests
    make clean
    make all
    check_status
)

# Update mooneye-gb
(
    printf "\n[ Make mooneye-test-suite ]\n"
    cd roms/mooneye-test-suite
    make clean
    make all
    check_status
)

# Update mealybug-tearoom-tests
(
    printf "\n[ Make mealybug-tearoom-tests ]\n"
    cd roms/mealybug-tearoom-tests
    make clean
    make all
)

# Update dmg-acid2
(
    printf "\n[ Make dmg-acid2 ]\n"
    cd roms/dmg-acid2
    make clean
    make all
    check_status
)

# Update cgb-acid2
(
    echo "[ Make cgb-acid2 ]"
    cd roms/cgb-acid2
    make clean
    make all
    check_status
)

# Update striketrough.gb
(
    echo "[ Make striketrough ]"
    cd roms/strikethrough
    make clean
    make
)

# Update BullyGB
(
    echo "[ Make BullyGB ]"
    cd roms/BullyGB
    make clean
    make
    check_status
)

# Update MBC3 Tester
(
    echo "[ Make MBC3 Tester ]"
    cd roms/MBC3-Tester-gb/disassembly
    make clean
    make all
    check_status
)

# Update wilbertpol-test-suite
(
    echo "[ Make Wilbert Pol's test suite ]"
    cd roms/wilbertpol-test-suite
    make clean
    make
    check_status
)

# Update AGE test roms
(
    echo "[ Make AGE test roms ]"
    cd roms/age-test-roms
    make clean
    make
    check_status
)

```

`tailwind.config.cjs`:

```cjs
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ['./browser/**/*.{js,ts,jsx,tsx}'],
  theme: {
    extend: {}
  },
  plugins: []
}

```

`tsconfig.json`:

```json
{
  "compilerOptions": {
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "removeComments": false,
    "module": "esnext",
    "target": "esnext",
    "lib": ["esnext", "dom"],
    "noEmit": true,
    "jsx": "preserve",
    "sourceMap": true,
    "esModuleInterop": true,
    "moduleResolution": "node"
  },
  "include": ["vite.config.mts", "browser/**/*", "debugger-web/pkg/**/*", "gb-web/pkg/**/*"]
}

```

`vite.config.mts`:

```mts
import fs from 'node:fs'
import path from 'node:path'

import { faviconsPlugin } from '@darkobits/vite-plugin-favicons'
import react from '@vitejs/plugin-react'
import rehypeParse from 'rehype-parse'
import rehypeRewrite from 'rehype-rewrite'
import rehypeStringify from 'rehype-stringify'
import { remark } from 'remark'
import remarkGfm from 'remark-gfm'
import remarkHtml from 'remark-html'
import { unified } from 'unified'
import { defineConfig, UserConfig } from 'vite'
import { VitePluginFonts } from 'vite-plugin-fonts'
import svgr from 'vite-plugin-svgr'
import wasm from 'vite-plugin-wasm'
import wasmPack from 'vite-plugin-wasm-pack'

const fileToBase64 = (filepath: string) => {
  const bitmap = fs.readFileSync(filepath)
  return Buffer.from(bitmap).toString('base64')
}

const mdToHtml = (filepath: string) => {
  const content = fs.readFileSync(filepath, 'utf8')
  const processor = remark().use(remarkGfm).use(remarkHtml)
  return processor.processSync(content).toString()
}

const inlineImages = (html: string, baseDir: string) => {
  const processor = unified()
    .use(rehypeParse, { fragment: true })
    .use(rehypeRewrite, {
      rewrite: (node) => {
        if (node.type === 'element' && node.tagName === 'img' && node.properties?.src) {
          const src = String(node.properties.src)
          const absolutePath = path.join(baseDir, src)

          // eslint-disable-next-line no-param-reassign
          node.properties.src = `data:image/png;base64,${fileToBase64(absolutePath)}`
        }
      }
    })
    .use(rehypeStringify)

  return processor.processSync(html).toString()
}

const markdownLoader = () => {
  const mdRegex = /\.md$/
  return {
    name: 'vite-markdown-to-html-with-images',

    async load(filepath: string) {
      if (!filepath.match(mdRegex)) {
        return null
      }

      const html = mdToHtml(filepath)
      const inlinedHtml = inlineImages(html, path.dirname(filepath))

      return `export default \`${inlinedHtml}\``
    }
  }
}

export default defineConfig((configEnv) => {
  const config: UserConfig = {
    plugins: [
      // works only for production build
      faviconsPlugin({
        inject: true,
        icons: {
          // this plugin is opt-in, meaning only the icon types you declare here will be rendered
          favicons: {
            source: './browser/assets/images/feather.svg'
          }
        }
      }),
      VitePluginFonts({
        custom: {
          preload: true,
          families: [
            {
              name: 'GillSans',
              src: './browser/assets/fonts/*.otf'
            },
            {
              name: 'Pretendo',
              src: './browser/assets/fonts/Pretendo.ttf'
            },
            {
              name: 'NESController',
              src: './browser/assets/fonts/NES_Controller.ttf'
            }
          ]
        }
      }),
      wasm(), // adds wasm support
      wasmPack('./gb-web'), // loads wasm module
      wasmPack('./debugger-web'), // loads wasm module
      svgr(), // adds support for SVG -> React components
      react(), // adds react support
      markdownLoader() // adds support for markdown -> html
    ],
    build: {
      outDir: 'public',
      target: 'esnext'
    },
    assetsInclude: ['**/*.gb', '**/*.gbc', '**/*.png'],
    define: {
      USE_HASH_ROUTER: process.env.USE_HASH_ROUTER
    }
  }

  if (configEnv.command === 'build') {
    config.base = '/feather-gb/'
  }

  return config
})

```